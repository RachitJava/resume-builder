var T_=Object.defineProperty;var y1=n=>{throw TypeError(n)};var R_=(n,e,t)=>e in n?T_(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var I=(n,e,t)=>R_(n,typeof e!="symbol"?e+"":e,t),Ty=(n,e,t)=>e.has(n)||y1("Cannot "+t);var o=(n,e,t)=>(Ty(n,e,"read from private field"),t?t.call(n):e.get(n)),k=(n,e,t)=>e.has(n)?y1("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),y=(n,e,t,s)=>(Ty(n,e,"write to private field"),s?s.call(n,t):e.set(n,t),t),E=(n,e,t)=>(Ty(n,e,"access private method"),t);var Et=(n,e,t,s)=>({set _(r){y(n,e,r,t)},get _(){return o(n,e,s)}});function L_(n,e){for(var t=0;t<e.length;t++){const s=e[t];if(typeof s!="string"&&!Array.isArray(s)){for(const r in s)if(r!=="default"&&!(r in n)){const i=Object.getOwnPropertyDescriptor(s,r);i&&Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:()=>s[r]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function t(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=t(r);fetch(r.href,i)}})();function GA(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var qA={exports:{}},X0={},XA={exports:{}},ge={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sm=Symbol.for("react.element"),D_=Symbol.for("react.portal"),M_=Symbol.for("react.fragment"),I_=Symbol.for("react.strict_mode"),F_=Symbol.for("react.profiler"),O_=Symbol.for("react.provider"),B_=Symbol.for("react.context"),U_=Symbol.for("react.forward_ref"),z_=Symbol.for("react.suspense"),$_=Symbol.for("react.memo"),H_=Symbol.for("react.lazy"),x1=Symbol.iterator;function V_(n){return n===null||typeof n!="object"?null:(n=x1&&n[x1]||n["@@iterator"],typeof n=="function"?n:null)}var KA={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},YA=Object.assign,QA={};function Vu(n,e,t){this.props=n,this.context=e,this.refs=QA,this.updater=t||KA}Vu.prototype.isReactComponent={};Vu.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};Vu.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function JA(){}JA.prototype=Vu.prototype;function Gb(n,e,t){this.props=n,this.context=e,this.refs=QA,this.updater=t||KA}var qb=Gb.prototype=new JA;qb.constructor=Gb;YA(qb,Vu.prototype);qb.isPureReactComponent=!0;var v1=Array.isArray,ZA=Object.prototype.hasOwnProperty,Xb={current:null},eS={key:!0,ref:!0,__self:!0,__source:!0};function tS(n,e,t){var s,r={},i=null,a=null;if(e!=null)for(s in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)ZA.call(e,s)&&!eS.hasOwnProperty(s)&&(r[s]=e[s]);var l=arguments.length-2;if(l===1)r.children=t;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];r.children=c}if(n&&n.defaultProps)for(s in l=n.defaultProps,l)r[s]===void 0&&(r[s]=l[s]);return{$$typeof:sm,type:n,key:i,ref:a,props:r,_owner:Xb.current}}function W_(n,e){return{$$typeof:sm,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function Kb(n){return typeof n=="object"&&n!==null&&n.$$typeof===sm}function G_(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var b1=/\/+/g;function Ry(n,e){return typeof n=="object"&&n!==null&&n.key!=null?G_(""+n.key):e.toString(36)}function Ym(n,e,t,s,r){var i=typeof n;(i==="undefined"||i==="boolean")&&(n=null);var a=!1;if(n===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(n.$$typeof){case sm:case D_:a=!0}}if(a)return a=n,r=r(a),n=s===""?"."+Ry(a,0):s,v1(r)?(t="",n!=null&&(t=n.replace(b1,"$&/")+"/"),Ym(r,e,t,"",function(d){return d})):r!=null&&(Kb(r)&&(r=W_(r,t+(!r.key||a&&a.key===r.key?"":(""+r.key).replace(b1,"$&/")+"/")+n)),e.push(r)),1;if(a=0,s=s===""?".":s+":",v1(n))for(var l=0;l<n.length;l++){i=n[l];var c=s+Ry(i,l);a+=Ym(i,e,t,c,r)}else if(c=V_(n),typeof c=="function")for(n=c.call(n),l=0;!(i=n.next()).done;)i=i.value,c=s+Ry(i,l++),a+=Ym(i,e,t,c,r);else if(i==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function bm(n,e,t){if(n==null)return n;var s=[],r=0;return Ym(n,s,"","",function(i){return e.call(t,i,r++)}),s}function q_(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var _n={current:null},Qm={transition:null},X_={ReactCurrentDispatcher:_n,ReactCurrentBatchConfig:Qm,ReactCurrentOwner:Xb};function nS(){throw Error("act(...) is not supported in production builds of React.")}ge.Children={map:bm,forEach:function(n,e,t){bm(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return bm(n,function(){e++}),e},toArray:function(n){return bm(n,function(e){return e})||[]},only:function(n){if(!Kb(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};ge.Component=Vu;ge.Fragment=M_;ge.Profiler=F_;ge.PureComponent=Gb;ge.StrictMode=I_;ge.Suspense=z_;ge.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=X_;ge.act=nS;ge.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var s=YA({},n.props),r=n.key,i=n.ref,a=n._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=Xb.current),e.key!==void 0&&(r=""+e.key),n.type&&n.type.defaultProps)var l=n.type.defaultProps;for(c in e)ZA.call(e,c)&&!eS.hasOwnProperty(c)&&(s[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)s.children=t;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];s.children=l}return{$$typeof:sm,type:n.type,key:r,ref:i,props:s,_owner:a}};ge.createContext=function(n){return n={$$typeof:B_,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:O_,_context:n},n.Consumer=n};ge.createElement=tS;ge.createFactory=function(n){var e=tS.bind(null,n);return e.type=n,e};ge.createRef=function(){return{current:null}};ge.forwardRef=function(n){return{$$typeof:U_,render:n}};ge.isValidElement=Kb;ge.lazy=function(n){return{$$typeof:H_,_payload:{_status:-1,_result:n},_init:q_}};ge.memo=function(n,e){return{$$typeof:$_,type:n,compare:e===void 0?null:e}};ge.startTransition=function(n){var e=Qm.transition;Qm.transition={};try{n()}finally{Qm.transition=e}};ge.unstable_act=nS;ge.useCallback=function(n,e){return _n.current.useCallback(n,e)};ge.useContext=function(n){return _n.current.useContext(n)};ge.useDebugValue=function(){};ge.useDeferredValue=function(n){return _n.current.useDeferredValue(n)};ge.useEffect=function(n,e){return _n.current.useEffect(n,e)};ge.useId=function(){return _n.current.useId()};ge.useImperativeHandle=function(n,e,t){return _n.current.useImperativeHandle(n,e,t)};ge.useInsertionEffect=function(n,e){return _n.current.useInsertionEffect(n,e)};ge.useLayoutEffect=function(n,e){return _n.current.useLayoutEffect(n,e)};ge.useMemo=function(n,e){return _n.current.useMemo(n,e)};ge.useReducer=function(n,e,t){return _n.current.useReducer(n,e,t)};ge.useRef=function(n){return _n.current.useRef(n)};ge.useState=function(n){return _n.current.useState(n)};ge.useSyncExternalStore=function(n,e,t){return _n.current.useSyncExternalStore(n,e,t)};ge.useTransition=function(){return _n.current.useTransition()};ge.version="18.3.1";XA.exports=ge;var j=XA.exports;const sS=GA(j),K_=L_({__proto__:null,default:sS},[j]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Y_=j,Q_=Symbol.for("react.element"),J_=Symbol.for("react.fragment"),Z_=Object.prototype.hasOwnProperty,ej=Y_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,tj={key:!0,ref:!0,__self:!0,__source:!0};function rS(n,e,t){var s,r={},i=null,a=null;t!==void 0&&(i=""+t),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(s in e)Z_.call(e,s)&&!tj.hasOwnProperty(s)&&(r[s]=e[s]);if(n&&n.defaultProps)for(s in e=n.defaultProps,e)r[s]===void 0&&(r[s]=e[s]);return{$$typeof:Q_,type:n,key:i,ref:a,props:r,_owner:ej.current}}X0.Fragment=J_;X0.jsx=rS;X0.jsxs=rS;qA.exports=X0;var u=qA.exports,vx={},iS={exports:{}},bs={},aS={exports:{}},oS={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(D,$){var V=D.length;D.push($);e:for(;0<V;){var J=V-1>>>1,W=D[J];if(0<r(W,$))D[J]=$,D[V]=W,V=J;else break e}}function t(D){return D.length===0?null:D[0]}function s(D){if(D.length===0)return null;var $=D[0],V=D.pop();if(V!==$){D[0]=V;e:for(var J=0,W=D.length,te=W>>>1;J<te;){var re=2*(J+1)-1,pe=D[re],Ee=re+1,fe=D[Ee];if(0>r(pe,V))Ee<W&&0>r(fe,pe)?(D[J]=fe,D[Ee]=V,J=Ee):(D[J]=pe,D[re]=V,J=re);else if(Ee<W&&0>r(fe,V))D[J]=fe,D[Ee]=V,J=Ee;else break e}}return $}function r(D,$){var V=D.sortIndex-$.sortIndex;return V!==0?V:D.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;n.unstable_now=function(){return i.now()}}else{var a=Date,l=a.now();n.unstable_now=function(){return a.now()-l}}var c=[],d=[],h=1,f=null,p=3,m=!1,v=!1,x=!1,A=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(D){for(var $=t(d);$!==null;){if($.callback===null)s(d);else if($.startTime<=D)s(d),$.sortIndex=$.expirationTime,e(c,$);else break;$=t(d)}}function S(D){if(x=!1,w(D),!v)if(t(c)!==null)v=!0,B(C);else{var $=t(d);$!==null&&z(S,$.startTime-D)}}function C(D,$){v=!1,x&&(x=!1,b(P),P=-1),m=!0;var V=p;try{for(w($),f=t(c);f!==null&&(!(f.expirationTime>$)||D&&!M());){var J=f.callback;if(typeof J=="function"){f.callback=null,p=f.priorityLevel;var W=J(f.expirationTime<=$);$=n.unstable_now(),typeof W=="function"?f.callback=W:f===t(c)&&s(c),w($)}else s(c);f=t(c)}if(f!==null)var te=!0;else{var re=t(d);re!==null&&z(S,re.startTime-$),te=!1}return te}finally{f=null,p=V,m=!1}}var N=!1,_=null,P=-1,L=5,R=-1;function M(){return!(n.unstable_now()-R<L)}function F(){if(_!==null){var D=n.unstable_now();R=D;var $=!0;try{$=_(!0,D)}finally{$?G():(N=!1,_=null)}}else N=!1}var G;if(typeof g=="function")G=function(){g(F)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,ee=U.port2;U.port1.onmessage=F,G=function(){ee.postMessage(null)}}else G=function(){A(F,0)};function B(D){_=D,N||(N=!0,G())}function z(D,$){P=A(function(){D(n.unstable_now())},$)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(D){D.callback=null},n.unstable_continueExecution=function(){v||m||(v=!0,B(C))},n.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<D?Math.floor(1e3/D):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(c)},n.unstable_next=function(D){switch(p){case 1:case 2:case 3:var $=3;break;default:$=p}var V=p;p=$;try{return D()}finally{p=V}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(D,$){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var V=p;p=D;try{return $()}finally{p=V}},n.unstable_scheduleCallback=function(D,$,V){var J=n.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?J+V:J):V=J,D){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=V+W,D={id:h++,callback:$,priorityLevel:D,startTime:V,expirationTime:W,sortIndex:-1},V>J?(D.sortIndex=V,e(d,D),t(c)===null&&D===t(d)&&(x?(b(P),P=-1):x=!0,z(S,V-J))):(D.sortIndex=W,e(c,D),v||m||(v=!0,B(C))),D},n.unstable_shouldYield=M,n.unstable_wrapCallback=function(D){var $=p;return function(){var V=p;p=$;try{return D.apply(this,arguments)}finally{p=V}}}})(oS);aS.exports=oS;var nj=aS.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sj=j,xs=nj;function O(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var lS=new Set,Kh={};function xc(n,e){Ru(n,e),Ru(n+"Capture",e)}function Ru(n,e){for(Kh[n]=e,n=0;n<e.length;n++)lS.add(e[n])}var Ji=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),bx=Object.prototype.hasOwnProperty,rj=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,w1={},k1={};function ij(n){return bx.call(k1,n)?!0:bx.call(w1,n)?!1:rj.test(n)?k1[n]=!0:(w1[n]=!0,!1)}function aj(n,e,t,s){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return s?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function oj(n,e,t,s){if(e===null||typeof e>"u"||aj(n,e,t,s))return!0;if(s)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function jn(n,e,t,s,r,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=s,this.attributeNamespace=r,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var tn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){tn[n]=new jn(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];tn[e]=new jn(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){tn[n]=new jn(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){tn[n]=new jn(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){tn[n]=new jn(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){tn[n]=new jn(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){tn[n]=new jn(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){tn[n]=new jn(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){tn[n]=new jn(n,5,!1,n.toLowerCase(),null,!1,!1)});var Yb=/[\-:]([a-z])/g;function Qb(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(Yb,Qb);tn[e]=new jn(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(Yb,Qb);tn[e]=new jn(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(Yb,Qb);tn[e]=new jn(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){tn[n]=new jn(n,1,!1,n.toLowerCase(),null,!1,!1)});tn.xlinkHref=new jn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){tn[n]=new jn(n,1,!1,n.toLowerCase(),null,!0,!0)});function Jb(n,e,t,s){var r=tn.hasOwnProperty(e)?tn[e]:null;(r!==null?r.type!==0:s||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(oj(e,t,r,s)&&(t=null),s||r===null?ij(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):r.mustUseProperty?n[r.propertyName]=t===null?r.type===3?!1:"":t:(e=r.attributeName,s=r.attributeNamespace,t===null?n.removeAttribute(e):(r=r.type,t=r===3||r===4&&t===!0?"":""+t,s?n.setAttributeNS(s,e,t):n.setAttribute(e,t))))}var aa=sj.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,wm=Symbol.for("react.element"),Dc=Symbol.for("react.portal"),Mc=Symbol.for("react.fragment"),Zb=Symbol.for("react.strict_mode"),wx=Symbol.for("react.profiler"),cS=Symbol.for("react.provider"),dS=Symbol.for("react.context"),ew=Symbol.for("react.forward_ref"),kx=Symbol.for("react.suspense"),Ax=Symbol.for("react.suspense_list"),tw=Symbol.for("react.memo"),ha=Symbol.for("react.lazy"),uS=Symbol.for("react.offscreen"),A1=Symbol.iterator;function eh(n){return n===null||typeof n!="object"?null:(n=A1&&n[A1]||n["@@iterator"],typeof n=="function"?n:null)}var at=Object.assign,Ly;function fh(n){if(Ly===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);Ly=e&&e[1]||""}return`
`+Ly+n}var Dy=!1;function My(n,e){if(!n||Dy)return"";Dy=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var s=d}Reflect.construct(n,[],e)}else{try{e.call()}catch(d){s=d}n.call(e.prototype)}else{try{throw Error()}catch(d){s=d}n()}}catch(d){if(d&&s&&typeof d.stack=="string"){for(var r=d.stack.split(`
`),i=s.stack.split(`
`),a=r.length-1,l=i.length-1;1<=a&&0<=l&&r[a]!==i[l];)l--;for(;1<=a&&0<=l;a--,l--)if(r[a]!==i[l]){if(a!==1||l!==1)do if(a--,l--,0>l||r[a]!==i[l]){var c=`
`+r[a].replace(" at new "," at ");return n.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",n.displayName)),c}while(1<=a&&0<=l);break}}}finally{Dy=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?fh(n):""}function lj(n){switch(n.tag){case 5:return fh(n.type);case 16:return fh("Lazy");case 13:return fh("Suspense");case 19:return fh("SuspenseList");case 0:case 2:case 15:return n=My(n.type,!1),n;case 11:return n=My(n.type.render,!1),n;case 1:return n=My(n.type,!0),n;default:return""}}function Sx(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Mc:return"Fragment";case Dc:return"Portal";case wx:return"Profiler";case Zb:return"StrictMode";case kx:return"Suspense";case Ax:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case dS:return(n.displayName||"Context")+".Consumer";case cS:return(n._context.displayName||"Context")+".Provider";case ew:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case tw:return e=n.displayName||null,e!==null?e:Sx(n.type)||"Memo";case ha:e=n._payload,n=n._init;try{return Sx(n(e))}catch{}}return null}function cj(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Sx(e);case 8:return e===Zb?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function So(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function hS(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function dj(n){var e=hS(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),s=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var r=t.get,i=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return r.call(this)},set:function(a){s=""+a,i.call(this,a)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return s},setValue:function(a){s=""+a},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function km(n){n._valueTracker||(n._valueTracker=dj(n))}function fS(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),s="";return n&&(s=hS(n)?n.checked?"true":"false":n.value),n=s,n!==t?(e.setValue(n),!0):!1}function Hg(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Ex(n,e){var t=e.checked;return at({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function S1(n,e){var t=e.defaultValue==null?"":e.defaultValue,s=e.checked!=null?e.checked:e.defaultChecked;t=So(e.value!=null?e.value:t),n._wrapperState={initialChecked:s,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function pS(n,e){e=e.checked,e!=null&&Jb(n,"checked",e,!1)}function Cx(n,e){pS(n,e);var t=So(e.value),s=e.type;if(t!=null)s==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(s==="submit"||s==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?Nx(n,e.type,t):e.hasOwnProperty("defaultValue")&&Nx(n,e.type,So(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function E1(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var s=e.type;if(!(s!=="submit"&&s!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function Nx(n,e,t){(e!=="number"||Hg(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var ph=Array.isArray;function Qc(n,e,t,s){if(n=n.options,e){e={};for(var r=0;r<t.length;r++)e["$"+t[r]]=!0;for(t=0;t<n.length;t++)r=e.hasOwnProperty("$"+n[t].value),n[t].selected!==r&&(n[t].selected=r),r&&s&&(n[t].defaultSelected=!0)}else{for(t=""+So(t),e=null,r=0;r<n.length;r++){if(n[r].value===t){n[r].selected=!0,s&&(n[r].defaultSelected=!0);return}e!==null||n[r].disabled||(e=n[r])}e!==null&&(e.selected=!0)}}function _x(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(O(91));return at({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function C1(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(O(92));if(ph(t)){if(1<t.length)throw Error(O(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:So(t)}}function mS(n,e){var t=So(e.value),s=So(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),s!=null&&(n.defaultValue=""+s)}function N1(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function gS(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function jx(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?gS(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Am,yS=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,s,r){MSApp.execUnsafeLocalFunction(function(){return n(e,t,s,r)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(Am=Am||document.createElement("div"),Am.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Am.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function Yh(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var Oh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},uj=["Webkit","ms","Moz","O"];Object.keys(Oh).forEach(function(n){uj.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),Oh[e]=Oh[n]})});function xS(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Oh.hasOwnProperty(n)&&Oh[n]?(""+e).trim():e+"px"}function vS(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var s=t.indexOf("--")===0,r=xS(t,e[t],s);t==="float"&&(t="cssFloat"),s?n.setProperty(t,r):n[t]=r}}var hj=at({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Px(n,e){if(e){if(hj[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(O(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(O(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(O(61))}if(e.style!=null&&typeof e.style!="object")throw Error(O(62))}}function Tx(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Rx=null;function nw(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Lx=null,Jc=null,Zc=null;function _1(n){if(n=am(n)){if(typeof Lx!="function")throw Error(O(280));var e=n.stateNode;e&&(e=Z0(e),Lx(n.stateNode,n.type,e))}}function bS(n){Jc?Zc?Zc.push(n):Zc=[n]:Jc=n}function wS(){if(Jc){var n=Jc,e=Zc;if(Zc=Jc=null,_1(n),e)for(n=0;n<e.length;n++)_1(e[n])}}function kS(n,e){return n(e)}function AS(){}var Iy=!1;function SS(n,e,t){if(Iy)return n(e,t);Iy=!0;try{return kS(n,e,t)}finally{Iy=!1,(Jc!==null||Zc!==null)&&(AS(),wS())}}function Qh(n,e){var t=n.stateNode;if(t===null)return null;var s=Z0(t);if(s===null)return null;t=s[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(n=n.type,s=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!s;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(O(231,e,typeof t));return t}var Dx=!1;if(Ji)try{var th={};Object.defineProperty(th,"passive",{get:function(){Dx=!0}}),window.addEventListener("test",th,th),window.removeEventListener("test",th,th)}catch{Dx=!1}function fj(n,e,t,s,r,i,a,l,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(t,d)}catch(h){this.onError(h)}}var Bh=!1,Vg=null,Wg=!1,Mx=null,pj={onError:function(n){Bh=!0,Vg=n}};function mj(n,e,t,s,r,i,a,l,c){Bh=!1,Vg=null,fj.apply(pj,arguments)}function gj(n,e,t,s,r,i,a,l,c){if(mj.apply(this,arguments),Bh){if(Bh){var d=Vg;Bh=!1,Vg=null}else throw Error(O(198));Wg||(Wg=!0,Mx=d)}}function vc(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function ES(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function j1(n){if(vc(n)!==n)throw Error(O(188))}function yj(n){var e=n.alternate;if(!e){if(e=vc(n),e===null)throw Error(O(188));return e!==n?null:n}for(var t=n,s=e;;){var r=t.return;if(r===null)break;var i=r.alternate;if(i===null){if(s=r.return,s!==null){t=s;continue}break}if(r.child===i.child){for(i=r.child;i;){if(i===t)return j1(r),n;if(i===s)return j1(r),e;i=i.sibling}throw Error(O(188))}if(t.return!==s.return)t=r,s=i;else{for(var a=!1,l=r.child;l;){if(l===t){a=!0,t=r,s=i;break}if(l===s){a=!0,s=r,t=i;break}l=l.sibling}if(!a){for(l=i.child;l;){if(l===t){a=!0,t=i,s=r;break}if(l===s){a=!0,s=i,t=r;break}l=l.sibling}if(!a)throw Error(O(189))}}if(t.alternate!==s)throw Error(O(190))}if(t.tag!==3)throw Error(O(188));return t.stateNode.current===t?n:e}function CS(n){return n=yj(n),n!==null?NS(n):null}function NS(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=NS(n);if(e!==null)return e;n=n.sibling}return null}var _S=xs.unstable_scheduleCallback,P1=xs.unstable_cancelCallback,xj=xs.unstable_shouldYield,vj=xs.unstable_requestPaint,yt=xs.unstable_now,bj=xs.unstable_getCurrentPriorityLevel,sw=xs.unstable_ImmediatePriority,jS=xs.unstable_UserBlockingPriority,Gg=xs.unstable_NormalPriority,wj=xs.unstable_LowPriority,PS=xs.unstable_IdlePriority,K0=null,ei=null;function kj(n){if(ei&&typeof ei.onCommitFiberRoot=="function")try{ei.onCommitFiberRoot(K0,n,void 0,(n.current.flags&128)===128)}catch{}}var mr=Math.clz32?Math.clz32:Ej,Aj=Math.log,Sj=Math.LN2;function Ej(n){return n>>>=0,n===0?32:31-(Aj(n)/Sj|0)|0}var Sm=64,Em=4194304;function mh(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function qg(n,e){var t=n.pendingLanes;if(t===0)return 0;var s=0,r=n.suspendedLanes,i=n.pingedLanes,a=t&268435455;if(a!==0){var l=a&~r;l!==0?s=mh(l):(i&=a,i!==0&&(s=mh(i)))}else a=t&~r,a!==0?s=mh(a):i!==0&&(s=mh(i));if(s===0)return 0;if(e!==0&&e!==s&&!(e&r)&&(r=s&-s,i=e&-e,r>=i||r===16&&(i&4194240)!==0))return e;if(s&4&&(s|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=s;0<e;)t=31-mr(e),r=1<<t,s|=n[t],e&=~r;return s}function Cj(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Nj(n,e){for(var t=n.suspendedLanes,s=n.pingedLanes,r=n.expirationTimes,i=n.pendingLanes;0<i;){var a=31-mr(i),l=1<<a,c=r[a];c===-1?(!(l&t)||l&s)&&(r[a]=Cj(l,e)):c<=e&&(n.expiredLanes|=l),i&=~l}}function Ix(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function TS(){var n=Sm;return Sm<<=1,!(Sm&4194240)&&(Sm=64),n}function Fy(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function rm(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-mr(e),n[e]=t}function _j(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var s=n.eventTimes;for(n=n.expirationTimes;0<t;){var r=31-mr(t),i=1<<r;e[r]=0,s[r]=-1,n[r]=-1,t&=~i}}function rw(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var s=31-mr(t),r=1<<s;r&e|n[s]&e&&(n[s]|=e),t&=~r}}var Pe=0;function RS(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var LS,iw,DS,MS,IS,Fx=!1,Cm=[],po=null,mo=null,go=null,Jh=new Map,Zh=new Map,pa=[],jj="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function T1(n,e){switch(n){case"focusin":case"focusout":po=null;break;case"dragenter":case"dragleave":mo=null;break;case"mouseover":case"mouseout":go=null;break;case"pointerover":case"pointerout":Jh.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zh.delete(e.pointerId)}}function nh(n,e,t,s,r,i){return n===null||n.nativeEvent!==i?(n={blockedOn:e,domEventName:t,eventSystemFlags:s,nativeEvent:i,targetContainers:[r]},e!==null&&(e=am(e),e!==null&&iw(e)),n):(n.eventSystemFlags|=s,e=n.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),n)}function Pj(n,e,t,s,r){switch(e){case"focusin":return po=nh(po,n,e,t,s,r),!0;case"dragenter":return mo=nh(mo,n,e,t,s,r),!0;case"mouseover":return go=nh(go,n,e,t,s,r),!0;case"pointerover":var i=r.pointerId;return Jh.set(i,nh(Jh.get(i)||null,n,e,t,s,r)),!0;case"gotpointercapture":return i=r.pointerId,Zh.set(i,nh(Zh.get(i)||null,n,e,t,s,r)),!0}return!1}function FS(n){var e=Wo(n.target);if(e!==null){var t=vc(e);if(t!==null){if(e=t.tag,e===13){if(e=ES(t),e!==null){n.blockedOn=e,IS(n.priority,function(){DS(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Jm(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=Ox(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var s=new t.constructor(t.type,t);Rx=s,t.target.dispatchEvent(s),Rx=null}else return e=am(t),e!==null&&iw(e),n.blockedOn=t,!1;e.shift()}return!0}function R1(n,e,t){Jm(n)&&t.delete(e)}function Tj(){Fx=!1,po!==null&&Jm(po)&&(po=null),mo!==null&&Jm(mo)&&(mo=null),go!==null&&Jm(go)&&(go=null),Jh.forEach(R1),Zh.forEach(R1)}function sh(n,e){n.blockedOn===e&&(n.blockedOn=null,Fx||(Fx=!0,xs.unstable_scheduleCallback(xs.unstable_NormalPriority,Tj)))}function ef(n){function e(r){return sh(r,n)}if(0<Cm.length){sh(Cm[0],n);for(var t=1;t<Cm.length;t++){var s=Cm[t];s.blockedOn===n&&(s.blockedOn=null)}}for(po!==null&&sh(po,n),mo!==null&&sh(mo,n),go!==null&&sh(go,n),Jh.forEach(e),Zh.forEach(e),t=0;t<pa.length;t++)s=pa[t],s.blockedOn===n&&(s.blockedOn=null);for(;0<pa.length&&(t=pa[0],t.blockedOn===null);)FS(t),t.blockedOn===null&&pa.shift()}var ed=aa.ReactCurrentBatchConfig,Xg=!0;function Rj(n,e,t,s){var r=Pe,i=ed.transition;ed.transition=null;try{Pe=1,aw(n,e,t,s)}finally{Pe=r,ed.transition=i}}function Lj(n,e,t,s){var r=Pe,i=ed.transition;ed.transition=null;try{Pe=4,aw(n,e,t,s)}finally{Pe=r,ed.transition=i}}function aw(n,e,t,s){if(Xg){var r=Ox(n,e,t,s);if(r===null)qy(n,e,s,Kg,t),T1(n,s);else if(Pj(r,n,e,t,s))s.stopPropagation();else if(T1(n,s),e&4&&-1<jj.indexOf(n)){for(;r!==null;){var i=am(r);if(i!==null&&LS(i),i=Ox(n,e,t,s),i===null&&qy(n,e,s,Kg,t),i===r)break;r=i}r!==null&&s.stopPropagation()}else qy(n,e,s,null,t)}}var Kg=null;function Ox(n,e,t,s){if(Kg=null,n=nw(s),n=Wo(n),n!==null)if(e=vc(n),e===null)n=null;else if(t=e.tag,t===13){if(n=ES(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return Kg=n,null}function OS(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(bj()){case sw:return 1;case jS:return 4;case Gg:case wj:return 16;case PS:return 536870912;default:return 16}default:return 16}}var uo=null,ow=null,Zm=null;function BS(){if(Zm)return Zm;var n,e=ow,t=e.length,s,r="value"in uo?uo.value:uo.textContent,i=r.length;for(n=0;n<t&&e[n]===r[n];n++);var a=t-n;for(s=1;s<=a&&e[t-s]===r[i-s];s++);return Zm=r.slice(n,1<s?1-s:void 0)}function eg(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function Nm(){return!0}function L1(){return!1}function ws(n){function e(t,s,r,i,a){this._reactName=t,this._targetInst=r,this.type=s,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var l in n)n.hasOwnProperty(l)&&(t=n[l],this[l]=t?t(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Nm:L1,this.isPropagationStopped=L1,this}return at(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=Nm)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=Nm)},persist:function(){},isPersistent:Nm}),e}var Wu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},lw=ws(Wu),im=at({},Wu,{view:0,detail:0}),Dj=ws(im),Oy,By,rh,Y0=at({},im,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:cw,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==rh&&(rh&&n.type==="mousemove"?(Oy=n.screenX-rh.screenX,By=n.screenY-rh.screenY):By=Oy=0,rh=n),Oy)},movementY:function(n){return"movementY"in n?n.movementY:By}}),D1=ws(Y0),Mj=at({},Y0,{dataTransfer:0}),Ij=ws(Mj),Fj=at({},im,{relatedTarget:0}),Uy=ws(Fj),Oj=at({},Wu,{animationName:0,elapsedTime:0,pseudoElement:0}),Bj=ws(Oj),Uj=at({},Wu,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),zj=ws(Uj),$j=at({},Wu,{data:0}),M1=ws($j),Hj={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Vj={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Wj={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Gj(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=Wj[n])?!!e[n]:!1}function cw(){return Gj}var qj=at({},im,{key:function(n){if(n.key){var e=Hj[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=eg(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Vj[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:cw,charCode:function(n){return n.type==="keypress"?eg(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?eg(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Xj=ws(qj),Kj=at({},Y0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),I1=ws(Kj),Yj=at({},im,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:cw}),Qj=ws(Yj),Jj=at({},Wu,{propertyName:0,elapsedTime:0,pseudoElement:0}),Zj=ws(Jj),eP=at({},Y0,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),tP=ws(eP),nP=[9,13,27,32],dw=Ji&&"CompositionEvent"in window,Uh=null;Ji&&"documentMode"in document&&(Uh=document.documentMode);var sP=Ji&&"TextEvent"in window&&!Uh,US=Ji&&(!dw||Uh&&8<Uh&&11>=Uh),F1=" ",O1=!1;function zS(n,e){switch(n){case"keyup":return nP.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $S(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Ic=!1;function rP(n,e){switch(n){case"compositionend":return $S(e);case"keypress":return e.which!==32?null:(O1=!0,F1);case"textInput":return n=e.data,n===F1&&O1?null:n;default:return null}}function iP(n,e){if(Ic)return n==="compositionend"||!dw&&zS(n,e)?(n=BS(),Zm=ow=uo=null,Ic=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return US&&e.locale!=="ko"?null:e.data;default:return null}}var aP={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function B1(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!aP[n.type]:e==="textarea"}function HS(n,e,t,s){bS(s),e=Yg(e,"onChange"),0<e.length&&(t=new lw("onChange","change",null,t,s),n.push({event:t,listeners:e}))}var zh=null,tf=null;function oP(n){eE(n,0)}function Q0(n){var e=Bc(n);if(fS(e))return n}function lP(n,e){if(n==="change")return e}var VS=!1;if(Ji){var zy;if(Ji){var $y="oninput"in document;if(!$y){var U1=document.createElement("div");U1.setAttribute("oninput","return;"),$y=typeof U1.oninput=="function"}zy=$y}else zy=!1;VS=zy&&(!document.documentMode||9<document.documentMode)}function z1(){zh&&(zh.detachEvent("onpropertychange",WS),tf=zh=null)}function WS(n){if(n.propertyName==="value"&&Q0(tf)){var e=[];HS(e,tf,n,nw(n)),SS(oP,e)}}function cP(n,e,t){n==="focusin"?(z1(),zh=e,tf=t,zh.attachEvent("onpropertychange",WS)):n==="focusout"&&z1()}function dP(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Q0(tf)}function uP(n,e){if(n==="click")return Q0(e)}function hP(n,e){if(n==="input"||n==="change")return Q0(e)}function fP(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var yr=typeof Object.is=="function"?Object.is:fP;function nf(n,e){if(yr(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),s=Object.keys(e);if(t.length!==s.length)return!1;for(s=0;s<t.length;s++){var r=t[s];if(!bx.call(e,r)||!yr(n[r],e[r]))return!1}return!0}function $1(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function H1(n,e){var t=$1(n);n=0;for(var s;t;){if(t.nodeType===3){if(s=n+t.textContent.length,n<=e&&s>=e)return{node:t,offset:e-n};n=s}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=$1(t)}}function GS(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?GS(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function qS(){for(var n=window,e=Hg();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=Hg(n.document)}return e}function uw(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function pP(n){var e=qS(),t=n.focusedElem,s=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&GS(t.ownerDocument.documentElement,t)){if(s!==null&&uw(t)){if(e=s.start,n=s.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var r=t.textContent.length,i=Math.min(s.start,r);s=s.end===void 0?i:Math.min(s.end,r),!n.extend&&i>s&&(r=s,s=i,i=r),r=H1(t,i);var a=H1(t,s);r&&a&&(n.rangeCount!==1||n.anchorNode!==r.node||n.anchorOffset!==r.offset||n.focusNode!==a.node||n.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),n.removeAllRanges(),i>s?(n.addRange(e),n.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var mP=Ji&&"documentMode"in document&&11>=document.documentMode,Fc=null,Bx=null,$h=null,Ux=!1;function V1(n,e,t){var s=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;Ux||Fc==null||Fc!==Hg(s)||(s=Fc,"selectionStart"in s&&uw(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),$h&&nf($h,s)||($h=s,s=Yg(Bx,"onSelect"),0<s.length&&(e=new lw("onSelect","select",null,e,t),n.push({event:e,listeners:s}),e.target=Fc)))}function _m(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var Oc={animationend:_m("Animation","AnimationEnd"),animationiteration:_m("Animation","AnimationIteration"),animationstart:_m("Animation","AnimationStart"),transitionend:_m("Transition","TransitionEnd")},Hy={},XS={};Ji&&(XS=document.createElement("div").style,"AnimationEvent"in window||(delete Oc.animationend.animation,delete Oc.animationiteration.animation,delete Oc.animationstart.animation),"TransitionEvent"in window||delete Oc.transitionend.transition);function J0(n){if(Hy[n])return Hy[n];if(!Oc[n])return n;var e=Oc[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in XS)return Hy[n]=e[t];return n}var KS=J0("animationend"),YS=J0("animationiteration"),QS=J0("animationstart"),JS=J0("transitionend"),ZS=new Map,W1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Po(n,e){ZS.set(n,e),xc(e,[n])}for(var Vy=0;Vy<W1.length;Vy++){var Wy=W1[Vy],gP=Wy.toLowerCase(),yP=Wy[0].toUpperCase()+Wy.slice(1);Po(gP,"on"+yP)}Po(KS,"onAnimationEnd");Po(YS,"onAnimationIteration");Po(QS,"onAnimationStart");Po("dblclick","onDoubleClick");Po("focusin","onFocus");Po("focusout","onBlur");Po(JS,"onTransitionEnd");Ru("onMouseEnter",["mouseout","mouseover"]);Ru("onMouseLeave",["mouseout","mouseover"]);Ru("onPointerEnter",["pointerout","pointerover"]);Ru("onPointerLeave",["pointerout","pointerover"]);xc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));xc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));xc("onBeforeInput",["compositionend","keypress","textInput","paste"]);xc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));xc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));xc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var gh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xP=new Set("cancel close invalid load scroll toggle".split(" ").concat(gh));function G1(n,e,t){var s=n.type||"unknown-event";n.currentTarget=t,gj(s,e,void 0,n),n.currentTarget=null}function eE(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var s=n[t],r=s.event;s=s.listeners;e:{var i=void 0;if(e)for(var a=s.length-1;0<=a;a--){var l=s[a],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==i&&r.isPropagationStopped())break e;G1(r,l,d),i=c}else for(a=0;a<s.length;a++){if(l=s[a],c=l.instance,d=l.currentTarget,l=l.listener,c!==i&&r.isPropagationStopped())break e;G1(r,l,d),i=c}}}if(Wg)throw n=Mx,Wg=!1,Mx=null,n}function Ge(n,e){var t=e[Wx];t===void 0&&(t=e[Wx]=new Set);var s=n+"__bubble";t.has(s)||(tE(e,n,2,!1),t.add(s))}function Gy(n,e,t){var s=0;e&&(s|=4),tE(t,n,s,e)}var jm="_reactListening"+Math.random().toString(36).slice(2);function sf(n){if(!n[jm]){n[jm]=!0,lS.forEach(function(t){t!=="selectionchange"&&(xP.has(t)||Gy(t,!1,n),Gy(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[jm]||(e[jm]=!0,Gy("selectionchange",!1,e))}}function tE(n,e,t,s){switch(OS(e)){case 1:var r=Rj;break;case 4:r=Lj;break;default:r=aw}t=r.bind(null,e,t,n),r=void 0,!Dx||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),s?r!==void 0?n.addEventListener(e,t,{capture:!0,passive:r}):n.addEventListener(e,t,!0):r!==void 0?n.addEventListener(e,t,{passive:r}):n.addEventListener(e,t,!1)}function qy(n,e,t,s,r){var i=s;if(!(e&1)&&!(e&2)&&s!==null)e:for(;;){if(s===null)return;var a=s.tag;if(a===3||a===4){var l=s.stateNode.containerInfo;if(l===r||l.nodeType===8&&l.parentNode===r)break;if(a===4)for(a=s.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===r||c.nodeType===8&&c.parentNode===r))return;a=a.return}for(;l!==null;){if(a=Wo(l),a===null)return;if(c=a.tag,c===5||c===6){s=i=a;continue e}l=l.parentNode}}s=s.return}SS(function(){var d=i,h=nw(t),f=[];e:{var p=ZS.get(n);if(p!==void 0){var m=lw,v=n;switch(n){case"keypress":if(eg(t)===0)break e;case"keydown":case"keyup":m=Xj;break;case"focusin":v="focus",m=Uy;break;case"focusout":v="blur",m=Uy;break;case"beforeblur":case"afterblur":m=Uy;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=D1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=Ij;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=Qj;break;case KS:case YS:case QS:m=Bj;break;case JS:m=Zj;break;case"scroll":m=Dj;break;case"wheel":m=tP;break;case"copy":case"cut":case"paste":m=zj;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=I1}var x=(e&4)!==0,A=!x&&n==="scroll",b=x?p!==null?p+"Capture":null:p;x=[];for(var g=d,w;g!==null;){w=g;var S=w.stateNode;if(w.tag===5&&S!==null&&(w=S,b!==null&&(S=Qh(g,b),S!=null&&x.push(rf(g,S,w)))),A)break;g=g.return}0<x.length&&(p=new m(p,v,null,t,h),f.push({event:p,listeners:x}))}}if(!(e&7)){e:{if(p=n==="mouseover"||n==="pointerover",m=n==="mouseout"||n==="pointerout",p&&t!==Rx&&(v=t.relatedTarget||t.fromElement)&&(Wo(v)||v[Zi]))break e;if((m||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,m?(v=t.relatedTarget||t.toElement,m=d,v=v?Wo(v):null,v!==null&&(A=vc(v),v!==A||v.tag!==5&&v.tag!==6)&&(v=null)):(m=null,v=d),m!==v)){if(x=D1,S="onMouseLeave",b="onMouseEnter",g="mouse",(n==="pointerout"||n==="pointerover")&&(x=I1,S="onPointerLeave",b="onPointerEnter",g="pointer"),A=m==null?p:Bc(m),w=v==null?p:Bc(v),p=new x(S,g+"leave",m,t,h),p.target=A,p.relatedTarget=w,S=null,Wo(h)===d&&(x=new x(b,g+"enter",v,t,h),x.target=w,x.relatedTarget=A,S=x),A=S,m&&v)t:{for(x=m,b=v,g=0,w=x;w;w=Ac(w))g++;for(w=0,S=b;S;S=Ac(S))w++;for(;0<g-w;)x=Ac(x),g--;for(;0<w-g;)b=Ac(b),w--;for(;g--;){if(x===b||b!==null&&x===b.alternate)break t;x=Ac(x),b=Ac(b)}x=null}else x=null;m!==null&&q1(f,p,m,x,!1),v!==null&&A!==null&&q1(f,A,v,x,!0)}}e:{if(p=d?Bc(d):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var C=lP;else if(B1(p))if(VS)C=hP;else{C=dP;var N=cP}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(C=uP);if(C&&(C=C(n,d))){HS(f,C,t,h);break e}N&&N(n,p,d),n==="focusout"&&(N=p._wrapperState)&&N.controlled&&p.type==="number"&&Nx(p,"number",p.value)}switch(N=d?Bc(d):window,n){case"focusin":(B1(N)||N.contentEditable==="true")&&(Fc=N,Bx=d,$h=null);break;case"focusout":$h=Bx=Fc=null;break;case"mousedown":Ux=!0;break;case"contextmenu":case"mouseup":case"dragend":Ux=!1,V1(f,t,h);break;case"selectionchange":if(mP)break;case"keydown":case"keyup":V1(f,t,h)}var _;if(dw)e:{switch(n){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else Ic?zS(n,t)&&(P="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(P="onCompositionStart");P&&(US&&t.locale!=="ko"&&(Ic||P!=="onCompositionStart"?P==="onCompositionEnd"&&Ic&&(_=BS()):(uo=h,ow="value"in uo?uo.value:uo.textContent,Ic=!0)),N=Yg(d,P),0<N.length&&(P=new M1(P,n,null,t,h),f.push({event:P,listeners:N}),_?P.data=_:(_=$S(t),_!==null&&(P.data=_)))),(_=sP?rP(n,t):iP(n,t))&&(d=Yg(d,"onBeforeInput"),0<d.length&&(h=new M1("onBeforeInput","beforeinput",null,t,h),f.push({event:h,listeners:d}),h.data=_))}eE(f,e)})}function rf(n,e,t){return{instance:n,listener:e,currentTarget:t}}function Yg(n,e){for(var t=e+"Capture",s=[];n!==null;){var r=n,i=r.stateNode;r.tag===5&&i!==null&&(r=i,i=Qh(n,t),i!=null&&s.unshift(rf(n,i,r)),i=Qh(n,e),i!=null&&s.push(rf(n,i,r))),n=n.return}return s}function Ac(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function q1(n,e,t,s,r){for(var i=e._reactName,a=[];t!==null&&t!==s;){var l=t,c=l.alternate,d=l.stateNode;if(c!==null&&c===s)break;l.tag===5&&d!==null&&(l=d,r?(c=Qh(t,i),c!=null&&a.unshift(rf(t,c,l))):r||(c=Qh(t,i),c!=null&&a.push(rf(t,c,l)))),t=t.return}a.length!==0&&n.push({event:e,listeners:a})}var vP=/\r\n?/g,bP=/\u0000|\uFFFD/g;function X1(n){return(typeof n=="string"?n:""+n).replace(vP,`
`).replace(bP,"")}function Pm(n,e,t){if(e=X1(e),X1(n)!==e&&t)throw Error(O(425))}function Qg(){}var zx=null,$x=null;function Hx(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Vx=typeof setTimeout=="function"?setTimeout:void 0,wP=typeof clearTimeout=="function"?clearTimeout:void 0,K1=typeof Promise=="function"?Promise:void 0,kP=typeof queueMicrotask=="function"?queueMicrotask:typeof K1<"u"?function(n){return K1.resolve(null).then(n).catch(AP)}:Vx;function AP(n){setTimeout(function(){throw n})}function Xy(n,e){var t=e,s=0;do{var r=t.nextSibling;if(n.removeChild(t),r&&r.nodeType===8)if(t=r.data,t==="/$"){if(s===0){n.removeChild(r),ef(e);return}s--}else t!=="$"&&t!=="$?"&&t!=="$!"||s++;t=r}while(t);ef(e)}function yo(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function Y1(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var Gu=Math.random().toString(36).slice(2),Qr="__reactFiber$"+Gu,af="__reactProps$"+Gu,Zi="__reactContainer$"+Gu,Wx="__reactEvents$"+Gu,SP="__reactListeners$"+Gu,EP="__reactHandles$"+Gu;function Wo(n){var e=n[Qr];if(e)return e;for(var t=n.parentNode;t;){if(e=t[Zi]||t[Qr]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=Y1(n);n!==null;){if(t=n[Qr])return t;n=Y1(n)}return e}n=t,t=n.parentNode}return null}function am(n){return n=n[Qr]||n[Zi],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Bc(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(O(33))}function Z0(n){return n[af]||null}var Gx=[],Uc=-1;function To(n){return{current:n}}function Xe(n){0>Uc||(n.current=Gx[Uc],Gx[Uc]=null,Uc--)}function Ve(n,e){Uc++,Gx[Uc]=n.current,n.current=e}var Eo={},yn=To(Eo),$n=To(!1),dc=Eo;function Lu(n,e){var t=n.type.contextTypes;if(!t)return Eo;var s=n.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===e)return s.__reactInternalMemoizedMaskedChildContext;var r={},i;for(i in t)r[i]=e[i];return s&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=r),r}function Hn(n){return n=n.childContextTypes,n!=null}function Jg(){Xe($n),Xe(yn)}function Q1(n,e,t){if(yn.current!==Eo)throw Error(O(168));Ve(yn,e),Ve($n,t)}function nE(n,e,t){var s=n.stateNode;if(e=e.childContextTypes,typeof s.getChildContext!="function")return t;s=s.getChildContext();for(var r in s)if(!(r in e))throw Error(O(108,cj(n)||"Unknown",r));return at({},t,s)}function Zg(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Eo,dc=yn.current,Ve(yn,n),Ve($n,$n.current),!0}function J1(n,e,t){var s=n.stateNode;if(!s)throw Error(O(169));t?(n=nE(n,e,dc),s.__reactInternalMemoizedMergedChildContext=n,Xe($n),Xe(yn),Ve(yn,n)):Xe($n),Ve($n,t)}var ui=null,ey=!1,Ky=!1;function sE(n){ui===null?ui=[n]:ui.push(n)}function CP(n){ey=!0,sE(n)}function Ro(){if(!Ky&&ui!==null){Ky=!0;var n=0,e=Pe;try{var t=ui;for(Pe=1;n<t.length;n++){var s=t[n];do s=s(!0);while(s!==null)}ui=null,ey=!1}catch(r){throw ui!==null&&(ui=ui.slice(n+1)),_S(sw,Ro),r}finally{Pe=e,Ky=!1}}return null}var zc=[],$c=0,e0=null,t0=0,Fs=[],Os=0,uc=null,qi=1,Xi="";function Fo(n,e){zc[$c++]=t0,zc[$c++]=e0,e0=n,t0=e}function rE(n,e,t){Fs[Os++]=qi,Fs[Os++]=Xi,Fs[Os++]=uc,uc=n;var s=qi;n=Xi;var r=32-mr(s)-1;s&=~(1<<r),t+=1;var i=32-mr(e)+r;if(30<i){var a=r-r%5;i=(s&(1<<a)-1).toString(32),s>>=a,r-=a,qi=1<<32-mr(e)+r|t<<r|s,Xi=i+n}else qi=1<<i|t<<r|s,Xi=n}function hw(n){n.return!==null&&(Fo(n,1),rE(n,1,0))}function fw(n){for(;n===e0;)e0=zc[--$c],zc[$c]=null,t0=zc[--$c],zc[$c]=null;for(;n===uc;)uc=Fs[--Os],Fs[Os]=null,Xi=Fs[--Os],Fs[Os]=null,qi=Fs[--Os],Fs[Os]=null}var gs=null,ms=null,Je=!1,fr=null;function iE(n,e){var t=zs(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function Z1(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,gs=n,ms=yo(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,gs=n,ms=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=uc!==null?{id:qi,overflow:Xi}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=zs(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,gs=n,ms=null,!0):!1;default:return!1}}function qx(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Xx(n){if(Je){var e=ms;if(e){var t=e;if(!Z1(n,e)){if(qx(n))throw Error(O(418));e=yo(t.nextSibling);var s=gs;e&&Z1(n,e)?iE(s,t):(n.flags=n.flags&-4097|2,Je=!1,gs=n)}}else{if(qx(n))throw Error(O(418));n.flags=n.flags&-4097|2,Je=!1,gs=n}}}function ek(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;gs=n}function Tm(n){if(n!==gs)return!1;if(!Je)return ek(n),Je=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!Hx(n.type,n.memoizedProps)),e&&(e=ms)){if(qx(n))throw aE(),Error(O(418));for(;e;)iE(n,e),e=yo(e.nextSibling)}if(ek(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(O(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){ms=yo(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}ms=null}}else ms=gs?yo(n.stateNode.nextSibling):null;return!0}function aE(){for(var n=ms;n;)n=yo(n.nextSibling)}function Du(){ms=gs=null,Je=!1}function pw(n){fr===null?fr=[n]:fr.push(n)}var NP=aa.ReactCurrentBatchConfig;function ih(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(O(309));var s=t.stateNode}if(!s)throw Error(O(147,n));var r=s,i=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var l=r.refs;a===null?delete l[i]:l[i]=a},e._stringRef=i,e)}if(typeof n!="string")throw Error(O(284));if(!t._owner)throw Error(O(290,n))}return n}function Rm(n,e){throw n=Object.prototype.toString.call(e),Error(O(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function tk(n){var e=n._init;return e(n._payload)}function oE(n){function e(b,g){if(n){var w=b.deletions;w===null?(b.deletions=[g],b.flags|=16):w.push(g)}}function t(b,g){if(!n)return null;for(;g!==null;)e(b,g),g=g.sibling;return null}function s(b,g){for(b=new Map;g!==null;)g.key!==null?b.set(g.key,g):b.set(g.index,g),g=g.sibling;return b}function r(b,g){return b=wo(b,g),b.index=0,b.sibling=null,b}function i(b,g,w){return b.index=w,n?(w=b.alternate,w!==null?(w=w.index,w<g?(b.flags|=2,g):w):(b.flags|=2,g)):(b.flags|=1048576,g)}function a(b){return n&&b.alternate===null&&(b.flags|=2),b}function l(b,g,w,S){return g===null||g.tag!==6?(g=nx(w,b.mode,S),g.return=b,g):(g=r(g,w),g.return=b,g)}function c(b,g,w,S){var C=w.type;return C===Mc?h(b,g,w.props.children,S,w.key):g!==null&&(g.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===ha&&tk(C)===g.type)?(S=r(g,w.props),S.ref=ih(b,g,w),S.return=b,S):(S=og(w.type,w.key,w.props,null,b.mode,S),S.ref=ih(b,g,w),S.return=b,S)}function d(b,g,w,S){return g===null||g.tag!==4||g.stateNode.containerInfo!==w.containerInfo||g.stateNode.implementation!==w.implementation?(g=sx(w,b.mode,S),g.return=b,g):(g=r(g,w.children||[]),g.return=b,g)}function h(b,g,w,S,C){return g===null||g.tag!==7?(g=lc(w,b.mode,S,C),g.return=b,g):(g=r(g,w),g.return=b,g)}function f(b,g,w){if(typeof g=="string"&&g!==""||typeof g=="number")return g=nx(""+g,b.mode,w),g.return=b,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case wm:return w=og(g.type,g.key,g.props,null,b.mode,w),w.ref=ih(b,null,g),w.return=b,w;case Dc:return g=sx(g,b.mode,w),g.return=b,g;case ha:var S=g._init;return f(b,S(g._payload),w)}if(ph(g)||eh(g))return g=lc(g,b.mode,w,null),g.return=b,g;Rm(b,g)}return null}function p(b,g,w,S){var C=g!==null?g.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return C!==null?null:l(b,g,""+w,S);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case wm:return w.key===C?c(b,g,w,S):null;case Dc:return w.key===C?d(b,g,w,S):null;case ha:return C=w._init,p(b,g,C(w._payload),S)}if(ph(w)||eh(w))return C!==null?null:h(b,g,w,S,null);Rm(b,w)}return null}function m(b,g,w,S,C){if(typeof S=="string"&&S!==""||typeof S=="number")return b=b.get(w)||null,l(g,b,""+S,C);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case wm:return b=b.get(S.key===null?w:S.key)||null,c(g,b,S,C);case Dc:return b=b.get(S.key===null?w:S.key)||null,d(g,b,S,C);case ha:var N=S._init;return m(b,g,w,N(S._payload),C)}if(ph(S)||eh(S))return b=b.get(w)||null,h(g,b,S,C,null);Rm(g,S)}return null}function v(b,g,w,S){for(var C=null,N=null,_=g,P=g=0,L=null;_!==null&&P<w.length;P++){_.index>P?(L=_,_=null):L=_.sibling;var R=p(b,_,w[P],S);if(R===null){_===null&&(_=L);break}n&&_&&R.alternate===null&&e(b,_),g=i(R,g,P),N===null?C=R:N.sibling=R,N=R,_=L}if(P===w.length)return t(b,_),Je&&Fo(b,P),C;if(_===null){for(;P<w.length;P++)_=f(b,w[P],S),_!==null&&(g=i(_,g,P),N===null?C=_:N.sibling=_,N=_);return Je&&Fo(b,P),C}for(_=s(b,_);P<w.length;P++)L=m(_,b,P,w[P],S),L!==null&&(n&&L.alternate!==null&&_.delete(L.key===null?P:L.key),g=i(L,g,P),N===null?C=L:N.sibling=L,N=L);return n&&_.forEach(function(M){return e(b,M)}),Je&&Fo(b,P),C}function x(b,g,w,S){var C=eh(w);if(typeof C!="function")throw Error(O(150));if(w=C.call(w),w==null)throw Error(O(151));for(var N=C=null,_=g,P=g=0,L=null,R=w.next();_!==null&&!R.done;P++,R=w.next()){_.index>P?(L=_,_=null):L=_.sibling;var M=p(b,_,R.value,S);if(M===null){_===null&&(_=L);break}n&&_&&M.alternate===null&&e(b,_),g=i(M,g,P),N===null?C=M:N.sibling=M,N=M,_=L}if(R.done)return t(b,_),Je&&Fo(b,P),C;if(_===null){for(;!R.done;P++,R=w.next())R=f(b,R.value,S),R!==null&&(g=i(R,g,P),N===null?C=R:N.sibling=R,N=R);return Je&&Fo(b,P),C}for(_=s(b,_);!R.done;P++,R=w.next())R=m(_,b,P,R.value,S),R!==null&&(n&&R.alternate!==null&&_.delete(R.key===null?P:R.key),g=i(R,g,P),N===null?C=R:N.sibling=R,N=R);return n&&_.forEach(function(F){return e(b,F)}),Je&&Fo(b,P),C}function A(b,g,w,S){if(typeof w=="object"&&w!==null&&w.type===Mc&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case wm:e:{for(var C=w.key,N=g;N!==null;){if(N.key===C){if(C=w.type,C===Mc){if(N.tag===7){t(b,N.sibling),g=r(N,w.props.children),g.return=b,b=g;break e}}else if(N.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===ha&&tk(C)===N.type){t(b,N.sibling),g=r(N,w.props),g.ref=ih(b,N,w),g.return=b,b=g;break e}t(b,N);break}else e(b,N);N=N.sibling}w.type===Mc?(g=lc(w.props.children,b.mode,S,w.key),g.return=b,b=g):(S=og(w.type,w.key,w.props,null,b.mode,S),S.ref=ih(b,g,w),S.return=b,b=S)}return a(b);case Dc:e:{for(N=w.key;g!==null;){if(g.key===N)if(g.tag===4&&g.stateNode.containerInfo===w.containerInfo&&g.stateNode.implementation===w.implementation){t(b,g.sibling),g=r(g,w.children||[]),g.return=b,b=g;break e}else{t(b,g);break}else e(b,g);g=g.sibling}g=sx(w,b.mode,S),g.return=b,b=g}return a(b);case ha:return N=w._init,A(b,g,N(w._payload),S)}if(ph(w))return v(b,g,w,S);if(eh(w))return x(b,g,w,S);Rm(b,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,g!==null&&g.tag===6?(t(b,g.sibling),g=r(g,w),g.return=b,b=g):(t(b,g),g=nx(w,b.mode,S),g.return=b,b=g),a(b)):t(b,g)}return A}var Mu=oE(!0),lE=oE(!1),n0=To(null),s0=null,Hc=null,mw=null;function gw(){mw=Hc=s0=null}function yw(n){var e=n0.current;Xe(n0),n._currentValue=e}function Kx(n,e,t){for(;n!==null;){var s=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,s!==null&&(s.childLanes|=e)):s!==null&&(s.childLanes&e)!==e&&(s.childLanes|=e),n===t)break;n=n.return}}function td(n,e){s0=n,mw=Hc=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(zn=!0),n.firstContext=null)}function Vs(n){var e=n._currentValue;if(mw!==n)if(n={context:n,memoizedValue:e,next:null},Hc===null){if(s0===null)throw Error(O(308));Hc=n,s0.dependencies={lanes:0,firstContext:n}}else Hc=Hc.next=n;return e}var Go=null;function xw(n){Go===null?Go=[n]:Go.push(n)}function cE(n,e,t,s){var r=e.interleaved;return r===null?(t.next=t,xw(e)):(t.next=r.next,r.next=t),e.interleaved=t,ea(n,s)}function ea(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var fa=!1;function vw(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function dE(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Ki(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function xo(n,e,t){var s=n.updateQueue;if(s===null)return null;if(s=s.shared,be&2){var r=s.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),s.pending=e,ea(n,t)}return r=s.interleaved,r===null?(e.next=e,xw(s)):(e.next=r.next,r.next=e),s.interleaved=e,ea(n,t)}function tg(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var s=e.lanes;s&=n.pendingLanes,t|=s,e.lanes=t,rw(n,t)}}function nk(n,e){var t=n.updateQueue,s=n.alternate;if(s!==null&&(s=s.updateQueue,t===s)){var r=null,i=null;if(t=t.firstBaseUpdate,t!==null){do{var a={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};i===null?r=i=a:i=i.next=a,t=t.next}while(t!==null);i===null?r=i=e:i=i.next=e}else r=i=e;t={baseState:s.baseState,firstBaseUpdate:r,lastBaseUpdate:i,shared:s.shared,effects:s.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function r0(n,e,t,s){var r=n.updateQueue;fa=!1;var i=r.firstBaseUpdate,a=r.lastBaseUpdate,l=r.shared.pending;if(l!==null){r.shared.pending=null;var c=l,d=c.next;c.next=null,a===null?i=d:a.next=d,a=c;var h=n.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==a&&(l===null?h.firstBaseUpdate=d:l.next=d,h.lastBaseUpdate=c))}if(i!==null){var f=r.baseState;a=0,h=d=c=null,l=i;do{var p=l.lane,m=l.eventTime;if((s&p)===p){h!==null&&(h=h.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var v=n,x=l;switch(p=e,m=t,x.tag){case 1:if(v=x.payload,typeof v=="function"){f=v.call(m,f,p);break e}f=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=x.payload,p=typeof v=="function"?v.call(m,f,p):v,p==null)break e;f=at({},f,p);break e;case 2:fa=!0}}l.callback!==null&&l.lane!==0&&(n.flags|=64,p=r.effects,p===null?r.effects=[l]:p.push(l))}else m={eventTime:m,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(d=h=m,c=f):h=h.next=m,a|=p;if(l=l.next,l===null){if(l=r.shared.pending,l===null)break;p=l,l=p.next,p.next=null,r.lastBaseUpdate=p,r.shared.pending=null}}while(!0);if(h===null&&(c=f),r.baseState=c,r.firstBaseUpdate=d,r.lastBaseUpdate=h,e=r.shared.interleaved,e!==null){r=e;do a|=r.lane,r=r.next;while(r!==e)}else i===null&&(r.shared.lanes=0);fc|=a,n.lanes=a,n.memoizedState=f}}function sk(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var s=n[e],r=s.callback;if(r!==null){if(s.callback=null,s=t,typeof r!="function")throw Error(O(191,r));r.call(s)}}}var om={},ti=To(om),of=To(om),lf=To(om);function qo(n){if(n===om)throw Error(O(174));return n}function bw(n,e){switch(Ve(lf,e),Ve(of,n),Ve(ti,om),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:jx(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=jx(e,n)}Xe(ti),Ve(ti,e)}function Iu(){Xe(ti),Xe(of),Xe(lf)}function uE(n){qo(lf.current);var e=qo(ti.current),t=jx(e,n.type);e!==t&&(Ve(of,n),Ve(ti,t))}function ww(n){of.current===n&&(Xe(ti),Xe(of))}var nt=To(0);function i0(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Yy=[];function kw(){for(var n=0;n<Yy.length;n++)Yy[n]._workInProgressVersionPrimary=null;Yy.length=0}var ng=aa.ReactCurrentDispatcher,Qy=aa.ReactCurrentBatchConfig,hc=0,rt=null,jt=null,Bt=null,a0=!1,Hh=!1,cf=0,_P=0;function sn(){throw Error(O(321))}function Aw(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!yr(n[t],e[t]))return!1;return!0}function Sw(n,e,t,s,r,i){if(hc=i,rt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ng.current=n===null||n.memoizedState===null?RP:LP,n=t(s,r),Hh){i=0;do{if(Hh=!1,cf=0,25<=i)throw Error(O(301));i+=1,Bt=jt=null,e.updateQueue=null,ng.current=DP,n=t(s,r)}while(Hh)}if(ng.current=o0,e=jt!==null&&jt.next!==null,hc=0,Bt=jt=rt=null,a0=!1,e)throw Error(O(300));return n}function Ew(){var n=cf!==0;return cf=0,n}function Nr(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Bt===null?rt.memoizedState=Bt=n:Bt=Bt.next=n,Bt}function Ws(){if(jt===null){var n=rt.alternate;n=n!==null?n.memoizedState:null}else n=jt.next;var e=Bt===null?rt.memoizedState:Bt.next;if(e!==null)Bt=e,jt=n;else{if(n===null)throw Error(O(310));jt=n,n={memoizedState:jt.memoizedState,baseState:jt.baseState,baseQueue:jt.baseQueue,queue:jt.queue,next:null},Bt===null?rt.memoizedState=Bt=n:Bt=Bt.next=n}return Bt}function df(n,e){return typeof e=="function"?e(n):e}function Jy(n){var e=Ws(),t=e.queue;if(t===null)throw Error(O(311));t.lastRenderedReducer=n;var s=jt,r=s.baseQueue,i=t.pending;if(i!==null){if(r!==null){var a=r.next;r.next=i.next,i.next=a}s.baseQueue=r=i,t.pending=null}if(r!==null){i=r.next,s=s.baseState;var l=a=null,c=null,d=i;do{var h=d.lane;if((hc&h)===h)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),s=d.hasEagerState?d.eagerState:n(s,d.action);else{var f={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=f,a=s):c=c.next=f,rt.lanes|=h,fc|=h}d=d.next}while(d!==null&&d!==i);c===null?a=s:c.next=l,yr(s,e.memoizedState)||(zn=!0),e.memoizedState=s,e.baseState=a,e.baseQueue=c,t.lastRenderedState=s}if(n=t.interleaved,n!==null){r=n;do i=r.lane,rt.lanes|=i,fc|=i,r=r.next;while(r!==n)}else r===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function Zy(n){var e=Ws(),t=e.queue;if(t===null)throw Error(O(311));t.lastRenderedReducer=n;var s=t.dispatch,r=t.pending,i=e.memoizedState;if(r!==null){t.pending=null;var a=r=r.next;do i=n(i,a.action),a=a.next;while(a!==r);yr(i,e.memoizedState)||(zn=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),t.lastRenderedState=i}return[i,s]}function hE(){}function fE(n,e){var t=rt,s=Ws(),r=e(),i=!yr(s.memoizedState,r);if(i&&(s.memoizedState=r,zn=!0),s=s.queue,Cw(gE.bind(null,t,s,n),[n]),s.getSnapshot!==e||i||Bt!==null&&Bt.memoizedState.tag&1){if(t.flags|=2048,uf(9,mE.bind(null,t,s,r,e),void 0,null),Ut===null)throw Error(O(349));hc&30||pE(t,e,r)}return r}function pE(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=rt.updateQueue,e===null?(e={lastEffect:null,stores:null},rt.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function mE(n,e,t,s){e.value=t,e.getSnapshot=s,yE(e)&&xE(n)}function gE(n,e,t){return t(function(){yE(e)&&xE(n)})}function yE(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!yr(n,t)}catch{return!0}}function xE(n){var e=ea(n,1);e!==null&&gr(e,n,1,-1)}function rk(n){var e=Nr();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:df,lastRenderedState:n},e.queue=n,n=n.dispatch=TP.bind(null,rt,n),[e.memoizedState,n]}function uf(n,e,t,s){return n={tag:n,create:e,destroy:t,deps:s,next:null},e=rt.updateQueue,e===null?(e={lastEffect:null,stores:null},rt.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(s=t.next,t.next=n,n.next=s,e.lastEffect=n)),n}function vE(){return Ws().memoizedState}function sg(n,e,t,s){var r=Nr();rt.flags|=n,r.memoizedState=uf(1|e,t,void 0,s===void 0?null:s)}function ty(n,e,t,s){var r=Ws();s=s===void 0?null:s;var i=void 0;if(jt!==null){var a=jt.memoizedState;if(i=a.destroy,s!==null&&Aw(s,a.deps)){r.memoizedState=uf(e,t,i,s);return}}rt.flags|=n,r.memoizedState=uf(1|e,t,i,s)}function ik(n,e){return sg(8390656,8,n,e)}function Cw(n,e){return ty(2048,8,n,e)}function bE(n,e){return ty(4,2,n,e)}function wE(n,e){return ty(4,4,n,e)}function kE(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function AE(n,e,t){return t=t!=null?t.concat([n]):null,ty(4,4,kE.bind(null,e,n),t)}function Nw(){}function SE(n,e){var t=Ws();e=e===void 0?null:e;var s=t.memoizedState;return s!==null&&e!==null&&Aw(e,s[1])?s[0]:(t.memoizedState=[n,e],n)}function EE(n,e){var t=Ws();e=e===void 0?null:e;var s=t.memoizedState;return s!==null&&e!==null&&Aw(e,s[1])?s[0]:(n=n(),t.memoizedState=[n,e],n)}function CE(n,e,t){return hc&21?(yr(t,e)||(t=TS(),rt.lanes|=t,fc|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,zn=!0),n.memoizedState=t)}function jP(n,e){var t=Pe;Pe=t!==0&&4>t?t:4,n(!0);var s=Qy.transition;Qy.transition={};try{n(!1),e()}finally{Pe=t,Qy.transition=s}}function NE(){return Ws().memoizedState}function PP(n,e,t){var s=bo(n);if(t={lane:s,action:t,hasEagerState:!1,eagerState:null,next:null},_E(n))jE(e,t);else if(t=cE(n,e,t,s),t!==null){var r=Cn();gr(t,n,s,r),PE(t,e,s)}}function TP(n,e,t){var s=bo(n),r={lane:s,action:t,hasEagerState:!1,eagerState:null,next:null};if(_E(n))jE(e,r);else{var i=n.alternate;if(n.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,l=i(a,t);if(r.hasEagerState=!0,r.eagerState=l,yr(l,a)){var c=e.interleaved;c===null?(r.next=r,xw(e)):(r.next=c.next,c.next=r),e.interleaved=r;return}}catch{}finally{}t=cE(n,e,r,s),t!==null&&(r=Cn(),gr(t,n,s,r),PE(t,e,s))}}function _E(n){var e=n.alternate;return n===rt||e!==null&&e===rt}function jE(n,e){Hh=a0=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function PE(n,e,t){if(t&4194240){var s=e.lanes;s&=n.pendingLanes,t|=s,e.lanes=t,rw(n,t)}}var o0={readContext:Vs,useCallback:sn,useContext:sn,useEffect:sn,useImperativeHandle:sn,useInsertionEffect:sn,useLayoutEffect:sn,useMemo:sn,useReducer:sn,useRef:sn,useState:sn,useDebugValue:sn,useDeferredValue:sn,useTransition:sn,useMutableSource:sn,useSyncExternalStore:sn,useId:sn,unstable_isNewReconciler:!1},RP={readContext:Vs,useCallback:function(n,e){return Nr().memoizedState=[n,e===void 0?null:e],n},useContext:Vs,useEffect:ik,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,sg(4194308,4,kE.bind(null,e,n),t)},useLayoutEffect:function(n,e){return sg(4194308,4,n,e)},useInsertionEffect:function(n,e){return sg(4,2,n,e)},useMemo:function(n,e){var t=Nr();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var s=Nr();return e=t!==void 0?t(e):e,s.memoizedState=s.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},s.queue=n,n=n.dispatch=PP.bind(null,rt,n),[s.memoizedState,n]},useRef:function(n){var e=Nr();return n={current:n},e.memoizedState=n},useState:rk,useDebugValue:Nw,useDeferredValue:function(n){return Nr().memoizedState=n},useTransition:function(){var n=rk(!1),e=n[0];return n=jP.bind(null,n[1]),Nr().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var s=rt,r=Nr();if(Je){if(t===void 0)throw Error(O(407));t=t()}else{if(t=e(),Ut===null)throw Error(O(349));hc&30||pE(s,e,t)}r.memoizedState=t;var i={value:t,getSnapshot:e};return r.queue=i,ik(gE.bind(null,s,i,n),[n]),s.flags|=2048,uf(9,mE.bind(null,s,i,t,e),void 0,null),t},useId:function(){var n=Nr(),e=Ut.identifierPrefix;if(Je){var t=Xi,s=qi;t=(s&~(1<<32-mr(s)-1)).toString(32)+t,e=":"+e+"R"+t,t=cf++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=_P++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},LP={readContext:Vs,useCallback:SE,useContext:Vs,useEffect:Cw,useImperativeHandle:AE,useInsertionEffect:bE,useLayoutEffect:wE,useMemo:EE,useReducer:Jy,useRef:vE,useState:function(){return Jy(df)},useDebugValue:Nw,useDeferredValue:function(n){var e=Ws();return CE(e,jt.memoizedState,n)},useTransition:function(){var n=Jy(df)[0],e=Ws().memoizedState;return[n,e]},useMutableSource:hE,useSyncExternalStore:fE,useId:NE,unstable_isNewReconciler:!1},DP={readContext:Vs,useCallback:SE,useContext:Vs,useEffect:Cw,useImperativeHandle:AE,useInsertionEffect:bE,useLayoutEffect:wE,useMemo:EE,useReducer:Zy,useRef:vE,useState:function(){return Zy(df)},useDebugValue:Nw,useDeferredValue:function(n){var e=Ws();return jt===null?e.memoizedState=n:CE(e,jt.memoizedState,n)},useTransition:function(){var n=Zy(df)[0],e=Ws().memoizedState;return[n,e]},useMutableSource:hE,useSyncExternalStore:fE,useId:NE,unstable_isNewReconciler:!1};function Zs(n,e){if(n&&n.defaultProps){e=at({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function Yx(n,e,t,s){e=n.memoizedState,t=t(s,e),t=t==null?e:at({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var ny={isMounted:function(n){return(n=n._reactInternals)?vc(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var s=Cn(),r=bo(n),i=Ki(s,r);i.payload=e,t!=null&&(i.callback=t),e=xo(n,i,r),e!==null&&(gr(e,n,r,s),tg(e,n,r))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var s=Cn(),r=bo(n),i=Ki(s,r);i.tag=1,i.payload=e,t!=null&&(i.callback=t),e=xo(n,i,r),e!==null&&(gr(e,n,r,s),tg(e,n,r))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=Cn(),s=bo(n),r=Ki(t,s);r.tag=2,e!=null&&(r.callback=e),e=xo(n,r,s),e!==null&&(gr(e,n,s,t),tg(e,n,s))}};function ak(n,e,t,s,r,i,a){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(s,i,a):e.prototype&&e.prototype.isPureReactComponent?!nf(t,s)||!nf(r,i):!0}function TE(n,e,t){var s=!1,r=Eo,i=e.contextType;return typeof i=="object"&&i!==null?i=Vs(i):(r=Hn(e)?dc:yn.current,s=e.contextTypes,i=(s=s!=null)?Lu(n,r):Eo),e=new e(t,i),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ny,n.stateNode=e,e._reactInternals=n,s&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=r,n.__reactInternalMemoizedMaskedChildContext=i),e}function ok(n,e,t,s){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,s),e.state!==n&&ny.enqueueReplaceState(e,e.state,null)}function Qx(n,e,t,s){var r=n.stateNode;r.props=t,r.state=n.memoizedState,r.refs={},vw(n);var i=e.contextType;typeof i=="object"&&i!==null?r.context=Vs(i):(i=Hn(e)?dc:yn.current,r.context=Lu(n,i)),r.state=n.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Yx(n,e,i,t),r.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&ny.enqueueReplaceState(r,r.state,null),r0(n,t,r,s),r.state=n.memoizedState),typeof r.componentDidMount=="function"&&(n.flags|=4194308)}function Fu(n,e){try{var t="",s=e;do t+=lj(s),s=s.return;while(s);var r=t}catch(i){r=`
Error generating stack: `+i.message+`
`+i.stack}return{value:n,source:e,stack:r,digest:null}}function ex(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function Jx(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var MP=typeof WeakMap=="function"?WeakMap:Map;function RE(n,e,t){t=Ki(-1,t),t.tag=3,t.payload={element:null};var s=e.value;return t.callback=function(){c0||(c0=!0,lv=s),Jx(n,e)},t}function LE(n,e,t){t=Ki(-1,t),t.tag=3;var s=n.type.getDerivedStateFromError;if(typeof s=="function"){var r=e.value;t.payload=function(){return s(r)},t.callback=function(){Jx(n,e)}}var i=n.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(t.callback=function(){Jx(n,e),typeof s!="function"&&(vo===null?vo=new Set([this]):vo.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),t}function lk(n,e,t){var s=n.pingCache;if(s===null){s=n.pingCache=new MP;var r=new Set;s.set(e,r)}else r=s.get(e),r===void 0&&(r=new Set,s.set(e,r));r.has(t)||(r.add(t),n=KP.bind(null,n,e,t),e.then(n,n))}function ck(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function dk(n,e,t,s,r){return n.mode&1?(n.flags|=65536,n.lanes=r,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=Ki(-1,1),e.tag=2,xo(t,e,1))),t.lanes|=1),n)}var IP=aa.ReactCurrentOwner,zn=!1;function Sn(n,e,t,s){e.child=n===null?lE(e,null,t,s):Mu(e,n.child,t,s)}function uk(n,e,t,s,r){t=t.render;var i=e.ref;return td(e,r),s=Sw(n,e,t,s,i,r),t=Ew(),n!==null&&!zn?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,ta(n,e,r)):(Je&&t&&hw(e),e.flags|=1,Sn(n,e,s,r),e.child)}function hk(n,e,t,s,r){if(n===null){var i=t.type;return typeof i=="function"&&!Mw(i)&&i.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=i,DE(n,e,i,s,r)):(n=og(t.type,null,s,e,e.mode,r),n.ref=e.ref,n.return=e,e.child=n)}if(i=n.child,!(n.lanes&r)){var a=i.memoizedProps;if(t=t.compare,t=t!==null?t:nf,t(a,s)&&n.ref===e.ref)return ta(n,e,r)}return e.flags|=1,n=wo(i,s),n.ref=e.ref,n.return=e,e.child=n}function DE(n,e,t,s,r){if(n!==null){var i=n.memoizedProps;if(nf(i,s)&&n.ref===e.ref)if(zn=!1,e.pendingProps=s=i,(n.lanes&r)!==0)n.flags&131072&&(zn=!0);else return e.lanes=n.lanes,ta(n,e,r)}return Zx(n,e,t,s,r)}function ME(n,e,t){var s=e.pendingProps,r=s.children,i=n!==null?n.memoizedState:null;if(s.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ve(Wc,hs),hs|=t;else{if(!(t&1073741824))return n=i!==null?i.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,Ve(Wc,hs),hs|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=i!==null?i.baseLanes:t,Ve(Wc,hs),hs|=s}else i!==null?(s=i.baseLanes|t,e.memoizedState=null):s=t,Ve(Wc,hs),hs|=s;return Sn(n,e,r,t),e.child}function IE(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function Zx(n,e,t,s,r){var i=Hn(t)?dc:yn.current;return i=Lu(e,i),td(e,r),t=Sw(n,e,t,s,i,r),s=Ew(),n!==null&&!zn?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,ta(n,e,r)):(Je&&s&&hw(e),e.flags|=1,Sn(n,e,t,r),e.child)}function fk(n,e,t,s,r){if(Hn(t)){var i=!0;Zg(e)}else i=!1;if(td(e,r),e.stateNode===null)rg(n,e),TE(e,t,s),Qx(e,t,s,r),s=!0;else if(n===null){var a=e.stateNode,l=e.memoizedProps;a.props=l;var c=a.context,d=t.contextType;typeof d=="object"&&d!==null?d=Vs(d):(d=Hn(t)?dc:yn.current,d=Lu(e,d));var h=t.getDerivedStateFromProps,f=typeof h=="function"||typeof a.getSnapshotBeforeUpdate=="function";f||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==s||c!==d)&&ok(e,a,s,d),fa=!1;var p=e.memoizedState;a.state=p,r0(e,s,a,r),c=e.memoizedState,l!==s||p!==c||$n.current||fa?(typeof h=="function"&&(Yx(e,t,h,s),c=e.memoizedState),(l=fa||ak(e,t,l,s,p,c,d))?(f||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=c),a.props=s,a.state=c,a.context=d,s=l):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),s=!1)}else{a=e.stateNode,dE(n,e),l=e.memoizedProps,d=e.type===e.elementType?l:Zs(e.type,l),a.props=d,f=e.pendingProps,p=a.context,c=t.contextType,typeof c=="object"&&c!==null?c=Vs(c):(c=Hn(t)?dc:yn.current,c=Lu(e,c));var m=t.getDerivedStateFromProps;(h=typeof m=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==f||p!==c)&&ok(e,a,s,c),fa=!1,p=e.memoizedState,a.state=p,r0(e,s,a,r);var v=e.memoizedState;l!==f||p!==v||$n.current||fa?(typeof m=="function"&&(Yx(e,t,m,s),v=e.memoizedState),(d=fa||ak(e,t,d,s,p,v,c)||!1)?(h||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(s,v,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(s,v,c)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=v),a.props=s,a.state=v,a.context=c,s=d):(typeof a.componentDidUpdate!="function"||l===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),s=!1)}return ev(n,e,t,s,i,r)}function ev(n,e,t,s,r,i){IE(n,e);var a=(e.flags&128)!==0;if(!s&&!a)return r&&J1(e,t,!1),ta(n,e,i);s=e.stateNode,IP.current=e;var l=a&&typeof t.getDerivedStateFromError!="function"?null:s.render();return e.flags|=1,n!==null&&a?(e.child=Mu(e,n.child,null,i),e.child=Mu(e,null,l,i)):Sn(n,e,l,i),e.memoizedState=s.state,r&&J1(e,t,!0),e.child}function FE(n){var e=n.stateNode;e.pendingContext?Q1(n,e.pendingContext,e.pendingContext!==e.context):e.context&&Q1(n,e.context,!1),bw(n,e.containerInfo)}function pk(n,e,t,s,r){return Du(),pw(r),e.flags|=256,Sn(n,e,t,s),e.child}var tv={dehydrated:null,treeContext:null,retryLane:0};function nv(n){return{baseLanes:n,cachePool:null,transitions:null}}function OE(n,e,t){var s=e.pendingProps,r=nt.current,i=!1,a=(e.flags&128)!==0,l;if((l=a)||(l=n!==null&&n.memoizedState===null?!1:(r&2)!==0),l?(i=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(r|=1),Ve(nt,r&1),n===null)return Xx(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=s.children,n=s.fallback,i?(s=e.mode,i=e.child,a={mode:"hidden",children:a},!(s&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=iy(a,s,0,null),n=lc(n,s,t,null),i.return=e,n.return=e,i.sibling=n,e.child=i,e.child.memoizedState=nv(t),e.memoizedState=tv,n):_w(e,a));if(r=n.memoizedState,r!==null&&(l=r.dehydrated,l!==null))return FP(n,e,a,s,l,r,t);if(i){i=s.fallback,a=e.mode,r=n.child,l=r.sibling;var c={mode:"hidden",children:s.children};return!(a&1)&&e.child!==r?(s=e.child,s.childLanes=0,s.pendingProps=c,e.deletions=null):(s=wo(r,c),s.subtreeFlags=r.subtreeFlags&14680064),l!==null?i=wo(l,i):(i=lc(i,a,t,null),i.flags|=2),i.return=e,s.return=e,s.sibling=i,e.child=s,s=i,i=e.child,a=n.child.memoizedState,a=a===null?nv(t):{baseLanes:a.baseLanes|t,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=n.childLanes&~t,e.memoizedState=tv,s}return i=n.child,n=i.sibling,s=wo(i,{mode:"visible",children:s.children}),!(e.mode&1)&&(s.lanes=t),s.return=e,s.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=s,e.memoizedState=null,s}function _w(n,e){return e=iy({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function Lm(n,e,t,s){return s!==null&&pw(s),Mu(e,n.child,null,t),n=_w(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function FP(n,e,t,s,r,i,a){if(t)return e.flags&256?(e.flags&=-257,s=ex(Error(O(422))),Lm(n,e,a,s)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(i=s.fallback,r=e.mode,s=iy({mode:"visible",children:s.children},r,0,null),i=lc(i,r,a,null),i.flags|=2,s.return=e,i.return=e,s.sibling=i,e.child=s,e.mode&1&&Mu(e,n.child,null,a),e.child.memoizedState=nv(a),e.memoizedState=tv,i);if(!(e.mode&1))return Lm(n,e,a,null);if(r.data==="$!"){if(s=r.nextSibling&&r.nextSibling.dataset,s)var l=s.dgst;return s=l,i=Error(O(419)),s=ex(i,s,void 0),Lm(n,e,a,s)}if(l=(a&n.childLanes)!==0,zn||l){if(s=Ut,s!==null){switch(a&-a){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(s.suspendedLanes|a)?0:r,r!==0&&r!==i.retryLane&&(i.retryLane=r,ea(n,r),gr(s,n,r,-1))}return Dw(),s=ex(Error(O(421))),Lm(n,e,a,s)}return r.data==="$?"?(e.flags|=128,e.child=n.child,e=YP.bind(null,n),r._reactRetry=e,null):(n=i.treeContext,ms=yo(r.nextSibling),gs=e,Je=!0,fr=null,n!==null&&(Fs[Os++]=qi,Fs[Os++]=Xi,Fs[Os++]=uc,qi=n.id,Xi=n.overflow,uc=e),e=_w(e,s.children),e.flags|=4096,e)}function mk(n,e,t){n.lanes|=e;var s=n.alternate;s!==null&&(s.lanes|=e),Kx(n.return,e,t)}function tx(n,e,t,s,r){var i=n.memoizedState;i===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:t,tailMode:r}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=s,i.tail=t,i.tailMode=r)}function BE(n,e,t){var s=e.pendingProps,r=s.revealOrder,i=s.tail;if(Sn(n,e,s.children,t),s=nt.current,s&2)s=s&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&mk(n,t,e);else if(n.tag===19)mk(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}s&=1}if(Ve(nt,s),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(t=e.child,r=null;t!==null;)n=t.alternate,n!==null&&i0(n)===null&&(r=t),t=t.sibling;t=r,t===null?(r=e.child,e.child=null):(r=t.sibling,t.sibling=null),tx(e,!1,r,t,i);break;case"backwards":for(t=null,r=e.child,e.child=null;r!==null;){if(n=r.alternate,n!==null&&i0(n)===null){e.child=r;break}n=r.sibling,r.sibling=t,t=r,r=n}tx(e,!0,t,null,i);break;case"together":tx(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function rg(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function ta(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),fc|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(O(153));if(e.child!==null){for(n=e.child,t=wo(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=wo(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function OP(n,e,t){switch(e.tag){case 3:FE(e),Du();break;case 5:uE(e);break;case 1:Hn(e.type)&&Zg(e);break;case 4:bw(e,e.stateNode.containerInfo);break;case 10:var s=e.type._context,r=e.memoizedProps.value;Ve(n0,s._currentValue),s._currentValue=r;break;case 13:if(s=e.memoizedState,s!==null)return s.dehydrated!==null?(Ve(nt,nt.current&1),e.flags|=128,null):t&e.child.childLanes?OE(n,e,t):(Ve(nt,nt.current&1),n=ta(n,e,t),n!==null?n.sibling:null);Ve(nt,nt.current&1);break;case 19:if(s=(t&e.childLanes)!==0,n.flags&128){if(s)return BE(n,e,t);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Ve(nt,nt.current),s)break;return null;case 22:case 23:return e.lanes=0,ME(n,e,t)}return ta(n,e,t)}var UE,sv,zE,$E;UE=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};sv=function(){};zE=function(n,e,t,s){var r=n.memoizedProps;if(r!==s){n=e.stateNode,qo(ti.current);var i=null;switch(t){case"input":r=Ex(n,r),s=Ex(n,s),i=[];break;case"select":r=at({},r,{value:void 0}),s=at({},s,{value:void 0}),i=[];break;case"textarea":r=_x(n,r),s=_x(n,s),i=[];break;default:typeof r.onClick!="function"&&typeof s.onClick=="function"&&(n.onclick=Qg)}Px(t,s);var a;t=null;for(d in r)if(!s.hasOwnProperty(d)&&r.hasOwnProperty(d)&&r[d]!=null)if(d==="style"){var l=r[d];for(a in l)l.hasOwnProperty(a)&&(t||(t={}),t[a]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Kh.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in s){var c=s[d];if(l=r!=null?r[d]:void 0,s.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(t||(t={}),t[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(t||(t={}),t[a]=c[a])}else t||(i||(i=[]),i.push(d,t)),t=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Kh.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Ge("scroll",n),i||l===c||(i=[])):(i=i||[]).push(d,c))}t&&(i=i||[]).push("style",t);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};$E=function(n,e,t,s){t!==s&&(e.flags|=4)};function ah(n,e){if(!Je)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var s=null;t!==null;)t.alternate!==null&&(s=t),t=t.sibling;s===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:s.sibling=null}}function rn(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,s=0;if(e)for(var r=n.child;r!==null;)t|=r.lanes|r.childLanes,s|=r.subtreeFlags&14680064,s|=r.flags&14680064,r.return=n,r=r.sibling;else for(r=n.child;r!==null;)t|=r.lanes|r.childLanes,s|=r.subtreeFlags,s|=r.flags,r.return=n,r=r.sibling;return n.subtreeFlags|=s,n.childLanes=t,e}function BP(n,e,t){var s=e.pendingProps;switch(fw(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return rn(e),null;case 1:return Hn(e.type)&&Jg(),rn(e),null;case 3:return s=e.stateNode,Iu(),Xe($n),Xe(yn),kw(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(n===null||n.child===null)&&(Tm(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,fr!==null&&(uv(fr),fr=null))),sv(n,e),rn(e),null;case 5:ww(e);var r=qo(lf.current);if(t=e.type,n!==null&&e.stateNode!=null)zE(n,e,t,s,r),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!s){if(e.stateNode===null)throw Error(O(166));return rn(e),null}if(n=qo(ti.current),Tm(e)){s=e.stateNode,t=e.type;var i=e.memoizedProps;switch(s[Qr]=e,s[af]=i,n=(e.mode&1)!==0,t){case"dialog":Ge("cancel",s),Ge("close",s);break;case"iframe":case"object":case"embed":Ge("load",s);break;case"video":case"audio":for(r=0;r<gh.length;r++)Ge(gh[r],s);break;case"source":Ge("error",s);break;case"img":case"image":case"link":Ge("error",s),Ge("load",s);break;case"details":Ge("toggle",s);break;case"input":S1(s,i),Ge("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!i.multiple},Ge("invalid",s);break;case"textarea":C1(s,i),Ge("invalid",s)}Px(t,i),r=null;for(var a in i)if(i.hasOwnProperty(a)){var l=i[a];a==="children"?typeof l=="string"?s.textContent!==l&&(i.suppressHydrationWarning!==!0&&Pm(s.textContent,l,n),r=["children",l]):typeof l=="number"&&s.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Pm(s.textContent,l,n),r=["children",""+l]):Kh.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&Ge("scroll",s)}switch(t){case"input":km(s),E1(s,i,!0);break;case"textarea":km(s),N1(s);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(s.onclick=Qg)}s=r,e.updateQueue=s,s!==null&&(e.flags|=4)}else{a=r.nodeType===9?r:r.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=gS(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=a.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof s.is=="string"?n=a.createElement(t,{is:s.is}):(n=a.createElement(t),t==="select"&&(a=n,s.multiple?a.multiple=!0:s.size&&(a.size=s.size))):n=a.createElementNS(n,t),n[Qr]=e,n[af]=s,UE(n,e,!1,!1),e.stateNode=n;e:{switch(a=Tx(t,s),t){case"dialog":Ge("cancel",n),Ge("close",n),r=s;break;case"iframe":case"object":case"embed":Ge("load",n),r=s;break;case"video":case"audio":for(r=0;r<gh.length;r++)Ge(gh[r],n);r=s;break;case"source":Ge("error",n),r=s;break;case"img":case"image":case"link":Ge("error",n),Ge("load",n),r=s;break;case"details":Ge("toggle",n),r=s;break;case"input":S1(n,s),r=Ex(n,s),Ge("invalid",n);break;case"option":r=s;break;case"select":n._wrapperState={wasMultiple:!!s.multiple},r=at({},s,{value:void 0}),Ge("invalid",n);break;case"textarea":C1(n,s),r=_x(n,s),Ge("invalid",n);break;default:r=s}Px(t,r),l=r;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?vS(n,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&yS(n,c)):i==="children"?typeof c=="string"?(t!=="textarea"||c!=="")&&Yh(n,c):typeof c=="number"&&Yh(n,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Kh.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Ge("scroll",n):c!=null&&Jb(n,i,c,a))}switch(t){case"input":km(n),E1(n,s,!1);break;case"textarea":km(n),N1(n);break;case"option":s.value!=null&&n.setAttribute("value",""+So(s.value));break;case"select":n.multiple=!!s.multiple,i=s.value,i!=null?Qc(n,!!s.multiple,i,!1):s.defaultValue!=null&&Qc(n,!!s.multiple,s.defaultValue,!0);break;default:typeof r.onClick=="function"&&(n.onclick=Qg)}switch(t){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return rn(e),null;case 6:if(n&&e.stateNode!=null)$E(n,e,n.memoizedProps,s);else{if(typeof s!="string"&&e.stateNode===null)throw Error(O(166));if(t=qo(lf.current),qo(ti.current),Tm(e)){if(s=e.stateNode,t=e.memoizedProps,s[Qr]=e,(i=s.nodeValue!==t)&&(n=gs,n!==null))switch(n.tag){case 3:Pm(s.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Pm(s.nodeValue,t,(n.mode&1)!==0)}i&&(e.flags|=4)}else s=(t.nodeType===9?t:t.ownerDocument).createTextNode(s),s[Qr]=e,e.stateNode=s}return rn(e),null;case 13:if(Xe(nt),s=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Je&&ms!==null&&e.mode&1&&!(e.flags&128))aE(),Du(),e.flags|=98560,i=!1;else if(i=Tm(e),s!==null&&s.dehydrated!==null){if(n===null){if(!i)throw Error(O(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(O(317));i[Qr]=e}else Du(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;rn(e),i=!1}else fr!==null&&(uv(fr),fr=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(s=s!==null,s!==(n!==null&&n.memoizedState!==null)&&s&&(e.child.flags|=8192,e.mode&1&&(n===null||nt.current&1?Pt===0&&(Pt=3):Dw())),e.updateQueue!==null&&(e.flags|=4),rn(e),null);case 4:return Iu(),sv(n,e),n===null&&sf(e.stateNode.containerInfo),rn(e),null;case 10:return yw(e.type._context),rn(e),null;case 17:return Hn(e.type)&&Jg(),rn(e),null;case 19:if(Xe(nt),i=e.memoizedState,i===null)return rn(e),null;if(s=(e.flags&128)!==0,a=i.rendering,a===null)if(s)ah(i,!1);else{if(Pt!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(a=i0(n),a!==null){for(e.flags|=128,ah(i,!1),s=a.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),e.subtreeFlags=0,s=t,t=e.child;t!==null;)i=t,n=s,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=n,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,n=a.dependencies,i.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return Ve(nt,nt.current&1|2),e.child}n=n.sibling}i.tail!==null&&yt()>Ou&&(e.flags|=128,s=!0,ah(i,!1),e.lanes=4194304)}else{if(!s)if(n=i0(a),n!==null){if(e.flags|=128,s=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),ah(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!Je)return rn(e),null}else 2*yt()-i.renderingStartTime>Ou&&t!==1073741824&&(e.flags|=128,s=!0,ah(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(t=i.last,t!==null?t.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=yt(),e.sibling=null,t=nt.current,Ve(nt,s?t&1|2:t&1),e):(rn(e),null);case 22:case 23:return Lw(),s=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==s&&(e.flags|=8192),s&&e.mode&1?hs&1073741824&&(rn(e),e.subtreeFlags&6&&(e.flags|=8192)):rn(e),null;case 24:return null;case 25:return null}throw Error(O(156,e.tag))}function UP(n,e){switch(fw(e),e.tag){case 1:return Hn(e.type)&&Jg(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return Iu(),Xe($n),Xe(yn),kw(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return ww(e),null;case 13:if(Xe(nt),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(O(340));Du()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return Xe(nt),null;case 4:return Iu(),null;case 10:return yw(e.type._context),null;case 22:case 23:return Lw(),null;case 24:return null;default:return null}}var Dm=!1,pn=!1,zP=typeof WeakSet=="function"?WeakSet:Set,Y=null;function Vc(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(s){ft(n,e,s)}else t.current=null}function rv(n,e,t){try{t()}catch(s){ft(n,e,s)}}var gk=!1;function $P(n,e){if(zx=Xg,n=qS(),uw(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var s=t.getSelection&&t.getSelection();if(s&&s.rangeCount!==0){t=s.anchorNode;var r=s.anchorOffset,i=s.focusNode;s=s.focusOffset;try{t.nodeType,i.nodeType}catch{t=null;break e}var a=0,l=-1,c=-1,d=0,h=0,f=n,p=null;t:for(;;){for(var m;f!==t||r!==0&&f.nodeType!==3||(l=a+r),f!==i||s!==0&&f.nodeType!==3||(c=a+s),f.nodeType===3&&(a+=f.nodeValue.length),(m=f.firstChild)!==null;)p=f,f=m;for(;;){if(f===n)break t;if(p===t&&++d===r&&(l=a),p===i&&++h===s&&(c=a),(m=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=m}t=l===-1||c===-1?null:{start:l,end:c}}else t=null}t=t||{start:0,end:0}}else t=null;for($x={focusedElem:n,selectionRange:t},Xg=!1,Y=e;Y!==null;)if(e=Y,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,Y=n;else for(;Y!==null;){e=Y;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var x=v.memoizedProps,A=v.memoizedState,b=e.stateNode,g=b.getSnapshotBeforeUpdate(e.elementType===e.type?x:Zs(e.type,x),A);b.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(O(163))}}catch(S){ft(e,e.return,S)}if(n=e.sibling,n!==null){n.return=e.return,Y=n;break}Y=e.return}return v=gk,gk=!1,v}function Vh(n,e,t){var s=e.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var r=s=s.next;do{if((r.tag&n)===n){var i=r.destroy;r.destroy=void 0,i!==void 0&&rv(e,t,i)}r=r.next}while(r!==s)}}function sy(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var s=t.create;t.destroy=s()}t=t.next}while(t!==e)}}function iv(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function HE(n){var e=n.alternate;e!==null&&(n.alternate=null,HE(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[Qr],delete e[af],delete e[Wx],delete e[SP],delete e[EP])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function VE(n){return n.tag===5||n.tag===3||n.tag===4}function yk(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||VE(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function av(n,e,t){var s=n.tag;if(s===5||s===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=Qg));else if(s!==4&&(n=n.child,n!==null))for(av(n,e,t),n=n.sibling;n!==null;)av(n,e,t),n=n.sibling}function ov(n,e,t){var s=n.tag;if(s===5||s===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(s!==4&&(n=n.child,n!==null))for(ov(n,e,t),n=n.sibling;n!==null;)ov(n,e,t),n=n.sibling}var Yt=null,hr=!1;function ca(n,e,t){for(t=t.child;t!==null;)WE(n,e,t),t=t.sibling}function WE(n,e,t){if(ei&&typeof ei.onCommitFiberUnmount=="function")try{ei.onCommitFiberUnmount(K0,t)}catch{}switch(t.tag){case 5:pn||Vc(t,e);case 6:var s=Yt,r=hr;Yt=null,ca(n,e,t),Yt=s,hr=r,Yt!==null&&(hr?(n=Yt,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):Yt.removeChild(t.stateNode));break;case 18:Yt!==null&&(hr?(n=Yt,t=t.stateNode,n.nodeType===8?Xy(n.parentNode,t):n.nodeType===1&&Xy(n,t),ef(n)):Xy(Yt,t.stateNode));break;case 4:s=Yt,r=hr,Yt=t.stateNode.containerInfo,hr=!0,ca(n,e,t),Yt=s,hr=r;break;case 0:case 11:case 14:case 15:if(!pn&&(s=t.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){r=s=s.next;do{var i=r,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&rv(t,e,a),r=r.next}while(r!==s)}ca(n,e,t);break;case 1:if(!pn&&(Vc(t,e),s=t.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=t.memoizedProps,s.state=t.memoizedState,s.componentWillUnmount()}catch(l){ft(t,e,l)}ca(n,e,t);break;case 21:ca(n,e,t);break;case 22:t.mode&1?(pn=(s=pn)||t.memoizedState!==null,ca(n,e,t),pn=s):ca(n,e,t);break;default:ca(n,e,t)}}function xk(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new zP),e.forEach(function(s){var r=QP.bind(null,n,s);t.has(s)||(t.add(s),s.then(r,r))})}}function Ks(n,e){var t=e.deletions;if(t!==null)for(var s=0;s<t.length;s++){var r=t[s];try{var i=n,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 5:Yt=l.stateNode,hr=!1;break e;case 3:Yt=l.stateNode.containerInfo,hr=!0;break e;case 4:Yt=l.stateNode.containerInfo,hr=!0;break e}l=l.return}if(Yt===null)throw Error(O(160));WE(i,a,r),Yt=null,hr=!1;var c=r.alternate;c!==null&&(c.return=null),r.return=null}catch(d){ft(r,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)GE(e,n),e=e.sibling}function GE(n,e){var t=n.alternate,s=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Ks(e,n),kr(n),s&4){try{Vh(3,n,n.return),sy(3,n)}catch(x){ft(n,n.return,x)}try{Vh(5,n,n.return)}catch(x){ft(n,n.return,x)}}break;case 1:Ks(e,n),kr(n),s&512&&t!==null&&Vc(t,t.return);break;case 5:if(Ks(e,n),kr(n),s&512&&t!==null&&Vc(t,t.return),n.flags&32){var r=n.stateNode;try{Yh(r,"")}catch(x){ft(n,n.return,x)}}if(s&4&&(r=n.stateNode,r!=null)){var i=n.memoizedProps,a=t!==null?t.memoizedProps:i,l=n.type,c=n.updateQueue;if(n.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&pS(r,i),Tx(l,a);var d=Tx(l,i);for(a=0;a<c.length;a+=2){var h=c[a],f=c[a+1];h==="style"?vS(r,f):h==="dangerouslySetInnerHTML"?yS(r,f):h==="children"?Yh(r,f):Jb(r,h,f,d)}switch(l){case"input":Cx(r,i);break;case"textarea":mS(r,i);break;case"select":var p=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?Qc(r,!!i.multiple,m,!1):p!==!!i.multiple&&(i.defaultValue!=null?Qc(r,!!i.multiple,i.defaultValue,!0):Qc(r,!!i.multiple,i.multiple?[]:"",!1))}r[af]=i}catch(x){ft(n,n.return,x)}}break;case 6:if(Ks(e,n),kr(n),s&4){if(n.stateNode===null)throw Error(O(162));r=n.stateNode,i=n.memoizedProps;try{r.nodeValue=i}catch(x){ft(n,n.return,x)}}break;case 3:if(Ks(e,n),kr(n),s&4&&t!==null&&t.memoizedState.isDehydrated)try{ef(e.containerInfo)}catch(x){ft(n,n.return,x)}break;case 4:Ks(e,n),kr(n);break;case 13:Ks(e,n),kr(n),r=n.child,r.flags&8192&&(i=r.memoizedState!==null,r.stateNode.isHidden=i,!i||r.alternate!==null&&r.alternate.memoizedState!==null||(Tw=yt())),s&4&&xk(n);break;case 22:if(h=t!==null&&t.memoizedState!==null,n.mode&1?(pn=(d=pn)||h,Ks(e,n),pn=d):Ks(e,n),kr(n),s&8192){if(d=n.memoizedState!==null,(n.stateNode.isHidden=d)&&!h&&n.mode&1)for(Y=n,h=n.child;h!==null;){for(f=Y=h;Y!==null;){switch(p=Y,m=p.child,p.tag){case 0:case 11:case 14:case 15:Vh(4,p,p.return);break;case 1:Vc(p,p.return);var v=p.stateNode;if(typeof v.componentWillUnmount=="function"){s=p,t=p.return;try{e=s,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(x){ft(s,t,x)}}break;case 5:Vc(p,p.return);break;case 22:if(p.memoizedState!==null){bk(f);continue}}m!==null?(m.return=p,Y=m):bk(f)}h=h.sibling}e:for(h=null,f=n;;){if(f.tag===5){if(h===null){h=f;try{r=f.stateNode,d?(i=r.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=f.stateNode,c=f.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=xS("display",a))}catch(x){ft(n,n.return,x)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=d?"":f.memoizedProps}catch(x){ft(n,n.return,x)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===n)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===n)break e;for(;f.sibling===null;){if(f.return===null||f.return===n)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Ks(e,n),kr(n),s&4&&xk(n);break;case 21:break;default:Ks(e,n),kr(n)}}function kr(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(VE(t)){var s=t;break e}t=t.return}throw Error(O(160))}switch(s.tag){case 5:var r=s.stateNode;s.flags&32&&(Yh(r,""),s.flags&=-33);var i=yk(n);ov(n,i,r);break;case 3:case 4:var a=s.stateNode.containerInfo,l=yk(n);av(n,l,a);break;default:throw Error(O(161))}}catch(c){ft(n,n.return,c)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function HP(n,e,t){Y=n,qE(n)}function qE(n,e,t){for(var s=(n.mode&1)!==0;Y!==null;){var r=Y,i=r.child;if(r.tag===22&&s){var a=r.memoizedState!==null||Dm;if(!a){var l=r.alternate,c=l!==null&&l.memoizedState!==null||pn;l=Dm;var d=pn;if(Dm=a,(pn=c)&&!d)for(Y=r;Y!==null;)a=Y,c=a.child,a.tag===22&&a.memoizedState!==null?wk(r):c!==null?(c.return=a,Y=c):wk(r);for(;i!==null;)Y=i,qE(i),i=i.sibling;Y=r,Dm=l,pn=d}vk(n)}else r.subtreeFlags&8772&&i!==null?(i.return=r,Y=i):vk(n)}}function vk(n){for(;Y!==null;){var e=Y;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:pn||sy(5,e);break;case 1:var s=e.stateNode;if(e.flags&4&&!pn)if(t===null)s.componentDidMount();else{var r=e.elementType===e.type?t.memoizedProps:Zs(e.type,t.memoizedProps);s.componentDidUpdate(r,t.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&sk(e,i,s);break;case 3:var a=e.updateQueue;if(a!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}sk(e,a,t)}break;case 5:var l=e.stateNode;if(t===null&&e.flags&4){t=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&t.focus();break;case"img":c.src&&(t.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&ef(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(O(163))}pn||e.flags&512&&iv(e)}catch(p){ft(e,e.return,p)}}if(e===n){Y=null;break}if(t=e.sibling,t!==null){t.return=e.return,Y=t;break}Y=e.return}}function bk(n){for(;Y!==null;){var e=Y;if(e===n){Y=null;break}var t=e.sibling;if(t!==null){t.return=e.return,Y=t;break}Y=e.return}}function wk(n){for(;Y!==null;){var e=Y;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{sy(4,e)}catch(c){ft(e,t,c)}break;case 1:var s=e.stateNode;if(typeof s.componentDidMount=="function"){var r=e.return;try{s.componentDidMount()}catch(c){ft(e,r,c)}}var i=e.return;try{iv(e)}catch(c){ft(e,i,c)}break;case 5:var a=e.return;try{iv(e)}catch(c){ft(e,a,c)}}}catch(c){ft(e,e.return,c)}if(e===n){Y=null;break}var l=e.sibling;if(l!==null){l.return=e.return,Y=l;break}Y=e.return}}var VP=Math.ceil,l0=aa.ReactCurrentDispatcher,jw=aa.ReactCurrentOwner,$s=aa.ReactCurrentBatchConfig,be=0,Ut=null,kt=null,en=0,hs=0,Wc=To(0),Pt=0,hf=null,fc=0,ry=0,Pw=0,Wh=null,Un=null,Tw=0,Ou=1/0,oi=null,c0=!1,lv=null,vo=null,Mm=!1,ho=null,d0=0,Gh=0,cv=null,ig=-1,ag=0;function Cn(){return be&6?yt():ig!==-1?ig:ig=yt()}function bo(n){return n.mode&1?be&2&&en!==0?en&-en:NP.transition!==null?(ag===0&&(ag=TS()),ag):(n=Pe,n!==0||(n=window.event,n=n===void 0?16:OS(n.type)),n):1}function gr(n,e,t,s){if(50<Gh)throw Gh=0,cv=null,Error(O(185));rm(n,t,s),(!(be&2)||n!==Ut)&&(n===Ut&&(!(be&2)&&(ry|=t),Pt===4&&ma(n,en)),Vn(n,s),t===1&&be===0&&!(e.mode&1)&&(Ou=yt()+500,ey&&Ro()))}function Vn(n,e){var t=n.callbackNode;Nj(n,e);var s=qg(n,n===Ut?en:0);if(s===0)t!==null&&P1(t),n.callbackNode=null,n.callbackPriority=0;else if(e=s&-s,n.callbackPriority!==e){if(t!=null&&P1(t),e===1)n.tag===0?CP(kk.bind(null,n)):sE(kk.bind(null,n)),kP(function(){!(be&6)&&Ro()}),t=null;else{switch(RS(s)){case 1:t=sw;break;case 4:t=jS;break;case 16:t=Gg;break;case 536870912:t=PS;break;default:t=Gg}t=t2(t,XE.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function XE(n,e){if(ig=-1,ag=0,be&6)throw Error(O(327));var t=n.callbackNode;if(nd()&&n.callbackNode!==t)return null;var s=qg(n,n===Ut?en:0);if(s===0)return null;if(s&30||s&n.expiredLanes||e)e=u0(n,s);else{e=s;var r=be;be|=2;var i=YE();(Ut!==n||en!==e)&&(oi=null,Ou=yt()+500,oc(n,e));do try{qP();break}catch(l){KE(n,l)}while(!0);gw(),l0.current=i,be=r,kt!==null?e=0:(Ut=null,en=0,e=Pt)}if(e!==0){if(e===2&&(r=Ix(n),r!==0&&(s=r,e=dv(n,r))),e===1)throw t=hf,oc(n,0),ma(n,s),Vn(n,yt()),t;if(e===6)ma(n,s);else{if(r=n.current.alternate,!(s&30)&&!WP(r)&&(e=u0(n,s),e===2&&(i=Ix(n),i!==0&&(s=i,e=dv(n,i))),e===1))throw t=hf,oc(n,0),ma(n,s),Vn(n,yt()),t;switch(n.finishedWork=r,n.finishedLanes=s,e){case 0:case 1:throw Error(O(345));case 2:Oo(n,Un,oi);break;case 3:if(ma(n,s),(s&130023424)===s&&(e=Tw+500-yt(),10<e)){if(qg(n,0)!==0)break;if(r=n.suspendedLanes,(r&s)!==s){Cn(),n.pingedLanes|=n.suspendedLanes&r;break}n.timeoutHandle=Vx(Oo.bind(null,n,Un,oi),e);break}Oo(n,Un,oi);break;case 4:if(ma(n,s),(s&4194240)===s)break;for(e=n.eventTimes,r=-1;0<s;){var a=31-mr(s);i=1<<a,a=e[a],a>r&&(r=a),s&=~i}if(s=r,s=yt()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*VP(s/1960))-s,10<s){n.timeoutHandle=Vx(Oo.bind(null,n,Un,oi),s);break}Oo(n,Un,oi);break;case 5:Oo(n,Un,oi);break;default:throw Error(O(329))}}}return Vn(n,yt()),n.callbackNode===t?XE.bind(null,n):null}function dv(n,e){var t=Wh;return n.current.memoizedState.isDehydrated&&(oc(n,e).flags|=256),n=u0(n,e),n!==2&&(e=Un,Un=t,e!==null&&uv(e)),n}function uv(n){Un===null?Un=n:Un.push.apply(Un,n)}function WP(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var s=0;s<t.length;s++){var r=t[s],i=r.getSnapshot;r=r.value;try{if(!yr(i(),r))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ma(n,e){for(e&=~Pw,e&=~ry,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-mr(e),s=1<<t;n[t]=-1,e&=~s}}function kk(n){if(be&6)throw Error(O(327));nd();var e=qg(n,0);if(!(e&1))return Vn(n,yt()),null;var t=u0(n,e);if(n.tag!==0&&t===2){var s=Ix(n);s!==0&&(e=s,t=dv(n,s))}if(t===1)throw t=hf,oc(n,0),ma(n,e),Vn(n,yt()),t;if(t===6)throw Error(O(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,Oo(n,Un,oi),Vn(n,yt()),null}function Rw(n,e){var t=be;be|=1;try{return n(e)}finally{be=t,be===0&&(Ou=yt()+500,ey&&Ro())}}function pc(n){ho!==null&&ho.tag===0&&!(be&6)&&nd();var e=be;be|=1;var t=$s.transition,s=Pe;try{if($s.transition=null,Pe=1,n)return n()}finally{Pe=s,$s.transition=t,be=e,!(be&6)&&Ro()}}function Lw(){hs=Wc.current,Xe(Wc)}function oc(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,wP(t)),kt!==null)for(t=kt.return;t!==null;){var s=t;switch(fw(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&Jg();break;case 3:Iu(),Xe($n),Xe(yn),kw();break;case 5:ww(s);break;case 4:Iu();break;case 13:Xe(nt);break;case 19:Xe(nt);break;case 10:yw(s.type._context);break;case 22:case 23:Lw()}t=t.return}if(Ut=n,kt=n=wo(n.current,null),en=hs=e,Pt=0,hf=null,Pw=ry=fc=0,Un=Wh=null,Go!==null){for(e=0;e<Go.length;e++)if(t=Go[e],s=t.interleaved,s!==null){t.interleaved=null;var r=s.next,i=t.pending;if(i!==null){var a=i.next;i.next=r,s.next=a}t.pending=s}Go=null}return n}function KE(n,e){do{var t=kt;try{if(gw(),ng.current=o0,a0){for(var s=rt.memoizedState;s!==null;){var r=s.queue;r!==null&&(r.pending=null),s=s.next}a0=!1}if(hc=0,Bt=jt=rt=null,Hh=!1,cf=0,jw.current=null,t===null||t.return===null){Pt=1,hf=e,kt=null;break}e:{var i=n,a=t.return,l=t,c=e;if(e=en,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,h=l,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var m=ck(a);if(m!==null){m.flags&=-257,dk(m,a,l,i,e),m.mode&1&&lk(i,d,e),e=m,c=d;var v=e.updateQueue;if(v===null){var x=new Set;x.add(c),e.updateQueue=x}else v.add(c);break e}else{if(!(e&1)){lk(i,d,e),Dw();break e}c=Error(O(426))}}else if(Je&&l.mode&1){var A=ck(a);if(A!==null){!(A.flags&65536)&&(A.flags|=256),dk(A,a,l,i,e),pw(Fu(c,l));break e}}i=c=Fu(c,l),Pt!==4&&(Pt=2),Wh===null?Wh=[i]:Wh.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var b=RE(i,c,e);nk(i,b);break e;case 1:l=c;var g=i.type,w=i.stateNode;if(!(i.flags&128)&&(typeof g.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(vo===null||!vo.has(w)))){i.flags|=65536,e&=-e,i.lanes|=e;var S=LE(i,l,e);nk(i,S);break e}}i=i.return}while(i!==null)}JE(t)}catch(C){e=C,kt===t&&t!==null&&(kt=t=t.return);continue}break}while(!0)}function YE(){var n=l0.current;return l0.current=o0,n===null?o0:n}function Dw(){(Pt===0||Pt===3||Pt===2)&&(Pt=4),Ut===null||!(fc&268435455)&&!(ry&268435455)||ma(Ut,en)}function u0(n,e){var t=be;be|=2;var s=YE();(Ut!==n||en!==e)&&(oi=null,oc(n,e));do try{GP();break}catch(r){KE(n,r)}while(!0);if(gw(),be=t,l0.current=s,kt!==null)throw Error(O(261));return Ut=null,en=0,Pt}function GP(){for(;kt!==null;)QE(kt)}function qP(){for(;kt!==null&&!xj();)QE(kt)}function QE(n){var e=e2(n.alternate,n,hs);n.memoizedProps=n.pendingProps,e===null?JE(n):kt=e,jw.current=null}function JE(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=UP(t,e),t!==null){t.flags&=32767,kt=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Pt=6,kt=null;return}}else if(t=BP(t,e,hs),t!==null){kt=t;return}if(e=e.sibling,e!==null){kt=e;return}kt=e=n}while(e!==null);Pt===0&&(Pt=5)}function Oo(n,e,t){var s=Pe,r=$s.transition;try{$s.transition=null,Pe=1,XP(n,e,t,s)}finally{$s.transition=r,Pe=s}return null}function XP(n,e,t,s){do nd();while(ho!==null);if(be&6)throw Error(O(327));t=n.finishedWork;var r=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(O(177));n.callbackNode=null,n.callbackPriority=0;var i=t.lanes|t.childLanes;if(_j(n,i),n===Ut&&(kt=Ut=null,en=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||Mm||(Mm=!0,t2(Gg,function(){return nd(),null})),i=(t.flags&15990)!==0,t.subtreeFlags&15990||i){i=$s.transition,$s.transition=null;var a=Pe;Pe=1;var l=be;be|=4,jw.current=null,$P(n,t),GE(t,n),pP($x),Xg=!!zx,$x=zx=null,n.current=t,HP(t),vj(),be=l,Pe=a,$s.transition=i}else n.current=t;if(Mm&&(Mm=!1,ho=n,d0=r),i=n.pendingLanes,i===0&&(vo=null),kj(t.stateNode),Vn(n,yt()),e!==null)for(s=n.onRecoverableError,t=0;t<e.length;t++)r=e[t],s(r.value,{componentStack:r.stack,digest:r.digest});if(c0)throw c0=!1,n=lv,lv=null,n;return d0&1&&n.tag!==0&&nd(),i=n.pendingLanes,i&1?n===cv?Gh++:(Gh=0,cv=n):Gh=0,Ro(),null}function nd(){if(ho!==null){var n=RS(d0),e=$s.transition,t=Pe;try{if($s.transition=null,Pe=16>n?16:n,ho===null)var s=!1;else{if(n=ho,ho=null,d0=0,be&6)throw Error(O(331));var r=be;for(be|=4,Y=n.current;Y!==null;){var i=Y,a=i.child;if(Y.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(Y=d;Y!==null;){var h=Y;switch(h.tag){case 0:case 11:case 15:Vh(8,h,i)}var f=h.child;if(f!==null)f.return=h,Y=f;else for(;Y!==null;){h=Y;var p=h.sibling,m=h.return;if(HE(h),h===d){Y=null;break}if(p!==null){p.return=m,Y=p;break}Y=m}}}var v=i.alternate;if(v!==null){var x=v.child;if(x!==null){v.child=null;do{var A=x.sibling;x.sibling=null,x=A}while(x!==null)}}Y=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,Y=a;else e:for(;Y!==null;){if(i=Y,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Vh(9,i,i.return)}var b=i.sibling;if(b!==null){b.return=i.return,Y=b;break e}Y=i.return}}var g=n.current;for(Y=g;Y!==null;){a=Y;var w=a.child;if(a.subtreeFlags&2064&&w!==null)w.return=a,Y=w;else e:for(a=g;Y!==null;){if(l=Y,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:sy(9,l)}}catch(C){ft(l,l.return,C)}if(l===a){Y=null;break e}var S=l.sibling;if(S!==null){S.return=l.return,Y=S;break e}Y=l.return}}if(be=r,Ro(),ei&&typeof ei.onPostCommitFiberRoot=="function")try{ei.onPostCommitFiberRoot(K0,n)}catch{}s=!0}return s}finally{Pe=t,$s.transition=e}}return!1}function Ak(n,e,t){e=Fu(t,e),e=RE(n,e,1),n=xo(n,e,1),e=Cn(),n!==null&&(rm(n,1,e),Vn(n,e))}function ft(n,e,t){if(n.tag===3)Ak(n,n,t);else for(;e!==null;){if(e.tag===3){Ak(e,n,t);break}else if(e.tag===1){var s=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(vo===null||!vo.has(s))){n=Fu(t,n),n=LE(e,n,1),e=xo(e,n,1),n=Cn(),e!==null&&(rm(e,1,n),Vn(e,n));break}}e=e.return}}function KP(n,e,t){var s=n.pingCache;s!==null&&s.delete(e),e=Cn(),n.pingedLanes|=n.suspendedLanes&t,Ut===n&&(en&t)===t&&(Pt===4||Pt===3&&(en&130023424)===en&&500>yt()-Tw?oc(n,0):Pw|=t),Vn(n,e)}function ZE(n,e){e===0&&(n.mode&1?(e=Em,Em<<=1,!(Em&130023424)&&(Em=4194304)):e=1);var t=Cn();n=ea(n,e),n!==null&&(rm(n,e,t),Vn(n,t))}function YP(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),ZE(n,t)}function QP(n,e){var t=0;switch(n.tag){case 13:var s=n.stateNode,r=n.memoizedState;r!==null&&(t=r.retryLane);break;case 19:s=n.stateNode;break;default:throw Error(O(314))}s!==null&&s.delete(e),ZE(n,t)}var e2;e2=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||$n.current)zn=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return zn=!1,OP(n,e,t);zn=!!(n.flags&131072)}else zn=!1,Je&&e.flags&1048576&&rE(e,t0,e.index);switch(e.lanes=0,e.tag){case 2:var s=e.type;rg(n,e),n=e.pendingProps;var r=Lu(e,yn.current);td(e,t),r=Sw(null,e,s,n,r,t);var i=Ew();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Hn(s)?(i=!0,Zg(e)):i=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,vw(e),r.updater=ny,e.stateNode=r,r._reactInternals=e,Qx(e,s,n,t),e=ev(null,e,s,!0,i,t)):(e.tag=0,Je&&i&&hw(e),Sn(null,e,r,t),e=e.child),e;case 16:s=e.elementType;e:{switch(rg(n,e),n=e.pendingProps,r=s._init,s=r(s._payload),e.type=s,r=e.tag=ZP(s),n=Zs(s,n),r){case 0:e=Zx(null,e,s,n,t);break e;case 1:e=fk(null,e,s,n,t);break e;case 11:e=uk(null,e,s,n,t);break e;case 14:e=hk(null,e,s,Zs(s.type,n),t);break e}throw Error(O(306,s,""))}return e;case 0:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:Zs(s,r),Zx(n,e,s,r,t);case 1:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:Zs(s,r),fk(n,e,s,r,t);case 3:e:{if(FE(e),n===null)throw Error(O(387));s=e.pendingProps,i=e.memoizedState,r=i.element,dE(n,e),r0(e,s,null,t);var a=e.memoizedState;if(s=a.element,i.isDehydrated)if(i={element:s,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){r=Fu(Error(O(423)),e),e=pk(n,e,s,t,r);break e}else if(s!==r){r=Fu(Error(O(424)),e),e=pk(n,e,s,t,r);break e}else for(ms=yo(e.stateNode.containerInfo.firstChild),gs=e,Je=!0,fr=null,t=lE(e,null,s,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(Du(),s===r){e=ta(n,e,t);break e}Sn(n,e,s,t)}e=e.child}return e;case 5:return uE(e),n===null&&Xx(e),s=e.type,r=e.pendingProps,i=n!==null?n.memoizedProps:null,a=r.children,Hx(s,r)?a=null:i!==null&&Hx(s,i)&&(e.flags|=32),IE(n,e),Sn(n,e,a,t),e.child;case 6:return n===null&&Xx(e),null;case 13:return OE(n,e,t);case 4:return bw(e,e.stateNode.containerInfo),s=e.pendingProps,n===null?e.child=Mu(e,null,s,t):Sn(n,e,s,t),e.child;case 11:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:Zs(s,r),uk(n,e,s,r,t);case 7:return Sn(n,e,e.pendingProps,t),e.child;case 8:return Sn(n,e,e.pendingProps.children,t),e.child;case 12:return Sn(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(s=e.type._context,r=e.pendingProps,i=e.memoizedProps,a=r.value,Ve(n0,s._currentValue),s._currentValue=a,i!==null)if(yr(i.value,a)){if(i.children===r.children&&!$n.current){e=ta(n,e,t);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){a=i.child;for(var c=l.firstContext;c!==null;){if(c.context===s){if(i.tag===1){c=Ki(-1,t&-t),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?c.next=c:(c.next=h.next,h.next=c),d.pending=c}}i.lanes|=t,c=i.alternate,c!==null&&(c.lanes|=t),Kx(i.return,t,e),l.lanes|=t;break}c=c.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(O(341));a.lanes|=t,l=a.alternate,l!==null&&(l.lanes|=t),Kx(a,t,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}Sn(n,e,r.children,t),e=e.child}return e;case 9:return r=e.type,s=e.pendingProps.children,td(e,t),r=Vs(r),s=s(r),e.flags|=1,Sn(n,e,s,t),e.child;case 14:return s=e.type,r=Zs(s,e.pendingProps),r=Zs(s.type,r),hk(n,e,s,r,t);case 15:return DE(n,e,e.type,e.pendingProps,t);case 17:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:Zs(s,r),rg(n,e),e.tag=1,Hn(s)?(n=!0,Zg(e)):n=!1,td(e,t),TE(e,s,r),Qx(e,s,r,t),ev(null,e,s,!0,n,t);case 19:return BE(n,e,t);case 22:return ME(n,e,t)}throw Error(O(156,e.tag))};function t2(n,e){return _S(n,e)}function JP(n,e,t,s){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zs(n,e,t,s){return new JP(n,e,t,s)}function Mw(n){return n=n.prototype,!(!n||!n.isReactComponent)}function ZP(n){if(typeof n=="function")return Mw(n)?1:0;if(n!=null){if(n=n.$$typeof,n===ew)return 11;if(n===tw)return 14}return 2}function wo(n,e){var t=n.alternate;return t===null?(t=zs(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function og(n,e,t,s,r,i){var a=2;if(s=n,typeof n=="function")Mw(n)&&(a=1);else if(typeof n=="string")a=5;else e:switch(n){case Mc:return lc(t.children,r,i,e);case Zb:a=8,r|=8;break;case wx:return n=zs(12,t,e,r|2),n.elementType=wx,n.lanes=i,n;case kx:return n=zs(13,t,e,r),n.elementType=kx,n.lanes=i,n;case Ax:return n=zs(19,t,e,r),n.elementType=Ax,n.lanes=i,n;case uS:return iy(t,r,i,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case cS:a=10;break e;case dS:a=9;break e;case ew:a=11;break e;case tw:a=14;break e;case ha:a=16,s=null;break e}throw Error(O(130,n==null?n:typeof n,""))}return e=zs(a,t,e,r),e.elementType=n,e.type=s,e.lanes=i,e}function lc(n,e,t,s){return n=zs(7,n,s,e),n.lanes=t,n}function iy(n,e,t,s){return n=zs(22,n,s,e),n.elementType=uS,n.lanes=t,n.stateNode={isHidden:!1},n}function nx(n,e,t){return n=zs(6,n,null,e),n.lanes=t,n}function sx(n,e,t){return e=zs(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function eT(n,e,t,s,r){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Fy(0),this.expirationTimes=Fy(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Fy(0),this.identifierPrefix=s,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Iw(n,e,t,s,r,i,a,l,c){return n=new eT(n,e,t,l,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=zs(3,null,null,e),n.current=i,i.stateNode=n,i.memoizedState={element:s,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},vw(i),n}function tT(n,e,t){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Dc,key:s==null?null:""+s,children:n,containerInfo:e,implementation:t}}function n2(n){if(!n)return Eo;n=n._reactInternals;e:{if(vc(n)!==n||n.tag!==1)throw Error(O(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Hn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(O(171))}if(n.tag===1){var t=n.type;if(Hn(t))return nE(n,t,e)}return e}function s2(n,e,t,s,r,i,a,l,c){return n=Iw(t,s,!0,n,r,i,a,l,c),n.context=n2(null),t=n.current,s=Cn(),r=bo(t),i=Ki(s,r),i.callback=e??null,xo(t,i,r),n.current.lanes=r,rm(n,r,s),Vn(n,s),n}function ay(n,e,t,s){var r=e.current,i=Cn(),a=bo(r);return t=n2(t),e.context===null?e.context=t:e.pendingContext=t,e=Ki(i,a),e.payload={element:n},s=s===void 0?null:s,s!==null&&(e.callback=s),n=xo(r,e,a),n!==null&&(gr(n,r,a,i),tg(n,r,a)),a}function h0(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function Sk(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function Fw(n,e){Sk(n,e),(n=n.alternate)&&Sk(n,e)}function nT(){return null}var r2=typeof reportError=="function"?reportError:function(n){console.error(n)};function Ow(n){this._internalRoot=n}oy.prototype.render=Ow.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(O(409));ay(n,e,null,null)};oy.prototype.unmount=Ow.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;pc(function(){ay(null,n,null,null)}),e[Zi]=null}};function oy(n){this._internalRoot=n}oy.prototype.unstable_scheduleHydration=function(n){if(n){var e=MS();n={blockedOn:null,target:n,priority:e};for(var t=0;t<pa.length&&e!==0&&e<pa[t].priority;t++);pa.splice(t,0,n),t===0&&FS(n)}};function Bw(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function ly(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function Ek(){}function sT(n,e,t,s,r){if(r){if(typeof s=="function"){var i=s;s=function(){var d=h0(a);i.call(d)}}var a=s2(e,s,n,0,null,!1,!1,"",Ek);return n._reactRootContainer=a,n[Zi]=a.current,sf(n.nodeType===8?n.parentNode:n),pc(),a}for(;r=n.lastChild;)n.removeChild(r);if(typeof s=="function"){var l=s;s=function(){var d=h0(c);l.call(d)}}var c=Iw(n,0,!1,null,null,!1,!1,"",Ek);return n._reactRootContainer=c,n[Zi]=c.current,sf(n.nodeType===8?n.parentNode:n),pc(function(){ay(e,c,t,s)}),c}function cy(n,e,t,s,r){var i=t._reactRootContainer;if(i){var a=i;if(typeof r=="function"){var l=r;r=function(){var c=h0(a);l.call(c)}}ay(e,a,n,r)}else a=sT(t,e,n,r,s);return h0(a)}LS=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=mh(e.pendingLanes);t!==0&&(rw(e,t|1),Vn(e,yt()),!(be&6)&&(Ou=yt()+500,Ro()))}break;case 13:pc(function(){var s=ea(n,1);if(s!==null){var r=Cn();gr(s,n,1,r)}}),Fw(n,1)}};iw=function(n){if(n.tag===13){var e=ea(n,134217728);if(e!==null){var t=Cn();gr(e,n,134217728,t)}Fw(n,134217728)}};DS=function(n){if(n.tag===13){var e=bo(n),t=ea(n,e);if(t!==null){var s=Cn();gr(t,n,e,s)}Fw(n,e)}};MS=function(){return Pe};IS=function(n,e){var t=Pe;try{return Pe=n,e()}finally{Pe=t}};Lx=function(n,e,t){switch(e){case"input":if(Cx(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var s=t[e];if(s!==n&&s.form===n.form){var r=Z0(s);if(!r)throw Error(O(90));fS(s),Cx(s,r)}}}break;case"textarea":mS(n,t);break;case"select":e=t.value,e!=null&&Qc(n,!!t.multiple,e,!1)}};kS=Rw;AS=pc;var rT={usingClientEntryPoint:!1,Events:[am,Bc,Z0,bS,wS,Rw]},oh={findFiberByHostInstance:Wo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},iT={bundleType:oh.bundleType,version:oh.version,rendererPackageName:oh.rendererPackageName,rendererConfig:oh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:aa.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=CS(n),n===null?null:n.stateNode},findFiberByHostInstance:oh.findFiberByHostInstance||nT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Im=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Im.isDisabled&&Im.supportsFiber)try{K0=Im.inject(iT),ei=Im}catch{}}bs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rT;bs.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Bw(e))throw Error(O(200));return tT(n,e,null,t)};bs.createRoot=function(n,e){if(!Bw(n))throw Error(O(299));var t=!1,s="",r=r2;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=Iw(n,1,!1,null,null,t,!1,s,r),n[Zi]=e.current,sf(n.nodeType===8?n.parentNode:n),new Ow(e)};bs.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(O(188)):(n=Object.keys(n).join(","),Error(O(268,n)));return n=CS(e),n=n===null?null:n.stateNode,n};bs.flushSync=function(n){return pc(n)};bs.hydrate=function(n,e,t){if(!ly(e))throw Error(O(200));return cy(null,n,e,!0,t)};bs.hydrateRoot=function(n,e,t){if(!Bw(n))throw Error(O(405));var s=t!=null&&t.hydratedSources||null,r=!1,i="",a=r2;if(t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),e=s2(e,null,n,1,t??null,r,!1,i,a),n[Zi]=e.current,sf(n),s)for(n=0;n<s.length;n++)t=s[n],r=t._getVersion,r=r(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,r]:e.mutableSourceEagerHydrationData.push(t,r);return new oy(e)};bs.render=function(n,e,t){if(!ly(e))throw Error(O(200));return cy(null,n,e,!1,t)};bs.unmountComponentAtNode=function(n){if(!ly(n))throw Error(O(40));return n._reactRootContainer?(pc(function(){cy(null,null,n,!1,function(){n._reactRootContainer=null,n[Zi]=null})}),!0):!1};bs.unstable_batchedUpdates=Rw;bs.unstable_renderSubtreeIntoContainer=function(n,e,t,s){if(!ly(t))throw Error(O(200));if(n==null||n._reactInternals===void 0)throw Error(O(38));return cy(n,e,t,!1,s)};bs.version="18.3.1-next-f1338f8080-20240426";function i2(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i2)}catch(n){console.error(n)}}i2(),iS.exports=bs;var aT=iS.exports,Ck=aT;vx.createRoot=Ck.createRoot,vx.hydrateRoot=Ck.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ff(){return ff=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=t[s])}return n},ff.apply(this,arguments)}var fo;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(fo||(fo={}));const Nk="popstate";function oT(n){n===void 0&&(n={});function e(s,r){let{pathname:i,search:a,hash:l}=s.location;return hv("",{pathname:i,search:a,hash:l},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function t(s,r){return typeof r=="string"?r:f0(r)}return cT(e,t,null,n)}function xt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Uw(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function lT(){return Math.random().toString(36).substr(2,8)}function _k(n,e){return{usr:n.state,key:n.key,idx:e}}function hv(n,e,t,s){return t===void 0&&(t=null),ff({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?qu(e):e,{state:t,key:e&&e.key||s||lT()})}function f0(n){let{pathname:e="/",search:t="",hash:s=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function qu(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let s=n.indexOf("?");s>=0&&(e.search=n.substr(s),n=n.substr(0,s)),n&&(e.pathname=n)}return e}function cT(n,e,t,s){s===void 0&&(s={});let{window:r=document.defaultView,v5Compat:i=!1}=s,a=r.history,l=fo.Pop,c=null,d=h();d==null&&(d=0,a.replaceState(ff({},a.state,{idx:d}),""));function h(){return(a.state||{idx:null}).idx}function f(){l=fo.Pop;let A=h(),b=A==null?null:A-d;d=A,c&&c({action:l,location:x.location,delta:b})}function p(A,b){l=fo.Push;let g=hv(x.location,A,b);d=h()+1;let w=_k(g,d),S=x.createHref(g);try{a.pushState(w,"",S)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;r.location.assign(S)}i&&c&&c({action:l,location:x.location,delta:1})}function m(A,b){l=fo.Replace;let g=hv(x.location,A,b);d=h();let w=_k(g,d),S=x.createHref(g);a.replaceState(w,"",S),i&&c&&c({action:l,location:x.location,delta:0})}function v(A){let b=r.location.origin!=="null"?r.location.origin:r.location.href,g=typeof A=="string"?A:f0(A);return g=g.replace(/ $/,"%20"),xt(b,"No window.location.(origin|href) available to create URL for href: "+g),new URL(g,b)}let x={get action(){return l},get location(){return n(r,a)},listen(A){if(c)throw new Error("A history only accepts one active listener");return r.addEventListener(Nk,f),c=A,()=>{r.removeEventListener(Nk,f),c=null}},createHref(A){return e(r,A)},createURL:v,encodeLocation(A){let b=v(A);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:p,replace:m,go(A){return a.go(A)}};return x}var jk;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(jk||(jk={}));function dT(n,e,t){return t===void 0&&(t="/"),uT(n,e,t)}function uT(n,e,t,s){let r=typeof e=="string"?qu(e):e,i=zw(r.pathname||"/",t);if(i==null)return null;let a=a2(n);hT(a);let l=null;for(let c=0;l==null&&c<a.length;++c){let d=ST(i);l=wT(a[c],d)}return l}function a2(n,e,t,s){e===void 0&&(e=[]),t===void 0&&(t=[]),s===void 0&&(s="");let r=(i,a,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:a,route:i};c.relativePath.startsWith("/")&&(xt(c.relativePath.startsWith(s),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(s.length));let d=ko([s,c.relativePath]),h=t.concat(c);i.children&&i.children.length>0&&(xt(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),a2(i.children,e,h,d)),!(i.path==null&&!i.index)&&e.push({path:d,score:vT(d,i.index),routesMeta:h})};return n.forEach((i,a)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))r(i,a);else for(let c of o2(i.path))r(i,a,c)}),e}function o2(n){let e=n.split("/");if(e.length===0)return[];let[t,...s]=e,r=t.endsWith("?"),i=t.replace(/\?$/,"");if(s.length===0)return r?[i,""]:[i];let a=o2(s.join("/")),l=[];return l.push(...a.map(c=>c===""?i:[i,c].join("/"))),r&&l.push(...a),l.map(c=>n.startsWith("/")&&c===""?"/":c)}function hT(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:bT(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}const fT=/^:[\w-]+$/,pT=3,mT=2,gT=1,yT=10,xT=-2,Pk=n=>n==="*";function vT(n,e){let t=n.split("/"),s=t.length;return t.some(Pk)&&(s+=xT),e&&(s+=mT),t.filter(r=>!Pk(r)).reduce((r,i)=>r+(fT.test(i)?pT:i===""?gT:yT),s)}function bT(n,e){return n.length===e.length&&n.slice(0,-1).every((s,r)=>s===e[r])?n[n.length-1]-e[e.length-1]:0}function wT(n,e,t){let{routesMeta:s}=n,r={},i="/",a=[];for(let l=0;l<s.length;++l){let c=s[l],d=l===s.length-1,h=i==="/"?e:e.slice(i.length)||"/",f=kT({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},h),p=c.route;if(!f)return null;Object.assign(r,f.params),a.push({params:r,pathname:ko([i,f.pathname]),pathnameBase:jT(ko([i,f.pathnameBase])),route:p}),f.pathnameBase!=="/"&&(i=ko([i,f.pathnameBase]))}return a}function kT(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,s]=AT(n.path,n.caseSensitive,n.end),r=e.match(t);if(!r)return null;let i=r[0],a=i.replace(/(.)\/+$/,"$1"),l=r.slice(1);return{params:s.reduce((d,h,f)=>{let{paramName:p,isOptional:m}=h;if(p==="*"){let x=l[f]||"";a=i.slice(0,i.length-x.length).replace(/(.)\/+$/,"$1")}const v=l[f];return m&&!v?d[p]=void 0:d[p]=(v||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:a,pattern:n}}function AT(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),Uw(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let s=[],r="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,c)=>(s.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(s.push({paramName:"*"}),r+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?r+="\\/*$":n!==""&&n!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),s]}function ST(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Uw(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function zw(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=n.charAt(t);return s&&s!=="/"?null:n.slice(t)||"/"}const ET=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,CT=n=>ET.test(n);function NT(n,e){e===void 0&&(e="/");let{pathname:t,search:s="",hash:r=""}=typeof n=="string"?qu(n):n,i;if(t)if(CT(t))i=t;else{if(t.includes("//")){let a=t;t=t.replace(/\/\/+/g,"/"),Uw(!1,"Pathnames cannot have embedded double slashes - normalizing "+(a+" -> "+t))}t.startsWith("/")?i=Tk(t.substring(1),"/"):i=Tk(t,e)}else i=e;return{pathname:i,search:PT(s),hash:TT(r)}}function Tk(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(r=>{r===".."?t.length>1&&t.pop():r!=="."&&t.push(r)}),t.length>1?t.join("/"):"/"}function rx(n,e,t,s){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function _T(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function $w(n,e){let t=_T(n);return e?t.map((s,r)=>r===t.length-1?s.pathname:s.pathnameBase):t.map(s=>s.pathnameBase)}function Hw(n,e,t,s){s===void 0&&(s=!1);let r;typeof n=="string"?r=qu(n):(r=ff({},n),xt(!r.pathname||!r.pathname.includes("?"),rx("?","pathname","search",r)),xt(!r.pathname||!r.pathname.includes("#"),rx("#","pathname","hash",r)),xt(!r.search||!r.search.includes("#"),rx("#","search","hash",r)));let i=n===""||r.pathname==="",a=i?"/":r.pathname,l;if(a==null)l=t;else{let f=e.length-1;if(!s&&a.startsWith("..")){let p=a.split("/");for(;p[0]==="..";)p.shift(),f-=1;r.pathname=p.join("/")}l=f>=0?e[f]:"/"}let c=NT(r,l),d=a&&a!=="/"&&a.endsWith("/"),h=(i||a===".")&&t.endsWith("/");return!c.pathname.endsWith("/")&&(d||h)&&(c.pathname+="/"),c}const ko=n=>n.join("/").replace(/\/\/+/g,"/"),jT=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),PT=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,TT=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function RT(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const l2=["post","put","patch","delete"];new Set(l2);const LT=["get",...l2];new Set(LT);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function pf(){return pf=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=t[s])}return n},pf.apply(this,arguments)}const Vw=j.createContext(null),DT=j.createContext(null),Lo=j.createContext(null),dy=j.createContext(null),si=j.createContext({outlet:null,matches:[],isDataRoute:!1}),c2=j.createContext(null);function MT(n,e){let{relative:t}=e===void 0?{}:e;Xu()||xt(!1);let{basename:s,navigator:r}=j.useContext(Lo),{hash:i,pathname:a,search:l}=u2(n,{relative:t}),c=a;return s!=="/"&&(c=a==="/"?s:ko([s,a])),r.createHref({pathname:c,search:l,hash:i})}function Xu(){return j.useContext(dy)!=null}function Do(){return Xu()||xt(!1),j.useContext(dy).location}function d2(n){j.useContext(Lo).static||j.useLayoutEffect(n)}function ks(){let{isDataRoute:n}=j.useContext(si);return n?QT():IT()}function IT(){Xu()||xt(!1);let n=j.useContext(Vw),{basename:e,future:t,navigator:s}=j.useContext(Lo),{matches:r}=j.useContext(si),{pathname:i}=Do(),a=JSON.stringify($w(r,t.v7_relativeSplatPath)),l=j.useRef(!1);return d2(()=>{l.current=!0}),j.useCallback(function(d,h){if(h===void 0&&(h={}),!l.current)return;if(typeof d=="number"){s.go(d);return}let f=Hw(d,JSON.parse(a),i,h.relative==="path");n==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:ko([e,f.pathname])),(h.replace?s.replace:s.push)(f,h.state,h)},[e,s,a,i,n])}const FT=j.createContext(null);function OT(n){let e=j.useContext(si).outlet;return e&&j.createElement(FT.Provider,{value:n},e)}function BT(){let{matches:n}=j.useContext(si),e=n[n.length-1];return e?e.params:{}}function u2(n,e){let{relative:t}=e===void 0?{}:e,{future:s}=j.useContext(Lo),{matches:r}=j.useContext(si),{pathname:i}=Do(),a=JSON.stringify($w(r,s.v7_relativeSplatPath));return j.useMemo(()=>Hw(n,JSON.parse(a),i,t==="path"),[n,a,i,t])}function UT(n,e){return zT(n,e)}function zT(n,e,t,s){Xu()||xt(!1);let{navigator:r}=j.useContext(Lo),{matches:i}=j.useContext(si),a=i[i.length-1],l=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let d=Do(),h;if(e){var f;let A=typeof e=="string"?qu(e):e;c==="/"||(f=A.pathname)!=null&&f.startsWith(c)||xt(!1),h=A}else h=d;let p=h.pathname||"/",m=p;if(c!=="/"){let A=c.replace(/^\//,"").split("/");m="/"+p.replace(/^\//,"").split("/").slice(A.length).join("/")}let v=dT(n,{pathname:m}),x=GT(v&&v.map(A=>Object.assign({},A,{params:Object.assign({},l,A.params),pathname:ko([c,r.encodeLocation?r.encodeLocation(A.pathname).pathname:A.pathname]),pathnameBase:A.pathnameBase==="/"?c:ko([c,r.encodeLocation?r.encodeLocation(A.pathnameBase).pathname:A.pathnameBase])})),i,t,s);return e&&x?j.createElement(dy.Provider,{value:{location:pf({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:fo.Pop}},x):x}function $T(){let n=YT(),e=RT(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},e),t?j.createElement("pre",{style:r},t):null,null)}const HT=j.createElement($T,null);class VT extends j.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?j.createElement(si.Provider,{value:this.props.routeContext},j.createElement(c2.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function WT(n){let{routeContext:e,match:t,children:s}=n,r=j.useContext(Vw);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),j.createElement(si.Provider,{value:e},s)}function GT(n,e,t,s){var r;if(e===void 0&&(e=[]),t===void 0&&(t=null),s===void 0&&(s=null),n==null){var i;if(!t)return null;if(t.errors)n=t.matches;else if((i=s)!=null&&i.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let a=n,l=(r=t)==null?void 0:r.errors;if(l!=null){let h=a.findIndex(f=>f.route.id&&(l==null?void 0:l[f.route.id])!==void 0);h>=0||xt(!1),a=a.slice(0,Math.min(a.length,h+1))}let c=!1,d=-1;if(t&&s&&s.v7_partialHydration)for(let h=0;h<a.length;h++){let f=a[h];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(d=h),f.route.id){let{loaderData:p,errors:m}=t,v=f.route.loader&&p[f.route.id]===void 0&&(!m||m[f.route.id]===void 0);if(f.route.lazy||v){c=!0,d>=0?a=a.slice(0,d+1):a=[a[0]];break}}}return a.reduceRight((h,f,p)=>{let m,v=!1,x=null,A=null;t&&(m=l&&f.route.id?l[f.route.id]:void 0,x=f.route.errorElement||HT,c&&(d<0&&p===0?(JT("route-fallback"),v=!0,A=null):d===p&&(v=!0,A=f.route.hydrateFallbackElement||null)));let b=e.concat(a.slice(0,p+1)),g=()=>{let w;return m?w=x:v?w=A:f.route.Component?w=j.createElement(f.route.Component,null):f.route.element?w=f.route.element:w=h,j.createElement(WT,{match:f,routeContext:{outlet:h,matches:b,isDataRoute:t!=null},children:w})};return t&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?j.createElement(VT,{location:t.location,revalidation:t.revalidation,component:x,error:m,children:g(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):g()},null)}var h2=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(h2||{}),f2=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(f2||{});function qT(n){let e=j.useContext(Vw);return e||xt(!1),e}function XT(n){let e=j.useContext(DT);return e||xt(!1),e}function KT(n){let e=j.useContext(si);return e||xt(!1),e}function p2(n){let e=KT(),t=e.matches[e.matches.length-1];return t.route.id||xt(!1),t.route.id}function YT(){var n;let e=j.useContext(c2),t=XT(),s=p2();return e!==void 0?e:(n=t.errors)==null?void 0:n[s]}function QT(){let{router:n}=qT(h2.UseNavigateStable),e=p2(f2.UseNavigateStable),t=j.useRef(!1);return d2(()=>{t.current=!0}),j.useCallback(function(r,i){i===void 0&&(i={}),t.current&&(typeof r=="number"?n.navigate(r):n.navigate(r,pf({fromRouteId:e},i)))},[n,e])}const Rk={};function JT(n,e,t){Rk[n]||(Rk[n]=!0)}function ZT(n,e){n==null||n.v7_startTransition,n==null||n.v7_relativeSplatPath}function m2(n){let{to:e,replace:t,state:s,relative:r}=n;Xu()||xt(!1);let{future:i,static:a}=j.useContext(Lo),{matches:l}=j.useContext(si),{pathname:c}=Do(),d=ks(),h=Hw(e,$w(l,i.v7_relativeSplatPath),c,r==="path"),f=JSON.stringify(h);return j.useEffect(()=>d(JSON.parse(f),{replace:t,state:s,relative:r}),[d,f,r,t,s]),null}function eR(n){return OT(n.context)}function Ys(n){xt(!1)}function tR(n){let{basename:e="/",children:t=null,location:s,navigationType:r=fo.Pop,navigator:i,static:a=!1,future:l}=n;Xu()&&xt(!1);let c=e.replace(/^\/*/,"/"),d=j.useMemo(()=>({basename:c,navigator:i,static:a,future:pf({v7_relativeSplatPath:!1},l)}),[c,l,i,a]);typeof s=="string"&&(s=qu(s));let{pathname:h="/",search:f="",hash:p="",state:m=null,key:v="default"}=s,x=j.useMemo(()=>{let A=zw(h,c);return A==null?null:{location:{pathname:A,search:f,hash:p,state:m,key:v},navigationType:r}},[c,h,f,p,m,v,r]);return x==null?null:j.createElement(Lo.Provider,{value:d},j.createElement(dy.Provider,{children:t,value:x}))}function nR(n){let{children:e,location:t}=n;return UT(fv(e),t)}new Promise(()=>{});function fv(n,e){e===void 0&&(e=[]);let t=[];return j.Children.forEach(n,(s,r)=>{if(!j.isValidElement(s))return;let i=[...e,r];if(s.type===j.Fragment){t.push.apply(t,fv(s.props.children,i));return}s.type!==Ys&&xt(!1),!s.props.index||!s.props.children||xt(!1);let a={id:s.props.id||i.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(a.children=fv(s.props.children,i)),t.push(a)}),t}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function pv(){return pv=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=t[s])}return n},pv.apply(this,arguments)}function sR(n,e){if(n==null)return{};var t={},s=Object.keys(n),r,i;for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}function rR(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function iR(n,e){return n.button===0&&(!e||e==="_self")&&!rR(n)}function mv(n){return n===void 0&&(n=""),new URLSearchParams(typeof n=="string"||Array.isArray(n)||n instanceof URLSearchParams?n:Object.keys(n).reduce((e,t)=>{let s=n[t];return e.concat(Array.isArray(s)?s.map(r=>[t,r]):[[t,s]])},[]))}function aR(n,e){let t=mv(n);return e&&e.forEach((s,r)=>{t.has(r)||e.getAll(r).forEach(i=>{t.append(r,i)})}),t}const oR=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],lR="6";try{window.__reactRouterVersion=lR}catch{}const cR="startTransition",Lk=K_[cR];function dR(n){let{basename:e,children:t,future:s,window:r}=n,i=j.useRef();i.current==null&&(i.current=oT({window:r,v5Compat:!0}));let a=i.current,[l,c]=j.useState({action:a.action,location:a.location}),{v7_startTransition:d}=s||{},h=j.useCallback(f=>{d&&Lk?Lk(()=>c(f)):c(f)},[c,d]);return j.useLayoutEffect(()=>a.listen(h),[a,h]),j.useEffect(()=>ZT(s),[s]),j.createElement(tR,{basename:e,children:t,location:l.location,navigationType:l.action,navigator:a,future:s})}const uR=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",hR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,li=j.forwardRef(function(e,t){let{onClick:s,relative:r,reloadDocument:i,replace:a,state:l,target:c,to:d,preventScrollReset:h,viewTransition:f}=e,p=sR(e,oR),{basename:m}=j.useContext(Lo),v,x=!1;if(typeof d=="string"&&hR.test(d)&&(v=d,uR))try{let w=new URL(window.location.href),S=d.startsWith("//")?new URL(w.protocol+d):new URL(d),C=zw(S.pathname,m);S.origin===w.origin&&C!=null?d=C+S.search+S.hash:x=!0}catch{}let A=MT(d,{relative:r}),b=fR(d,{replace:a,state:l,target:c,preventScrollReset:h,relative:r,viewTransition:f});function g(w){s&&s(w),w.defaultPrevented||b(w)}return j.createElement("a",pv({},p,{href:v||A,onClick:x||i?s:g,ref:t,target:c}))});var Dk;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(Dk||(Dk={}));var Mk;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(Mk||(Mk={}));function fR(n,e){let{target:t,replace:s,state:r,preventScrollReset:i,relative:a,viewTransition:l}=e===void 0?{}:e,c=ks(),d=Do(),h=u2(n,{relative:a});return j.useCallback(f=>{if(iR(f,t)){f.preventDefault();let p=s!==void 0?s:f0(d)===f0(h);c(n,{replace:p,state:r,preventScrollReset:i,relative:a,viewTransition:l})}},[d,c,h,s,r,t,n,i,a,l])}function pR(n){let e=j.useRef(mv(n)),t=j.useRef(!1),s=Do(),r=j.useMemo(()=>aR(s.search,t.current?null:e.current),[s.search]),i=ks(),a=j.useCallback((l,c)=>{const d=mv(typeof l=="function"?l(r):l);t.current=!0,i("?"+d,c)},[i,r]);return[r,a]}function g2(n,e){return function(){return n.apply(e,arguments)}}const{toString:mR}=Object.prototype,{getPrototypeOf:Ww}=Object,{iterator:uy,toStringTag:y2}=Symbol,hy=(n=>e=>{const t=mR.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),wr=n=>(n=n.toLowerCase(),e=>hy(e)===n),fy=n=>e=>typeof e===n,{isArray:Ku}=Array,Bu=fy("undefined");function lm(n){return n!==null&&!Bu(n)&&n.constructor!==null&&!Bu(n.constructor)&&Wn(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const x2=wr("ArrayBuffer");function gR(n){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&x2(n.buffer),e}const yR=fy("string"),Wn=fy("function"),v2=fy("number"),cm=n=>n!==null&&typeof n=="object",xR=n=>n===!0||n===!1,lg=n=>{if(hy(n)!=="object")return!1;const e=Ww(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(y2 in n)&&!(uy in n)},vR=n=>{if(!cm(n)||lm(n))return!1;try{return Object.keys(n).length===0&&Object.getPrototypeOf(n)===Object.prototype}catch{return!1}},bR=wr("Date"),wR=wr("File"),kR=wr("Blob"),AR=wr("FileList"),SR=n=>cm(n)&&Wn(n.pipe),ER=n=>{let e;return n&&(typeof FormData=="function"&&n instanceof FormData||Wn(n.append)&&((e=hy(n))==="formdata"||e==="object"&&Wn(n.toString)&&n.toString()==="[object FormData]"))},CR=wr("URLSearchParams"),[NR,_R,jR,PR]=["ReadableStream","Request","Response","Headers"].map(wr),TR=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function dm(n,e,{allOwnKeys:t=!1}={}){if(n===null||typeof n>"u")return;let s,r;if(typeof n!="object"&&(n=[n]),Ku(n))for(s=0,r=n.length;s<r;s++)e.call(null,n[s],s,n);else{if(lm(n))return;const i=t?Object.getOwnPropertyNames(n):Object.keys(n),a=i.length;let l;for(s=0;s<a;s++)l=i[s],e.call(null,n[l],l,n)}}function b2(n,e){if(lm(n))return null;e=e.toLowerCase();const t=Object.keys(n);let s=t.length,r;for(;s-- >0;)if(r=t[s],e===r.toLowerCase())return r;return null}const Xo=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,w2=n=>!Bu(n)&&n!==Xo;function gv(){const{caseless:n,skipUndefined:e}=w2(this)&&this||{},t={},s=(r,i)=>{const a=n&&b2(t,i)||i;lg(t[a])&&lg(r)?t[a]=gv(t[a],r):lg(r)?t[a]=gv({},r):Ku(r)?t[a]=r.slice():(!e||!Bu(r))&&(t[a]=r)};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&dm(arguments[r],s);return t}const RR=(n,e,t,{allOwnKeys:s}={})=>(dm(e,(r,i)=>{t&&Wn(r)?n[i]=g2(r,t):n[i]=r},{allOwnKeys:s}),n),LR=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),DR=(n,e,t,s)=>{n.prototype=Object.create(e.prototype,s),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:e.prototype}),t&&Object.assign(n.prototype,t)},MR=(n,e,t,s)=>{let r,i,a;const l={};if(e=e||{},n==null)return e;do{for(r=Object.getOwnPropertyNames(n),i=r.length;i-- >0;)a=r[i],(!s||s(a,n,e))&&!l[a]&&(e[a]=n[a],l[a]=!0);n=t!==!1&&Ww(n)}while(n&&(!t||t(n,e))&&n!==Object.prototype);return e},IR=(n,e,t)=>{n=String(n),(t===void 0||t>n.length)&&(t=n.length),t-=e.length;const s=n.indexOf(e,t);return s!==-1&&s===t},FR=n=>{if(!n)return null;if(Ku(n))return n;let e=n.length;if(!v2(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=n[e];return t},OR=(n=>e=>n&&e instanceof n)(typeof Uint8Array<"u"&&Ww(Uint8Array)),BR=(n,e)=>{const s=(n&&n[uy]).call(n);let r;for(;(r=s.next())&&!r.done;){const i=r.value;e.call(n,i[0],i[1])}},UR=(n,e)=>{let t;const s=[];for(;(t=n.exec(e))!==null;)s.push(t);return s},zR=wr("HTMLFormElement"),$R=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,s,r){return s.toUpperCase()+r}),Ik=(({hasOwnProperty:n})=>(e,t)=>n.call(e,t))(Object.prototype),HR=wr("RegExp"),k2=(n,e)=>{const t=Object.getOwnPropertyDescriptors(n),s={};dm(t,(r,i)=>{let a;(a=e(r,i,n))!==!1&&(s[i]=a||r)}),Object.defineProperties(n,s)},VR=n=>{k2(n,(e,t)=>{if(Wn(n)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const s=n[t];if(Wn(s)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},WR=(n,e)=>{const t={},s=r=>{r.forEach(i=>{t[i]=!0})};return Ku(n)?s(n):s(String(n).split(e)),t},GR=()=>{},qR=(n,e)=>n!=null&&Number.isFinite(n=+n)?n:e;function XR(n){return!!(n&&Wn(n.append)&&n[y2]==="FormData"&&n[uy])}const KR=n=>{const e=new Array(10),t=(s,r)=>{if(cm(s)){if(e.indexOf(s)>=0)return;if(lm(s))return s;if(!("toJSON"in s)){e[r]=s;const i=Ku(s)?[]:{};return dm(s,(a,l)=>{const c=t(a,r+1);!Bu(c)&&(i[l]=c)}),e[r]=void 0,i}}return s};return t(n,0)},YR=wr("AsyncFunction"),QR=n=>n&&(cm(n)||Wn(n))&&Wn(n.then)&&Wn(n.catch),A2=((n,e)=>n?setImmediate:e?((t,s)=>(Xo.addEventListener("message",({source:r,data:i})=>{r===Xo&&i===t&&s.length&&s.shift()()},!1),r=>{s.push(r),Xo.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",Wn(Xo.postMessage)),JR=typeof queueMicrotask<"u"?queueMicrotask.bind(Xo):typeof process<"u"&&process.nextTick||A2,ZR=n=>n!=null&&Wn(n[uy]),T={isArray:Ku,isArrayBuffer:x2,isBuffer:lm,isFormData:ER,isArrayBufferView:gR,isString:yR,isNumber:v2,isBoolean:xR,isObject:cm,isPlainObject:lg,isEmptyObject:vR,isReadableStream:NR,isRequest:_R,isResponse:jR,isHeaders:PR,isUndefined:Bu,isDate:bR,isFile:wR,isBlob:kR,isRegExp:HR,isFunction:Wn,isStream:SR,isURLSearchParams:CR,isTypedArray:OR,isFileList:AR,forEach:dm,merge:gv,extend:RR,trim:TR,stripBOM:LR,inherits:DR,toFlatObject:MR,kindOf:hy,kindOfTest:wr,endsWith:IR,toArray:FR,forEachEntry:BR,matchAll:UR,isHTMLForm:zR,hasOwnProperty:Ik,hasOwnProp:Ik,reduceDescriptors:k2,freezeMethods:VR,toObjectSet:WR,toCamelCase:$R,noop:GR,toFiniteNumber:qR,findKey:b2,global:Xo,isContextDefined:w2,isSpecCompliantForm:XR,toJSONObject:KR,isAsyncFn:YR,isThenable:QR,setImmediate:A2,asap:JR,isIterable:ZR};function ce(n,e,t,s,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),s&&(this.request=s),r&&(this.response=r,this.status=r.status?r.status:null)}T.inherits(ce,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:T.toJSONObject(this.config),code:this.code,status:this.status}}});const S2=ce.prototype,E2={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{E2[n]={value:n}});Object.defineProperties(ce,E2);Object.defineProperty(S2,"isAxiosError",{value:!0});ce.from=(n,e,t,s,r,i)=>{const a=Object.create(S2);T.toFlatObject(n,a,function(h){return h!==Error.prototype},d=>d!=="isAxiosError");const l=n&&n.message?n.message:"Error",c=e==null&&n?n.code:e;return ce.call(a,l,c,t,s,r),n&&a.cause==null&&Object.defineProperty(a,"cause",{value:n,configurable:!0}),a.name=n&&n.name||"Error",i&&Object.assign(a,i),a};const eL=null;function yv(n){return T.isPlainObject(n)||T.isArray(n)}function C2(n){return T.endsWith(n,"[]")?n.slice(0,-2):n}function Fk(n,e,t){return n?n.concat(e).map(function(r,i){return r=C2(r),!t&&i?"["+r+"]":r}).join(t?".":""):e}function tL(n){return T.isArray(n)&&!n.some(yv)}const nL=T.toFlatObject(T,{},null,function(e){return/^is[A-Z]/.test(e)});function py(n,e,t){if(!T.isObject(n))throw new TypeError("target must be an object");e=e||new FormData,t=T.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(x,A){return!T.isUndefined(A[x])});const s=t.metaTokens,r=t.visitor||h,i=t.dots,a=t.indexes,c=(t.Blob||typeof Blob<"u"&&Blob)&&T.isSpecCompliantForm(e);if(!T.isFunction(r))throw new TypeError("visitor must be a function");function d(v){if(v===null)return"";if(T.isDate(v))return v.toISOString();if(T.isBoolean(v))return v.toString();if(!c&&T.isBlob(v))throw new ce("Blob is not supported. Use a Buffer instead.");return T.isArrayBuffer(v)||T.isTypedArray(v)?c&&typeof Blob=="function"?new Blob([v]):Buffer.from(v):v}function h(v,x,A){let b=v;if(v&&!A&&typeof v=="object"){if(T.endsWith(x,"{}"))x=s?x:x.slice(0,-2),v=JSON.stringify(v);else if(T.isArray(v)&&tL(v)||(T.isFileList(v)||T.endsWith(x,"[]"))&&(b=T.toArray(v)))return x=C2(x),b.forEach(function(w,S){!(T.isUndefined(w)||w===null)&&e.append(a===!0?Fk([x],S,i):a===null?x:x+"[]",d(w))}),!1}return yv(v)?!0:(e.append(Fk(A,x,i),d(v)),!1)}const f=[],p=Object.assign(nL,{defaultVisitor:h,convertValue:d,isVisitable:yv});function m(v,x){if(!T.isUndefined(v)){if(f.indexOf(v)!==-1)throw Error("Circular reference detected in "+x.join("."));f.push(v),T.forEach(v,function(b,g){(!(T.isUndefined(b)||b===null)&&r.call(e,b,T.isString(g)?g.trim():g,x,p))===!0&&m(b,x?x.concat(g):[g])}),f.pop()}}if(!T.isObject(n))throw new TypeError("data must be an object");return m(n),e}function Ok(n){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(s){return e[s]})}function Gw(n,e){this._pairs=[],n&&py(n,this,e)}const N2=Gw.prototype;N2.append=function(e,t){this._pairs.push([e,t])};N2.toString=function(e){const t=e?function(s){return e.call(this,s,Ok)}:Ok;return this._pairs.map(function(r){return t(r[0])+"="+t(r[1])},"").join("&")};function sL(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function _2(n,e,t){if(!e)return n;const s=t&&t.encode||sL;T.isFunction(t)&&(t={serialize:t});const r=t&&t.serialize;let i;if(r?i=r(e,t):i=T.isURLSearchParams(e)?e.toString():new Gw(e,t).toString(s),i){const a=n.indexOf("#");a!==-1&&(n=n.slice(0,a)),n+=(n.indexOf("?")===-1?"?":"&")+i}return n}class Bk{constructor(){this.handlers=[]}use(e,t,s){return this.handlers.push({fulfilled:e,rejected:t,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){T.forEach(this.handlers,function(s){s!==null&&e(s)})}}const j2={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},rL=typeof URLSearchParams<"u"?URLSearchParams:Gw,iL=typeof FormData<"u"?FormData:null,aL=typeof Blob<"u"?Blob:null,oL={isBrowser:!0,classes:{URLSearchParams:rL,FormData:iL,Blob:aL},protocols:["http","https","file","blob","url","data"]},qw=typeof window<"u"&&typeof document<"u",xv=typeof navigator=="object"&&navigator||void 0,lL=qw&&(!xv||["ReactNative","NativeScript","NS"].indexOf(xv.product)<0),cL=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",dL=qw&&window.location.href||"http://localhost",uL=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:qw,hasStandardBrowserEnv:lL,hasStandardBrowserWebWorkerEnv:cL,navigator:xv,origin:dL},Symbol.toStringTag,{value:"Module"})),mn={...uL,...oL};function hL(n,e){return py(n,new mn.classes.URLSearchParams,{visitor:function(t,s,r,i){return mn.isNode&&T.isBuffer(t)?(this.append(s,t.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...e})}function fL(n){return T.matchAll(/\w+|\[(\w*)]/g,n).map(e=>e[0]==="[]"?"":e[1]||e[0])}function pL(n){const e={},t=Object.keys(n);let s;const r=t.length;let i;for(s=0;s<r;s++)i=t[s],e[i]=n[i];return e}function P2(n){function e(t,s,r,i){let a=t[i++];if(a==="__proto__")return!0;const l=Number.isFinite(+a),c=i>=t.length;return a=!a&&T.isArray(r)?r.length:a,c?(T.hasOwnProp(r,a)?r[a]=[r[a],s]:r[a]=s,!l):((!r[a]||!T.isObject(r[a]))&&(r[a]=[]),e(t,s,r[a],i)&&T.isArray(r[a])&&(r[a]=pL(r[a])),!l)}if(T.isFormData(n)&&T.isFunction(n.entries)){const t={};return T.forEachEntry(n,(s,r)=>{e(fL(s),r,t,0)}),t}return null}function mL(n,e,t){if(T.isString(n))try{return(e||JSON.parse)(n),T.trim(n)}catch(s){if(s.name!=="SyntaxError")throw s}return(t||JSON.stringify)(n)}const um={transitional:j2,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const s=t.getContentType()||"",r=s.indexOf("application/json")>-1,i=T.isObject(e);if(i&&T.isHTMLForm(e)&&(e=new FormData(e)),T.isFormData(e))return r?JSON.stringify(P2(e)):e;if(T.isArrayBuffer(e)||T.isBuffer(e)||T.isStream(e)||T.isFile(e)||T.isBlob(e)||T.isReadableStream(e))return e;if(T.isArrayBufferView(e))return e.buffer;if(T.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let l;if(i){if(s.indexOf("application/x-www-form-urlencoded")>-1)return hL(e,this.formSerializer).toString();if((l=T.isFileList(e))||s.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return py(l?{"files[]":e}:e,c&&new c,this.formSerializer)}}return i||r?(t.setContentType("application/json",!1),mL(e)):e}],transformResponse:[function(e){const t=this.transitional||um.transitional,s=t&&t.forcedJSONParsing,r=this.responseType==="json";if(T.isResponse(e)||T.isReadableStream(e))return e;if(e&&T.isString(e)&&(s&&!this.responseType||r)){const a=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e,this.parseReviver)}catch(l){if(a)throw l.name==="SyntaxError"?ce.from(l,ce.ERR_BAD_RESPONSE,this,null,this.response):l}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:mn.classes.FormData,Blob:mn.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};T.forEach(["delete","get","head","post","put","patch"],n=>{um.headers[n]={}});const gL=T.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),yL=n=>{const e={};let t,s,r;return n&&n.split(`
`).forEach(function(a){r=a.indexOf(":"),t=a.substring(0,r).trim().toLowerCase(),s=a.substring(r+1).trim(),!(!t||e[t]&&gL[t])&&(t==="set-cookie"?e[t]?e[t].push(s):e[t]=[s]:e[t]=e[t]?e[t]+", "+s:s)}),e},Uk=Symbol("internals");function lh(n){return n&&String(n).trim().toLowerCase()}function cg(n){return n===!1||n==null?n:T.isArray(n)?n.map(cg):String(n)}function xL(n){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=t.exec(n);)e[s[1]]=s[2];return e}const vL=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function ix(n,e,t,s,r){if(T.isFunction(s))return s.call(this,e,t);if(r&&(e=t),!!T.isString(e)){if(T.isString(s))return e.indexOf(s)!==-1;if(T.isRegExp(s))return s.test(e)}}function bL(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,s)=>t.toUpperCase()+s)}function wL(n,e){const t=T.toCamelCase(" "+e);["get","set","has"].forEach(s=>{Object.defineProperty(n,s+t,{value:function(r,i,a){return this[s].call(this,e,r,i,a)},configurable:!0})})}let Gn=class{constructor(e){e&&this.set(e)}set(e,t,s){const r=this;function i(l,c,d){const h=lh(c);if(!h)throw new Error("header name must be a non-empty string");const f=T.findKey(r,h);(!f||r[f]===void 0||d===!0||d===void 0&&r[f]!==!1)&&(r[f||c]=cg(l))}const a=(l,c)=>T.forEach(l,(d,h)=>i(d,h,c));if(T.isPlainObject(e)||e instanceof this.constructor)a(e,t);else if(T.isString(e)&&(e=e.trim())&&!vL(e))a(yL(e),t);else if(T.isObject(e)&&T.isIterable(e)){let l={},c,d;for(const h of e){if(!T.isArray(h))throw TypeError("Object iterator must return a key-value pair");l[d=h[0]]=(c=l[d])?T.isArray(c)?[...c,h[1]]:[c,h[1]]:h[1]}a(l,t)}else e!=null&&i(t,e,s);return this}get(e,t){if(e=lh(e),e){const s=T.findKey(this,e);if(s){const r=this[s];if(!t)return r;if(t===!0)return xL(r);if(T.isFunction(t))return t.call(this,r,s);if(T.isRegExp(t))return t.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=lh(e),e){const s=T.findKey(this,e);return!!(s&&this[s]!==void 0&&(!t||ix(this,this[s],s,t)))}return!1}delete(e,t){const s=this;let r=!1;function i(a){if(a=lh(a),a){const l=T.findKey(s,a);l&&(!t||ix(s,s[l],l,t))&&(delete s[l],r=!0)}}return T.isArray(e)?e.forEach(i):i(e),r}clear(e){const t=Object.keys(this);let s=t.length,r=!1;for(;s--;){const i=t[s];(!e||ix(this,this[i],i,e,!0))&&(delete this[i],r=!0)}return r}normalize(e){const t=this,s={};return T.forEach(this,(r,i)=>{const a=T.findKey(s,i);if(a){t[a]=cg(r),delete t[i];return}const l=e?bL(i):String(i).trim();l!==i&&delete t[i],t[l]=cg(r),s[l]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return T.forEach(this,(s,r)=>{s!=null&&s!==!1&&(t[r]=e&&T.isArray(s)?s.join(", "):s)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const s=new this(e);return t.forEach(r=>s.set(r)),s}static accessor(e){const s=(this[Uk]=this[Uk]={accessors:{}}).accessors,r=this.prototype;function i(a){const l=lh(a);s[l]||(wL(r,a),s[l]=!0)}return T.isArray(e)?e.forEach(i):i(e),this}};Gn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);T.reduceDescriptors(Gn.prototype,({value:n},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(s){this[t]=s}}});T.freezeMethods(Gn);function ax(n,e){const t=this||um,s=e||t,r=Gn.from(s.headers);let i=s.data;return T.forEach(n,function(l){i=l.call(t,i,r.normalize(),e?e.status:void 0)}),r.normalize(),i}function T2(n){return!!(n&&n.__CANCEL__)}function Yu(n,e,t){ce.call(this,n??"canceled",ce.ERR_CANCELED,e,t),this.name="CanceledError"}T.inherits(Yu,ce,{__CANCEL__:!0});function R2(n,e,t){const s=t.config.validateStatus;!t.status||!s||s(t.status)?n(t):e(new ce("Request failed with status code "+t.status,[ce.ERR_BAD_REQUEST,ce.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function kL(n){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return e&&e[1]||""}function AL(n,e){n=n||10;const t=new Array(n),s=new Array(n);let r=0,i=0,a;return e=e!==void 0?e:1e3,function(c){const d=Date.now(),h=s[i];a||(a=d),t[r]=c,s[r]=d;let f=i,p=0;for(;f!==r;)p+=t[f++],f=f%n;if(r=(r+1)%n,r===i&&(i=(i+1)%n),d-a<e)return;const m=h&&d-h;return m?Math.round(p*1e3/m):void 0}}function SL(n,e){let t=0,s=1e3/e,r,i;const a=(d,h=Date.now())=>{t=h,r=null,i&&(clearTimeout(i),i=null),n(...d)};return[(...d)=>{const h=Date.now(),f=h-t;f>=s?a(d,h):(r=d,i||(i=setTimeout(()=>{i=null,a(r)},s-f)))},()=>r&&a(r)]}const p0=(n,e,t=3)=>{let s=0;const r=AL(50,250);return SL(i=>{const a=i.loaded,l=i.lengthComputable?i.total:void 0,c=a-s,d=r(c),h=a<=l;s=a;const f={loaded:a,total:l,progress:l?a/l:void 0,bytes:c,rate:d||void 0,estimated:d&&l&&h?(l-a)/d:void 0,event:i,lengthComputable:l!=null,[e?"download":"upload"]:!0};n(f)},t)},zk=(n,e)=>{const t=n!=null;return[s=>e[0]({lengthComputable:t,total:n,loaded:s}),e[1]]},$k=n=>(...e)=>T.asap(()=>n(...e)),EL=mn.hasStandardBrowserEnv?((n,e)=>t=>(t=new URL(t,mn.origin),n.protocol===t.protocol&&n.host===t.host&&(e||n.port===t.port)))(new URL(mn.origin),mn.navigator&&/(msie|trident)/i.test(mn.navigator.userAgent)):()=>!0,CL=mn.hasStandardBrowserEnv?{write(n,e,t,s,r,i,a){if(typeof document>"u")return;const l=[`${n}=${encodeURIComponent(e)}`];T.isNumber(t)&&l.push(`expires=${new Date(t).toUTCString()}`),T.isString(s)&&l.push(`path=${s}`),T.isString(r)&&l.push(`domain=${r}`),i===!0&&l.push("secure"),T.isString(a)&&l.push(`SameSite=${a}`),document.cookie=l.join("; ")},read(n){if(typeof document>"u")return null;const e=document.cookie.match(new RegExp("(?:^|; )"+n+"=([^;]*)"));return e?decodeURIComponent(e[1]):null},remove(n){this.write(n,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function NL(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function _L(n,e){return e?n.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):n}function L2(n,e,t){let s=!NL(e);return n&&(s||t==!1)?_L(n,e):e}const Hk=n=>n instanceof Gn?{...n}:n;function mc(n,e){e=e||{};const t={};function s(d,h,f,p){return T.isPlainObject(d)&&T.isPlainObject(h)?T.merge.call({caseless:p},d,h):T.isPlainObject(h)?T.merge({},h):T.isArray(h)?h.slice():h}function r(d,h,f,p){if(T.isUndefined(h)){if(!T.isUndefined(d))return s(void 0,d,f,p)}else return s(d,h,f,p)}function i(d,h){if(!T.isUndefined(h))return s(void 0,h)}function a(d,h){if(T.isUndefined(h)){if(!T.isUndefined(d))return s(void 0,d)}else return s(void 0,h)}function l(d,h,f){if(f in e)return s(d,h);if(f in n)return s(void 0,d)}const c={url:i,method:i,data:i,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:l,headers:(d,h,f)=>r(Hk(d),Hk(h),f,!0)};return T.forEach(Object.keys({...n,...e}),function(h){const f=c[h]||r,p=f(n[h],e[h],h);T.isUndefined(p)&&f!==l||(t[h]=p)}),t}const D2=n=>{const e=mc({},n);let{data:t,withXSRFToken:s,xsrfHeaderName:r,xsrfCookieName:i,headers:a,auth:l}=e;if(e.headers=a=Gn.from(a),e.url=_2(L2(e.baseURL,e.url,e.allowAbsoluteUrls),n.params,n.paramsSerializer),l&&a.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),T.isFormData(t)){if(mn.hasStandardBrowserEnv||mn.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if(T.isFunction(t.getHeaders)){const c=t.getHeaders(),d=["content-type","content-length"];Object.entries(c).forEach(([h,f])=>{d.includes(h.toLowerCase())&&a.set(h,f)})}}if(mn.hasStandardBrowserEnv&&(s&&T.isFunction(s)&&(s=s(e)),s||s!==!1&&EL(e.url))){const c=r&&i&&CL.read(i);c&&a.set(r,c)}return e},jL=typeof XMLHttpRequest<"u",PL=jL&&function(n){return new Promise(function(t,s){const r=D2(n);let i=r.data;const a=Gn.from(r.headers).normalize();let{responseType:l,onUploadProgress:c,onDownloadProgress:d}=r,h,f,p,m,v;function x(){m&&m(),v&&v(),r.cancelToken&&r.cancelToken.unsubscribe(h),r.signal&&r.signal.removeEventListener("abort",h)}let A=new XMLHttpRequest;A.open(r.method.toUpperCase(),r.url,!0),A.timeout=r.timeout;function b(){if(!A)return;const w=Gn.from("getAllResponseHeaders"in A&&A.getAllResponseHeaders()),C={data:!l||l==="text"||l==="json"?A.responseText:A.response,status:A.status,statusText:A.statusText,headers:w,config:n,request:A};R2(function(_){t(_),x()},function(_){s(_),x()},C),A=null}"onloadend"in A?A.onloadend=b:A.onreadystatechange=function(){!A||A.readyState!==4||A.status===0&&!(A.responseURL&&A.responseURL.indexOf("file:")===0)||setTimeout(b)},A.onabort=function(){A&&(s(new ce("Request aborted",ce.ECONNABORTED,n,A)),A=null)},A.onerror=function(S){const C=S&&S.message?S.message:"Network Error",N=new ce(C,ce.ERR_NETWORK,n,A);N.event=S||null,s(N),A=null},A.ontimeout=function(){let S=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const C=r.transitional||j2;r.timeoutErrorMessage&&(S=r.timeoutErrorMessage),s(new ce(S,C.clarifyTimeoutError?ce.ETIMEDOUT:ce.ECONNABORTED,n,A)),A=null},i===void 0&&a.setContentType(null),"setRequestHeader"in A&&T.forEach(a.toJSON(),function(S,C){A.setRequestHeader(C,S)}),T.isUndefined(r.withCredentials)||(A.withCredentials=!!r.withCredentials),l&&l!=="json"&&(A.responseType=r.responseType),d&&([p,v]=p0(d,!0),A.addEventListener("progress",p)),c&&A.upload&&([f,m]=p0(c),A.upload.addEventListener("progress",f),A.upload.addEventListener("loadend",m)),(r.cancelToken||r.signal)&&(h=w=>{A&&(s(!w||w.type?new Yu(null,n,A):w),A.abort(),A=null)},r.cancelToken&&r.cancelToken.subscribe(h),r.signal&&(r.signal.aborted?h():r.signal.addEventListener("abort",h)));const g=kL(r.url);if(g&&mn.protocols.indexOf(g)===-1){s(new ce("Unsupported protocol "+g+":",ce.ERR_BAD_REQUEST,n));return}A.send(i||null)})},TL=(n,e)=>{const{length:t}=n=n?n.filter(Boolean):[];if(e||t){let s=new AbortController,r;const i=function(d){if(!r){r=!0,l();const h=d instanceof Error?d:this.reason;s.abort(h instanceof ce?h:new Yu(h instanceof Error?h.message:h))}};let a=e&&setTimeout(()=>{a=null,i(new ce(`timeout ${e} of ms exceeded`,ce.ETIMEDOUT))},e);const l=()=>{n&&(a&&clearTimeout(a),a=null,n.forEach(d=>{d.unsubscribe?d.unsubscribe(i):d.removeEventListener("abort",i)}),n=null)};n.forEach(d=>d.addEventListener("abort",i));const{signal:c}=s;return c.unsubscribe=()=>T.asap(l),c}},RL=function*(n,e){let t=n.byteLength;if(t<e){yield n;return}let s=0,r;for(;s<t;)r=s+e,yield n.slice(s,r),s=r},LL=async function*(n,e){for await(const t of DL(n))yield*RL(t,e)},DL=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const e=n.getReader();try{for(;;){const{done:t,value:s}=await e.read();if(t)break;yield s}}finally{await e.cancel()}},Vk=(n,e,t,s)=>{const r=LL(n,e);let i=0,a,l=c=>{a||(a=!0,s&&s(c))};return new ReadableStream({async pull(c){try{const{done:d,value:h}=await r.next();if(d){l(),c.close();return}let f=h.byteLength;if(t){let p=i+=f;t(p)}c.enqueue(new Uint8Array(h))}catch(d){throw l(d),d}},cancel(c){return l(c),r.return()}},{highWaterMark:2})},Wk=64*1024,{isFunction:Fm}=T,ML=(({Request:n,Response:e})=>({Request:n,Response:e}))(T.global),{ReadableStream:Gk,TextEncoder:qk}=T.global,Xk=(n,...e)=>{try{return!!n(...e)}catch{return!1}},IL=n=>{n=T.merge.call({skipUndefined:!0},ML,n);const{fetch:e,Request:t,Response:s}=n,r=e?Fm(e):typeof fetch=="function",i=Fm(t),a=Fm(s);if(!r)return!1;const l=r&&Fm(Gk),c=r&&(typeof qk=="function"?(v=>x=>v.encode(x))(new qk):async v=>new Uint8Array(await new t(v).arrayBuffer())),d=i&&l&&Xk(()=>{let v=!1;const x=new t(mn.origin,{body:new Gk,method:"POST",get duplex(){return v=!0,"half"}}).headers.has("Content-Type");return v&&!x}),h=a&&l&&Xk(()=>T.isReadableStream(new s("").body)),f={stream:h&&(v=>v.body)};r&&["text","arrayBuffer","blob","formData","stream"].forEach(v=>{!f[v]&&(f[v]=(x,A)=>{let b=x&&x[v];if(b)return b.call(x);throw new ce(`Response type '${v}' is not supported`,ce.ERR_NOT_SUPPORT,A)})});const p=async v=>{if(v==null)return 0;if(T.isBlob(v))return v.size;if(T.isSpecCompliantForm(v))return(await new t(mn.origin,{method:"POST",body:v}).arrayBuffer()).byteLength;if(T.isArrayBufferView(v)||T.isArrayBuffer(v))return v.byteLength;if(T.isURLSearchParams(v)&&(v=v+""),T.isString(v))return(await c(v)).byteLength},m=async(v,x)=>{const A=T.toFiniteNumber(v.getContentLength());return A??p(x)};return async v=>{let{url:x,method:A,data:b,signal:g,cancelToken:w,timeout:S,onDownloadProgress:C,onUploadProgress:N,responseType:_,headers:P,withCredentials:L="same-origin",fetchOptions:R}=D2(v),M=e||fetch;_=_?(_+"").toLowerCase():"text";let F=TL([g,w&&w.toAbortSignal()],S),G=null;const U=F&&F.unsubscribe&&(()=>{F.unsubscribe()});let ee;try{if(N&&d&&A!=="get"&&A!=="head"&&(ee=await m(P,b))!==0){let J=new t(x,{method:"POST",body:b,duplex:"half"}),W;if(T.isFormData(b)&&(W=J.headers.get("content-type"))&&P.setContentType(W),J.body){const[te,re]=zk(ee,p0($k(N)));b=Vk(J.body,Wk,te,re)}}T.isString(L)||(L=L?"include":"omit");const B=i&&"credentials"in t.prototype,z={...R,signal:F,method:A.toUpperCase(),headers:P.normalize().toJSON(),body:b,duplex:"half",credentials:B?L:void 0};G=i&&new t(x,z);let D=await(i?M(G,R):M(x,z));const $=h&&(_==="stream"||_==="response");if(h&&(C||$&&U)){const J={};["status","statusText","headers"].forEach(pe=>{J[pe]=D[pe]});const W=T.toFiniteNumber(D.headers.get("content-length")),[te,re]=C&&zk(W,p0($k(C),!0))||[];D=new s(Vk(D.body,Wk,te,()=>{re&&re(),U&&U()}),J)}_=_||"text";let V=await f[T.findKey(f,_)||"text"](D,v);return!$&&U&&U(),await new Promise((J,W)=>{R2(J,W,{data:V,headers:Gn.from(D.headers),status:D.status,statusText:D.statusText,config:v,request:G})})}catch(B){throw U&&U(),B&&B.name==="TypeError"&&/Load failed|fetch/i.test(B.message)?Object.assign(new ce("Network Error",ce.ERR_NETWORK,v,G),{cause:B.cause||B}):ce.from(B,B&&B.code,v,G)}}},FL=new Map,M2=n=>{let e=n&&n.env||{};const{fetch:t,Request:s,Response:r}=e,i=[s,r,t];let a=i.length,l=a,c,d,h=FL;for(;l--;)c=i[l],d=h.get(c),d===void 0&&h.set(c,d=l?new Map:IL(e)),h=d;return d};M2();const Xw={http:eL,xhr:PL,fetch:{get:M2}};T.forEach(Xw,(n,e)=>{if(n){try{Object.defineProperty(n,"name",{value:e})}catch{}Object.defineProperty(n,"adapterName",{value:e})}});const Kk=n=>`- ${n}`,OL=n=>T.isFunction(n)||n===null||n===!1;function BL(n,e){n=T.isArray(n)?n:[n];const{length:t}=n;let s,r;const i={};for(let a=0;a<t;a++){s=n[a];let l;if(r=s,!OL(s)&&(r=Xw[(l=String(s)).toLowerCase()],r===void 0))throw new ce(`Unknown adapter '${l}'`);if(r&&(T.isFunction(r)||(r=r.get(e))))break;i[l||"#"+a]=r}if(!r){const a=Object.entries(i).map(([c,d])=>`adapter ${c} `+(d===!1?"is not supported by the environment":"is not available in the build"));let l=t?a.length>1?`since :
`+a.map(Kk).join(`
`):" "+Kk(a[0]):"as no adapter specified";throw new ce("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return r}const I2={getAdapter:BL,adapters:Xw};function ox(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new Yu(null,n)}function Yk(n){return ox(n),n.headers=Gn.from(n.headers),n.data=ax.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),I2.getAdapter(n.adapter||um.adapter,n)(n).then(function(s){return ox(n),s.data=ax.call(n,n.transformResponse,s),s.headers=Gn.from(s.headers),s},function(s){return T2(s)||(ox(n),s&&s.response&&(s.response.data=ax.call(n,n.transformResponse,s.response),s.response.headers=Gn.from(s.response.headers))),Promise.reject(s)})}const F2="1.13.2",my={};["object","boolean","number","function","string","symbol"].forEach((n,e)=>{my[n]=function(s){return typeof s===n||"a"+(e<1?"n ":" ")+n}});const Qk={};my.transitional=function(e,t,s){function r(i,a){return"[Axios v"+F2+"] Transitional option '"+i+"'"+a+(s?". "+s:"")}return(i,a,l)=>{if(e===!1)throw new ce(r(a," has been removed"+(t?" in "+t:"")),ce.ERR_DEPRECATED);return t&&!Qk[a]&&(Qk[a]=!0,console.warn(r(a," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(i,a,l):!0}};my.spelling=function(e){return(t,s)=>(console.warn(`${s} is likely a misspelling of ${e}`),!0)};function UL(n,e,t){if(typeof n!="object")throw new ce("options must be an object",ce.ERR_BAD_OPTION_VALUE);const s=Object.keys(n);let r=s.length;for(;r-- >0;){const i=s[r],a=e[i];if(a){const l=n[i],c=l===void 0||a(l,i,n);if(c!==!0)throw new ce("option "+i+" must be "+c,ce.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new ce("Unknown option "+i,ce.ERR_BAD_OPTION)}}const dg={assertOptions:UL,validators:my},Ar=dg.validators;let cc=class{constructor(e){this.defaults=e||{},this.interceptors={request:new Bk,response:new Bk}}async request(e,t){try{return await this._request(e,t)}catch(s){if(s instanceof Error){let r={};Error.captureStackTrace?Error.captureStackTrace(r):r=new Error;const i=r.stack?r.stack.replace(/^.+\n/,""):"";try{s.stack?i&&!String(s.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+i):s.stack=i}catch{}}throw s}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=mc(this.defaults,t);const{transitional:s,paramsSerializer:r,headers:i}=t;s!==void 0&&dg.assertOptions(s,{silentJSONParsing:Ar.transitional(Ar.boolean),forcedJSONParsing:Ar.transitional(Ar.boolean),clarifyTimeoutError:Ar.transitional(Ar.boolean)},!1),r!=null&&(T.isFunction(r)?t.paramsSerializer={serialize:r}:dg.assertOptions(r,{encode:Ar.function,serialize:Ar.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),dg.assertOptions(t,{baseUrl:Ar.spelling("baseURL"),withXsrfToken:Ar.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let a=i&&T.merge(i.common,i[t.method]);i&&T.forEach(["delete","get","head","post","put","patch","common"],v=>{delete i[v]}),t.headers=Gn.concat(a,i);const l=[];let c=!0;this.interceptors.request.forEach(function(x){typeof x.runWhen=="function"&&x.runWhen(t)===!1||(c=c&&x.synchronous,l.unshift(x.fulfilled,x.rejected))});const d=[];this.interceptors.response.forEach(function(x){d.push(x.fulfilled,x.rejected)});let h,f=0,p;if(!c){const v=[Yk.bind(this),void 0];for(v.unshift(...l),v.push(...d),p=v.length,h=Promise.resolve(t);f<p;)h=h.then(v[f++],v[f++]);return h}p=l.length;let m=t;for(;f<p;){const v=l[f++],x=l[f++];try{m=v(m)}catch(A){x.call(this,A);break}}try{h=Yk.call(this,m)}catch(v){return Promise.reject(v)}for(f=0,p=d.length;f<p;)h=h.then(d[f++],d[f++]);return h}getUri(e){e=mc(this.defaults,e);const t=L2(e.baseURL,e.url,e.allowAbsoluteUrls);return _2(t,e.params,e.paramsSerializer)}};T.forEach(["delete","get","head","options"],function(e){cc.prototype[e]=function(t,s){return this.request(mc(s||{},{method:e,url:t,data:(s||{}).data}))}});T.forEach(["post","put","patch"],function(e){function t(s){return function(i,a,l){return this.request(mc(l||{},{method:e,headers:s?{"Content-Type":"multipart/form-data"}:{},url:i,data:a}))}}cc.prototype[e]=t(),cc.prototype[e+"Form"]=t(!0)});let zL=class O2{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(i){t=i});const s=this;this.promise.then(r=>{if(!s._listeners)return;let i=s._listeners.length;for(;i-- >0;)s._listeners[i](r);s._listeners=null}),this.promise.then=r=>{let i;const a=new Promise(l=>{s.subscribe(l),i=l}).then(r);return a.cancel=function(){s.unsubscribe(i)},a},e(function(i,a,l){s.reason||(s.reason=new Yu(i,a,l),t(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=s=>{e.abort(s)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new O2(function(r){e=r}),cancel:e}}};function $L(n){return function(t){return n.apply(null,t)}}function HL(n){return T.isObject(n)&&n.isAxiosError===!0}const vv={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(vv).forEach(([n,e])=>{vv[e]=n});function B2(n){const e=new cc(n),t=g2(cc.prototype.request,e);return T.extend(t,cc.prototype,e,{allOwnKeys:!0}),T.extend(t,e,null,{allOwnKeys:!0}),t.create=function(r){return B2(mc(n,r))},t}const Fe=B2(um);Fe.Axios=cc;Fe.CanceledError=Yu;Fe.CancelToken=zL;Fe.isCancel=T2;Fe.VERSION=F2;Fe.toFormData=py;Fe.AxiosError=ce;Fe.Cancel=Fe.CanceledError;Fe.all=function(e){return Promise.all(e)};Fe.spread=$L;Fe.isAxiosError=HL;Fe.mergeConfig=mc;Fe.AxiosHeaders=Gn;Fe.formToJSON=n=>P2(T.isHTMLForm(n)?new FormData(n):n);Fe.getAdapter=I2.getAdapter;Fe.HttpStatusCode=vv;Fe.default=Fe;const{Axios:cF,AxiosError:dF,CanceledError:uF,isCancel:hF,CancelToken:fF,VERSION:pF,all:mF,Cancel:gF,isAxiosError:yF,spread:xF,toFormData:vF,AxiosHeaders:bF,HttpStatusCode:wF,formToJSON:kF,getAdapter:AF,mergeConfig:SF}=Fe;/*! Capacitor: https://capacitorjs.com/ - MIT License */const VL=n=>{const e=new Map;e.set("web",{name:"web"});const t=n.CapacitorPlatforms||{currentPlatform:{name:"web"},platforms:e},s=(i,a)=>{t.platforms.set(i,a)},r=i=>{t.platforms.has(i)&&(t.currentPlatform=t.platforms.get(i))};return t.addPlatform=s,t.setPlatform=r,t},WL=n=>n.CapacitorPlatforms=VL(n),U2=WL(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});U2.addPlatform;U2.setPlatform;var Uu;(function(n){n.Unimplemented="UNIMPLEMENTED",n.Unavailable="UNAVAILABLE"})(Uu||(Uu={}));class lx extends Error{constructor(e,t,s){super(e),this.message=e,this.code=t,this.data=s}}const GL=n=>{var e,t;return n!=null&&n.androidBridge?"android":!((t=(e=n==null?void 0:n.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||t===void 0)&&t.bridge?"ios":"web"},qL=n=>{var e,t,s,r,i;const a=n.CapacitorCustomPlatform||null,l=n.Capacitor||{},c=l.Plugins=l.Plugins||{},d=n.CapacitorPlatforms,h=()=>a!==null?a.name:GL(n),f=((e=d==null?void 0:d.currentPlatform)===null||e===void 0?void 0:e.getPlatform)||h,p=()=>f()!=="web",m=((t=d==null?void 0:d.currentPlatform)===null||t===void 0?void 0:t.isNativePlatform)||p,v=_=>{const P=S.get(_);return!!(P!=null&&P.platforms.has(f())||b(_))},x=((s=d==null?void 0:d.currentPlatform)===null||s===void 0?void 0:s.isPluginAvailable)||v,A=_=>{var P;return(P=l.PluginHeaders)===null||P===void 0?void 0:P.find(L=>L.name===_)},b=((r=d==null?void 0:d.currentPlatform)===null||r===void 0?void 0:r.getPluginHeader)||A,g=_=>n.console.error(_),w=(_,P,L)=>Promise.reject(`${L} does not have an implementation of "${P}".`),S=new Map,C=(_,P={})=>{const L=S.get(_);if(L)return console.warn(`Capacitor plugin "${_}" already registered. Cannot register plugins twice.`),L.proxy;const R=f(),M=b(_);let F;const G=async()=>(!F&&R in P?F=typeof P[R]=="function"?F=await P[R]():F=P[R]:a!==null&&!F&&"web"in P&&(F=typeof P.web=="function"?F=await P.web():F=P.web),F),U=(V,J)=>{var W,te;if(M){const re=M==null?void 0:M.methods.find(pe=>J===pe.name);if(re)return re.rtype==="promise"?pe=>l.nativePromise(_,J.toString(),pe):(pe,Ee)=>l.nativeCallback(_,J.toString(),pe,Ee);if(V)return(W=V[J])===null||W===void 0?void 0:W.bind(V)}else{if(V)return(te=V[J])===null||te===void 0?void 0:te.bind(V);throw new lx(`"${_}" plugin is not implemented on ${R}`,Uu.Unimplemented)}},ee=V=>{let J;const W=(...te)=>{const re=G().then(pe=>{const Ee=U(pe,V);if(Ee){const fe=Ee(...te);return J=fe==null?void 0:fe.remove,fe}else throw new lx(`"${_}.${V}()" is not implemented on ${R}`,Uu.Unimplemented)});return V==="addListener"&&(re.remove=async()=>J()),re};return W.toString=()=>`${V.toString()}() { [capacitor code] }`,Object.defineProperty(W,"name",{value:V,writable:!1,configurable:!1}),W},B=ee("addListener"),z=ee("removeListener"),D=(V,J)=>{const W=B({eventName:V},J),te=async()=>{const pe=await W;z({eventName:V,callbackId:pe},J)},re=new Promise(pe=>W.then(()=>pe({remove:te})));return re.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await te()},re},$=new Proxy({},{get(V,J){switch(J){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return M?D:B;case"removeListener":return z;default:return ee(J)}}});return c[_]=$,S.set(_,{name:_,proxy:$,platforms:new Set([...Object.keys(P),...M?[R]:[]])}),$},N=((i=d==null?void 0:d.currentPlatform)===null||i===void 0?void 0:i.registerPlugin)||C;return l.convertFileSrc||(l.convertFileSrc=_=>_),l.getPlatform=f,l.handleError=g,l.isNativePlatform=m,l.isPluginAvailable=x,l.pluginMethodNoop=w,l.registerPlugin=N,l.Exception=lx,l.DEBUG=!!l.DEBUG,l.isLoggingEnabled=!!l.isLoggingEnabled,l.platform=l.getPlatform(),l.isNative=l.isNativePlatform(),l},XL=n=>n.Capacitor=qL(n),xr=XL(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),gy=xr.registerPlugin;xr.Plugins;class z2{constructor(e){this.listeners={},this.retainedEventArguments={},this.windowListeners={},e&&(console.warn(`Capacitor WebPlugin "${e.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=e)}addListener(e,t){let s=!1;this.listeners[e]||(this.listeners[e]=[],s=!0),this.listeners[e].push(t);const i=this.windowListeners[e];i&&!i.registered&&this.addWindowListener(i),s&&this.sendRetainedArgumentsForEvent(e);const a=async()=>this.removeListener(e,t);return Promise.resolve({remove:a})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,t,s){const r=this.listeners[e];if(!r){if(s){let i=this.retainedEventArguments[e];i||(i=[]),i.push(t),this.retainedEventArguments[e]=i}return}r.forEach(i=>i(t))}hasListeners(e){return!!this.listeners[e].length}registerWindowListener(e,t){this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:s=>{this.notifyListeners(t,s)}}}unimplemented(e="not implemented"){return new xr.Exception(e,Uu.Unimplemented)}unavailable(e="not available"){return new xr.Exception(e,Uu.Unavailable)}async removeListener(e,t){const s=this.listeners[e];if(!s)return;const r=s.indexOf(t);this.listeners[e].splice(r,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const t=this.retainedEventArguments[e];t&&(delete this.retainedEventArguments[e],t.forEach(s=>{this.notifyListeners(e,s)}))}}const Jk=n=>encodeURIComponent(n).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),Zk=n=>n.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class KL extends z2{async getCookies(){const e=document.cookie,t={};return e.split(";").forEach(s=>{if(s.length<=0)return;let[r,i]=s.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");r=Zk(r).trim(),i=Zk(i).trim(),t[r]=i}),t}async setCookie(e){try{const t=Jk(e.key),s=Jk(e.value),r=`; expires=${(e.expires||"").replace("expires=","")}`,i=(e.path||"/").replace("path=",""),a=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${t}=${s||""}${r}; path=${i}; ${a};`}catch(t){return Promise.reject(t)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(t){return Promise.reject(t)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const t of e)document.cookie=t.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}gy("CapacitorCookies",{web:()=>new KL});const YL=async n=>new Promise((e,t)=>{const s=new FileReader;s.onload=()=>{const r=s.result;e(r.indexOf(",")>=0?r.split(",")[1]:r)},s.onerror=r=>t(r),s.readAsDataURL(n)}),QL=(n={})=>{const e=Object.keys(n);return Object.keys(n).map(r=>r.toLocaleLowerCase()).reduce((r,i,a)=>(r[i]=n[e[a]],r),{})},JL=(n,e=!0)=>n?Object.entries(n).reduce((s,r)=>{const[i,a]=r;let l,c;return Array.isArray(a)?(c="",a.forEach(d=>{l=e?encodeURIComponent(d):d,c+=`${i}=${l}&`}),c.slice(0,-1)):(l=e?encodeURIComponent(a):a,c=`${i}=${l}`),`${s}&${c}`},"").substr(1):null,ZL=(n,e={})=>{const t=Object.assign({method:n.method||"GET",headers:n.headers},e),r=QL(n.headers)["content-type"]||"";if(typeof n.data=="string")t.body=n.data;else if(r.includes("application/x-www-form-urlencoded")){const i=new URLSearchParams;for(const[a,l]of Object.entries(n.data||{}))i.set(a,l);t.body=i.toString()}else if(r.includes("multipart/form-data")||n.data instanceof FormData){const i=new FormData;if(n.data instanceof FormData)n.data.forEach((l,c)=>{i.append(c,l)});else for(const l of Object.keys(n.data))i.append(l,n.data[l]);t.body=i;const a=new Headers(t.headers);a.delete("content-type"),t.headers=a}else(r.includes("application/json")||typeof n.data=="object")&&(t.body=JSON.stringify(n.data));return t};class eD extends z2{async request(e){const t=ZL(e,e.webFetchExtra),s=JL(e.params,e.shouldEncodeUrlParams),r=s?`${e.url}?${s}`:e.url,i=await fetch(r,t),a=i.headers.get("content-type")||"";let{responseType:l="text"}=i.ok?e:{};a.includes("application/json")&&(l="json");let c,d;switch(l){case"arraybuffer":case"blob":d=await i.blob(),c=await YL(d);break;case"json":c=await i.json();break;case"document":case"text":default:c=await i.text()}const h={};return i.headers.forEach((f,p)=>{h[p]=f}),{data:c,headers:h,status:i.status,url:i.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}gy("CapacitorHttp",{web:()=>new eD});const tD=()=>{xr.isNativePlatform();{const n="https://resume-builder-app-misty-waterfall-5852.fly.dev";return console.log(" Using backend URL:",n),n}},$2=tD();console.log(" API Configuration:",{isNative:xr.isNativePlatform(),platform:xr.getPlatform(),mode:"production",prod:!0,baseURL:$2,envVar:"https://resume-builder-app-misty-waterfall-5852.fly.dev"});const xe=Fe.create({baseURL:$2,timeout:12e4});xe.interceptors.request.use(n=>{var t;const e=localStorage.getItem("token");return e&&(n.headers.Authorization=`Bearer ${e}`),console.log(" API Request:",(t=n.method)==null?void 0:t.toUpperCase(),n.url),n});xe.interceptors.response.use(n=>(console.log(" API Response:",n.config.url,n.status),n),n=>{var e,t,s,r;return console.error(" API Error:",{url:(e=n.config)==null?void 0:e.url,method:(t=n.config)==null?void 0:t.method,status:(s=n.response)==null?void 0:s.status,message:n.message,data:(r=n.response)==null?void 0:r.data}),Promise.reject(n)});const Om="/api/auth",qh={sendOtp:async n=>{var e,t,s;try{console.log("Sending OTP to:",n),console.log("API Base URL:",xe.defaults.baseURL);const r=await xe.post(`${Om}/send-otp`,{email:n});return console.log("OTP sent successfully:",r.data),r.data}catch(r){throw console.error("OTP API Error:",r),console.error("Error details:",{message:r.message,response:(e=r.response)==null?void 0:e.data,status:(t=r.response)==null?void 0:t.status,url:(s=r.config)==null?void 0:s.url}),r}},verifyOtp:async(n,e)=>(await xe.post(`${Om}/verify-otp`,{email:n,otp:e})).data,getCurrentUser:async()=>(await xe.get(`${Om}/me`)).data,logout:async()=>{await xe.post(`${Om}/logout`,{})}},H2=j.createContext(null);function nD({children:n}){const[e,t]=j.useState(null),[s,r]=j.useState(!0);j.useEffect(()=>{i()},[]);const i=async()=>{const c=localStorage.getItem("token");if(c)try{const d=await qh.getCurrentUser(c);t(d)}catch(d){d.response&&d.response.status===401?localStorage.removeItem("token"):console.warn("Auth check failed, keeping token:",d.message)}r(!1)},a=(c,d)=>{localStorage.setItem("token",c),t(d)},l=async()=>{const c=localStorage.getItem("token");if(c)try{await qh.logout(c)}catch(d){console.error("Logout error:",d)}localStorage.removeItem("token"),t(null)};return u.jsx(H2.Provider,{value:{user:e,loading:s,login:a,logout:l,checkAuth:i},children:n})}const yy=()=>{const n=j.useContext(H2);if(!n)throw new Error("useAuth must be used within AuthProvider");return n};function eA({children:n}){const{user:e,logout:t}=yy(),s=Do(),[r,i]=j.useState(()=>{const h=localStorage.getItem("theme");return h?h==="dark":!0});j.useEffect(()=>{r?(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark")):(document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light"))},[r]);const[a,l]=j.useState(!1),c=s.pathname==="/login",d=()=>u.jsxs(u.Fragment,{children:[u.jsx(li,{to:"/templates",onClick:()=>l(!1),className:`text-sm font-medium transition-smooth ${s.pathname==="/templates"?"text-gray-900 dark:text-gray-50":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"}`,children:"Templates"}),u.jsxs(li,{to:"/job-match",onClick:()=>l(!1),className:`text-sm font-medium transition-smooth flex items-center gap-1 ${s.pathname==="/job-match"?"text-gray-900 dark:text-gray-50":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"}`,children:[u.jsx("span",{className:"text-xs",children:""})," Job Match"]}),u.jsx(li,{to:"/",onClick:()=>l(!1),className:`text-sm font-medium transition-smooth ${s.pathname==="/"?"text-gray-900 dark:text-gray-50":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"}`,children:"My Resumes"}),(e==null?void 0:e.isAdmin)&&u.jsxs(li,{to:"/admin",onClick:()=>l(!1),className:`text-sm font-medium transition-smooth flex items-center gap-1 ${s.pathname==="/admin"?"text-gray-900 dark:text-gray-50":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"}`,children:[u.jsx("span",{className:"text-xs",children:""})," Admin"]})]});return u.jsxs("div",{className:"min-h-screen bg-white dark:bg-[#0A0A0A]",children:[u.jsxs("header",{className:"border-b border-gray-200 dark:border-gray-800 bg-white dark:bg-[#18181B] sticky top-0 z-50",style:{paddingTop:"env(safe-area-inset-top)"},children:[u.jsxs("nav",{className:"max-w-7xl mx-auto px-4 md:px-6 h-16 flex items-center justify-between",children:[u.jsxs(li,{to:"/",className:"flex items-center gap-2 md:gap-3 group",children:[u.jsx("div",{className:"w-8 h-8 md:w-10 md:h-10 rounded-xl bg-gradient-to-br from-gray-900 to-black dark:from-gray-50 dark:to-white flex items-center justify-center group-hover:scale-105 transition-all shadow-lg",children:u.jsx("svg",{className:"w-5 h-5 md:w-6 md:h-6 text-white dark:text-gray-900",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),u.jsxs("span",{className:"font-display font-bold text-lg md:text-xl tracking-tight text-gray-900 dark:text-gray-50",children:["Decisive",u.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:"ML"})]})]}),!c&&u.jsx("div",{className:"flex items-center gap-2 md:gap-4",children:e&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"hidden lg:flex items-center gap-6 mr-4",children:u.jsx(d,{})}),u.jsx("div",{className:"h-6 w-px bg-gray-300 dark:bg-gray-700 hidden lg:block mr-2"}),u.jsx("button",{onClick:()=>i(!r),className:"p-2 rounded-lg bg-gray-100 dark:bg-[#27272A] text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-[#3F3F46] transition-colors border border-gray-200 dark:border-gray-800",title:"Toggle Theme",children:r?"":""}),u.jsx(li,{to:"/editor",className:"btn btn-primary text-xs md:text-sm px-3 md:px-4",children:u.jsxs("span",{className:"flex items-center gap-1 md:gap-2",children:[u.jsx("svg",{className:"w-3 h-3 md:w-4 md:h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),u.jsx("span",{className:"hidden sm:inline",children:"New Resume"}),u.jsx("span",{className:"sm:hidden",children:"New"})]})}),u.jsxs("div",{className:"hidden md:flex items-center gap-3 ml-2 pl-4 border-l border-gray-200 dark:border-gray-800",children:[u.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400 truncate max-w-[120px] lg:max-w-[180px]",children:e.email}),u.jsx("button",{onClick:t,className:"text-sm text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200 transition-smooth font-medium",children:"Sign out"})]}),u.jsx("button",{onClick:()=>l(!a),className:"lg:hidden p-2 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors",children:u.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a?u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}):u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})]})})]}),a&&u.jsx("div",{className:"lg:hidden absolute top-full inset-x-0 bg-white dark:bg-[#18181B] border-b border-gray-200 dark:border-gray-800 shadow-xl overflow-hidden animate-slideDown z-40",children:u.jsxs("div",{className:"flex flex-col p-4 space-y-4",children:[u.jsx(d,{}),u.jsxs(li,{to:"/downloads",onClick:()=>l(!1),className:`text-sm font-medium transition-smooth flex items-center gap-1 ${s.pathname==="/downloads"?"text-gray-900 dark:text-gray-50":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"}`,children:[u.jsx("span",{className:"text-xs",children:""})," Downloads"]}),u.jsxs("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-800",children:[u.jsx("p",{className:"text-xs text-gray-500 mb-2",children:e==null?void 0:e.email}),u.jsx("button",{onClick:()=>{l(!1),t()},className:"w-full text-left text-sm font-medium text-red-500 py-2",children:"Sign out"})]})]})})]}),u.jsx("main",{className:"max-w-7xl mx-auto px-4 md:px-6 py-8 pb-20",children:n||u.jsx(eR,{})}),u.jsx("footer",{className:"border-t border-gray-200 dark:border-gray-800 bg-white dark:bg-[#18181B] py-4 fixed bottom-0 left-0 right-0 z-30",children:u.jsxs("div",{className:"max-w-7xl mx-auto px-6 flex flex-row justify-between items-center text-sm",children:[u.jsx("div",{className:"flex items-center gap-2",children:u.jsx("span",{className:"font-semibold text-gray-900 dark:text-gray-50",children:"DecisiveML"})}),u.jsxs("p",{className:"text-gray-500 dark:text-gray-400 text-xs",children:["By ",u.jsx("span",{className:"font-medium",children:"Rachit"})]})]})})]})}const sD="modulepreload",rD=function(n){return"/"+n},tA={},V2=function(e,t,s){let r=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));r=Promise.allSettled(t.map(c=>{if(c=rD(c),c in tA)return;tA[c]=!0;const d=c.endsWith(".css"),h=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${h}`))return;const f=document.createElement("link");if(f.rel=d?"stylesheet":sD,d||(f.as="script"),f.crossOrigin="",f.href=c,l&&f.setAttribute("nonce",l),document.head.appendChild(f),d)return new Promise((p,m)=>{f.addEventListener("load",p),f.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return r.then(a=>{for(const l of a||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})};var Ao;(function(n){n.Documents="DOCUMENTS",n.Data="DATA",n.Library="LIBRARY",n.Cache="CACHE",n.External="EXTERNAL",n.ExternalStorage="EXTERNAL_STORAGE"})(Ao||(Ao={}));var nA;(function(n){n.UTF8="utf8",n.ASCII="ascii",n.UTF16="utf16"})(nA||(nA={}));const Is=gy("Filesystem",{web:()=>V2(()=>import("./web-Cki4aXyE.js"),[]).then(n=>new n.FilesystemWeb)}),Sc="/api/resumes",Gi={getAll:async()=>(await xe.get(Sc)).data,getById:async n=>(await xe.get(`${Sc}/${n}`)).data,create:async n=>(await xe.post(Sc,n)).data,update:async(n,e)=>(await xe.put(`${Sc}/${n}`,e)).data,delete:async n=>{await xe.delete(`${Sc}/${n}`)},chatWithAi:async(n,e)=>(await xe.post("/api/ai/chat",{currentResume:n,message:e})).data,exportPdfFromPreview:async(n,e="resume.pdf")=>new Promise(async(t,s)=>{try{let r="";const i=document.querySelectorAll('link[rel="stylesheet"], style');for(const p of i)if(p.tagName.toLowerCase()==="link")try{if(p.href){const v=await(await fetch(p.href)).text();r+=`<style>${v}</style>`}}catch(m){console.warn("Could not fetch style:",p.href,m),r+=p.outerHTML}else r+=p.outerHTML;const a=n.cloneNode(!0);a.querySelectorAll('[class*="toast"], [class*="notification"]').forEach(p=>p.remove());const c=`
            <!DOCTYPE html>
            <html>
            <head>
                <meta charset="utf-8">
                <meta name="viewport" content="width=device-width, initial-scale=1">
                ${r}
                <style>
                    body {
                        background: white !important;
                        margin: 0 !important;
                        padding: 0 !important;
                        -webkit-print-color-adjust: exact;
                        print-color-adjust: exact;
                    }
                    /* Ensure Single Page behavior visually */
                    .resume-page {
                        margin: 0 auto !important;
                        box-shadow: none !important;
                    }
                </style>
            </head>
            <body>
                ${a.outerHTML}
            </body>
            </html>
        `,h=(await xe.post("/api/resumes/pdf/export",{html:c},{responseType:"blob"})).data,f=e||"resume.pdf";if(xr.isNativePlatform())try{if((await Is.checkPermissions()).publicStorage!=="granted"&&(await Is.requestPermissions()).publicStorage!=="granted")throw new Error("Storage permission denied");const m=new FileReader,v=await new Promise((x,A)=>{m.onloadend=()=>x(m.result.split(",")[1]),m.onerror=A,m.readAsDataURL(h)});try{await Is.writeFile({path:f,data:v,directory:Ao.Documents,recursive:!0}),alert(`PDF saved successfully to Documents/${f}`),t(!0)}catch(x){console.warn("Overwrite failed, trying unique name:",x);const A=f.replace(".pdf",`_${Date.now()}.pdf`);await Is.writeFile({path:A,data:v,directory:Ao.Documents,recursive:!0}),alert(`PDF saved successfully to Documents/${A}`),t(!0)}}catch(p){console.error("Native Save Error:",p),alert(`Failed to save PDF: ${p.message}`),s(p)}else{const p=window.URL.createObjectURL(h),m=document.createElement("a");m.href=p,m.setAttribute("download",f),document.body.appendChild(m),m.click(),setTimeout(()=>{m.remove(),window.URL.revokeObjectURL(p)},1e3),t(!0)}}catch(r){console.error("PDF Export Error:",r),alert(`Failed to generate PDF: ${r.message||"Unknown error"}`),s(r)}}),exportPdf:async(n,e)=>{try{const t=e?`?template=${e}`:"",s=await xe.get(`${Sc}/${n}/pdf${t}`,{responseType:"blob"});if(!s.data||s.data.size===0)throw new Error("Received empty PDF file from server");const r=s.headers["content-type"];if(r&&!r.includes("pdf"))throw new Error(`Expected PDF but received: ${r}`);const i=`resume-${n}.pdf`;if(xr.isNativePlatform())try{if((await Is.checkPermissions()).publicStorage!=="granted"&&(await Is.requestPermissions()).publicStorage!=="granted")throw new Error("Storage permission denied");const l=new FileReader,c=await new Promise((h,f)=>{l.onloadend=()=>h(l.result.split(",")[1]),l.onerror=f,l.readAsDataURL(s.data)}),d=await Is.writeFile({path:i,data:c,directory:Ao.Documents,recursive:!0});return alert(`PDF saved successfully to Documents/${i}`),d}catch(a){throw console.error(a),new Error("Failed to save PDF: "+a.message)}else{const a=window.URL.createObjectURL(new Blob([s.data],{type:"application/pdf"})),l=document.createElement("a");l.href=a,l.setAttribute("download",i),document.body.appendChild(l),l.click(),setTimeout(()=>{l.remove(),window.URL.revokeObjectURL(a)},100)}}catch(t){throw console.error("PDF Export Error:",t),t.response?new Error(`Server error: ${t.response.status}`):t.request?new Error("No response from server"):t}}},iD="/api/upload",aD={parseResume:async n=>{const e=new FormData;return e.append("file",n),(await Fe.post(`${iD}/parse`,e,{headers:{"Content-Type":"multipart/form-data"}})).data}};function oD(){const[n,e]=j.useState(!1),[t,s]=j.useState(!1),[r,i]=j.useState(""),a=j.useRef(null),l=ks(),c=m=>{m.preventDefault(),e(!0)},d=m=>{m.preventDefault(),e(!1)},h=m=>{m.preventDefault(),e(!1);const v=m.dataTransfer.files[0];v&&p(v)},f=m=>{const v=m.target.files[0];v&&p(v)},p=async m=>{var b,g;const v=[".pdf",".docx",".doc"],A=m.name.toLowerCase().slice(m.name.lastIndexOf("."));if(!v.includes(A)){i("Please upload a PDF or DOCX file");return}if(m.size>1048576){const w=(m.size/1048576).toFixed(2);i(`File size (${w} MB) exceeds the 1 MB limit. Please upload a smaller file or compress your resume.`);return}s(!0),i("");try{const w=await aD.parseResume(m);if(!w||!w.fullName&&!w.email&&!w.phone){i(" This file doesn't appear to be a resume/CV. Please upload a valid resume with your contact information."),s(!1);return}l("/editor",{state:{parsedResume:w,fromUpload:!0}})}catch(w){const S=((g=(b=w.response)==null?void 0:b.data)==null?void 0:g.error)||"Failed to parse resume. Please try again.";i(S.includes("resume")||S.includes("CV")?S:" Unable to parse this file. Please ensure it's a valid resume/CV document.")}finally{s(!1)}};return u.jsxs("div",{onDragOver:c,onDragLeave:d,onDrop:h,onClick:()=>{var m;return(m=a.current)==null?void 0:m.click()},className:`relative border-2 border-dashed rounded-2xl p-4 md:p-8 text-center cursor-pointer transition-all ${n?"border-gray-900 dark:border-white bg-gray-50 dark:bg-white/10":"border-gray-300 dark:border-gray-700 hover:border-gray-400 dark:hover:border-gray-500 hover:bg-gray-50 dark:hover:bg-gray-800/30"} ${t?"pointer-events-none opacity-60":""}`,children:[u.jsx("input",{ref:a,type:"file",accept:".pdf,.docx,.doc",onChange:f,className:"hidden"}),t?u.jsxs("div",{className:"space-y-4",children:[u.jsx("div",{className:"w-12 h-12 mx-auto border-3 border-gray-900 dark:border-white border-t-transparent rounded-full animate-spin"}),u.jsx("p",{className:"text-gray-700 dark:text-gray-300 font-medium",children:"Analyzing your resume..."})]}):u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"w-16 h-16 mx-auto rounded-2xl bg-gray-900 dark:bg-gray-800 flex items-center justify-center mb-4",children:u.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})})}),u.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-50 mb-2",children:"Upload Your Resume"}),u.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm mb-4",children:"Drag & drop your PDF or DOCX file here, or click to browse"}),u.jsxs("div",{className:"flex items-center justify-center gap-4 text-xs text-gray-500 dark:text-gray-500",children:[u.jsxs("span",{className:"flex items-center gap-1",children:[u.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:u.jsx("path",{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4z",clipRule:"evenodd"})}),"PDF"]}),u.jsxs("span",{className:"flex items-center gap-1",children:[u.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:u.jsx("path",{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4z",clipRule:"evenodd"})}),"DOCX"]}),u.jsx("span",{className:"text-gray-400 dark:text-gray-600",children:""}),u.jsx("span",{children:"Max 1 MB"})]})]}),r&&u.jsx("div",{className:"mt-4 p-3 rounded-lg bg-red-50 border border-red-200 dark:bg-red-500/10 dark:border-red-500/20 text-red-600 dark:text-red-400 text-sm",children:r})]})}const sA="/api/samples",rA={getAll:async()=>(await Fe.get(sA)).data,getByProfession:async n=>(await Fe.get(`${sA}/${n}`)).data};function lD(){const[n,e]=j.useState([]),[t,s]=j.useState(!0),[r,i]=j.useState("all"),a=ks();j.useEffect(()=>{l()},[]);const l=async()=>{try{const f=await rA.getAll();e(f)}catch(f){console.error("Failed to load samples:",f)}finally{s(!1)}},c=async f=>{try{const p=await rA.getByProfession(f);a("/editor",{state:{sample:p,useSample:!0}})}catch(p){console.error("Failed to load sample:",p)}},d=["all",...new Set(n.map(f=>f.category))],h=r==="all"?n:n.filter(f=>f.category===r);return t?u.jsx("div",{className:"flex items-center justify-center h-32",children:u.jsx("div",{className:"w-6 h-6 border-2 border-black dark:border-white border-t-transparent rounded-full animate-spin"})}):u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-50",children:"Professional Samples"}),u.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 dark:text-gray-400",children:"Start with a pre-built resume"})]}),u.jsx("div",{className:"flex gap-2 overflow-x-auto invisible-scrollbar pb-2 whitespace-nowrap min-w-full",children:d.map(f=>u.jsx("button",{onClick:()=>i(f),className:`px-4 py-2 rounded-lg text-sm font-medium transition-smooth ${r===f?"bg-black dark:bg-white text-white dark:text-black":"bg-gray-50 dark:bg-[#27272A] text-gray-700 dark:text-gray-300 dark:text-gray-400 hover:bg-gray-100 dark:bg-[#27272A] hover:text-gray-900 dark:text-gray-100"}`,children:f==="all"?"All Professions":f},f))}),u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 lg:grid-cols-5 gap-3 md:gap-4",children:h.map(f=>u.jsxs("button",{onClick:()=>c(f.id),className:"group p-4 bg-white dark:bg-[#18181B] border border-gray-200 dark:border-gray-800 rounded-xl text-left hover:border-black dark:border-white/50 hover:bg-white dark:bg-[#18181B] transition-all hover:scale-105",children:[u.jsx("div",{className:"text-3xl mb-3",children:f.icon}),u.jsx("h3",{className:"font-medium text-gray-900 dark:text-gray-100 text-sm group-hover:text-black dark:text-white transition-colors",children:f.title}),u.jsx("p",{className:"text-xs text-gray-700 dark:text-gray-300 dark:text-gray-400 mt-1",children:f.category})]},f.id))})]})}function cD(){const[n,e]=j.useState([]),[t,s]=j.useState(!0),[r,i]=j.useState("samples"),a=ks();j.useEffect(()=>{l()},[]);const l=async()=>{try{const h=await Gi.getAll();e(h)}catch(h){console.error("Failed to load resumes:",h)}finally{s(!1)}},c=async(h,f)=>{if(f.stopPropagation(),window.confirm("Delete this resume?"))try{await Gi.delete(h),e(n.filter(p=>p.id!==h))}catch(p){console.error("Failed to delete:",p)}},d=async(h,f,p)=>{p.stopPropagation();try{const m=p.currentTarget.innerHTML;p.currentTarget.innerHTML='<svg class="w-4 h-4 animate-spin" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>',await Gi.exportPdf(h,f),p.currentTarget.innerHTML=m,alert("PDF downloaded successfully!")}catch(m){console.error("Failed to export:",m),alert(`Failed to download PDF: ${m.message||"Unknown error"}. Please try again.`),p.currentTarget.innerHTML=p.currentTarget.innerHTML}};return t?u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"w-8 h-8 border-2 border-black dark:border-white border-t-transparent rounded-full animate-spin"})}):u.jsxs("div",{className:"space-y-8",children:[u.jsxs("div",{className:"text-center space-y-4 py-6",children:[u.jsxs("h1",{className:"font-display text-3xl md:text-5xl font-bold text-gray-900 dark:text-gray-50",children:["Build Your ",u.jsx("span",{className:"text-black dark:text-white",children:"Perfect Resume"})]}),u.jsx("p",{className:"text-gray-700 dark:text-gray-300 dark:text-gray-400 text-lg max-w-2xl mx-auto",children:"Upload your existing resume, use professional templates, or start from scratch. Our AI helps you create ATS-friendly resumes in minutes."})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[u.jsx("div",{className:"md:col-span-2",children:u.jsx(oD,{})}),u.jsxs("div",{className:"space-y-4",children:[u.jsx(li,{to:"/templates",className:"block p-5 bg-gradient-to-br from-black/10 to-gray-500/10 border border-black dark:border-white/20 rounded-xl hover:border-black dark:border-white/40 transition-smooth group",children:u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("div",{className:"w-12 h-12 rounded-xl bg-black dark:bg-white/20 flex items-center justify-center group-hover:bg-black dark:bg-white/30 transition-smooth",children:u.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 5a1 1 0 011-1h14a1 1 0 011 1v2a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM4 13a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H5a1 1 0 01-1-1v-6zM16 13a1 1 0 011-1h2a1 1 0 011 1v6a1 1 0 01-1 1h-2a1 1 0 01-1-1v-6z"})})}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-50",children:"Browse Templates"}),u.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 dark:text-gray-400",children:"11 designs, country-specific"})]})]})}),u.jsx(li,{to:"/editor",className:"block p-5 bg-white dark:bg-[#18181B] border border-gray-200 dark:border-gray-800 rounded-xl hover:border-gray-300 dark:border-gray-700 transition-smooth group",children:u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("div",{className:"w-12 h-12 rounded-xl bg-gray-100 dark:bg-[#27272A] flex items-center justify-center group-hover:bg-gray-700 transition-smooth",children:u.jsx("svg",{className:"w-6 h-6 text-gray-700 dark:text-gray-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-50",children:"Start from Scratch"}),u.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 dark:text-gray-400",children:"Create a blank resume"})]})]})})]})]}),u.jsx("div",{className:"border-b border-gray-200 dark:border-gray-800 overflow-x-auto invisible-scrollbar",children:u.jsxs("div",{className:"flex gap-4 md:gap-8 whitespace-nowrap min-w-max pb-px",children:[u.jsx("button",{onClick:()=>i("samples"),className:`pb-3 text-sm font-medium border-b-2 transition-smooth ${r==="samples"?"border-black dark:border-white text-black dark:text-white":"border-transparent text-gray-700 dark:text-gray-300 dark:text-gray-400 hover:text-gray-900 dark:text-gray-100"}`,children:"Professional Samples"}),u.jsxs("button",{onClick:()=>i("myresumes"),className:`pb-3 text-sm font-medium border-b-2 transition-smooth ${r==="myresumes"?"border-black dark:border-white text-black dark:text-white":"border-transparent text-gray-700 dark:text-gray-300 dark:text-gray-400 hover:text-gray-900 dark:text-gray-100"}`,children:["My Resumes (",n.length,")"]})]})}),r==="samples"?u.jsx(lD,{}):u.jsx(u.Fragment,{children:n.length===0?u.jsxs("div",{className:"text-center py-16 space-y-6",children:[u.jsx("div",{className:"w-20 h-20 mx-auto rounded-2xl bg-gray-50 dark:bg-[#27272A] flex items-center justify-center",children:u.jsx("svg",{className:"w-10 h-10 text-gray-700 dark:text-gray-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("h3",{className:"text-xl font-medium text-gray-900 dark:text-gray-100",children:"No resumes yet"}),u.jsx("p",{className:"text-gray-700 dark:text-gray-300 dark:text-gray-400",children:"Upload a resume or use a professional sample to get started"})]})]}):u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-5",children:n.map(h=>{var f,p,m,v;return u.jsxs("div",{onClick:()=>a(`/editor/${h.id}`),className:`group w-full overflow-hidden bg-white dark:bg-[#18181B] border border-gray-200 dark:border-gray-800 rounded-xl p-4 cursor-pointer 
                             hover:border-gray-300 dark:border-gray-700 hover:bg-white dark:bg-[#18181B] transition-smooth`,children:[u.jsxs("div",{className:"flex items-start justify-between mb-4",children:[u.jsx("div",{className:"w-12 h-12 rounded-lg bg-black dark:bg-white/10 flex items-center justify-center",children:u.jsx("span",{className:"text-white font-display font-bold text-lg",children:((f=h.fullName)==null?void 0:f.charAt(0))||"?"})}),u.jsxs("div",{className:"flex items-center gap-1 md:opacity-0 group-hover:opacity-100 transition-smooth",children:[u.jsx("button",{onClick:x=>d(h.id,h.template,x),className:"p-2 rounded-lg hover:bg-gray-100 dark:bg-[#27272A] text-gray-700 dark:text-gray-300 dark:text-gray-400 hover:text-black dark:text-white",title:"Export PDF",children:u.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})})}),u.jsx("button",{onClick:x=>c(h.id,x),className:"p-2 rounded-lg hover:bg-red-500/10 text-gray-700 dark:text-gray-300 dark:text-gray-400 hover:text-red-400",title:"Delete",children:u.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),u.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-50 mb-1 truncate",children:h.fullName}),u.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 dark:text-gray-400 truncate",children:h.email||"No email"}),((p=h.skills)==null?void 0:p.length)>0&&u.jsxs("div",{className:"flex flex-wrap gap-1.5 mt-4",children:[h.skills.slice(0,3).map((x,A)=>u.jsx("span",{className:"text-xs px-2 py-1 rounded-md bg-gray-100 dark:bg-[#27272A] text-gray-700 dark:text-gray-300 dark:text-gray-400",children:x},A)),h.skills.length>3&&u.jsxs("span",{className:"text-xs px-2 py-1 text-gray-700 dark:text-gray-300 dark:text-gray-400",children:["+",h.skills.length-3]})]}),u.jsxs("div",{className:"flex items-center justify-between mt-4 pt-4 border-t border-gray-200 dark:border-gray-800",children:[u.jsxs("span",{className:"text-xs text-gray-700 dark:text-gray-300 capitalize",children:[h.template," template"]}),u.jsxs("span",{className:"text-xs text-gray-700 dark:text-gray-300",children:[((m=h.experience)==null?void 0:m.length)||0," exp  ",((v=h.education)==null?void 0:v.length)||0," edu"]})]})]},h.id)})})})]})}function dD({resume:n,onChange:e}){const[t,s]=j.useState("personal"),r=(g,w)=>{e({...n,[g]:w})},i=()=>{e({...n,experience:[...n.experience||[],{company:"",position:"",startDate:"",endDate:"",description:"",highlights:[],serviceBased:!1,clientProjects:[]}]})},a=(g,w,S)=>{const C=[...n.experience];C[g]={...C[g],[w]:S},e({...n,experience:C})},l=g=>{e({...n,experience:n.experience.filter((w,S)=>S!==g)})},c=g=>{const w=[...n.experience],S=w[g].clientProjects||[];w[g]={...w[g],clientProjects:[...S,{clientName:"",projectName:"",role:"",startDate:"",endDate:"",description:"",highlights:[]}]},e({...n,experience:w})},d=(g,w,S,C)=>{const N=[...n.experience],_=[...N[g].clientProjects];_[w]={..._[w],[S]:C},N[g]={...N[g],clientProjects:_},e({...n,experience:N})},h=(g,w)=>{const S=[...n.experience];S[g]={...S[g],clientProjects:S[g].clientProjects.filter((C,N)=>N!==w)},e({...n,experience:S})},f=()=>{e({...n,education:[...n.education||[],{institution:"",degree:"",field:"",startDate:"",endDate:"",gpa:""}]})},p=(g,w,S)=>{const C=[...n.education];C[g]={...C[g],[w]:S},e({...n,education:C})},m=g=>{e({...n,education:n.education.filter((w,S)=>S!==g)})},v=()=>{e({...n,projects:[...n.projects||[],{name:"",description:"",url:"",technologies:[]}]})},x=(g,w,S)=>{const C=[...n.projects];C[g]={...C[g],[w]:S},e({...n,projects:C})},A=g=>{e({...n,projects:n.projects.filter((w,S)=>S!==g)})},b=[{id:"personal",label:"Personal",icon:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"},{id:"experience",label:"Experience",icon:"M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"},{id:"education",label:"Education",icon:"M12 14l9-5-9-5-9 5 9 5zm0 0l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14zm-4 6v-7.5l4-2.222"},{id:"skills",label:"Skills",icon:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"},{id:"projects",label:"Projects",icon:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"}];return u.jsxs("div",{className:"bg-white dark:bg-[#18181B] border border-gray-200 dark:border-gray-800 rounded-xl overflow-hidden shadow-sm",children:[u.jsx("div",{className:"flex overflow-x-auto border-b border-gray-200 dark:border-gray-800 bg-gray-50 dark:bg-[#27272A]",children:b.map(g=>u.jsxs("button",{onClick:()=>s(g.id),className:`flex items-center gap-2 px-4 py-3 text-sm font-medium whitespace-nowrap transition-smooth border-b-2 ${t===g.id?"border-gray-900 dark:border-gray-50 text-gray-900 dark:text-gray-50 bg-white dark:bg-[#18181B]":"border-transparent text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200 hover:bg-white/50 dark:hover:bg-[#18181B]/50"}`,children:[u.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:g.icon})}),g.label]},g.id))}),u.jsxs("div",{className:"p-6 space-y-5 max-h-[calc(100vh-300px)] overflow-y-auto",children:[t==="personal"&&u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-50 mb-2",children:"Full Name *"}),u.jsx("input",{type:"text",value:n.fullName,onChange:g=>r("fullName",g.target.value),placeholder:"John Doe",className:"w-full"})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-50 mb-2",children:"Email"}),u.jsx("input",{type:"email",value:n.email||"",onChange:g=>r("email",g.target.value),placeholder:"john@example.com",className:"w-full"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-50 mb-2",children:"Phone"}),u.jsx("input",{type:"tel",value:n.phone||"",onChange:g=>r("phone",g.target.value),placeholder:"+1 234 567 8900",className:"w-full"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-50 mb-2",children:"Location"}),u.jsx("input",{type:"text",value:n.location||"",onChange:g=>r("location",g.target.value),placeholder:"New York, NY",className:"w-full"})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-50 mb-2",children:"LinkedIn"}),u.jsx("input",{type:"url",value:n.linkedIn||"",onChange:g=>r("linkedIn",g.target.value),placeholder:"linkedin.com/in/johndoe",className:"w-full"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-50 mb-2",children:"GitHub"}),u.jsx("input",{type:"url",value:n.github||"",onChange:g=>r("github",g.target.value),placeholder:"github.com/johndoe",className:"w-full"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-50 mb-2",children:"Website"}),u.jsx("input",{type:"url",value:n.website||"",onChange:g=>r("website",g.target.value),placeholder:"johndoe.com",className:"w-full"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-50 mb-2",children:"Professional Summary"}),u.jsx("textarea",{value:n.summary||"",onChange:g=>r("summary",g.target.value),placeholder:"A brief summary of your professional background and goals...",rows:4,className:"w-full resize-none"})]})]}),t==="experience"&&u.jsxs("div",{className:"space-y-5",children:[(n.experience||[]).map((g,w)=>u.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-[#27272A] rounded-lg border border-gray-200 dark:border-gray-800 space-y-4",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:["Experience ",w+1]}),u.jsx("button",{onClick:()=>l(w),className:"p-1.5 text-gray-500 hover:text-red-400 hover:bg-red-400/10 rounded transition-smooth",children:u.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs text-gray-700 dark:text-gray-300 mb-1.5",children:"Company"}),u.jsx("input",{type:"text",value:g.company,onChange:S=>a(w,"company",S.target.value),placeholder:"Company Name",className:"w-full text-sm"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs text-gray-700 dark:text-gray-300 mb-1.5",children:"Position"}),u.jsx("input",{type:"text",value:g.position,onChange:S=>a(w,"position",S.target.value),placeholder:"Job Title",className:"w-full text-sm"})]})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs text-gray-700 dark:text-gray-300 mb-1.5",children:"Start Date"}),u.jsx("input",{type:"text",value:g.startDate,onChange:S=>a(w,"startDate",S.target.value),placeholder:"Jan 2022",className:"w-full text-sm"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs text-gray-700 dark:text-gray-300 mb-1.5",children:"End Date"}),u.jsx("input",{type:"text",value:g.endDate||"",onChange:S=>a(w,"endDate",S.target.value),placeholder:"Present",className:"w-full text-sm"})]})]}),u.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-100 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:[u.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:g.serviceBased||!1,onChange:S=>a(w,"serviceBased",S.target.checked),className:"sr-only peer"}),u.jsx("div",{className:"w-9 h-5 bg-gray-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-black dark:bg-white"})]}),u.jsxs("div",{children:[u.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-200",children:"Service-Based Company"}),u.jsx("p",{className:"text-xs text-gray-500",children:"Enable for consulting firms (TCS, Cognizant, Accenture, etc.)"})]})]}),!g.serviceBased&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs text-gray-700 dark:text-gray-300 mb-1.5",children:"Description"}),u.jsx("textarea",{value:g.description||"",onChange:S=>a(w,"description",S.target.value),placeholder:"Brief job description...",rows:2,className:"w-full text-sm resize-none"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs text-gray-700 dark:text-gray-300 mb-1.5",children:"Key Highlights (one per line)"}),u.jsx("textarea",{value:(g.highlights||[]).join(`
`),onChange:S=>a(w,"highlights",S.target.value.split(`
`).filter(C=>C.trim())),placeholder:`Achieved 20% increase in sales
Led team of 5 developers
Implemented new CI/CD pipeline`,rows:3,className:"w-full text-sm resize-none"})]})]}),g.serviceBased&&u.jsxs("div",{className:"space-y-4 mt-4",children:[u.jsx("div",{className:"flex items-center justify-between",children:u.jsxs("h4",{className:"text-sm font-medium text-black dark:text-white flex items-center gap-2",children:[u.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),"Client Projects"]})}),(g.clientProjects||[]).map((S,C)=>u.jsxs("div",{className:"p-3 bg-gray-100 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 space-y-3",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("span",{className:"text-xs font-medium text-gray-900 dark:text-gray-100",children:["Client ",C+1]}),u.jsx("button",{onClick:()=>h(w,C),className:"p-1 text-gray-500 hover:text-red-400 hover:bg-red-400/10 rounded transition-smooth",children:u.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs text-gray-700 dark:text-gray-300 mb-1.5",children:"Client Name"}),u.jsx("input",{type:"text",value:S.clientName||"",onChange:N=>d(w,C,"clientName",N.target.value),placeholder:"e.g., Verizon",className:"w-full text-sm"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs text-gray-700 dark:text-gray-300 mb-1.5",children:"Project Name"}),u.jsx("input",{type:"text",value:S.projectName||"",onChange:N=>d(w,C,"projectName",N.target.value),placeholder:"e.g., Network Automation",className:"w-full text-sm"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs text-gray-700 dark:text-gray-300 mb-1.5",children:"Role at Client"}),u.jsx("input",{type:"text",value:S.role||"",onChange:N=>d(w,C,"role",N.target.value),placeholder:"e.g., Senior Developer",className:"w-full text-sm"})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs text-gray-700 dark:text-gray-300 mb-1.5",children:"Start Date"}),u.jsx("input",{type:"text",value:S.startDate||"",onChange:N=>d(w,C,"startDate",N.target.value),placeholder:"Jan 2022",className:"w-full text-sm"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs text-gray-700 dark:text-gray-300 mb-1.5",children:"End Date"}),u.jsx("input",{type:"text",value:S.endDate||"",onChange:N=>d(w,C,"endDate",N.target.value),placeholder:"Dec 2023",className:"w-full text-sm"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs text-gray-700 dark:text-gray-300 mb-1.5",children:"Key Highlights (one per line)"}),u.jsx("textarea",{value:(S.highlights||[]).join(`
`),onChange:N=>d(w,C,"highlights",N.target.value.split(`
`).filter(_=>_.trim())),placeholder:`Built microservices architecture
Reduced API response time by 40%`,rows:3,className:"w-full text-sm resize-none"})]})]},C)),u.jsxs("button",{onClick:()=>c(w),className:"w-full py-2 px-3 text-xs font-medium text-black dark:text-white border border-black dark:border-white/30 rounded-lg hover:bg-black dark:bg-white/10 transition-smooth flex items-center justify-center gap-2",children:[u.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add Client Project"]})]})]},w)),u.jsx("button",{onClick:i,className:"w-full btn btn-secondary text-sm",children:u.jsxs("span",{className:"flex items-center justify-center gap-2",children:[u.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add Experience"]})})]}),t==="education"&&u.jsxs("div",{className:"space-y-5",children:[(n.education||[]).map((g,w)=>u.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-[#27272A] rounded-lg border border-gray-200 dark:border-gray-800 space-y-4",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:["Education ",w+1]}),u.jsx("button",{onClick:()=>m(w),className:"p-1.5 text-gray-500 hover:text-red-400 hover:bg-red-400/10 rounded transition-smooth",children:u.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs text-gray-700 dark:text-gray-300 mb-1.5",children:"Institution"}),u.jsx("input",{type:"text",value:g.institution,onChange:S=>p(w,"institution",S.target.value),placeholder:"University Name",className:"w-full text-sm"})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs text-gray-700 dark:text-gray-300 mb-1.5",children:"Degree"}),u.jsx("input",{type:"text",value:g.degree,onChange:S=>p(w,"degree",S.target.value),placeholder:"Bachelor's",className:"w-full text-sm"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs text-gray-700 dark:text-gray-300 mb-1.5",children:"Field of Study"}),u.jsx("input",{type:"text",value:g.field,onChange:S=>p(w,"field",S.target.value),placeholder:"Computer Science",className:"w-full text-sm"})]})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs text-gray-700 dark:text-gray-300 mb-1.5",children:"Start Date"}),u.jsx("input",{type:"text",value:g.startDate,onChange:S=>p(w,"startDate",S.target.value),placeholder:"2018",className:"w-full text-sm"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs text-gray-700 dark:text-gray-300 mb-1.5",children:"End Date"}),u.jsx("input",{type:"text",value:g.endDate||"",onChange:S=>p(w,"endDate",S.target.value),placeholder:"2022",className:"w-full text-sm"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs text-gray-700 dark:text-gray-300 mb-1.5",children:"GPA"}),u.jsx("input",{type:"text",value:g.gpa||"",onChange:S=>p(w,"gpa",S.target.value),placeholder:"3.8",className:"w-full text-sm"})]})]})]},w)),u.jsx("button",{onClick:f,className:"w-full btn btn-secondary text-sm",children:u.jsxs("span",{className:"flex items-center justify-center gap-2",children:[u.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add Education"]})})]}),t==="skills"&&u.jsxs("div",{className:"space-y-5",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-50 mb-2",children:"Skills (one per line)"}),u.jsx("textarea",{value:(n.skills||[]).join(`
`),onChange:g=>r("skills",g.target.value.split(`
`).filter(w=>w.trim())),placeholder:`JavaScript
React
Node.js
Python
SQL`,rows:8,className:"w-full resize-none"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-50 mb-2",children:"Certifications (one per line)"}),u.jsx("textarea",{value:(n.certifications||[]).join(`
`),onChange:g=>r("certifications",g.target.value.split(`
`).filter(w=>w.trim())),placeholder:`AWS Solutions Architect
Google Cloud Professional
PMP Certification`,rows:4,className:"w-full resize-none"})]})]}),t==="projects"&&u.jsxs("div",{className:"space-y-5",children:[(n.projects||[]).map((g,w)=>u.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-[#27272A] rounded-lg border border-gray-200 dark:border-gray-800 space-y-4",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:["Project ",w+1]}),u.jsx("button",{onClick:()=>A(w),className:"p-1.5 text-gray-500 hover:text-red-400 hover:bg-red-400/10 rounded transition-smooth",children:u.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs text-gray-700 dark:text-gray-300 mb-1.5",children:"Project Name"}),u.jsx("input",{type:"text",value:g.name,onChange:S=>x(w,"name",S.target.value),placeholder:"My Awesome Project",className:"w-full text-sm"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs text-gray-700 dark:text-gray-300 mb-1.5",children:"Description"}),u.jsx("textarea",{value:g.description||"",onChange:S=>x(w,"description",S.target.value),placeholder:"Brief project description...",rows:2,className:"w-full text-sm resize-none"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs text-gray-700 dark:text-gray-300 mb-1.5",children:"Project URL"}),u.jsx("input",{type:"url",value:g.url||"",onChange:S=>x(w,"url",S.target.value),placeholder:"https://github.com/...",className:"w-full text-sm"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs text-gray-700 dark:text-gray-300 mb-1.5",children:"Technologies (comma separated)"}),u.jsx("input",{type:"text",value:(g.technologies||[]).join(", "),onChange:S=>x(w,"technologies",S.target.value.split(",").map(C=>C.trim()).filter(C=>C)),placeholder:"React, Node.js, MongoDB",className:"w-full text-sm"})]})]},w)),u.jsx("button",{onClick:v,className:"w-full btn btn-secondary text-sm",children:u.jsxs("span",{className:"flex items-center justify-center gap-2",children:[u.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add Project"]})})]})]})]})}function uD({resume:n,enableCompression:e=!1}){const t=j.useRef(null),[s,r]=j.useState(!1),[i,a]=j.useState(0),l={modern:m0,classic:W2,minimal:G2,executive:q2,creative:X2,ats:K2,atsclean:Y2,atsbold:Q2,atscompact:J2,twocolumn:Z2,developer:eC},d=["atscompact","atsbold","atsclean","ats"].includes(n.template),h=e&&!d,f=l[n.template]||m0;j.useEffect(()=>{if(!h){if(t.current){const x=t.current.scrollHeight;r(x>1123),a(0)}return}if(t.current){const x=A=>{a(A),setTimeout(()=>{if(t.current){const b=t.current.scrollHeight;b>1123&&A<6?x(A+1):r(b>1123)}},50)};x(0)}},[n,h]);const m=(()=>{const v=[{fontSize:"10pt",lineHeight:"1.4",padding:"32px",sectionSpacing:"20px",itemSpacing:"12px"},{fontSize:"10pt",lineHeight:"1.35",padding:"28px",sectionSpacing:"16px",itemSpacing:"10px"},{fontSize:"9.5pt",lineHeight:"1.3",padding:"24px",sectionSpacing:"14px",itemSpacing:"8px"},{fontSize:"9pt",lineHeight:"1.25",padding:"20px",sectionSpacing:"12px",itemSpacing:"6px"},{fontSize:"8.5pt",lineHeight:"1.2",padding:"16px",sectionSpacing:"10px",itemSpacing:"5px"},{fontSize:"8pt",lineHeight:"1.15",padding:"14px",sectionSpacing:"8px",itemSpacing:"4px"},{fontSize:"7.5pt",lineHeight:"1.1",padding:"12px",sectionSpacing:"6px",itemSpacing:"3px"}];return v[i]||v[0]})();return u.jsx("div",{className:"space-y-4",children:u.jsx("div",{className:"bg-white rounded-none shadow-2xl overflow-hidden overflow-x-auto",children:u.jsx("div",{id:"resume-preview-content",ref:t,className:"resume-page resume-auto-fit",style:{width:"100%",maxWidth:"794px",minHeight:"1123px",margin:"0 auto",padding:h&&i>0?m.padding:"32px",...h&&i>0?{fontSize:m.fontSize,lineHeight:m.lineHeight,"--section-spacing":m.sectionSpacing,"--item-spacing":m.itemSpacing}:{}},children:u.jsx(f,{resume:n})})})})}function Qu({exp:n,bulletStyle:e="",showBorder:t=!1}){var i,a;const s=((i=n.highlights)==null?void 0:i.length)>0,r=n.serviceBased&&((a=n.clientProjects)==null?void 0:a.length)>0;return u.jsxs("div",{className:`mb-4 last:mb-0 break-inside-avoid page-break-inside-avoid ${t?"border-l-2 border-gray-200 pl-3":""}`,children:[u.jsxs("div",{className:"flex justify-between items-start flex-wrap gap-1",children:[u.jsxs("div",{children:[u.jsx("div",{className:"font-bold text-gray-900",children:n.position}),u.jsxs("div",{className:"text-gray-700",children:[n.company,n.location&&`, ${n.location}`]})]}),u.jsxs("span",{className:"text-gray-600 text-sm whitespace-nowrap",children:[n.startDate,"  ",n.endDate||"Present"]})]}),r?u.jsx("div",{className:"mt-2 space-y-3",children:n.clientProjects.map((l,c)=>{var d;return u.jsxs("div",{className:"ml-2 pl-3 border-l-2 border-gray-300",children:[u.jsxs("div",{className:"flex justify-between items-start flex-wrap gap-1",children:[u.jsxs("div",{children:[u.jsxs("span",{className:"font-semibold text-gray-800",children:["Client: ",l.clientName]}),l.projectName&&u.jsxs("span",{className:"text-gray-600",children:[" | ",l.projectName]})]}),u.jsxs("span",{className:"text-gray-500 text-sm",children:[l.startDate,"  ",l.endDate||"Present"]})]}),l.role&&u.jsx("div",{className:"text-gray-600 text-sm",children:l.role}),((d=l.highlights)==null?void 0:d.length)>0&&u.jsx("ul",{className:"mt-1 space-y-0.5",children:l.highlights.map((h,f)=>h&&u.jsxs("li",{className:"text-gray-700 text-sm",children:[e," ",h]},f))})]},c)})}):s&&u.jsx("ul",{className:"mt-2 space-y-1",children:n.highlights.map((l,c)=>l&&u.jsxs("li",{className:"text-gray-700 text-sm",children:[e," ",l]},c))})]})}function m0({resume:n}){var e,t,s,r,i;return u.jsxs("div",{className:"font-sans text-sm text-gray-800 leading-relaxed min-h-full",children:[u.jsxs("header",{className:"text-center mb-5 pb-4 border-b-2 border-blue-600",children:[u.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:n.fullName||"Your Name"}),u.jsxs("div",{className:"text-gray-600 text-sm space-x-2",children:[n.email&&u.jsx("span",{children:n.email}),n.phone&&u.jsxs("span",{children:["| ",n.phone]}),n.location&&u.jsxs("span",{children:["| ",n.location]})]}),(n.linkedIn||n.github||n.website)&&u.jsxs("div",{className:"text-gray-500 text-sm mt-1 space-x-2",children:[n.linkedIn&&u.jsx("span",{children:n.linkedIn}),n.github&&u.jsxs("span",{children:["| ",n.github]}),n.website&&u.jsxs("span",{children:["| ",n.website]})]})]}),n.summary&&u.jsxs("section",{className:"mb-5",children:[u.jsx("h2",{className:"text-sm font-bold text-gray-900 uppercase tracking-wide border-b border-gray-200 pb-1 mb-2",children:"Professional Summary"}),u.jsx("p",{className:"text-gray-700",children:n.summary})]}),((e=n.skills)==null?void 0:e.length)>0&&u.jsxs("section",{className:"mb-5",children:[u.jsx("h2",{className:"text-sm font-bold text-gray-900 uppercase tracking-wide border-b border-gray-200 pb-1 mb-2",children:"Technical Skills"}),u.jsx("p",{className:"text-gray-700",children:n.skills.join("  ")})]}),((t=n.experience)==null?void 0:t.length)>0&&u.jsxs("section",{className:"mb-5",children:[u.jsx("h2",{className:"text-sm font-bold text-gray-900 uppercase tracking-wide border-b border-gray-200 pb-1 mb-2",children:"Work Experience"}),n.experience.map((a,l)=>u.jsx(Qu,{exp:a,bulletStyle:""},l))]}),((s=n.education)==null?void 0:s.length)>0&&u.jsxs("section",{className:"mb-5",children:[u.jsx("h2",{className:"text-sm font-bold text-gray-900 uppercase tracking-wide border-b border-gray-200 pb-1 mb-2",children:"Education"}),n.education.map((a,l)=>u.jsxs("div",{className:"mb-3 last:mb-0 break-inside-avoid page-break-inside-avoid",children:[u.jsxs("div",{className:"flex justify-between items-start",children:[u.jsxs("div",{children:[u.jsxs("div",{className:"font-bold text-gray-900",children:[a.degree,a.field&&` in ${a.field}`]}),u.jsx("div",{className:"text-gray-700",children:a.institution})]}),u.jsxs("span",{className:"text-gray-600 text-sm",children:[a.startDate&&`${a.startDate}  `,a.endDate]})]}),a.gpa&&u.jsxs("div",{className:"text-gray-600 text-sm",children:["GPA: ",a.gpa]})]},l))]}),((r=n.projects)==null?void 0:r.length)>0&&u.jsxs("section",{className:"mb-5",children:[u.jsx("h2",{className:"text-sm font-bold text-gray-900 uppercase tracking-wide border-b border-gray-200 pb-1 mb-2",children:"Projects"}),n.projects.map((a,l)=>{var c;return u.jsxs("div",{className:"mb-3 last:mb-0",children:[u.jsx("div",{className:"font-bold text-gray-900",children:a.name}),a.description&&u.jsx("p",{className:"text-gray-700 text-sm",children:a.description}),((c=a.technologies)==null?void 0:c.length)>0&&u.jsxs("p",{className:"text-gray-600 text-sm",children:["Technologies: ",a.technologies.join(", ")]})]},l)})]}),((i=n.certifications)==null?void 0:i.length)>0&&u.jsxs("section",{children:[u.jsx("h2",{className:"text-sm font-bold text-gray-900 uppercase tracking-wide border-b border-gray-200 pb-1 mb-2",children:"Certifications"}),u.jsx("ul",{className:"space-y-1",children:n.certifications.map((a,l)=>u.jsxs("li",{className:"text-gray-700",children:[" ",a]},l))})]})]})}function W2({resume:n}){var e,t,s,r;return u.jsxs("div",{className:"font-serif text-sm text-gray-800 leading-relaxed min-h-full",children:[u.jsxs("header",{className:"text-center mb-6 pb-4 border-b-2 border-gray-800",children:[u.jsx("h1",{className:"text-3xl font-bold mb-2",children:n.fullName||"Your Name"}),u.jsx("div",{className:"text-gray-600",children:[n.email,n.phone,n.location].filter(Boolean).join(" | ")}),(n.linkedIn||n.github)&&u.jsx("div",{className:"text-gray-500 text-sm mt-1",children:[n.linkedIn,n.github,n.website].filter(Boolean).join(" | ")})]}),n.summary&&u.jsxs("section",{className:"mb-5",children:[u.jsx("h2",{className:"text-base font-bold uppercase border-b border-gray-400 pb-1 mb-2",children:"Professional Summary"}),u.jsx("p",{className:"text-gray-700 italic",children:n.summary})]}),((e=n.experience)==null?void 0:e.length)>0&&u.jsxs("section",{className:"mb-5",children:[u.jsx("h2",{className:"text-base font-bold uppercase border-b border-gray-400 pb-1 mb-2",children:"Professional Experience"}),n.experience.map((i,a)=>u.jsx(Qu,{exp:i,bulletStyle:""},a))]}),((t=n.education)==null?void 0:t.length)>0&&u.jsxs("section",{className:"mb-5",children:[u.jsx("h2",{className:"text-base font-bold uppercase border-b border-gray-400 pb-1 mb-2",children:"Education"}),n.education.map((i,a)=>u.jsxs("div",{className:"mb-2",children:[u.jsxs("div",{className:"flex justify-between",children:[u.jsxs("span",{className:"font-bold",children:[i.degree," in ",i.field]}),u.jsx("span",{className:"text-gray-600",children:i.endDate})]}),u.jsx("div",{className:"text-gray-700",children:i.institution}),i.gpa&&u.jsxs("div",{className:"text-gray-600 text-sm",children:["GPA: ",i.gpa]})]},a))]}),((s=n.skills)==null?void 0:s.length)>0&&u.jsxs("section",{className:"mb-5",children:[u.jsx("h2",{className:"text-base font-bold uppercase border-b border-gray-400 pb-1 mb-2",children:"Skills"}),u.jsx("p",{className:"text-gray-700",children:n.skills.join(", ")})]}),((r=n.certifications)==null?void 0:r.length)>0&&u.jsxs("section",{children:[u.jsx("h2",{className:"text-base font-bold uppercase border-b border-gray-400 pb-1 mb-2",children:"Certifications"}),u.jsx("p",{className:"text-gray-700",children:n.certifications.join(" | ")})]})]})}function G2({resume:n}){var e,t,s;return u.jsxs("div",{className:"font-sans text-sm text-gray-800 leading-relaxed",children:[u.jsxs("header",{className:"mb-8",children:[u.jsx("h1",{className:"text-2xl font-light tracking-wide mb-1",children:n.fullName||"Your Name"}),u.jsx("div",{className:"text-gray-500 text-sm",children:[n.email,n.phone,n.location].filter(Boolean).join(" / ")}),(n.linkedIn||n.github)&&u.jsx("div",{className:"text-gray-400 text-sm mt-1",children:[n.linkedIn,n.github].filter(Boolean).join(" / ")})]}),n.summary&&u.jsx("section",{className:"mb-8",children:u.jsx("p",{className:"text-gray-600 leading-relaxed",children:n.summary})}),((e=n.experience)==null?void 0:e.length)>0&&u.jsxs("section",{className:"mb-8",children:[u.jsx("h2",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-4",children:"Experience"}),n.experience.map((r,i)=>u.jsx(Qu,{exp:r,bulletStyle:""},i))]}),((t=n.education)==null?void 0:t.length)>0&&u.jsxs("section",{className:"mb-8",children:[u.jsx("h2",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-4",children:"Education"}),n.education.map((r,i)=>u.jsxs("div",{className:"mb-3",children:[u.jsxs("div",{className:"font-medium",children:[r.degree," in ",r.field]}),u.jsxs("div",{className:"text-gray-500 text-sm",children:[r.institution," / ",r.endDate]})]},i))]}),((s=n.skills)==null?void 0:s.length)>0&&u.jsxs("section",{children:[u.jsx("h2",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-4",children:"Skills"}),u.jsx("p",{className:"text-gray-600",children:n.skills.join(" / ")})]})]})}function q2({resume:n}){var e,t,s,r;return u.jsxs("div",{className:"font-sans text-sm text-gray-800 leading-relaxed min-h-full",children:[u.jsxs("header",{className:"bg-slate-800 text-white p-10 -m-10 mb-8 rounded-none",children:[u.jsx("h1",{className:"text-2xl font-bold tracking-wide mb-2",children:n.fullName||"Your Name"}),u.jsx("div",{className:"text-slate-300 text-sm",children:[n.email,n.phone,n.location].filter(Boolean).join(" | ")}),(n.linkedIn||n.github)&&u.jsx("div",{className:"text-slate-400 text-sm mt-1",children:[n.linkedIn,n.github,n.website].filter(Boolean).join(" | ")})]}),n.summary&&u.jsxs("section",{className:"mb-6 p-4 bg-slate-50 border-l-4 border-slate-800",children:[u.jsx("h2",{className:"text-sm font-bold text-slate-700 uppercase mb-2",children:"Executive Summary"}),u.jsx("p",{className:"text-gray-700",children:n.summary})]}),((e=n.skills)==null?void 0:e.length)>0&&u.jsxs("section",{className:"mb-6",children:[u.jsx("h2",{className:"text-sm font-bold text-slate-800 uppercase border-b-2 border-slate-800 pb-1 mb-3",children:"Core Competencies"}),u.jsx("div",{className:"flex flex-wrap gap-2",children:n.skills.map((i,a)=>u.jsx("span",{className:"inline-flex items-center justify-center leading-none px-3 py-1.5 bg-slate-100 text-slate-700 text-sm",children:i},a))})]}),((t=n.experience)==null?void 0:t.length)>0&&u.jsxs("section",{className:"mb-6",children:[u.jsx("h2",{className:"text-sm font-bold text-slate-800 uppercase border-b-2 border-slate-800 pb-1 mb-3",children:"Professional Experience"}),n.experience.map((i,a)=>u.jsx(Qu,{exp:i,bulletStyle:""},a))]}),((s=n.education)==null?void 0:s.length)>0&&u.jsxs("section",{className:"mb-6",children:[u.jsx("h2",{className:"text-sm font-bold text-slate-800 uppercase border-b-2 border-slate-800 pb-1 mb-3",children:"Education"}),n.education.map((i,a)=>u.jsxs("div",{className:"mb-2",children:[u.jsxs("div",{className:"font-semibold",children:[i.degree," in ",i.field]}),u.jsxs("div",{className:"text-gray-600",children:[i.institution," | ",i.endDate]})]},a))]}),((r=n.certifications)==null?void 0:r.length)>0&&u.jsxs("section",{children:[u.jsx("h2",{className:"text-sm font-bold text-slate-800 uppercase border-b-2 border-slate-800 pb-1 mb-3",children:"Certifications & Licenses"}),u.jsx("ul",{className:"space-y-1",children:n.certifications.map((i,a)=>u.jsxs("li",{className:"text-gray-700",children:[" ",i]},a))})]})]})}function X2({resume:n}){var e,t,s;return u.jsxs("div",{className:"font-sans text-sm text-gray-800 leading-relaxed min-h-full",children:[u.jsxs("header",{className:"bg-gradient-to-r from-purple-600 to-purple-500 text-white p-10 -m-10 mb-8 rounded-none",children:[u.jsx("h1",{className:"text-3xl font-black mb-2",children:n.fullName||"Your Name"}),u.jsx("div",{className:"text-purple-100 text-sm",children:[n.email,n.phone,n.location].filter(Boolean).join("  ")})]}),n.summary&&u.jsx("section",{className:"mb-6",children:u.jsxs("p",{className:"text-gray-600 text-base italic leading-relaxed",children:['"',n.summary,'"']})}),((e=n.skills)==null?void 0:e.length)>0&&u.jsx("section",{className:"mb-6",children:u.jsx("div",{className:"flex flex-wrap gap-2",children:n.skills.map((r,i)=>u.jsx("span",{className:"inline-flex items-center justify-center leading-none px-3 py-1.5 bg-gradient-to-r from-purple-100 to-purple-100 text-purple-700 text-sm font-medium",children:r},i))})}),((t=n.experience)==null?void 0:t.length)>0&&u.jsxs("section",{className:"mb-6",children:[u.jsxs("h2",{className:"text-lg font-bold text-purple-600 mb-4 flex items-center gap-2",children:[u.jsx("span",{className:"w-8 h-1 bg-gradient-to-r from-purple-600 to-purple-500"}),"Experience"]}),n.experience.map((r,i)=>u.jsx("div",{className:"mb-4 pl-4 border-l-2 border-gray-200",children:u.jsx(Qu,{exp:r,bulletStyle:""})},i))]}),((s=n.education)==null?void 0:s.length)>0&&u.jsxs("section",{children:[u.jsxs("h2",{className:"text-lg font-bold text-purple-600 mb-4 flex items-center gap-2",children:[u.jsx("span",{className:"w-8 h-1 bg-gradient-to-r from-purple-600 to-purple-500"}),"Education"]}),n.education.map((r,i)=>u.jsxs("div",{className:"mb-2 pl-4 border-l-2 border-gray-200",children:[u.jsxs("div",{className:"font-bold",children:[r.degree," in ",r.field]}),u.jsxs("div",{className:"text-gray-500 text-sm",children:[r.institution,"  ",r.endDate]})]},i))]})]})}function K2({resume:n}){var e,t,s,r,i;return u.jsxs("div",{className:"font-sans text-sm text-gray-900 leading-relaxed",style:{fontFamily:"Arial, sans-serif"},children:[u.jsxs("header",{className:"mb-4 pb-3 border-b border-gray-400",children:[u.jsx("h1",{className:"text-xl font-bold mb-1",children:n.fullName||"Your Name"}),u.jsxs("div",{className:"text-gray-700 text-sm",children:[n.email&&u.jsx("span",{children:n.email}),n.phone&&u.jsxs("span",{children:[" | ",n.phone]}),n.location&&u.jsxs("span",{children:[" | ",n.location]})]}),(n.linkedIn||n.github)&&u.jsxs("div",{className:"text-gray-600 text-sm mt-1",children:[n.linkedIn&&u.jsx("span",{children:n.linkedIn}),n.github&&u.jsxs("span",{children:[" | ",n.github]})]})]}),n.summary&&u.jsxs("section",{className:"mb-4",children:[u.jsx("h2",{className:"text-sm font-bold uppercase mb-2",children:"Professional Summary"}),u.jsx("p",{className:"text-gray-700",children:n.summary})]}),((e=n.skills)==null?void 0:e.length)>0&&u.jsxs("section",{className:"mb-4",children:[u.jsx("h2",{className:"text-sm font-bold uppercase mb-2",children:"Technical Skills"}),u.jsx("p",{className:"text-gray-700",children:n.skills.join(", ")})]}),((t=n.experience)==null?void 0:t.length)>0&&u.jsxs("section",{className:"mb-4",children:[u.jsx("h2",{className:"text-sm font-bold uppercase mb-2",children:"Work Experience"}),n.experience.map((a,l)=>{var c,d;return u.jsxs("div",{className:"mb-4",children:[u.jsx("div",{className:"font-bold",children:a.position}),u.jsxs("div",{className:"text-gray-700",children:[a.company," | ",a.startDate,"  ",a.endDate||"Present"]}),a.serviceBased&&((c=a.clientProjects)==null?void 0:c.length)>0?u.jsx("div",{className:"mt-2 ml-4",children:a.clientProjects.map((h,f)=>{var p;return u.jsxs("div",{className:"mb-2",children:[u.jsxs("div",{className:"font-semibold text-sm",children:["Client: ",h.clientName]}),h.role&&u.jsx("div",{className:"text-gray-600 text-sm",children:h.role}),u.jsxs("div",{className:"text-gray-500 text-sm",children:[h.startDate,"  ",h.endDate||"Present"]}),(p=h.highlights)==null?void 0:p.map((m,v)=>m&&u.jsxs("div",{className:"text-gray-700 text-sm",children:["- ",m]},v))]},f)})}):(d=a.highlights)==null?void 0:d.map((h,f)=>h&&u.jsxs("div",{className:"text-gray-700 text-sm",children:["- ",h]},f))]},l)})]}),((s=n.education)==null?void 0:s.length)>0&&u.jsxs("section",{className:"mb-4",children:[u.jsx("h2",{className:"text-sm font-bold uppercase mb-2",children:"Education"}),n.education.map((a,l)=>u.jsxs("div",{className:"mb-2",children:[u.jsxs("div",{className:"font-bold",children:[a.degree," in ",a.field]}),u.jsxs("div",{className:"text-gray-700",children:[a.institution," | ",a.startDate&&`${a.startDate}  `,a.endDate]}),a.gpa&&u.jsxs("div",{className:"text-gray-600 text-sm",children:["GPA: ",a.gpa]})]},l))]}),((r=n.projects)==null?void 0:r.length)>0&&u.jsxs("section",{className:"mb-4",children:[u.jsx("h2",{className:"text-sm font-bold uppercase mb-2",children:"Projects"}),n.projects.map((a,l)=>{var c;return u.jsxs("div",{className:"mb-2",children:[u.jsx("div",{className:"font-bold",children:a.name}),a.description&&u.jsx("div",{className:"text-gray-700 text-sm",children:a.description}),((c=a.technologies)==null?void 0:c.length)>0&&u.jsxs("div",{className:"text-gray-600 text-sm",children:["Technologies: ",a.technologies.join(", ")]})]},l)})]}),((i=n.certifications)==null?void 0:i.length)>0&&u.jsxs("section",{children:[u.jsx("h2",{className:"text-sm font-bold uppercase mb-2",children:"Certifications"}),n.certifications.map((a,l)=>u.jsxs("div",{className:"text-gray-700",children:["- ",a]},l))]})]})}function Y2({resume:n}){var e,t,s,r;return u.jsxs("div",{className:"font-serif text-sm text-gray-900 leading-relaxed",style:{fontFamily:"Times New Roman, serif"},children:[u.jsxs("header",{className:"text-center mb-4 pb-3 border-b-2 border-gray-800",children:[u.jsx("h1",{className:"text-2xl font-bold uppercase tracking-wide mb-2",children:n.fullName||"YOUR NAME"}),u.jsx("div",{className:"text-gray-700 text-sm",children:[n.location,n.phone,n.email].filter(Boolean).join("  ")}),(n.linkedIn||n.github)&&u.jsx("div",{className:"text-gray-600 text-sm mt-1",children:[n.linkedIn,n.github,n.website].filter(Boolean).join("  ")})]}),n.summary&&u.jsxs("section",{className:"mb-4",children:[u.jsx("h2",{className:"text-sm font-bold uppercase border-b border-gray-400 pb-1 mb-2",children:"Professional Summary"}),u.jsx("p",{className:"text-gray-800",children:n.summary})]}),((e=n.experience)==null?void 0:e.length)>0&&u.jsxs("section",{className:"mb-4",children:[u.jsx("h2",{className:"text-sm font-bold uppercase border-b border-gray-400 pb-1 mb-2",children:"Work Experience"}),n.experience.map((i,a)=>{var l,c;return u.jsxs("div",{className:"mb-3",children:[u.jsxs("div",{className:"flex justify-between items-baseline",children:[u.jsx("span",{className:"font-bold",children:i.position}),u.jsxs("span",{className:"text-gray-600 text-sm",children:[i.startDate,"  ",i.endDate||"Present"]})]}),u.jsxs("div",{className:"text-gray-700 italic",children:[i.company,i.location&&`, ${i.location}`]}),i.serviceBased&&((l=i.clientProjects)==null?void 0:l.length)>0?u.jsx("div",{className:"mt-2 ml-2",children:i.clientProjects.map((d,h)=>{var f;return u.jsxs("div",{className:"mb-2 pl-2 border-l-2 border-gray-300",children:[u.jsxs("div",{className:"flex justify-between items-baseline",children:[u.jsxs("span",{className:"font-semibold text-sm",children:["Client: ",d.clientName]}),u.jsxs("span",{className:"text-gray-500 text-sm",children:[d.startDate,"  ",d.endDate||"Present"]})]}),d.role&&u.jsx("div",{className:"text-gray-600 text-sm italic",children:d.role}),((f=d.highlights)==null?void 0:f.length)>0&&u.jsx("ul",{className:"mt-1 list-disc ml-4",children:d.highlights.map((p,m)=>p&&u.jsx("li",{className:"text-gray-700 text-sm",children:p},m))})]},h)})}):((c=i.highlights)==null?void 0:c.length)>0&&u.jsx("ul",{className:"mt-1 list-disc ml-4",children:i.highlights.map((d,h)=>d&&u.jsx("li",{className:"text-gray-700 text-sm",children:d},h))})]},a)})]}),((t=n.education)==null?void 0:t.length)>0&&u.jsxs("section",{className:"mb-4",children:[u.jsx("h2",{className:"text-sm font-bold uppercase border-b border-gray-400 pb-1 mb-2",children:"Education"}),n.education.map((i,a)=>u.jsxs("div",{className:"mb-2",children:[u.jsxs("div",{className:"flex justify-between items-baseline",children:[u.jsxs("span",{className:"font-bold",children:[i.degree," in ",i.field]}),u.jsx("span",{className:"text-gray-600 text-sm",children:i.endDate})]}),u.jsx("div",{className:"text-gray-700",children:i.institution}),i.gpa&&u.jsxs("div",{className:"text-gray-600 text-sm",children:["GPA: ",i.gpa]})]},a))]}),((s=n.skills)==null?void 0:s.length)>0&&u.jsxs("section",{className:"mb-4",children:[u.jsx("h2",{className:"text-sm font-bold uppercase border-b border-gray-400 pb-1 mb-2",children:"Skills"}),u.jsx("p",{className:"text-gray-800",children:n.skills.join(", ")})]}),((r=n.certifications)==null?void 0:r.length)>0&&u.jsxs("section",{children:[u.jsx("h2",{className:"text-sm font-bold uppercase border-b border-gray-400 pb-1 mb-2",children:"Certifications"}),u.jsx("ul",{className:"list-disc ml-4",children:n.certifications.map((i,a)=>u.jsx("li",{className:"text-gray-700 text-sm",children:i},a))})]})]})}function Q2({resume:n}){var e,t,s,r;return u.jsxs("div",{className:"font-sans text-sm text-gray-900 leading-relaxed",style:{fontFamily:"Arial, sans-serif"},children:[u.jsxs("header",{className:"mb-4",children:[u.jsx("h1",{className:"text-xl font-black uppercase",children:n.fullName||"YOUR NAME"}),u.jsxs("div",{className:"text-gray-700 mt-1",children:[n.email&&u.jsx("span",{children:n.email}),n.phone&&u.jsxs("span",{children:[" | ",n.phone]}),n.location&&u.jsxs("span",{children:[" | ",n.location]})]}),(n.linkedIn||n.github)&&u.jsxs("div",{className:"text-gray-600 text-sm mt-1",children:[n.linkedIn&&u.jsx("span",{children:n.linkedIn}),n.github&&u.jsxs("span",{children:[" | ",n.github]})]})]}),u.jsx("hr",{className:"border-gray-900 border-t-2 mb-4"}),n.summary&&u.jsxs("section",{className:"mb-4",children:[u.jsx("h2",{className:"text-base font-black uppercase bg-gray-100 px-2 py-1 mb-2",children:"Professional Summary"}),u.jsx("p",{className:"text-gray-700 px-2",children:n.summary})]}),((e=n.skills)==null?void 0:e.length)>0&&u.jsxs("section",{className:"mb-4",children:[u.jsx("h2",{className:"text-base font-black uppercase bg-gray-100 px-2 py-1 mb-2",children:"Core Competencies"}),u.jsx("div",{className:"px-2 grid grid-cols-3 gap-1",children:n.skills.map((i,a)=>u.jsxs("span",{className:"text-gray-700 text-sm",children:[" ",i]},a))})]}),((t=n.experience)==null?void 0:t.length)>0&&u.jsxs("section",{className:"mb-4",children:[u.jsx("h2",{className:"text-base font-black uppercase bg-gray-100 px-2 py-1 mb-2",children:"Professional Experience"}),n.experience.map((i,a)=>{var l,c;return u.jsxs("div",{className:"mb-3 px-2",children:[u.jsx("div",{className:"font-bold text-gray-900",children:i.position}),u.jsxs("div",{className:"flex justify-between text-sm",children:[u.jsx("span",{className:"text-gray-700",children:i.company}),u.jsxs("span",{className:"text-gray-500",children:[i.startDate,"  ",i.endDate||"Present"]})]}),i.serviceBased&&((l=i.clientProjects)==null?void 0:l.length)>0?u.jsx("div",{className:"mt-2 ml-2 space-y-2",children:i.clientProjects.map((d,h)=>{var f;return u.jsxs("div",{className:"bg-gray-50 p-2",children:[u.jsxs("div",{className:"flex justify-between",children:[u.jsxs("span",{className:"font-semibold text-sm",children:["Client: ",d.clientName]}),u.jsxs("span",{className:"text-gray-500 text-sm",children:[d.startDate,"  ",d.endDate||"Present"]})]}),d.role&&u.jsx("div",{className:"text-gray-600 text-sm",children:d.role}),(f=d.highlights)==null?void 0:f.map((p,m)=>p&&u.jsxs("div",{className:"text-gray-700 text-sm",children:[" ",p]},m))]},h)})}):((c=i.highlights)==null?void 0:c.length)>0&&u.jsx("ul",{className:"mt-1",children:i.highlights.map((d,h)=>d&&u.jsxs("li",{className:"text-gray-700 text-sm",children:[" ",d]},h))})]},a)})]}),((s=n.education)==null?void 0:s.length)>0&&u.jsxs("section",{className:"mb-4",children:[u.jsx("h2",{className:"text-base font-black uppercase bg-gray-100 px-2 py-1 mb-2",children:"Education"}),n.education.map((i,a)=>u.jsxs("div",{className:"px-2 mb-2",children:[u.jsx("div",{className:"font-bold",children:i.institution}),u.jsxs("div",{className:"text-gray-700 text-sm",children:[i.degree," in ",i.field," | ",i.endDate,i.gpa&&u.jsxs("span",{children:[" | GPA: ",i.gpa]})]})]},a))]}),((r=n.certifications)==null?void 0:r.length)>0&&u.jsxs("section",{children:[u.jsx("h2",{className:"text-base font-black uppercase bg-gray-100 px-2 py-1 mb-2",children:"Certifications"}),u.jsx("div",{className:"px-2",children:n.certifications.map((i,a)=>u.jsxs("span",{className:"text-gray-700 text-sm",children:[" ",i,"  "]},a))})]})]})}function J2({resume:n}){var e,t,s,r,i;return u.jsxs("div",{className:"font-sans text-xs text-gray-900 leading-snug",style:{fontFamily:"Arial, sans-serif"},children:[u.jsxs("header",{className:"text-center mb-3",children:[u.jsx("h1",{className:"text-lg font-bold",children:n.fullName||"Your Name"}),u.jsxs("div",{className:"text-gray-600",children:[[n.email,n.phone,n.location].filter(Boolean).join(" | "),(n.linkedIn||n.github)&&u.jsxs("span",{children:[" | ",[n.linkedIn,n.github].filter(Boolean).join(" | ")]})]})]}),n.summary&&u.jsxs("section",{className:"mb-2",children:[u.jsx("div",{className:"font-bold uppercase border-b border-black mb-1",children:"Summary"}),u.jsx("p",{className:"text-gray-700",children:n.summary})]}),((e=n.skills)==null?void 0:e.length)>0&&u.jsxs("section",{className:"mb-2",children:[u.jsx("div",{className:"font-bold uppercase border-b border-black mb-1",children:"Technical Skills"}),u.jsx("p",{className:"text-gray-700",children:n.skills.join("  ")})]}),((t=n.experience)==null?void 0:t.length)>0&&u.jsxs("section",{className:"mb-2",children:[u.jsx("div",{className:"font-bold uppercase border-b border-black mb-1",children:"Experience"}),n.experience.map((a,l)=>{var c,d;return u.jsxs("div",{className:"mb-2",children:[u.jsxs("div",{className:"flex justify-between",children:[u.jsxs("span",{className:"font-semibold",children:[a.position,", ",a.company]}),u.jsxs("span",{className:"text-gray-500",children:[a.startDate,"",a.endDate||"Present"]})]}),a.serviceBased&&((c=a.clientProjects)==null?void 0:c.length)>0?u.jsx("div",{className:"ml-2 mt-1",children:a.clientProjects.map((h,f)=>{var p;return u.jsxs("div",{children:[u.jsxs("span",{className:"font-medium",children:[" ",h.clientName]}),u.jsxs("span",{className:"text-gray-500",children:[" (",h.startDate,"",h.endDate||"Present",")"]}),(p=h.highlights)==null?void 0:p.slice(0,2).map((m,v)=>m&&u.jsxs("span",{className:"text-gray-700 ml-1",children:[" ",m]},v))]},f)})}):((d=a.highlights)==null?void 0:d.length)>0&&u.jsx("ul",{className:"ml-3",children:a.highlights.slice(0,3).map((h,f)=>h&&u.jsxs("li",{className:"text-gray-700",children:[" ",h]},f))})]},l)})]}),((s=n.education)==null?void 0:s.length)>0&&u.jsxs("section",{className:"mb-2",children:[u.jsx("div",{className:"font-bold uppercase border-b border-black mb-1",children:"Education"}),n.education.map((a,l)=>u.jsxs("div",{className:"flex justify-between",children:[u.jsxs("span",{children:[u.jsx("span",{className:"font-semibold",children:a.degree})," in ",a.field,", ",a.institution,a.gpa&&u.jsxs("span",{className:"text-gray-500",children:[" (GPA: ",a.gpa,")"]})]}),u.jsx("span",{className:"text-gray-500",children:a.endDate})]},l))]}),((r=n.projects)==null?void 0:r.length)>0&&u.jsxs("section",{className:"mb-2",children:[u.jsx("div",{className:"font-bold uppercase border-b border-black mb-1",children:"Projects"}),n.projects.map((a,l)=>{var c;return u.jsxs("div",{children:[u.jsx("span",{className:"font-semibold",children:a.name}),((c=a.technologies)==null?void 0:c.length)>0&&u.jsxs("span",{className:"text-gray-500",children:[" (",a.technologies.join(", "),")"]}),a.description&&u.jsxs("span",{className:"text-gray-600",children:["  ",a.description]})]},l)})]}),((i=n.certifications)==null?void 0:i.length)>0&&u.jsxs("section",{children:[u.jsx("div",{className:"font-bold uppercase border-b border-black mb-1",children:"Certifications"}),u.jsx("p",{className:"text-gray-700",children:n.certifications.join(" | ")})]})]})}function Z2({resume:n}){var e,t,s,r,i;return u.jsxs("div",{className:"font-sans text-sm text-gray-800 flex gap-6 min-h-full",children:[u.jsxs("div",{className:"w-1/3 bg-gray-900 text-white p-6 -ml-10 -my-10 min-h-full",children:[u.jsxs("div",{className:"mb-6",children:[u.jsx("div",{className:"w-16 h-16 bg-gray-700 flex items-center justify-center text-2xl font-bold mb-3",children:((e=n.fullName)==null?void 0:e.charAt(0))||"?"}),u.jsx("h1",{className:"text-lg font-bold",children:n.fullName||"Your Name"})]}),u.jsxs("div",{className:"space-y-4 text-xs",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-gray-400 uppercase text-xs font-bold mb-2",children:"Contact"}),n.email&&u.jsx("p",{className:"mb-1",children:n.email}),n.phone&&u.jsx("p",{className:"mb-1",children:n.phone}),n.location&&u.jsx("p",{className:"mb-1",children:n.location})]}),((t=n.skills)==null?void 0:t.length)>0&&u.jsxs("div",{children:[u.jsx("h3",{className:"text-gray-400 uppercase text-xs font-bold mb-2",children:"Skills"}),u.jsx("div",{className:"space-y-1",children:n.skills.slice(0,10).map((a,l)=>u.jsx("div",{className:"text-xs",children:a},l))})]}),((s=n.education)==null?void 0:s.length)>0&&u.jsxs("div",{children:[u.jsx("h3",{className:"text-gray-400 uppercase text-xs font-bold mb-2",children:"Education"}),n.education.map((a,l)=>u.jsxs("div",{className:"mb-2",children:[u.jsx("div",{className:"font-medium",children:a.degree}),u.jsx("div",{className:"text-gray-400 text-xs",children:a.institution}),u.jsx("div",{className:"text-gray-500 text-xs",children:a.endDate})]},l))]})]})]}),u.jsxs("div",{className:"flex-1 py-2",children:[n.summary&&u.jsxs("section",{className:"mb-5",children:[u.jsx("h2",{className:"text-sm font-bold uppercase tracking-wide mb-2",children:"About Me"}),u.jsx("p",{className:"text-gray-600",children:n.summary})]}),((r=n.experience)==null?void 0:r.length)>0&&u.jsxs("section",{className:"mb-5",children:[u.jsx("h2",{className:"text-sm font-bold uppercase tracking-wide mb-3",children:"Experience"}),n.experience.map((a,l)=>u.jsx(Qu,{exp:a,bulletStyle:"",showBorder:!0},l))]}),((i=n.projects)==null?void 0:i.length)>0&&u.jsxs("section",{children:[u.jsx("h2",{className:"text-sm font-bold uppercase tracking-wide mb-3",children:"Projects"}),n.projects.map((a,l)=>{var c;return u.jsxs("div",{className:"mb-3",children:[u.jsx("div",{className:"font-bold",children:a.name}),a.description&&u.jsx("p",{className:"text-gray-600 text-sm",children:a.description}),((c=a.technologies)==null?void 0:c.length)>0&&u.jsx("p",{className:"text-gray-600 text-xs",children:a.technologies.join(", ")})]},l)})]})]})]})}function eC({resume:n}){var e,t,s;return u.jsxs("div",{className:"font-mono text-sm text-gray-800 bg-gray-50 p-6 -m-10 min-h-full",children:[u.jsxs("div",{className:"bg-gray-900 text-green-400 p-6 -mx-6 -mt-6 mb-6",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[u.jsx("span",{className:"w-3 h-3 rounded-full bg-red-500"}),u.jsx("span",{className:"w-3 h-3 rounded-full bg-gray-500"}),u.jsx("span",{className:"w-3 h-3 rounded-full bg-green-500"}),u.jsx("span",{className:"text-gray-500 text-xs ml-2",children:"~/resume"})]}),u.jsxs("div",{className:"text-xs",children:[u.jsxs("p",{children:[u.jsx("span",{className:"text-gray-400",children:"const"})," developer = ","{"]}),u.jsxs("p",{className:"ml-4",children:[u.jsx("span",{className:"text-gray-400",children:"name"}),": ",u.jsxs("span",{className:"text-gray-300",children:['"',n.fullName||"Your Name",'"']}),","]}),n.email&&u.jsxs("p",{className:"ml-4",children:[u.jsx("span",{className:"text-gray-400",children:"email"}),": ",u.jsxs("span",{className:"text-gray-300",children:['"',n.email,'"']}),","]}),n.location&&u.jsxs("p",{className:"ml-4",children:[u.jsx("span",{className:"text-gray-400",children:"location"}),": ",u.jsxs("span",{className:"text-gray-300",children:['"',n.location,'"']}),","]}),n.github&&u.jsxs("p",{className:"ml-4",children:[u.jsx("span",{className:"text-gray-400",children:"github"}),": ",u.jsxs("span",{className:"text-gray-300",children:['"',n.github,'"']})]}),u.jsx("p",{children:"}"})]})]}),n.summary&&u.jsxs("section",{className:"mb-5 bg-white p-4 border-b border-gray-200",children:[u.jsx("h2",{className:"text-xs font-bold text-gray-500 uppercase mb-2",children:"// README.md"}),u.jsx("p",{className:"text-gray-700 font-sans",children:n.summary})]}),((e=n.skills)==null?void 0:e.length)>0&&u.jsxs("section",{className:"mb-5 bg-white p-4 border-b border-gray-200",children:[u.jsx("h2",{className:"text-xs font-bold text-gray-500 uppercase mb-2",children:"// tech_stack"}),u.jsx("div",{className:"flex flex-wrap gap-2",children:n.skills.map((r,i)=>u.jsx("span",{className:"inline-flex items-center justify-center leading-none px-2 py-1.5 bg-gray-900 text-green-400 text-xs",children:r},i))})]}),((t=n.experience)==null?void 0:t.length)>0&&u.jsxs("section",{className:"mb-5 bg-white p-4 border-b border-gray-200",children:[u.jsx("h2",{className:"text-xs font-bold text-gray-500 uppercase mb-3",children:"// work_history"}),n.experience.map((r,i)=>{var a,l;return u.jsxs("div",{className:"mb-4 last:mb-0 font-sans",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-green-600 font-mono",children:""}),u.jsx("span",{className:"font-bold",children:r.position})]}),u.jsxs("p",{className:"text-gray-600 text-xs ml-5",children:["@",r.company]}),u.jsxs("p",{className:"text-gray-400 text-xs ml-5 mb-1",children:[r.startDate,"  ",r.endDate||"present"]}),r.serviceBased&&((a=r.clientProjects)==null?void 0:a.length)>0?u.jsx("div",{className:"ml-5 mt-2 space-y-2",children:r.clientProjects.map((c,d)=>{var h;return u.jsxs("div",{className:"bg-gray-50 p-2 border-l-2 border-green-500",children:[u.jsx("span",{className:"text-green-500 font-mono text-xs",children:""}),u.jsx("span",{className:"font-medium text-xs ml-1",children:c.clientName}),u.jsxs("span",{className:"text-gray-400 text-xs",children:[" (",c.startDate,"  ",c.endDate||"present",")"]}),c.role&&u.jsx("p",{className:"text-gray-500 text-xs ml-4",children:c.role}),(h=c.highlights)==null?void 0:h.map((f,p)=>u.jsxs("p",{className:"text-gray-600 text-xs ml-4",children:["- ",f]},p))]},d)})}):(l=r.highlights)==null?void 0:l.map((c,d)=>u.jsxs("p",{className:"text-gray-600 text-xs ml-5",children:["- ",c]},d))]},i)})]}),((s=n.projects)==null?void 0:s.length)>0&&u.jsxs("section",{className:"bg-white p-4 border-b border-gray-200",children:[u.jsx("h2",{className:"text-xs font-bold text-gray-500 uppercase mb-3",children:"// projects"}),n.projects.map((r,i)=>{var a;return u.jsxs("div",{className:"mb-3 last:mb-0 font-sans",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-gray-500 font-mono",children:""}),u.jsx("span",{className:"font-bold",children:r.name})]}),r.description&&u.jsx("p",{className:"text-gray-600 text-xs ml-5",children:r.description}),((a=r.technologies)==null?void 0:a.length)>0&&u.jsx("div",{className:"ml-5 mt-1 flex flex-wrap gap-1",children:r.technologies.map((l,c)=>u.jsx("span",{className:"inline-flex items-center justify-center leading-none px-1.5 py-1 bg-gray-100 text-gray-700 text-xs",children:l},c))})]},i)})]})]})}const hD=({currentResume:n,onUpdateResume:e})=>{const[t,s]=j.useState(!1),[r,i]=j.useState([{role:"assistant",content:"Hi! I can help you improve your resume. Ask me to add experience, fix grammar, or suggest skills!"}]),[a,l]=j.useState(""),[c,d]=j.useState(!1),h=j.useRef(null),f=j.useRef(null),p=j.useRef(null),m=()=>{var x;(x=h.current)==null||x.scrollIntoView({behavior:"smooth"})};j.useEffect(()=>{m()},[r,t]),j.useEffect(()=>{const x=A=>{t&&f.current&&!f.current.contains(A.target)&&p.current&&!p.current.contains(A.target)&&s(!1)};return document.addEventListener("mousedown",x),document.addEventListener("touchstart",x),()=>{document.removeEventListener("mousedown",x),document.removeEventListener("touchstart",x)}},[t]);const v=async x=>{if(x.preventDefault(),!a.trim()||c)return;const A=a.trim();l(""),i(b=>[...b,{role:"user",content:A}]),d(!0);try{const b=await Gi.chatWithAi(n,A),g={role:"assistant",content:b.message||"I've processed your request."};i(w=>[...w,g]),b.suggestedUpdates&&(e(b.suggestedUpdates),i(w=>[...w,{role:"system",content:" Resume updated successfully based on your request."}]))}catch(b){console.error(b),i(g=>[...g,{role:"assistant",content:"Sorry, I encountered an error. Please try again."}])}finally{d(!1)}};return u.jsxs(u.Fragment,{children:[u.jsx("button",{ref:p,onClick:()=>s(!t),className:`fixed bottom-20 right-6 z-50 p-4 rounded-full shadow-xl transition-all duration-300 ${t?"bg-red-500 rotate-45":"bg-blue-600 hover:bg-blue-700"} text-white`,children:t?u.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}):u.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})})}),u.jsxs("div",{ref:f,className:`fixed bottom-36 right-6 w-96 max-w-[90vw] bg-white dark:bg-gray-900 rounded-2xl shadow-2xl border border-gray-200 dark:border-gray-800 transition-all duration-300 transform ${t?"scale-100 opacity-100 translate-y-0":"scale-95 opacity-0 translate-y-10 pointer-events-none"} z-40 flex flex-col`,style:{height:"min(500px, 80vh)"},children:[u.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-800 bg-gray-50 dark:bg-gray-800 rounded-t-2xl flex justify-between items-center",children:[u.jsxs("h3",{className:"font-semibold text-gray-800 dark:text-gray-100 flex items-center gap-2",children:[u.jsx("span",{className:"text-xl",children:""})," AI Resume Assistant"]}),u.jsx("span",{className:"text-xs text-blue-600 dark:text-blue-400 font-medium px-2 py-1 bg-blue-100 dark:bg-blue-900/30 rounded-full",children:"Beta"})]}),u.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-gray-50/50 dark:bg-gray-900/50",children:[r.map((x,A)=>u.jsx("div",{className:`flex ${x.role==="user"?"justify-end":"justify-start"}`,children:u.jsx("div",{className:`max-w-[80%] rounded-2xl px-4 py-2.5 text-sm ${x.role==="user"?"bg-blue-600 text-white rounded-tr-sm":x.role==="system"?"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300 border border-green-200 dark:border-green-800 text-center w-full":"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 text-gray-700 dark:text-gray-200 rounded-tl-sm shadow-sm"}`,children:x.content})},A)),c&&u.jsx("div",{className:"flex justify-start",children:u.jsx("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-2xl rounded-tl-sm px-4 py-3 shadow-sm",children:u.jsxs("div",{className:"flex space-x-2",children:[u.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),u.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),u.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})})}),u.jsx("div",{ref:h})]}),u.jsx("form",{onSubmit:v,className:"p-4 border-t border-gray-200 dark:border-gray-800 bg-white dark:bg-gray-900 rounded-b-2xl",children:u.jsxs("div",{className:"flex gap-2",children:[u.jsx("input",{type:"text",value:a,onChange:x=>l(x.target.value),placeholder:"E.g., Add experience at Google...",className:"flex-1 bg-gray-100 dark:bg-gray-800 border-0 rounded-full px-4 py-2 text-sm focus:ring-2 focus:ring-blue-500",disabled:c}),u.jsx("button",{type:"submit",disabled:c||!a.trim(),className:"bg-blue-600 hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-full p-2 w-10 h-10 flex items-center justify-center transition-colors",children:u.jsx("svg",{className:"w-4 h-4 translate-x-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})})]})})]})]})},cx={fullName:"",email:"",phone:"",location:"",linkedIn:"",github:"",website:"",summary:"",experience:[],education:[],skills:[],projects:[],certifications:[],template:"modern"};function iA(){const{id:n}=BT(),e=ks(),t=Do(),[s,r]=j.useState(cx),[i,a]=j.useState(!!n),[l,c]=j.useState(!1),[d,h]=j.useState("form"),[f,p]=j.useState(0),m=j.useRef(null),v=g=>{const w=S=>Array.isArray(S)?S:[];return{...cx,...g,experience:w(g.experience),education:w(g.education),skills:w(g.skills),projects:w(g.projects),certifications:w(g.certifications)}};j.useEffect(()=>{var g,w,S,C,N;if(n)x(n);else if((g=t.state)!=null&&g.parsedResume&&((w=t.state)!=null&&w.fromUpload)){const _=v(t.state.parsedResume);r({..._,template:_.template||"modern",id:void 0})}else if((S=t.state)!=null&&S.sample&&((C=t.state)!=null&&C.useSample)){const _=v(t.state.sample);r({..._,template:t.state.sample.template||t.state.baseStyle||"modern",id:void 0})}else(N=t.state)!=null&&N.baseStyle&&r({...cx,template:t.state.baseStyle})},[n,t.state]),j.useEffect(()=>{if(!n||!s.fullName)return;const g=setTimeout(async()=>{try{await Gi.update(n,s),console.log(" Auto-saved")}catch(w){console.error("Auto-save failed:",w)}},3e3);return()=>clearTimeout(g)},[s,n]);const x=async g=>{try{const w=await Gi.getById(g);r(w)}catch(w){console.error("Failed to load resume:",w),e("/")}finally{a(!1)}},A=async()=>{if(!s.fullName.trim())return alert("Please enter your full name"),null;c(!0);try{let g;return n?g=await Gi.update(n,s):(g=await Gi.create(s),e(`/editor/${g.id}`,{replace:!0})),r(g),g}catch(g){return console.error("Failed to save:",g),alert("Failed to save resume"),null}finally{c(!1)}},b=async()=>{const g=await A();if(g)try{const w=m.current;if(!w){alert("Preview not loaded");return}p(1);const S=setInterval(()=>{p(C=>C>=90?90:C+3)},500);await Gi.exportPdfFromPreview(w,`${g.fullName||"resume"}.pdf`),clearInterval(S),p(100),setTimeout(()=>p(0),1e3)}catch(w){console.error("Failed to export PDF:",w),p(0),alert(`Failed to download PDF: ${w.message||"Unknown error"}. Please try again.`)}};return i?u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"w-8 h-8 border-2 border-accent border-t-transparent rounded-full animate-spin"})}):u.jsxs("div",{className:"h-screen bg-white dark:bg-[#0A0A0A] flex flex-col font-body overflow-hidden",children:[u.jsxs("header",{className:"bg-white dark:bg-[#18181B] border-b border-gray-200 dark:border-gray-800 px-3 md:px-6 py-3 flex items-center justify-between sticky top-0 z-50 gap-2 shrink-0",style:{paddingTop:"max(0.75rem, env(safe-area-inset-top))"},children:[u.jsxs("div",{className:"flex items-center gap-2 md:gap-4 flex-shrink-0",children:[u.jsxs("button",{onClick:()=>e("/"),className:"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-50 transition-colors flex items-center gap-1",children:[u.jsx("span",{className:"text-xl md:text-sm",children:""}),u.jsx("span",{className:"hidden md:inline font-medium",children:"Back"})]}),u.jsx("div",{className:"h-6 w-px bg-gray-200 dark:bg-gray-800 hidden sm:block"}),u.jsx("h1",{className:"text-base md:text-xl font-bold text-gray-900 dark:text-gray-50 font-display truncate max-w-[100px] sm:max-w-none",children:"Editor"})]}),u.jsxs("div",{className:"flex items-center gap-2 md:gap-3 ml-auto",children:[u.jsx("div",{className:"hidden sm:block",children:u.jsx(aA,{value:s.template,onChange:g=>r(w=>({...w,template:g}))})}),u.jsx("button",{onClick:()=>A(),className:"p-2 md:px-4 md:py-2 md:btn md:btn-secondary text-sm font-medium rounded-lg bg-gray-100 dark:bg-gray-800 sm:bg-transparent",disabled:l,title:"Save Draft",children:l?u.jsx("div",{className:"w-4 h-4 border-2 border-gray-400 border-t-transparent rounded-full animate-spin"}):u.jsxs("span",{className:"flex items-center gap-2",children:[u.jsx("svg",{className:"w-4 h-4 sm:hidden",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})}),u.jsx("span",{className:"hidden sm:inline",children:"Save"})]})}),u.jsxs("button",{onClick:b,className:"btn btn-primary flex items-center gap-1 md:gap-2 text-xs md:text-sm font-medium px-3 py-2 md:px-4 md:py-2",children:[u.jsx("svg",{className:"w-3 h-3 md:w-4 md:h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),u.jsx("span",{className:"hidden xs:inline",children:"Download"}),u.jsx("span",{className:"xs:hidden",children:"PDF"})]})]})]}),u.jsx("div",{className:"sm:hidden px-4 py-2 bg-gray-50 dark:bg-black border-b border-gray-200 dark:border-gray-800",children:u.jsxs("div",{className:"flex items-center justify-between gap-4",children:[u.jsx("span",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Template:"}),u.jsx(aA,{value:s.template,onChange:g=>r(w=>({...w,template:g}))})]})}),u.jsxs("div",{className:"lg:hidden flex border-b border-gray-200 dark:border-gray-800 bg-white dark:bg-[#18181B] sticky top-[73px] z-40",children:[u.jsx("button",{onClick:()=>h("form"),className:`flex-1 py-3 text-sm font-medium border-b-2 transition-all duration-150 ${d==="form"?"border-gray-900 dark:border-gray-50 text-gray-900 dark:text-gray-50":"border-transparent text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"}`,children:"Editor"}),u.jsx("button",{onClick:()=>h("preview"),className:`flex-1 py-3 text-sm font-medium border-b-2 transition-all duration-150 ${d==="preview"?"border-gray-900 dark:border-gray-50 text-gray-900 dark:text-gray-50":"border-transparent text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"}`,children:"Preview"})]}),u.jsx("div",{className:"flex-1 w-full px-2 md:px-4 lg:px-6 py-4 md:py-6 overflow-y-auto scrollbar-hide",children:u.jsxs("div",{className:"lg:grid lg:grid-cols-[40%_60%] lg:gap-4 xl:gap-6 items-start max-w-[1920px] mx-auto",children:[u.jsx("div",{className:`${d==="form"?"block":"hidden"} lg:block space-y-6`,children:u.jsx(dD,{resume:s,onChange:r})}),u.jsx("div",{className:`${d==="preview"?"block":"hidden"} lg:block lg:sticky lg:top-24 space-y-6 invisible-scrollbar`,children:u.jsx("div",{ref:m,className:"shadow-lg rounded-none overflow-hidden bg-white",children:u.jsx(uD,{resume:s})})})]})}),u.jsx(hD,{currentResume:s,onUpdateResume:r}),f>0&&u.jsx("div",{className:"fixed inset-0 z-[100] bg-black/50 backdrop-blur-sm flex items-center justify-center flex-col gap-4",children:u.jsxs("div",{className:"bg-white dark:bg-gray-900 p-10 rounded-2xl shadow-2xl flex flex-col items-center border border-gray-100 dark:border-gray-800",children:[u.jsxs("div",{className:"relative w-32 h-32 mb-4",children:[u.jsxs("svg",{className:"w-full h-full transform",viewBox:"0 0 100 100",children:[u.jsx("circle",{className:"text-gray-100 dark:text-gray-800 stroke-current",strokeWidth:"8",cx:"50",cy:"50",r:"40",fill:"transparent"}),u.jsx("circle",{className:"transition-all duration-300 ease-out drop-shadow-md",strokeWidth:"8",strokeLinecap:"round",cx:"50",cy:"50",r:"40",fill:"transparent",strokeDasharray:"251.2",strokeDashoffset:251.2-251.2*f/100,stroke:"url(#loaderGradient)",transform:"rotate(-90 50 50)"}),u.jsx("defs",{children:u.jsxs("linearGradient",{id:"loaderGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[u.jsx("stop",{offset:"0%",stopColor:"#3b82f6"}),u.jsx("stop",{offset:"100%",stopColor:"#06b6d4"})]})})]}),u.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:u.jsxs("span",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[f,"%"]})})]}),u.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-white animate-pulse",children:"Generating PDF..."}),u.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2",children:"Please wait while we prepare your document"})]})})]})}function aA({value:n,onChange:e}){const[t,s]=j.useState(!1),r=[{id:"modern",name:"Modern",color:"bg-gray-900",desc:"Clean & professional"},{id:"classic",name:"Classic",color:"bg-stone-700",desc:"Traditional serif"},{id:"minimal",name:"Minimal",color:"bg-neutral-500",desc:"Ultra clean"},{id:"executive",name:"Executive",color:"bg-slate-700",desc:"Corporate style"},{id:"creative",name:"Creative",color:"bg-purple-600",desc:"Bold & colorful"},{id:"ats",name:"ATS Standard",color:"bg-zinc-600",desc:"Simple ATS format"},{id:"atsclean",name:"ATS Clean",color:"bg-zinc-400",desc:"Centered header, serif"},{id:"atsbold",name:"ATS Bold",color:"bg-gray-800",desc:"Bold sections, skills grid"},{id:"atscompact",name:"ATS Compact",color:"bg-black",desc:"Dense, single-page"},{id:"twocolumn",name:"Two Column",color:"bg-blue-600",desc:"Sidebar layout"},{id:"developer",name:"Developer",color:"bg-emerald-600",desc:"Tech focused"}],i=r.find(a=>a.id===n)||r[0];return u.jsxs("div",{className:"relative",children:[u.jsxs("button",{onClick:()=>s(!t),className:"flex items-center gap-2 px-3 py-2 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 rounded-lg text-sm hover:bg-gray-50 dark:hover:bg-gray-800 transition-smooth shadow-sm",children:[u.jsx("span",{className:`w-2 h-2 rounded-full ${i.color} ring-1 ring-gray-900/10 dark:ring-white/20`}),u.jsx("span",{className:"text-gray-700 dark:text-gray-300 font-medium",children:i.name}),u.jsx("svg",{className:`w-4 h-4 text-gray-500 dark:text-gray-400 transition-transform ${t?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),t&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>s(!1)}),u.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white dark:bg-gray-950 border border-gray-200 dark:border-gray-800 rounded-xl shadow-hard z-20 overflow-hidden max-h-96 overflow-y-auto",children:[u.jsx("div",{className:"p-2 border-b border-gray-100 dark:border-gray-900 bg-gray-50 dark:bg-gray-900",children:u.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 px-2 font-medium uppercase tracking-wider",children:"Choose style"})}),r.map(a=>u.jsxs("button",{onClick:()=>{e(a.id),s(!1)},className:`w-full flex items-center gap-3 px-4 py-3 text-sm hover:bg-gray-50 dark:hover:bg-gray-900 transition-smooth border-b border-gray-50 dark:border-gray-900 last:border-0 ${n===a.id?"bg-gray-100 dark:bg-gray-900":""}`,children:[u.jsx("span",{className:`w-3 h-3 rounded-full ${a.color} flex-shrink-0 shadow-sm ring-1 ring-gray-900/10 dark:ring-white/20`}),u.jsxs("div",{className:"flex-1 text-left",children:[u.jsx("span",{className:`block font-medium ${n===a.id?"text-black dark:text-white":"text-gray-700 dark:text-gray-300"}`,children:a.name}),u.jsx("span",{className:"text-gray-500 dark:text-gray-500 text-xs",children:a.desc})]}),n===a.id&&u.jsx("svg",{className:"w-4 h-4 text-black dark:text-white flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})]},a.id))]})]})]})}function fD(){const[n,e]=j.useState("email"),[t,s]=j.useState(""),[r,i]=j.useState(""),[a,l]=j.useState(!1),[c,d]=j.useState(""),[h,f]=j.useState(""),{login:p}=yy(),m=ks(),v=async b=>{var g,w,S;if(b.preventDefault(),!t.trim()){d("Please enter your email");return}l(!0),d("");try{console.log(" Attempting to send OTP to:",t);const C=await qh.sendOtp(t);console.log(" OTP sent successfully:",C),f(C.message),e("otp")}catch(C){console.error(" OTP send failed:",C);let N="Failed to send OTP";(g=C.message)!=null&&g.includes("Network Error")||(w=C.message)!=null&&w.includes("timeout")?N=" Network Error: Cannot connect to server. Check your internet connection.":C.response?N=`Server Error (${C.response.status}): ${((S=C.response.data)==null?void 0:S.message)||C.response.statusText}`:C.request?N=" No response from server. The backend might be down or unreachable.":N=`Error: ${C.message}`,d(N)}finally{l(!1)}},x=async b=>{var g,w;if(b.preventDefault(),!r.trim()){d("Please enter the OTP");return}l(!0),d("");try{const S=await qh.verifyOtp(t,r);p(S.token,{id:S.userId,email:S.email}),m("/")}catch(S){d(((w=(g=S.response)==null?void 0:g.data)==null?void 0:w.message)||"Invalid OTP")}finally{l(!1)}},A=async()=>{var b,g;l(!0),d("");try{const w=await qh.sendOtp(t);f("New OTP sent!")}catch(w){d(((g=(b=w.response)==null?void 0:b.data)==null?void 0:g.message)||"Failed to resend OTP")}finally{l(!1)}};return u.jsxs("div",{className:"min-h-screen flex items-center justify-center relative overflow-hidden bg-gray-50 dark:bg-black font-body",children:[u.jsxs("div",{className:"absolute inset-0 z-0 overflow-hidden pointer-events-none",children:[u.jsx("div",{className:"absolute top-[-10%] left-[-5%] w-[500px] h-[500px] rounded-full bg-blue-500/20 blur-[100px] opacity-50 dark:opacity-20 animate-pulse"}),u.jsx("div",{className:"absolute bottom-[-10%] right-[-5%] w-[500px] h-[500px] rounded-full bg-purple-500/20 blur-[100px] opacity-50 dark:opacity-20 animate-pulse",style:{animationDelay:"2s"}})]}),u.jsxs("div",{className:"w-full max-w-md p-6 relative z-10",children:[u.jsxs("div",{className:"text-center mb-8 transform transition-all duration-500 ease-out",children:[u.jsxs("div",{className:"inline-flex items-center gap-2 mb-4",children:[u.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-gray-900 to-black dark:from-white dark:to-gray-200 flex items-center justify-center shadow-lg transform rotate-3 hover:rotate-6 transition-transform",children:u.jsx("svg",{className:"w-6 h-6 text-white dark:text-gray-900",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),u.jsxs("span",{className:"font-display font-bold text-2xl tracking-tight text-gray-900 dark:text-white",children:["Decisive",u.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:"ML"})]})]}),u.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Welcome Back"}),u.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"Sign in to build your professional future"})]}),u.jsx("div",{className:"bg-white/80 dark:bg-gray-900/60 backdrop-blur-xl border border-white/20 dark:border-gray-800 rounded-3xl p-8 shadow-2xl ring-1 ring-black/5",children:n==="email"?u.jsxs("form",{onSubmit:v,className:"space-y-6 animate-slideDown",children:[u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 ml-1",children:"Email Address"}),u.jsxs("div",{className:"relative group",children:[u.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:u.jsx("svg",{className:"h-5 w-5 text-gray-400 group-focus-within:text-blue-500 transition-colors",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 12a4 4 0 10-8 0 4 4 0 008 0zm0 0v1.5a2.5 2.5 0 005 0V12a9 9 0 10-9 9m4.5-1.206a8.959 8.959 0 01-4.5 1.207"})})}),u.jsx("input",{type:"email",value:t,onChange:b=>s(b.target.value),placeholder:"name@work.com",className:"block w-full pl-10 pr-3 py-2.5 border border-gray-200 dark:border-gray-700 rounded-xl leading-5 bg-gray-50 dark:bg-black/50 text-gray-900 dark:text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500 transition-all shadow-sm font-medium text-base",autoFocus:!0})]})]}),c&&u.jsxs("div",{className:"flex items-start gap-3 p-4 rounded-xl bg-red-50 dark:bg-red-500/10 border border-red-100 dark:border-red-500/20 text-red-600 dark:text-red-400 text-sm animate-pulse",children:[u.jsx("svg",{className:"w-5 h-5 flex-shrink-0 mt-0.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),u.jsx("p",{children:c})]}),u.jsx("button",{type:"submit",disabled:a,className:"w-full flex justify-center py-3.5 px-4 border border-transparent rounded-xl shadow-lg text-sm font-semibold text-white bg-gray-900 dark:bg-white dark:text-black hover:bg-gray-800 dark:hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-900 transition-all transform hover:scale-[1.02] active:scale-[0.98]",children:a?u.jsx("div",{className:"w-5 h-5 border-2 border-current border-t-transparent rounded-full animate-spin"}):"Continue with Email"})]}):u.jsxs("form",{onSubmit:x,className:"space-y-6 animate-slideDown",children:[u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-blue-50 dark:bg-blue-900/20 mb-4 ring-8 ring-blue-50/50 dark:ring-blue-900/10",children:u.jsx("svg",{className:"w-8 h-8 text-blue-500 dark:text-blue-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 19v-8.93a2 2 0 01.89-1.664l7-4.666a2 2 0 012.22 0l7 4.666A2 2 0 0121 10.07V19M3 19a2 2 0 002 2h14a2 2 0 002-2M3 19l6.75-4.5M21 19l-6.75-4.5M3 10l6.75 4.5M21 10l-6.75 4.5m0 0l-1.14.76a2 2 0 01-2.22 0l-1.14-.76"})})}),u.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Check your mail"}),u.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:["We sent a code to ",u.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:t})]})]}),u.jsx("div",{children:u.jsx("input",{type:"text",value:r,onChange:b=>i(b.target.value.replace(/\D/g,"").slice(0,6)),placeholder:"000000",className:"w-full text-center text-3xl font-mono tracking-[0.5em] py-4 bg-gray-50 dark:bg-black/50 border-2 border-gray-200 dark:border-gray-700 rounded-xl focus:border-blue-500 dark:focus:border-blue-500 focus:ring-0 outline-none transition-all placeholder-gray-300 dark:placeholder-gray-700 text-gray-900 dark:text-white",maxLength:6,autoFocus:!0})}),c&&u.jsx("div",{className:"p-3 rounded-xl bg-red-50 dark:bg-red-500/10 text-red-600 dark:text-red-400 text-sm text-center",children:c}),h&&u.jsx("div",{className:"p-3 rounded-xl bg-green-50 dark:bg-green-500/10 text-green-600 dark:text-green-400 text-sm text-center",children:h}),u.jsx("button",{type:"submit",disabled:a||r.length!==6,className:"w-full flex justify-center py-3.5 px-4 rounded-xl shadow-lg text-sm font-semibold text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-600 transition-all transform hover:scale-[1.02] active:scale-[0.98] disabled:opacity-70 disabled:cursor-not-allowed",children:a?u.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):"Verify Code"}),u.jsxs("div",{className:"flex items-center justify-between text-xs sm:text-sm pt-2",children:[u.jsx("button",{type:"button",onClick:()=>{e("email"),i(""),d("")},className:"text-gray-500 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white transition-colors",children:" Go back"}),u.jsx("button",{type:"button",onClick:A,disabled:a,className:"text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300 font-medium transition-colors",children:"Resend code"})]})]})}),u.jsx("p",{className:"text-center mt-8 text-xs text-gray-400 dark:text-gray-500",children:"SECURE LOGIN  NO PASSWORD REQUIRED"})]})]})}const dx="/api/templates",oA={getAll:async()=>(await Fe.get(dx)).data,getCountries:async()=>(await Fe.get(`${dx}/countries`)).data,getSample:async n=>(await Fe.get(`${dx}/${n}/sample`)).data},Bm={softwareEng:{fullName:"Alex Rivera",email:"alex.rivera@example.com",phone:"(555) 123-4567",location:"San Francisco, CA",linkedIn:"linkedin.com/in/alexrivera",github:"github.com/alexrivera",website:"alexrivera.dev",summary:"Senior Full Stack Engineer with 6+ years of experience building scalable microservices and responsive web applications. Expert in React, Node.js, and cloud infrastructure. Passionate about code quality, performance optimization, and developer productivity tools.",skills:["JavaScript (ES6+)","TypeScript","React & Redux","Node.js","Python","AWS (Lambda, S3, EC2)","Docker & Kubernetes","PostgreSQL","GraphQL","CI/CD Pipelines","System Architecture"],experience:[{position:"Senior Software Engineer",company:"TechNova Solutions",startDate:"2021",endDate:"Present",description:"Leading the core product team in rebuilding the legacy monolith into specific microservices, improving system reliability by 99.9%.",highlights:["Architected and deployed a new payment processing systyem processing $5M+ monthly volume.","Mentored 4 junior developers and established code review standards.","Reduced page load times by 40% through code splitting and asset optimization."]},{position:"Software Developer",company:"CloudScale Inc.",startDate:"2018",endDate:"2021",description:"Full stack development for a high-growth SaaS platform serving enterprise clients.",highlights:["Implemented real-time collaboration features using WebSockets and Redis.","Developed public-facing REST APIs consumed by mobile and third-party integrations.","Automated deployment workflows using Jenkins and Docker."]},{position:"Junior Web Developer",company:"Creative Agency XYZ",startDate:"2016",endDate:"2018",description:"Built responsive websites and e-commerce stores for diverse client base.",highlights:["Delivered 15+ client projects on time and within budget.","Collaborated with designers to ensure pixel-perfect implementation of UI/UX."]}],education:[{degree:"B.S. Computer Science",institution:"University of California, Berkeley",startDate:"2012",endDate:"2016",gpa:"3.8"}],projects:[{name:"AI Code Assistant",description:"Open source IDE extension using LLMs to suggest code completions.",technologies:["TypeScript","VS Code API","OpenAI"]},{name:"TaskMaster",description:"Kanban-style project management tool with offline sync.",technologies:["React","Firebase","PWA"]}]},marketing:{fullName:"Sarah Jenkins",email:"sarah.j@example.com",phone:"(555) 987-6543",location:"Chicago, IL",linkedIn:"linkedin.com/in/sarahjenkins",summary:"Results-driven Marketing Manager with a proven track record of increasing brand awareness and driving revenue growth. Skilled in digital strategy, content marketing, and data analytics. Adept at leading cross-functional teams to execute multi-channel campaigns.",skills:["Digital Strategy","SEO/SEM","Content Marketing","Google Analytics","Social Media Management","Email Automation (HubSpot)","Brand Development","Market Research","Copywriting","Team Leadership"],experience:[{position:"Marketing Manager",company:"GrowthUp Startups",startDate:"2020",endDate:"Present",description:"Oversee all marketing initiatives including organic, paid, and partnership channels.",highlights:["Increased inbound leads by 150% YoY through targeted SEO and content stratgies.","Managed a $50k monthly ad budget across Google Ads and LinkedIn, achieving a 4x ROAS.","Launched a successful referral program that contributed 20% of new revenue in Q1 2023."]},{position:"Content Specialist",company:"MediaHouse Agency",startDate:"2017",endDate:"2020",description:"Created compelling content for B2B technology clients.",highlights:["Wrote and published 50+ blog posts, whitepapers, and case studies.","Grew client social media engagement by 300% in the first year.","Coordinate webinar series attracting 1000+ qualified attendees."]}],education:[{degree:"B.A. Marketing & Communications",institution:"Northwestern University",startDate:"2013",endDate:"2017",gpa:"3.9"}],certifications:["Google Analytics Certified","HubSpot Inbound Marketing","Facebook Blueprint Certification"]},executive:{fullName:"James Stirling",email:"j.stirling@example.com",phone:"+1 (555) 555-0199",location:"London, UK / Remote",linkedIn:"linkedin.com/in/jstirling-exec",summary:"Strategic Operations Executive with 15+ years of experience scaling global teams and optimizing business processes. Expert in change management, P&L ownership, and strategic planning. Dedicated to driving operational excellence and sustainable growth.",skills:["Strategic Planning","P&L Management","Global Operations","Change Management","Stakeholder Relations","Process Optimization","M&A Integration","Executive Leadership","Risk Management"],experience:[{position:"VP of Operations",company:"Global Logistics Int.",startDate:"2018",endDate:"Present",description:"Direct global operations across 3 continents, managing a team of 150+ employees.",highlights:["Spearheaded digital transformation initiative reducing operational costs by 22% ($12M annually).","Led integration of two acquired competitors, unifying culture and systems within 6 months.","Improved customer satisfaction scores (NPS) from 45 to 72 through process re-engineering."]},{position:"Director of Supply Chain",company:"Retail Giant Co.",startDate:"2012",endDate:"2018",description:"Managed end-to-end supply chain logicstics for a Fortune 500 retailer.",highlights:["Optimized inventory turnover ratio by 1.5x, freeing up $5M in working capital.","Negotiated strategic partnerships with key logistics providers, securing 15% better rates.","Implemented sustainability program reducing carbon footprint by 10%."]}],education:[{degree:"Master of Business Administration (MBA)",institution:"London Business School",startDate:"2010",endDate:"2012"},{degree:"B.S. Industrial Engineering",institution:"Georgia Institute of Technology",startDate:"2004",endDate:"2008"}]}},pD={modern:m0,classic:W2,minimal:G2,executive:q2,creative:X2,ats:K2,atsclean:Y2,atsbold:Q2,atscompact:J2,twocolumn:Z2,developer:eC},g0=({template:n,data:e,className:t})=>{const r=e||(h=>{if(!h)return Bm.softwareEng;const f=h.toLowerCase();return f.includes("executive")||f.includes("classic")||f.includes("ats")?Bm.executive:f.includes("creative")||f.includes("two")||f.includes("marketing")?Bm.marketing:Bm.softwareEng})(n),i=pD[n]||m0,a=j.useRef(null),l=j.useRef(null),c=794,d=1123;return j.useEffect(()=>{const h=()=>{if(a.current&&l.current){const m=a.current.offsetWidth/c;l.current.style.transform=`scale(${m})`}};h();const f=new ResizeObserver(h);return a.current&&f.observe(a.current),()=>f.disconnect()},[]),u.jsxs("div",{ref:a,className:`relative bg-white overflow-hidden pointer-events-none select-none ${t}`,children:[u.jsx("div",{style:{paddingBottom:"141.4%"}}),u.jsx("div",{className:"absolute inset-0 w-full h-full",children:u.jsx("div",{ref:l,style:{width:`${c}px`,height:`${d}px`,transformOrigin:"top left"},className:"bg-white",children:u.jsx("div",{className:"p-8 h-full bg-white",children:u.jsx(i,{resume:{...r,template:n}})})})})]})},lA={usa:"",australia:"",uk:"",india:"",europe:""};function mD(){const[n,e]=j.useState([]),[t,s]=j.useState({}),[r,i]=j.useState("all"),[a,l]=j.useState(!0),[c,d]=j.useState(null),h=ks();j.useEffect(()=>{f()},[]);const f=async()=>{try{const[x,A]=await Promise.all([oA.getAll(),oA.getCountries()]);e(x),s(A)}catch(x){console.error("Failed to load templates:",x)}finally{l(!1)}},p=x=>{h("/editor",{state:{templateId:x.id,baseStyle:x.baseStyle,sample:x.sample}})},m=async x=>{h("/editor",{state:{templateId:x.id,baseStyle:x.baseStyle,sample:x.sample,useSample:!0}})},v=r==="all"?n:n.filter(x=>x.country===r);return a?u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx("div",{className:"w-8 h-8 border-2 border-black dark:border-white border-t-transparent rounded-full animate-spin"})}):u.jsxs("div",{className:"space-y-8",children:[u.jsxs("div",{className:"text-center space-y-4",children:[u.jsxs("h1",{className:"font-display text-4xl font-bold text-gray-900 dark:text-gray-50",children:["Choose Your ",u.jsx("span",{className:"text-black dark:text-white",children:"Template"})]}),u.jsx("p",{className:"text-gray-700 dark:text-gray-300 dark:text-gray-400 text-lg max-w-2xl mx-auto",children:"Select a template optimized for your target country. Each template follows local hiring standards and best practices."})]}),u.jsxs("div",{className:"flex flex-wrap justify-center gap-2 md:gap-3",children:[u.jsx("button",{onClick:()=>i("all"),className:`px-4 md:px-5 py-2 md:py-2.5 rounded-xl text-xs md:text-sm font-medium transition-smooth ${r==="all"?"bg-black dark:bg-white text-white dark:text-black":"bg-gray-50 dark:bg-[#27272A] text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 hover:text-gray-900 dark:text-gray-50"}`,children:" All Templates"}),Object.entries(t).map(([x,A])=>u.jsxs("button",{onClick:()=>i(x),className:`px-4 md:px-5 py-2 md:py-2.5 rounded-xl text-xs md:text-sm font-medium transition-smooth ${r===x?"bg-black dark:bg-white text-white dark:text-black":"bg-gray-50 dark:bg-[#27272A] text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 hover:text-gray-900 dark:text-gray-50"}`,children:[lA[x]," ",A]},x))]}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:v.map(x=>u.jsxs("div",{onDoubleClick:()=>d(x),className:"group bg-white dark:bg-[#18181B] border border-gray-200 dark:border-gray-800 rounded-2xl overflow-hidden hover:border-gray-300 dark:border-gray-700 transition-smooth cursor-pointer",children:[u.jsxs("div",{className:"w-full bg-gray-100 dark:bg-[#27272A] relative overflow-hidden",onClick:()=>d(x),children:[u.jsx(g0,{template:x.baseStyle,className:"w-full"}),u.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/10 transition-colors duration-300"}),u.jsx("div",{className:"absolute top-3 right-3 bg-white/90 dark:bg-black/90 backdrop-blur-sm rounded-full w-8 h-8 flex items-center justify-center shadow-sm z-10",children:u.jsx("span",{className:"text-lg",children:lA[x.country]})})]}),u.jsxs("div",{className:"p-5 space-y-4",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-50 text-lg",children:x.name}),u.jsx("p",{className:"text-gray-700 dark:text-gray-300 dark:text-gray-400 text-sm mt-1",children:x.description})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${x.baseStyle==="modern"?"bg-blue-500/10 text-blue-400":x.baseStyle==="classic"?"bg-amber-500/10 text-amber-400":"bg-emerald-500/10 text-emerald-400"}`,children:x.baseStyle}),u.jsx("span",{className:"text-gray-700 dark:text-gray-300 dark:text-gray-400 text-xs",children:t[x.country]})]}),u.jsxs("div",{className:"flex gap-3 pt-2",children:[u.jsx("button",{onClick:()=>p(x),className:"flex-1 btn btn-primary text-sm py-2.5",children:"Use Template"}),u.jsx("button",{onClick:()=>m(x),className:"btn btn-secondary text-sm py-2.5 px-4",title:"Use with sample data",children:u.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})})]})]})]},x.id))}),v.length===0&&u.jsx("div",{className:"text-center py-12",children:u.jsx("p",{className:"text-gray-700 dark:text-gray-300 dark:text-gray-400",children:"No templates found for this selection."})}),c&&u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-2 sm:p-4 bg-black/80 backdrop-blur-sm",onClick:()=>d(null),children:u.jsxs("div",{className:"relative max-w-4xl max-h-[85vh] sm:max-h-[90vh] w-full bg-white dark:bg-[#18181B] rounded-xl sm:rounded-2xl overflow-hidden shadow-2xl flex flex-col",onClick:x=>x.stopPropagation(),children:[u.jsxs("div",{className:"flex justify-between items-center p-3 sm:p-4 border-b border-gray-200 dark:border-gray-800 flex-shrink-0",children:[u.jsxs("h3",{className:"text-base sm:text-xl font-bold truncate pr-2",children:[c.name," Preview"]}),u.jsx("button",{onClick:()=>d(null),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors flex-shrink-0",children:u.jsx("svg",{className:"w-5 h-5 sm:w-6 sm:h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),u.jsx("div",{className:"flex-1 overflow-y-auto p-3 sm:p-6 bg-gray-100 dark:bg-[#0A0A0A] min-h-0",children:u.jsx("div",{className:"max-w-3xl mx-auto shadow-2xl",children:u.jsx(g0,{template:c.baseStyle})})}),u.jsxs("div",{className:"p-3 sm:p-4 border-t border-gray-200 dark:border-gray-800 flex justify-end gap-2 sm:gap-3 bg-white dark:bg-[#18181B] flex-shrink-0",children:[u.jsx("button",{onClick:()=>d(null),className:"btn btn-secondary text-sm sm:text-base px-3 sm:px-4",children:"Close"}),u.jsx("button",{onClick:()=>p(c),className:"btn btn-primary text-sm sm:text-base px-3 sm:px-4",children:"Use Template"})]})]})})]})}const gD="/api/job-match",yD={analyzeJob:async n=>(await Fe.post(`${gD}/analyze`,n)).data};function xD(){var x,A,b,g,w,S,C;const[n,e]=j.useState(""),[t,s]=j.useState(""),[r,i]=j.useState(""),[a,l]=j.useState(!1),[c,d]=j.useState(null),[h,f]=j.useState(""),p=ks(),m=async()=>{var N,_;if(!n.trim()){f("Please paste a job description");return}l(!0),f(""),d(null);try{const P=await yD.analyzeJob({jobDescription:n,jobTitle:t||null,company:r||null});d(P)}catch(P){f(((_=(N=P.response)==null?void 0:N.data)==null?void 0:_.error)||"Failed to analyze job. Please try again.")}finally{l(!1)}},v=()=>{c!=null&&c.tailoredResume&&p("/editor",{state:{sample:c.tailoredResume,useSample:!0,fromJobMatch:!0}})};return u.jsxs("div",{className:"max-w-6xl mx-auto space-y-8",children:[u.jsxs("div",{className:"text-center space-y-4",children:[u.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-white dark:bg-[#18181B] border border-gray-200 dark:border-gray-800 rounded-full shadow-sm",children:[u.jsx("span",{className:"text-2xl",children:""}),u.jsx("span",{className:"text-gray-900 dark:text-gray-50 font-semibold",children:"AI Job Match"})]}),u.jsx("h1",{className:"font-display text-3xl md:text-4xl font-bold text-gray-900 dark:text-gray-50",children:"Create Resume from Job Description"}),u.jsx("p",{className:"text-gray-700 dark:text-gray-300 dark:text-gray-400 max-w-2xl mx-auto",children:"Paste any job posting and our AI will analyze the requirements and create a perfectly tailored, ATS-optimized resume with the right skills and keywords."})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"bg-white dark:bg-[#18181B] border border-gray-200 dark:border-gray-800 rounded-xl p-6 space-y-4",children:[u.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-50 flex items-center gap-2",children:[u.jsx("svg",{className:"w-5 h-5 text-black dark:text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),"Job Details"]}),u.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm text-gray-700 dark:text-gray-300 dark:text-gray-400 mb-1",children:"Job Title (optional)"}),u.jsx("input",{type:"text",value:t,onChange:N=>s(N.target.value),placeholder:"e.g., Senior Software Engineer",className:"w-full text-sm"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm text-gray-700 dark:text-gray-300 dark:text-gray-400 mb-1",children:"Company (optional)"}),u.jsx("input",{type:"text",value:r,onChange:N=>i(N.target.value),placeholder:"e.g., Google",className:"w-full text-sm"})]})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"block text-sm text-gray-700 dark:text-gray-300 dark:text-gray-400 mb-1",children:["Job Description ",u.jsx("span",{className:"text-red-400",children:"*"})]}),u.jsx("textarea",{value:n,onChange:N=>e(N.target.value),placeholder:`Paste the complete job description here...

Example:
We are looking for a Senior Software Engineer to join our team. 

Requirements:
- 5+ years of experience with Java, Python, or Go
- Experience with cloud platforms (AWS, GCP, Azure)
- Strong understanding of microservices architecture
- Excellent problem-solving skills

Responsibilities:
- Design and implement scalable backend services
- Collaborate with cross-functional teams
- Mentor junior engineers`,rows:12,className:"w-full resize-none"})]}),u.jsx("button",{onClick:m,disabled:a||!n.trim(),className:"w-full btn btn-primary flex items-center justify-center gap-2",children:a?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Analyzing Job & Creating Resume..."]}):u.jsxs(u.Fragment,{children:[u.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),"Analyze & Create Resume"]})}),h&&u.jsx("div",{className:"p-3 rounded-lg bg-red-500/10 border border-red-500/20 text-red-400 text-sm",children:h})]}),u.jsxs("div",{className:"bg-white dark:bg-[#18181B]/30 border border-gray-200 dark:border-gray-200 dark:border-gray-800 rounded-xl p-4",children:[u.jsx("h3",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:" Tips for Best Results"}),u.jsxs("ul",{className:"text-xs text-gray-700 dark:text-gray-300 dark:text-gray-400 space-y-1",children:[u.jsx("li",{children:" Copy the entire job description including requirements & responsibilities"}),u.jsx("li",{children:" Include technical skills, tools, and technologies mentioned"}),u.jsx("li",{children:" The more detail you provide, the better the tailored resume"}),u.jsx("li",{children:" Works with any job posting from LinkedIn, Indeed, company websites, etc."})]})]})]}),u.jsx("div",{className:"space-y-4",children:c?u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"bg-white dark:bg-[#18181B] border border-gray-200 dark:border-gray-800 rounded-xl p-6 space-y-4",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-50 flex items-center gap-2",children:[u.jsx("svg",{className:"w-5 h-5 text-green-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Job Analysis"]}),c.matchScore>0&&u.jsxs("div",{className:`px-3 py-1 rounded-full text-sm font-semibold ${c.matchScore>=70?"bg-green-500/20 text-green-400":c.matchScore>=40?"bg-yellow-500/20 text-yellow-400":"bg-red-500/20 text-red-400"}`,children:[c.matchScore,"% Match"]})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{children:[u.jsx("span",{className:"text-xs text-gray-700 dark:text-gray-300 dark:text-gray-400 uppercase tracking-wide",children:"Position"}),u.jsx("p",{className:"text-gray-900 dark:text-gray-100 font-medium",children:c.jobTitle}),c.company&&u.jsx("p",{className:"text-gray-700 dark:text-gray-300 dark:text-gray-400 text-sm",children:c.company})]}),u.jsxs("div",{children:[u.jsx("span",{className:"text-xs text-gray-700 dark:text-gray-300 dark:text-gray-400 uppercase tracking-wide",children:"Experience Level"}),u.jsx("p",{className:"text-gray-900 dark:text-gray-100",children:c.experienceLevel})]}),u.jsxs("div",{children:[u.jsx("span",{className:"text-xs text-gray-700 dark:text-gray-300 dark:text-gray-400 uppercase tracking-wide",children:"Required Skills"}),u.jsx("div",{className:"flex flex-wrap gap-1.5 mt-1",children:(x=c.requiredSkills)==null?void 0:x.map((N,_)=>u.jsx("span",{className:"px-2 py-1 bg-red-500/10 text-red-400 rounded text-xs",children:N},_))})]}),((A=c.preferredSkills)==null?void 0:A.length)>0&&u.jsxs("div",{children:[u.jsx("span",{className:"text-xs text-gray-700 dark:text-gray-300 dark:text-gray-400 uppercase tracking-wide",children:"Preferred Skills"}),u.jsx("div",{className:"flex flex-wrap gap-1.5 mt-1",children:(b=c.preferredSkills)==null?void 0:b.map((N,_)=>u.jsx("span",{className:"px-2 py-1 bg-blue-500/10 text-blue-400 rounded text-xs",children:N},_))})]}),u.jsxs("div",{children:[u.jsx("span",{className:"text-xs text-gray-700 dark:text-gray-300 dark:text-gray-400 uppercase tracking-wide",children:"ATS Keywords"}),u.jsx("div",{className:"flex flex-wrap gap-1.5 mt-1",children:(g=c.keywords)==null?void 0:g.map((N,_)=>u.jsx("span",{className:"px-2 py-1 bg-black dark:bg-white/10 text-black dark:text-white rounded text-xs",children:N},_))})]})]})]}),((w=c.suggestions)==null?void 0:w.length)>0&&u.jsxs("div",{className:"bg-white dark:bg-[#18181B] border border-gray-200 dark:border-gray-800 rounded-xl p-6",children:[u.jsxs("h3",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100 mb-3 flex items-center gap-2",children:[u.jsx("span",{className:"text-lg",children:""})," Resume Tips"]}),u.jsx("ul",{className:"space-y-2",children:c.suggestions.map((N,_)=>u.jsxs("li",{className:"text-sm text-gray-700 dark:text-gray-300 dark:text-gray-400 flex items-start gap-2",children:[u.jsx("span",{className:"text-black dark:text-white mt-1",children:""}),N]},_))})]}),c.tailoredResume&&u.jsxs("div",{className:"bg-gradient-to-br from-black/10 to-gray-500/10 border border-black dark:border-white/30 rounded-xl p-6 space-y-4",children:[u.jsx("div",{className:"flex items-center justify-between",children:u.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-50 flex items-center gap-2",children:[u.jsx("span",{className:"text-2xl",children:""}),"Tailored Resume Ready!"]})}),u.jsxs("div",{className:"bg-white dark:bg-[#18181B] rounded-lg p-4 space-y-2",children:[u.jsx("p",{className:"text-gray-900 dark:text-gray-100 font-medium",children:c.tailoredResume.fullName}),u.jsx("p",{className:"text-gray-700 dark:text-gray-300 dark:text-gray-400 text-sm line-clamp-3",children:c.tailoredResume.summary}),u.jsxs("div",{className:"flex flex-wrap gap-1 mt-2",children:[(S=c.tailoredResume.skills)==null?void 0:S.slice(0,8).map((N,_)=>u.jsx("span",{className:"px-2 py-0.5 bg-gray-100 dark:bg-[#27272A] text-gray-700 dark:text-gray-300 rounded text-xs",children:N},_)),((C=c.tailoredResume.skills)==null?void 0:C.length)>8&&u.jsxs("span",{className:"text-xs text-gray-700 dark:text-gray-300 dark:text-gray-400",children:["+",c.tailoredResume.skills.length-8," more"]})]})]}),u.jsxs("button",{onClick:v,className:"w-full btn btn-primary flex items-center justify-center gap-2",children:[u.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Edit & Customize Resume"]})]})]}):u.jsxs("div",{className:"bg-white dark:bg-[#18181B]/30 border border-gray-200 dark:border-gray-200 dark:border-gray-800 rounded-xl p-12 text-center",children:[u.jsx("div",{className:"w-20 h-20 mx-auto bg-gray-50 dark:bg-[#27272A] rounded-2xl flex items-center justify-center mb-4",children:u.jsx("svg",{className:"w-10 h-10 text-gray-700 dark:text-gray-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),u.jsx("h3",{className:"text-xl font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Paste a Job Description"}),u.jsx("p",{className:"text-gray-700 dark:text-gray-300 dark:text-gray-400 text-sm max-w-sm mx-auto",children:"Copy any job posting and our AI will create a perfectly tailored resume with the right skills, keywords, and achievements."})]})})]})]})}const vt="/api/admin",Ht={checkAdmin:async()=>(await xe.get(`${vt}/check`)).data,getApiKeys:async()=>(await xe.get(`${vt}/api-keys`)).data,createApiKey:async n=>(await xe.post(`${vt}/api-keys`,n)).data,updateApiKey:async(n,e)=>(await xe.put(`${vt}/api-keys/${n}`,e)).data,deleteApiKey:async n=>{await xe.delete(`${vt}/api-keys/${n}`)},resetErrors:async n=>(await xe.post(`${vt}/api-keys/${n}/reset-errors`,{})).data,getAllUsers:async()=>(await xe.get(`${vt}/users`)).data,createUser:async n=>(await xe.post(`${vt}/users`,n)).data,updateUser:async(n,e)=>(await xe.put(`${vt}/users/${n}`,e)).data,deleteUser:async n=>{await xe.delete(`${vt}/users/${n}`)},getAllTemplates:async()=>(await xe.get(`${vt}/templates`)).data,generateTemplateFromAI:async n=>(await xe.post(`${vt}/templates/generate-ai`,n)).data,generateTemplateFromImage:async n=>(await xe.post(`${vt}/templates/generate-image`,n,{headers:{"Content-Type":"multipart/form-data"}})).data,deleteTemplate:async n=>{await xe.delete(`${vt}/templates/${n}`)},getAiConfigs:async()=>(await xe.get(`${vt}/ai-config`)).data,saveAiConfig:async n=>(await xe.post(`${vt}/ai-config`,n)).data,addAiKey:async(n,e)=>(await xe.post(`${vt}/ai-config/${n}/keys`,e,{headers:{"Content-Type":"text/plain"}})).data,activateAiConfig:async n=>{await xe.post(`${vt}/ai-config/${n}/activate`,{})},deleteAiConfig:async n=>{await xe.delete(`${vt}/ai-config/${n}`)},selectAiKey:async(n,e)=>(await xe.post(`${vt}/ai-config/${n}/select-key/${e}`,{})).data};function vD(){const n=ks(),[e,t]=j.useState(!1),[s,r]=j.useState(!0),[i,a]=j.useState("api-keys"),[l,c]=j.useState([]),[d,h]=j.useState(!1),[f,p]=j.useState({providerName:"groq",apiUrl:"",modelName:""}),[m,v]=j.useState([]),[x,A]=j.useState(!1),[b,g]=j.useState({name:"",provider:"mail",apiKey:"",priority:0}),[w,S]=j.useState(""),[C,N]=j.useState(""),[_,P]=j.useState([]),[L,R]=j.useState([]),[M,F]=j.useState(!1),[G,U]=j.useState(null),[ee,B]=j.useState(!1),[z,D]=j.useState(!1),[$,V]=j.useState(null),[J,W]=j.useState(null);j.useEffect(()=>{te()},[]);const te=async()=>{try{const{isAdmin:se}=await Ht.checkAdmin();if(!se){n("/");return}t(!0);try{await Promise.all([re(),$t(),Ne(),ot()])}catch(St){console.warn("Some dashboard data failed to load",St)}}catch{n("/")}finally{r(!1)}},re=async()=>{try{const se=await Ht.getAiConfigs();c(se)}catch(se){console.error("Failed to load AI configs:",se)}},pe=async se=>{se.preventDefault();try{await Ht.saveAiConfig(f),p({providerName:"groq",apiUrl:"",modelName:""}),h(!1),N("AI Strategy added!"),await re()}catch{S("Failed to add AI strategy")}},Ee=async(se,St)=>{try{await Ht.addAiKey(se,St),N("Key added!"),await re()}catch{S("Failed to add key")}},fe=async se=>{try{await Ht.activateAiConfig(se),N("Provider activated!"),await re()}catch{S("Failed to activate provider")}},Gs=async se=>{if(confirm("Delete this AI strategy?"))try{await Ht.deleteAiConfig(se),N("Strategy deleted"),await re()}catch{S("Failed to delete")}},qs=async(se,St)=>{try{await Ht.selectAiKey(se,St),N("Active key updated!"),await re()}catch{S("Failed to update active key")}},$t=async()=>{try{const se=await Ht.getApiKeys();v(se)}catch(se){console.error("Failed to load general API keys:",se)}},Ae=async se=>{se.preventDefault();try{await Ht.createApiKey(b),g({name:"",provider:"mail",apiKey:"",priority:0,owner:""}),A(!1),N("API Key added!"),await $t()}catch{S("Failed to add API key")}},Xs=async se=>{if(confirm("Delete this API key?"))try{await Ht.deleteApiKey(se),N("API Key deleted"),await $t()}catch{S("Failed to delete")}},Ne=async()=>{try{const se=await Ht.getAllUsers();P(se||[])}catch(se){console.error("Failed to load users:",se)}},Te=async se=>{try{await Ht.createUser(se),F(!1),N("User created successfully!"),await Ne()}catch{S("Failed to create user")}},Ze=async(se,St)=>{try{await Ht.updateUser(se,St),U(null),N("User updated successfully!"),await Ne()}catch{S("Failed to update user")}},nn=async se=>{if(confirm("Are you sure you want to delete this user?"))try{await Ht.deleteUser(se),N("User deleted successfully!"),await Ne()}catch{S("Failed to delete user")}},ot=async()=>{try{const se=await Ht.getAllTemplates();R(se||[])}catch(se){console.error("Failed to load templates:",se)}},_y=async se=>{D(!0);try{const St=await Ht.generateTemplateFromAI({description:se});N("Template generated successfully by AI!"),await ot()}catch{S("Failed to generate template with AI")}finally{D(!1)}},jy=async se=>{if(confirm("Are you sure you want to delete this template?"))try{await Ht.deleteTemplate(se),N("Template deleted successfully!"),await ot()}catch{S("Failed to delete template")}};return s?u.jsx("div",{className:"min-h-screen bg-white dark:bg-[#0A0A0A] flex items-center justify-center",children:u.jsx("div",{className:"w-12 h-12 border-3 border-gray-900 dark:border-gray-50 border-t-transparent rounded-full animate-spin"})}):e?u.jsxs("div",{className:"min-h-screen bg-white dark:bg-[#0A0A0A] text-gray-900 dark:text-gray-50",children:[u.jsx("header",{className:"bg-white dark:bg-[#18181B] border-b border-gray-200 dark:border-gray-800 sticky top-0 z-50",children:u.jsxs("div",{className:"max-w-7xl mx-auto px-4 md:px-6 py-4 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-xl md:text-2xl font-bold",children:"Admin Dashboard"}),u.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Manage API keys, users, and templates"})]}),u.jsx("button",{onClick:()=>n("/"),className:"btn btn-secondary text-sm w-full sm:w-auto text-center",children:" Back to App"})]})}),u.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-8",children:[w&&u.jsxs("div",{className:"mb-6 p-4 rounded-lg bg-red-500/10 border border-red-500/20 text-red-600 dark:text-red-400 flex justify-between items-center",children:[u.jsx("span",{children:w}),u.jsx("button",{onClick:()=>S(""),className:"text-xl",children:""})]}),C&&u.jsxs("div",{className:"mb-6 p-4 rounded-lg bg-green-500/10 border border-green-500/20 text-green-600 dark:text-green-400 flex justify-between items-center",children:[u.jsx("span",{children:C}),u.jsx("button",{onClick:()=>N(""),className:"text-xl",children:""})]}),u.jsxs("div",{className:"flex gap-2 overflow-x-auto invisible-scrollbar mb-8 border-b border-gray-200 dark:border-gray-800 whitespace-nowrap min-w-full",children:[u.jsx("button",{onClick:()=>a("api-keys"),className:`px-4 md:px-6 py-3 font-medium border-b-2 transition-colors ${i==="api-keys"?"border-gray-900 dark:border-gray-50 text-gray-900 dark:text-gray-50":"border-transparent text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"}`,children:" API Keys"}),u.jsx("button",{onClick:()=>a("users"),className:`px-4 md:px-6 py-3 font-medium border-b-2 transition-colors ${i==="users"?"border-gray-900 dark:border-gray-50 text-gray-900 dark:text-gray-50":"border-transparent text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"}`,children:" Users"}),u.jsx("button",{onClick:()=>a("templates"),className:`px-4 md:px-6 py-3 font-medium border-b-2 transition-colors ${i==="templates"?"border-gray-900 dark:border-gray-50 text-gray-900 dark:text-gray-50":"border-transparent text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"}`,children:" Templates"})]}),i==="api-keys"&&u.jsxs("div",{className:"space-y-8",children:[u.jsx(bD,{aiConfigs:l,onAddKey:Ee,onActivate:fe,onDelete:Gs,onAddConfig:pe,showAddConfigForm:d,setShowAddConfigForm:h,newConfig:f,setNewConfig:p,onSelectKey:qs}),u.jsx(AD,{keys:m,showAddForm:x,setShowAddForm:A,newKey:b,setNewKey:g,onAddKey:Ae,onDelete:Xs})]}),i==="users"&&u.jsx(wD,{users:_,showAddForm:M,setShowAddForm:F,editingUser:G,setEditingUser:U,onAddUser:Te,onUpdateUser:Ze,onDeleteUser:nn}),i==="templates"&&u.jsx(kD,{templates:L,showCreator:ee,setShowCreator:B,aiGenerating:z,onGenerateFromAI:_y,onDelete:jy,setPreviewTemplate:W}),J&&u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm",onClick:()=>W(null),children:u.jsxs("div",{className:"relative max-w-4xl max-h-[90vh] w-full bg-white dark:bg-[#18181B] rounded-2xl overflow-hidden shadow-2xl flex flex-col",onClick:se=>se.stopPropagation(),children:[u.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-200 dark:border-gray-800",children:[u.jsxs("h3",{className:"text-xl font-bold",children:[J.name," Preview"]}),u.jsx("button",{onClick:()=>W(null),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:u.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),u.jsx("div",{className:"flex-1 overflow-y-auto p-6 bg-gray-100 dark:bg-[#0A0A0A]",children:u.jsx("div",{className:"max-w-3xl mx-auto shadow-2xl",children:u.jsx(g0,{template:J.baseStyle})})}),u.jsx("div",{className:"p-4 border-t border-gray-200 dark:border-gray-800 flex justify-end gap-3 bg-white dark:bg-[#18181B]",children:u.jsx("button",{onClick:()=>W(null),className:"btn btn-secondary",children:"Close"})})]})})]})]}):null}function bD({aiConfigs:n,onAddKey:e,onActivate:t,onDelete:s,onAddConfig:r,showAddConfigForm:i,setShowAddConfigForm:a,newConfig:l,setNewConfig:c,onSelectKey:d}){return u.jsx("div",{className:"space-y-6",children:u.jsxs("div",{className:"bg-white dark:bg-[#18181B] border border-gray-200 dark:border-gray-800 rounded-xl p-6",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-xl font-semibold",children:"AI Provider Management"}),u.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Configure multiple AI providers and rotate their API keys"})]}),u.jsx("button",{onClick:()=>a(!i),className:"btn btn-primary text-sm w-full sm:w-auto",children:i?"Cancel":"+ Add Provider"})]}),i&&u.jsxs("form",{onSubmit:r,className:"bg-gray-50 dark:bg-[#27272A] rounded-lg p-4 md:p-6 mb-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[u.jsxs("div",{className:"md:col-span-2",children:[u.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Provider Name"}),u.jsx("input",{placeholder:"e.g. Groq, OpenAI, Anthropic",value:l.providerName,onChange:h=>c({...l,providerName:h.target.value}),className:"w-full",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"API Endpoint URL"}),u.jsx("input",{placeholder:"https://...",value:l.apiUrl,onChange:h=>c({...l,apiUrl:h.target.value}),className:"w-full px-3 py-2 border rounded dark:bg-[#18181B] dark:border-gray-700 font-mono text-xs",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Model Name"}),u.jsx("input",{placeholder:"e.g. llama-3.3-70b-versatile",value:l.modelName,onChange:h=>c({...l,modelName:h.target.value}),className:"w-full px-3 py-2 border rounded dark:bg-[#18181B] dark:border-gray-700 font-mono text-xs",required:!0})]}),u.jsx("button",{className:"btn btn-primary md:col-span-2 mt-2",children:"Create Strategy"})]}),u.jsx("div",{className:"grid gap-6",children:n.length===0?u.jsx("div",{className:"text-center py-12 text-gray-500",children:'No AI strategies configured. Click "+ Add Provider" to begin.'}):n.map(h=>u.jsxs("div",{className:`border rounded-xl p-6 transition-all ${h.active?"border-blue-500 bg-blue-500/5 ring-1 ring-blue-500/20":"border-gray-200 dark:border-gray-800"}`,children:[u.jsxs("div",{className:"flex justify-between items-start mb-6",children:[u.jsxs("div",{children:[u.jsxs("h3",{className:"text-lg font-bold flex items-center gap-3",children:[h.providerName.toUpperCase(),h.active&&u.jsx("span",{className:"text-[10px] bg-blue-500 text-white px-2 py-0.5 rounded-full uppercase tracking-tighter",children:"Current Provider"})]}),u.jsxs("div",{className:"flex flex-col mt-2 gap-1",children:[u.jsx("span",{className:"text-xs font-mono text-gray-400 bg-gray-100 dark:bg-gray-800 px-2 py-0.5 rounded w-fit",children:h.modelName}),u.jsx("span",{className:"text-[10px] text-gray-500 break-all",children:h.apiUrl})]})]}),u.jsxs("div",{className:"flex gap-2",children:[!h.active&&u.jsx("button",{onClick:()=>t(h.id),className:"px-3 py-1.5 bg-blue-600 hover:bg-blue-700 text-white text-xs font-bold rounded-lg transition-colors",children:"Activate"}),u.jsx("button",{onClick:()=>s(h.id),className:"p-1.5 text-gray-400 hover:text-red-500 transition-colors",title:"Delete Provider",children:u.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),u.jsxs("div",{className:"pt-4 border-t border-gray-100 dark:border-gray-800",children:[u.jsxs("div",{className:"flex justify-between items-center mb-4",children:[u.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Rotational API Keys"}),u.jsxs("span",{className:"text-[10px] text-gray-500",children:[h.apiKeys.length," keys total"]})]}),u.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:h.apiKeys.map((f,p)=>u.jsxs("div",{className:`px-3 py-2 rounded-lg border flex items-center gap-3 transition-all ${h.currentKeyIndex===p?"border-green-500 bg-green-500/5 text-green-600 ring-1 ring-green-500/20":"border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900/50"}`,children:[u.jsxs("div",{className:"flex flex-col",children:[u.jsxs("span",{className:"text-[10px] uppercase font-bold text-gray-400",children:["Key ",p+1]}),u.jsxs("span",{className:"font-mono text-xs tracking-widest",children:["",f.slice(-6)]})]}),h.currentKeyIndex===p&&u.jsxs("div",{className:"flex items-center gap-1.5",children:[u.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-green-500 animate-pulse"}),u.jsx("span",{className:"text-[9px] font-bold uppercase",children:"Ready"})]}),h.currentKeyIndex!==p&&u.jsx("button",{onClick:()=>d(h.id,p),className:"text-[10px] bg-gray-200 dark:bg-gray-800 hover:bg-gray-300 dark:hover:bg-gray-700 px-2 py-1 rounded transition-colors",children:"Select"})]},p))}),u.jsxs("div",{className:"relative group",children:[u.jsx("input",{className:"w-full text-xs py-2.5 pl-4 pr-12 border rounded-xl dark:bg-[#0A0A0A] dark:border-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500/50 transition-all border-dashed",placeholder:"Type new API key and press Enter to add...",onKeyDown:f=>{f.key==="Enter"&&f.target.value.trim()&&(e(h.id,f.target.value.trim()),f.target.value="")}}),u.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-[10px] text-gray-400 font-bold uppercase bg-gray-100 dark:bg-gray-800 px-1.5 py-0.5 rounded",children:" Enter"})]}),u.jsx("p",{className:"mt-2 text-[10px] text-gray-500 italic",children:"Keys are rotated automatically on 429 Too Many Requests errors."})]})]},h.id))})]})})}function wD({users:n,showAddForm:e,setShowAddForm:t,editingUser:s,setEditingUser:r,onAddUser:i,onUpdateUser:a,onDeleteUser:l}){const[c,d]=j.useState({email:"",password:"",isAdmin:!1}),h=f=>{f.preventDefault(),s?a(s.id,c):i(c),d({email:"",password:"",isAdmin:!1})};return u.jsxs("div",{className:"bg-white dark:bg-[#18181B] border border-gray-200 dark:border-gray-800 rounded-xl p-6",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-xl font-semibold",children:"User Management"}),u.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Add, edit, and manage user accounts"})]}),u.jsx("button",{onClick:()=>{t(!e),r(null),d({email:"",password:"",isAdmin:!1})},className:"btn btn-primary text-sm w-full sm:w-auto",children:e?"Cancel":"+ Add User"})]}),(e||s)&&u.jsxs("form",{onSubmit:h,className:"bg-gray-50 dark:bg-[#27272A] rounded-xl p-6 mb-8 border border-gray-100 dark:border-gray-800 shadow-sm transition-all",children:[u.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),u.jsx("input",{type:"email",value:c.email,onChange:f=>d({...c,email:f.target.value}),placeholder:"user@example.com",className:"w-full text-sm",required:!0})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:["Password ",s&&u.jsx("span",{className:"text-xs font-normal text-gray-400 ml-1",children:"(Optional)"})]}),u.jsx("input",{type:"password",value:c.password,onChange:f=>d({...c,password:f.target.value}),placeholder:"",className:"w-full text-sm",required:!s})]})]}),u.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:items-center justify-between gap-4 pt-6 border-t border-gray-100 dark:border-gray-800",children:[u.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[u.jsxs("div",{className:"relative",children:[u.jsx("input",{type:"checkbox",checked:c.isAdmin,onChange:f=>d({...c,isAdmin:f.target.checked}),className:"sr-only"}),u.jsx("div",{className:`w-11 h-6 rounded-full transition-colors ${c.isAdmin?"bg-purple-600":"bg-gray-300 dark:bg-gray-700"}`}),u.jsx("div",{className:`absolute left-1 top-1 bg-white w-4 h-4 rounded-full transition-transform ${c.isAdmin?"translate-x-5":"translate-x-0"}`})]}),u.jsx("div",{className:"flex flex-col",children:u.jsx("span",{className:"text-sm font-semibold text-gray-900 dark:text-gray-50",children:c.isAdmin?" Administrator":"Standard User"})})]}),u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{type:"submit",className:"flex-1 sm:flex-none btn btn-primary px-8",children:s?"Save Updates":"Create User"}),u.jsx("button",{type:"button",onClick:()=>{t(!1),r(null)},className:"flex-1 sm:flex-none btn btn-secondary px-8",children:"Cancel"})]})]})]}),u.jsxs("div",{className:"overflow-hidden",children:[u.jsx("div",{className:"hidden md:block overflow-x-auto",children:u.jsxs("table",{className:"w-full",children:[u.jsx("thead",{className:"border-b border-gray-200 dark:border-gray-800",children:u.jsxs("tr",{children:[u.jsx("th",{className:"pb-3 text-left text-sm font-medium text-gray-600 dark:text-gray-400",children:"Email"}),u.jsx("th",{className:"pb-3 text-left text-sm font-medium text-gray-600 dark:text-gray-400",children:"Admin Access"}),u.jsx("th",{className:"pb-3 text-left text-sm font-medium text-gray-600 dark:text-gray-400",children:"Created"}),u.jsx("th",{className:"pb-3 text-left text-sm font-medium text-gray-600 dark:text-gray-400 text-right",children:"Actions"})]})}),u.jsx("tbody",{children:n.length===0?u.jsx("tr",{children:u.jsx("td",{colSpan:"4",className:"py-12 text-center text-gray-500 dark:text-gray-400",children:"No users found."})}):n.map(f=>u.jsxs("tr",{className:"border-b border-gray-100 dark:border-gray-800/50",children:[u.jsx("td",{className:"py-4 font-medium text-sm",children:f.email}),u.jsx("td",{className:"py-4",children:u.jsxs("button",{onClick:()=>{f.isAdmin&&!confirm(`Are you sure you want to revoke admin access for ${f.email}?`)||a(f.id,{isAdmin:!f.isAdmin})},className:`flex items-center gap-2 px-3 py-1.5 rounded-lg text-xs font-semibold transition-all border ${f.isAdmin?"bg-purple-500/10 text-purple-600 border-purple-500/20 dark:text-purple-400 dark:border-purple-500/30":"bg-gray-100 text-gray-600 border-gray-200 dark:bg-gray-800 dark:text-gray-400 dark:border-gray-700"}`,children:[u.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${f.isAdmin?"bg-purple-500 animate-pulse":"bg-gray-400"}`}),f.isAdmin?"Revoke Admin":"Grant Admin"]})}),u.jsx("td",{className:"py-4 text-xs text-gray-600 dark:text-gray-400",children:f.createdAt?new Date(f.createdAt).toLocaleDateString():"N/A"}),u.jsx("td",{className:"py-4 text-right",children:u.jsxs("div",{className:"flex gap-2 justify-end",children:[u.jsx("button",{onClick:()=>{r(f),d({email:f.email,password:"",isAdmin:f.isAdmin}),t(!1)},className:"px-3 py-1.5 rounded text-xs font-medium bg-blue-500/10 text-blue-600 dark:text-blue-400 hover:bg-blue-500/20 transition-colors",children:"Edit"}),u.jsx("button",{onClick:()=>l(f.id),className:"px-3 py-1.5 rounded text-xs font-medium bg-red-500/10 text-red-600 dark:text-red-400 hover:bg-red-500/20 transition-colors",children:"Delete"})]})})]},f.id))})]})}),u.jsx("div",{className:"md:hidden space-y-4",children:n.length===0?u.jsx("div",{className:"py-12 text-center text-gray-500 dark:text-gray-400 border border-dashed border-gray-200 dark:border-gray-800 rounded-xl",children:"No users found."}):n.map(f=>u.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-[#1C1C1F] border border-gray-200 dark:border-gray-800 rounded-xl space-y-3",children:[u.jsxs("div",{className:"flex justify-between items-start",children:[u.jsxs("div",{className:"flex-1 truncate mr-2",children:[u.jsx("p",{className:"font-medium text-sm truncate",children:f.email}),u.jsxs("p",{className:"text-[10px] text-gray-500 mt-0.5",children:["Joined ",f.createdAt?new Date(f.createdAt).toLocaleDateString():"N/A"]})]}),u.jsx("span",{className:`px-2 py-0.5 rounded-full text-[9px] font-bold uppercase tracking-wider ${f.isAdmin?"bg-purple-500/10 text-purple-600 dark:text-purple-400":"bg-gray-500/10 text-gray-600 dark:text-gray-400"}`,children:f.isAdmin?"Admin":"User"})]}),u.jsxs("div",{className:"flex gap-2 pt-2 border-t border-gray-200 dark:border-gray-800",children:[u.jsx("button",{onClick:()=>{f.isAdmin&&!confirm(`Are you sure you want to revoke admin access for ${f.email}?`)||a(f.id,{isAdmin:!f.isAdmin})},className:`flex-1 py-2 rounded text-[10px] font-bold uppercase border transition-all ${f.isAdmin?"bg-purple-500/10 text-purple-600 border-purple-500/20":"bg-gray-100 text-gray-500 border-gray-200"}`,children:f.isAdmin?"Revoke Admin":"Grant Admin"}),u.jsx("button",{onClick:()=>{r(f),d({email:f.email,password:"",isAdmin:f.isAdmin}),t(!1)},className:"flex-1 py-2 rounded text-[10px] font-bold uppercase bg-blue-500/10 text-blue-600",children:"Edit"}),u.jsx("button",{onClick:()=>l(f.id),className:"px-3 py-2 rounded bg-red-500/10 text-red-600",children:u.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]},f.id))})]})]})}function kD({templates:n,showCreator:e,setShowCreator:t,aiGenerating:s,onGenerateFromImage:r,onGenerateFromAI:i,onDelete:a,setPreviewTemplate:l}){const[c,d]=j.useState(""),[h,f]=j.useState(null),p=m=>{const v=m.target.files[0];v&&f(v)};return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"bg-white dark:bg-[#18181B] border border-gray-200 dark:border-gray-800 rounded-xl p-6",children:[u.jsx("div",{className:"flex justify-between items-center mb-6",children:u.jsxs("div",{children:[u.jsx("h2",{className:"text-xl font-semibold",children:" AI Template Creator"}),u.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Generate new resume templates using AI or upload an image"})]})}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[u.jsxs("div",{className:"bg-gray-50 dark:bg-[#27272A] rounded-lg p-4 md:p-6",children:[u.jsx("h3",{className:"font-semibold mb-3",children:"Generate from Description"}),u.jsx("textarea",{value:c,onChange:m=>d(m.target.value),placeholder:"Describe the template you want to create... e.g., 'A modern, minimalist template with a sidebar for skills, using blue accents and clean typography'",rows:5,className:"w-full mb-4 text-sm"}),u.jsx("button",{onClick:()=>{c.trim()&&(i(c),d(""))},disabled:s||!c.trim(),className:"btn btn-primary w-full",children:s?"Generating...":" Generate Template"})]}),u.jsxs("div",{className:"bg-gray-50 dark:bg-[#27272A] rounded-lg p-4 md:p-6",children:[u.jsx("h3",{className:"font-semibold mb-3",children:"Generate from Image"}),u.jsxs("div",{className:"border-2 border-dashed border-gray-300 dark:border-gray-700 rounded-lg p-4 md:p-6 text-center mb-4",children:[u.jsx("input",{type:"file",accept:"image/*",onChange:p,className:"hidden",id:"template-image"}),u.jsx("label",{htmlFor:"template-image",className:"cursor-pointer",children:h?u.jsxs("div",{children:[u.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 break-all",children:h.name}),u.jsx("p",{className:"text-[10px] text-gray-500 mt-1",children:"Click to change"})]}):u.jsxs("div",{children:[u.jsx("svg",{className:"w-10 h-10 md:w-12 md:h-12 mx-auto text-gray-400 mb-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),u.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Upload template image"})]})})]}),u.jsx("button",{onClick:()=>{h&&(r(h),f(null))},disabled:s||!h,className:"btn btn-primary w-full",children:s?"Analyzing...":" Generate from Image"})]})]})]}),u.jsxs("div",{className:"bg-white dark:bg-[#18181B] border border-gray-200 dark:border-gray-800 rounded-xl p-6",children:[u.jsx("h2",{className:"text-xl font-semibold mb-6",children:"Existing Templates"}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.length===0?u.jsx("div",{className:"col-span-3 py-12 text-center text-gray-500 dark:text-gray-400",children:"No templates yet. Create one using AI!"}):n.map(m=>u.jsxs("div",{className:"border border-gray-200 dark:border-gray-800 rounded-lg p-4 group",children:[u.jsxs("div",{className:"aspect-[8.5/11] bg-gray-100 dark:bg-[#27272A] rounded mb-3 overflow-hidden border border-gray-200 dark:border-gray-700 cursor-pointer relative",onClick:()=>l(m),children:[u.jsx(g0,{template:m.baseStyle,className:"w-full"}),u.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/10 transition-colors flex items-center justify-center opacity-0 group-hover:opacity-100",children:u.jsx("span",{className:"bg-white/90 dark:bg-black/90 px-3 py-1.5 rounded-full text-xs font-bold shadow-sm backdrop-blur-sm",children:"Quick Look"})})]}),u.jsx("h3",{className:"font-semibold mb-1",children:m.name}),u.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:m.description}),u.jsx("button",{onClick:()=>a(m.id),className:"text-sm text-red-600 dark:text-red-400 hover:underline",children:"Delete"})]},m.id))})]})]})}function AD({keys:n,showAddForm:e,setShowAddForm:t,newKey:s,setNewKey:r,onAddKey:i,onDelete:a}){return u.jsxs("div",{className:"bg-white dark:bg-[#18181B] border border-gray-200 dark:border-gray-800 rounded-xl p-6",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-xl font-semibold",children:"System API Keys"}),u.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Manage infrastructure keys like Mail (Gmail App Password), Groq, etc."})]}),u.jsx("button",{onClick:()=>t(!e),className:"btn btn-secondary text-sm w-full sm:w-auto",children:e?"Cancel":"+ Add System Key"})]}),e&&u.jsxs("form",{onSubmit:i,className:"bg-gray-50 dark:bg-[#27272A] rounded-lg p-4 md:p-6 mb-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Key Name"}),u.jsx("input",{placeholder:"e.g. My Mail Password",value:s.name,onChange:l=>r({...s,name:l.target.value}),className:"w-full px-3 py-2 border rounded dark:bg-[#18181B] dark:border-gray-700",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Provider"}),u.jsxs("select",{value:s.provider,onChange:l=>r({...s,provider:l.target.value}),className:"w-full px-3 py-2 border rounded dark:bg-[#18181B] dark:border-gray-700",children:[u.jsx("option",{value:"mail",children:"Mail (Gmail App Password)"}),u.jsx("option",{value:"groq",children:"Groq"}),u.jsx("option",{value:"openai",children:"OpenAI"})]})]}),s.provider==="mail"&&u.jsxs("div",{className:"md:col-span-2",children:[u.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Email Address (Sender)"}),u.jsx("input",{type:"email",placeholder:"e.g. your-email@gmail.com",value:s.owner||"",onChange:l=>r({...s,owner:l.target.value}),className:"w-full px-3 py-2 border rounded dark:bg-[#18181B] dark:border-gray-700 font-mono text-xs",required:s.provider==="mail"}),u.jsx("p",{className:"text-[10px] text-gray-500 mt-1",children:"This email address must match the account generating the App Password."})]}),u.jsxs("div",{className:"md:col-span-2",children:[u.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"API Key / Password"}),u.jsx("input",{type:"password",placeholder:"Enter sensitive key...",value:s.apiKey,onChange:l=>r({...s,apiKey:l.target.value}),className:"w-full px-3 py-2 border rounded dark:bg-[#18181B] dark:border-gray-700 font-mono text-xs",required:!0})]}),u.jsx("button",{className:"btn btn-primary md:col-span-2 mt-2",children:"Save System Key"})]}),u.jsx("div",{className:"space-y-3",children:n.length===0?u.jsx("div",{className:"text-center py-8 text-gray-500",children:"No system keys configured."}):n.map(l=>u.jsxs("div",{className:"flex justify-between items-center p-4 border border-gray-100 dark:border-gray-800 rounded-lg",children:[u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("span",{className:"font-bold",children:l.name}),u.jsx("span",{className:"text-[10px] bg-gray-100 dark:bg-gray-800 px-2 py-0.5 rounded uppercase",children:l.provider})]}),u.jsx("p",{className:"text-xs font-mono text-gray-400 mt-1",children:l.apiKey})]}),u.jsx("button",{onClick:()=>a(l.id),className:"text-gray-400 hover:text-red-500 transition-colors",children:u.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},l.id))})]})}function SD(){const n=ks(),[e,t]=j.useState([]),[s,r]=j.useState(!0),[i,a]=j.useState("");j.useEffect(()=>{l()},[]);const l=async()=>{if(!xr.isNativePlatform()){r(!1);return}try{try{if((await Is.checkPermissions()).publicStorage!=="granted"&&(await Is.requestPermissions()).publicStorage!=="granted"){a("Storage permission needed to show downloads."),r(!1);return}}catch(f){console.warn("Permission check failed:",f)}const h=(await Is.readdir({path:"",directory:Ao.Documents})).files.map(f=>typeof f=="string"?{name:f}:f).filter(f=>f.name&&f.name.toLowerCase().endsWith(".pdf")).sort((f,p)=>(p.mtime||0)-(f.mtime||0));t(h)}catch(d){console.error("Failed to load downloads:",d),a("Could not access Documents folder. "+d.message)}finally{r(!1)}},c=d=>{n(`/pdf-viewer?file=${encodeURIComponent(d.name)}`)};return xr.isNativePlatform()?u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Downloads"}),u.jsx("button",{onClick:l,className:"p-2 text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-full transition-colors",title:"Refresh",children:""})]}),s?u.jsx("div",{className:"flex justify-center py-10",children:u.jsx("div",{className:"w-8 h-8 border-2 border-gray-900 dark:border-white border-t-transparent rounded-full animate-spin"})}):i?u.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 rounded-xl text-sm border border-red-200 dark:border-red-800",children:i}):e.length===0?u.jsxs("div",{className:"text-center py-16 bg-gray-50 dark:bg-zinc-900 rounded-2xl border border-gray-200 dark:border-gray-800",children:[u.jsx("p",{className:"text-gray-500",children:"No PDF files found in Documents."}),u.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"Download a resume to see it here"})]}):u.jsx("div",{className:"grid gap-3",children:e.map((d,h)=>u.jsxs("div",{onClick:()=>c(d),className:"flex items-center gap-3 p-4 bg-white dark:bg-black border border-gray-200 dark:border-gray-800 rounded-xl hover:border-gray-300 dark:hover:border-gray-700 transition-colors active:scale-98 cursor-pointer",children:[u.jsx("div",{className:"w-10 h-10 flex-shrink-0 bg-red-100 dark:bg-red-900/20 text-red-600 dark:text-red-400 rounded-lg flex items-center justify-center",children:u.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("p",{className:"font-medium text-gray-900 dark:text-white truncate",children:d.name}),u.jsx("p",{className:"text-xs text-gray-500",children:"Tap to open"})]}),u.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]},h))})]}):u.jsx("div",{className:"p-8 text-center text-gray-500",children:"This feature is only available on the mobile app."})}const ED=gy("Share",{web:()=>V2(()=>import("./web-DnPIvZzP.js"),[]).then(n=>new n.ShareWeb)}),An=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),bv=[.001,0,0,.001,0,0],ux=1.35,us={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Jr={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},mf="pdfjs_internal_editor_",ie={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},ye={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},tC={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Vt={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Xh={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},pt={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Cc={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},hm={ERRORS:0,WARNINGS:1,INFOS:5},zu={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},Um={moveTo:0,lineTo:1,curveTo:2,closePath:3},nC={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let xy=hm.WARNINGS;function CD(n){Number.isInteger(n)&&(xy=n)}function ND(){return xy}function vy(n){xy>=hm.INFOS&&console.info(`Info: ${n}`)}function ae(n){xy>=hm.WARNINGS&&console.warn(`Warning: ${n}`)}function $e(n){throw new Error(n)}function ve(n,e){n||$e(e)}function _D(n){switch(n==null?void 0:n.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Kw(n,e=null,t=null){if(!n)return null;if(t&&typeof n=="string"){if(t.addDefaultProtocol&&n.startsWith("www.")){const r=n.match(/\./g);(r==null?void 0:r.length)>=2&&(n=`http://${n}`)}if(t.tryConvertEncoding)try{n=LD(n)}catch{}}const s=e?URL.parse(n,e):URL.parse(n);return _D(s)?s:null}function Yw(n,e,t=!1){const s=URL.parse(n);return s?(s.hash=e,s.href):t&&Kw(n,"http://example.com")?n.split("#",1)[0]+`${e?`#${e}`:""}`:""}function de(n,e,t,s=!1){return Object.defineProperty(n,e,{value:t,enumerable:!s,configurable:!0,writable:!1}),t}const bc=function(){function e(t,s){this.message=t,this.name=s}return e.prototype=new Error,e.constructor=e,e}();class cA extends bc{constructor(e,t){super(e,"PasswordException"),this.code=t}}class hx extends bc{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class y0 extends bc{constructor(e){super(e,"InvalidPDFException")}}class gf extends bc{constructor(e,t,s){super(e,"ResponseException"),this.status=t,this.missing=s}}class jD extends bc{constructor(e){super(e,"FormatError")}}class na extends bc{constructor(e){super(e,"AbortException")}}function sC(n){(typeof n!="object"||(n==null?void 0:n.length)===void 0)&&$e("Invalid argument for bytesToString");const e=n.length,t=8192;if(e<t)return String.fromCharCode.apply(null,n);const s=[];for(let r=0;r<e;r+=t){const i=Math.min(r+t,e),a=n.subarray(r,i);s.push(String.fromCharCode.apply(null,a))}return s.join("")}function fm(n){typeof n!="string"&&$e("Invalid argument for stringToBytes");const e=n.length,t=new Uint8Array(e);for(let s=0;s<e;++s)t[s]=n.charCodeAt(s)&255;return t}function PD(n){return String.fromCharCode(n>>24&255,n>>16&255,n>>8&255,n&255)}function TD(){const n=new Uint8Array(4);return n[0]=1,new Uint32Array(n.buffer,0,1)[0]===1}function RD(){try{return new Function(""),!0}catch{return!1}}class zt{static get isLittleEndian(){return de(this,"isLittleEndian",TD())}static get isEvalSupported(){return de(this,"isEvalSupported",RD())}static get isOffscreenCanvasSupported(){return de(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return de(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:e,userAgent:t}=navigator;return de(this,"platform",{isAndroid:t.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:t.includes("Firefox")})}static get isCSSRoundSupported(){var e,t;return de(this,"isCSSRoundSupported",(t=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const fx=Array.from(Array(256).keys(),n=>n.toString(16).padStart(2,"0"));var Yi,ug,wv;class K{static makeHexColor(e,t,s){return`#${fx[e]}${fx[t]}${fx[s]}`}static domMatrixToTransform(e){return[e.a,e.b,e.c,e.d,e.e,e.f]}static scaleMinMax(e,t){let s;e[0]?(e[0]<0&&(s=t[0],t[0]=t[2],t[2]=s),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(s=t[1],t[1]=t[3],t[3]=s),t[1]*=e[3],t[3]*=e[3]):(s=t[0],t[0]=t[1],t[1]=s,s=t[2],t[2]=t[3],t[3]=s,e[1]<0&&(s=t[1],t[1]=t[3],t[3]=s),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(s=t[0],t[0]=t[2],t[2]=s),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static multiplyByDOMMatrix(e,t){return[e[0]*t.a+e[2]*t.b,e[1]*t.a+e[3]*t.b,e[0]*t.c+e[2]*t.d,e[1]*t.c+e[3]*t.d,e[0]*t.e+e[2]*t.f+e[4],e[1]*t.e+e[3]*t.f+e[5]]}static applyTransform(e,t,s=0){const r=e[s],i=e[s+1];e[s]=r*t[0]+i*t[2]+t[4],e[s+1]=r*t[1]+i*t[3]+t[5]}static applyTransformToBezier(e,t,s=0){const r=t[0],i=t[1],a=t[2],l=t[3],c=t[4],d=t[5];for(let h=0;h<6;h+=2){const f=e[s+h],p=e[s+h+1];e[s+h]=f*r+p*a+c,e[s+h+1]=f*i+p*l+d}}static applyInverseTransform(e,t){const s=e[0],r=e[1],i=t[0]*t[3]-t[1]*t[2];e[0]=(s*t[3]-r*t[2]+t[2]*t[5]-t[4]*t[3])/i,e[1]=(-s*t[1]+r*t[0]+t[4]*t[1]-t[5]*t[0])/i}static axialAlignedBoundingBox(e,t,s){const r=t[0],i=t[1],a=t[2],l=t[3],c=t[4],d=t[5],h=e[0],f=e[1],p=e[2],m=e[3];let v=r*h+c,x=v,A=r*p+c,b=A,g=l*f+d,w=g,S=l*m+d,C=S;if(i!==0||a!==0){const N=i*h,_=i*p,P=a*f,L=a*m;v+=P,b+=P,A+=L,x+=L,g+=N,C+=N,S+=_,w+=_}s[0]=Math.min(s[0],v,A,x,b),s[1]=Math.min(s[1],g,S,w,C),s[2]=Math.max(s[2],v,A,x,b),s[3]=Math.max(s[3],g,S,w,C)}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e,t){const s=e[0],r=e[1],i=e[2],a=e[3],l=s**2+r**2,c=s*i+r*a,d=i**2+a**2,h=(l+d)/2,f=Math.sqrt(h**2-(l*d-c**2));t[0]=Math.sqrt(h+f||1),t[1]=Math.sqrt(h-f||1)}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const s=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),r=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(s>r)return null;const i=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),a=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return i>a?null:[s,i,r,a]}static pointBoundingBox(e,t,s){s[0]=Math.min(s[0],e),s[1]=Math.min(s[1],t),s[2]=Math.max(s[2],e),s[3]=Math.max(s[3],t)}static rectBoundingBox(e,t,s,r,i){i[0]=Math.min(i[0],e,s),i[1]=Math.min(i[1],t,r),i[2]=Math.max(i[2],e,s),i[3]=Math.max(i[3],t,r)}static bezierBoundingBox(e,t,s,r,i,a,l,c,d){d[0]=Math.min(d[0],e,l),d[1]=Math.min(d[1],t,c),d[2]=Math.max(d[2],e,l),d[3]=Math.max(d[3],t,c),E(this,Yi,wv).call(this,e,s,i,l,t,r,a,c,3*(-e+3*(s-i)+l),6*(e-2*s+i),3*(s-e),d),E(this,Yi,wv).call(this,e,s,i,l,t,r,a,c,3*(-t+3*(r-a)+c),6*(t-2*r+a),3*(r-t),d)}}Yi=new WeakSet,ug=function(e,t,s,r,i,a,l,c,d,h){if(d<=0||d>=1)return;const f=1-d,p=d*d,m=p*d,v=f*(f*(f*e+3*d*t)+3*p*s)+m*r,x=f*(f*(f*i+3*d*a)+3*p*l)+m*c;h[0]=Math.min(h[0],v),h[1]=Math.min(h[1],x),h[2]=Math.max(h[2],v),h[3]=Math.max(h[3],x)},wv=function(e,t,s,r,i,a,l,c,d,h,f,p){if(Math.abs(d)<1e-12){Math.abs(h)>=1e-12&&E(this,Yi,ug).call(this,e,t,s,r,i,a,l,c,-f/h,p);return}const m=h**2-4*f*d;if(m<0)return;const v=Math.sqrt(m),x=2*d;E(this,Yi,ug).call(this,e,t,s,r,i,a,l,c,(-h+v)/x,p),E(this,Yi,ug).call(this,e,t,s,r,i,a,l,c,(-h-v)/x,p)},k(K,Yi);function LD(n){return decodeURIComponent(escape(n))}let px=null,dA=null;function rC(n){return px||(px=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,dA=new Map([["","t"]])),n.replaceAll(px,(e,t,s)=>t?t.normalize("NFKC"):dA.get(s))}function Qw(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const n=new Uint8Array(32);return crypto.getRandomValues(n),sC(n)}const Jw="pdfjs_internal_id_";function DD(n,e,t){if(!Array.isArray(t)||t.length<2)return!1;const[s,r,...i]=t;if(!n(s)&&!Number.isInteger(s)||!e(r))return!1;const a=i.length;let l=!0;switch(r.name){case"XYZ":if(a<2||a>3)return!1;break;case"Fit":case"FitB":return a===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(a>1)return!1;break;case"FitR":if(a!==4)return!1;l=!1;break;default:return!1}for(const c of i)if(!(typeof c=="number"||l&&c===null))return!1;return!0}function fn(n,e,t){return Math.min(Math.max(n,e),t)}function iC(n){return Uint8Array.prototype.toBase64?n.toBase64():btoa(sC(n))}function MD(n){return Uint8Array.fromBase64?Uint8Array.fromBase64(n):fm(atob(n))}typeof Promise.try!="function"&&(Promise.try=function(n,...e){return new Promise(t=>{t(n(...e))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(n){return n.reduce((e,t)=>e+t,0)});class yf{static textContent(e){const t=[],s={items:t,styles:Object.create(null)};function r(i){var c;if(!i)return;let a=null;const l=i.name;if(l==="#text")a=i.value;else if(yf.shouldBuildText(l))(c=i==null?void 0:i.attributes)!=null&&c.textContent?a=i.attributes.textContent:i.value&&(a=i.value);else return;if(a!==null&&t.push({str:a}),!!i.children)for(const d of i.children)r(d)}return r(e),s}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}class Zw{static setupStorage(e,t,s,r,i){const a=r.getValue(t,{value:null});switch(s.name){case"textarea":if(a.value!==null&&(e.textContent=a.value),i==="print")break;e.addEventListener("input",l=>{r.setValue(t,{value:l.target.value})});break;case"input":if(s.attributes.type==="radio"||s.attributes.type==="checkbox"){if(a.value===s.attributes.xfaOn?e.setAttribute("checked",!0):a.value===s.attributes.xfaOff&&e.removeAttribute("checked"),i==="print")break;e.addEventListener("change",l=>{r.setValue(t,{value:l.target.checked?l.target.getAttribute("xfaOn"):l.target.getAttribute("xfaOff")})})}else{if(a.value!==null&&e.setAttribute("value",a.value),i==="print")break;e.addEventListener("input",l=>{r.setValue(t,{value:l.target.value})})}break;case"select":if(a.value!==null){e.setAttribute("value",a.value);for(const l of s.children)l.attributes.value===a.value?l.attributes.selected=!0:l.attributes.hasOwnProperty("selected")&&delete l.attributes.selected}e.addEventListener("input",l=>{const c=l.target.options,d=c.selectedIndex===-1?"":c[c.selectedIndex].value;r.setValue(t,{value:d})});break}}static setAttributes({html:e,element:t,storage:s=null,intent:r,linkService:i}){const{attributes:a}=t,l=e instanceof HTMLAnchorElement;a.type==="radio"&&(a.name=`${a.name}-${r}`);for(const[c,d]of Object.entries(a))if(d!=null)switch(c){case"class":d.length&&e.setAttribute(c,d.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",d);break;case"style":Object.assign(e.style,d);break;case"textContent":e.textContent=d;break;default:(!l||c!=="href"&&c!=="newWindow")&&e.setAttribute(c,d)}l&&i.addLinkAttributes(e,a.href,a.newWindow),s&&a.dataId&&this.setupStorage(e,a.dataId,t,s)}static render(e){var f,p;const t=e.annotationStorage,s=e.linkService,r=e.xfaHtml,i=e.intent||"display",a=document.createElement(r.name);r.attributes&&this.setAttributes({html:a,element:r,intent:i,linkService:s});const l=i!=="richText",c=e.div;if(c.append(a),e.viewport){const m=`matrix(${e.viewport.transform.join(",")})`;c.style.transform=m}l&&c.setAttribute("class","xfaLayer xfaFont");const d=[];if(r.children.length===0){if(r.value){const m=document.createTextNode(r.value);a.append(m),l&&yf.shouldBuildText(r.name)&&d.push(m)}return{textDivs:d}}const h=[[r,-1,a]];for(;h.length>0;){const[m,v,x]=h.at(-1);if(v+1===m.children.length){h.pop();continue}const A=m.children[++h.at(-1)[1]];if(A===null)continue;const{name:b}=A;if(b==="#text"){const w=document.createTextNode(A.value);d.push(w),x.append(w);continue}const g=(f=A==null?void 0:A.attributes)!=null&&f.xmlns?document.createElementNS(A.attributes.xmlns,b):document.createElement(b);if(x.append(g),A.attributes&&this.setAttributes({html:g,element:A,storage:t,intent:i,linkService:s}),((p=A.children)==null?void 0:p.length)>0)h.push([A,-1,g]);else if(A.value){const w=document.createTextNode(A.value);l&&yf.shouldBuildText(b)&&d.push(w),g.append(w)}}for(const m of c.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))m.setAttribute("readOnly",!0);return{textDivs:d}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const ri="http://www.w3.org/2000/svg",$o=class $o{};I($o,"CSS",96),I($o,"PDF",72),I($o,"PDF_TO_CSS_UNITS",$o.CSS/$o.PDF);let sa=$o;async function Ju(n,e="text"){if(yh(n,document.baseURI)){const t=await fetch(n);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,s)=>{const r=new XMLHttpRequest;r.open("GET",n,!0),r.responseType=e,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE){if(r.status===200||r.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(r.response);return}t(r.responseText);return}s(new Error(r.statusText))}},r.send(null)})}class pm{constructor({viewBox:e,userUnit:t,scale:s,rotation:r,offsetX:i=0,offsetY:a=0,dontFlip:l=!1}){this.viewBox=e,this.userUnit=t,this.scale=s,this.rotation=r,this.offsetX=i,this.offsetY=a,s*=t;const c=(e[2]+e[0])/2,d=(e[3]+e[1])/2;let h,f,p,m;switch(r%=360,r<0&&(r+=360),r){case 180:h=-1,f=0,p=0,m=1;break;case 90:h=0,f=1,p=1,m=0;break;case 270:h=0,f=-1,p=-1,m=0;break;case 0:h=1,f=0,p=0,m=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}l&&(p=-p,m=-m);let v,x,A,b;h===0?(v=Math.abs(d-e[1])*s+i,x=Math.abs(c-e[0])*s+a,A=(e[3]-e[1])*s,b=(e[2]-e[0])*s):(v=Math.abs(c-e[0])*s+i,x=Math.abs(d-e[1])*s+a,A=(e[2]-e[0])*s,b=(e[3]-e[1])*s),this.transform=[h*s,f*s,p*s,m*s,v-h*s*c-p*s*d,x-f*s*c-m*s*d],this.width=A,this.height=b}get rawDims(){const e=this.viewBox;return de(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:s=this.offsetX,offsetY:r=this.offsetY,dontFlip:i=!1}={}){return new pm({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:s,offsetY:r,dontFlip:i})}convertToViewportPoint(e,t){const s=[e,t];return K.applyTransform(s,this.transform),s}convertToViewportRectangle(e){const t=[e[0],e[1]];K.applyTransform(t,this.transform);const s=[e[2],e[3]];return K.applyTransform(s,this.transform),[t[0],t[1],s[0],s[1]]}convertToPdfPoint(e,t){const s=[e,t];return K.applyInverseTransform(s,this.transform),s}}class by extends bc{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function mm(n){const e=n.length;let t=0;for(;t<e&&n[t].trim()==="";)t++;return n.substring(t,t+5).toLowerCase()==="data:"}function wy(n){return typeof n=="string"&&/\.pdf$/i.test(n)}function aC(n){return[n]=n.split(/[#?]/,1),n.substring(n.lastIndexOf("/")+1)}function oC(n,e="document.pdf"){if(typeof n!="string")return e;if(mm(n))return ae('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const s=(l=>{try{return new URL(l)}catch{try{return new URL(decodeURIComponent(l))}catch{try{return new URL(l,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(l),"https://foo.bar")}catch{return null}}}}})(n);if(!s)return e;const r=l=>{try{let c=decodeURIComponent(l);return c.includes("/")?(c=c.split("/").at(-1),c.test(/^\.pdf$/i)?c:l):c}catch{return l}},i=/\.pdf$/i,a=s.pathname.split("/").at(-1);if(i.test(a))return r(a);if(s.searchParams.size>0){const l=Array.from(s.searchParams.values()).reverse();for(const d of l)if(i.test(d))return r(d);const c=Array.from(s.searchParams.keys()).reverse();for(const d of c)if(i.test(d))return r(d)}if(s.hash){const c=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(s.hash);if(c)return r(c[0])}return e}class uA{constructor(){I(this,"started",Object.create(null));I(this,"times",[])}time(e){e in this.started&&ae(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||ae(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:s}of this.times)t=Math.max(s.length,t);for(const{name:s,start:r,end:i}of this.times)e.push(`${s.padEnd(t)} ${i-r}ms
`);return e.join("")}}function yh(n,e){const t=e?URL.parse(n,e):URL.parse(n);return(t==null?void 0:t.protocol)==="http:"||(t==null?void 0:t.protocol)==="https:"}function vs(n){n.preventDefault()}function st(n){n.preventDefault(),n.stopPropagation()}function ID(n){console.log("Deprecated API usage: "+n)}var Af;class xf{static toDateObject(e){if(e instanceof Date)return e;if(!e||typeof e!="string")return null;o(this,Af)||y(this,Af,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=o(this,Af).exec(e);if(!t)return null;const s=parseInt(t[1],10);let r=parseInt(t[2],10);r=r>=1&&r<=12?r-1:0;let i=parseInt(t[3],10);i=i>=1&&i<=31?i:1;let a=parseInt(t[4],10);a=a>=0&&a<=23?a:0;let l=parseInt(t[5],10);l=l>=0&&l<=59?l:0;let c=parseInt(t[6],10);c=c>=0&&c<=59?c:0;const d=t[7]||"Z";let h=parseInt(t[8],10);h=h>=0&&h<=23?h:0;let f=parseInt(t[9],10)||0;return f=f>=0&&f<=59?f:0,d==="-"?(a+=h,l+=f):d==="+"&&(a-=h,l-=f),new Date(Date.UTC(s,r,i,a,l,c))}}Af=new WeakMap,k(xf,Af);function lC(n,{scale:e=1,rotation:t=0}){const{width:s,height:r}=n.attributes.style,i=[0,0,parseInt(s),parseInt(r)];return new pm({viewBox:i,userUnit:1,scale:e,rotation:t})}function Zu(n){if(n.startsWith("#")){const e=parseInt(n.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return n.startsWith("rgb(")?n.slice(4,-1).split(",").map(e=>parseInt(e)):n.startsWith("rgba(")?n.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(ae(`Not a valid color format: "${n}"`),[0,0,0])}function FD(n){const e=document.createElement("span");e.style.visibility="hidden",e.style.colorScheme="only light",document.body.append(e);for(const t of n.keys()){e.style.color=t;const s=window.getComputedStyle(e).color;n.set(t,Zu(s))}e.remove()}function tt(n){const{a:e,b:t,c:s,d:r,e:i,f:a}=n.getTransform();return[e,t,s,r,i,a]}function Sr(n){const{a:e,b:t,c:s,d:r,e:i,f:a}=n.getTransform().invertSelf();return[e,t,s,r,i,a]}function Co(n,e,t=!1,s=!0){if(e instanceof pm){const{pageWidth:r,pageHeight:i}=e.rawDims,{style:a}=n,l=zt.isCSSRoundSupported,c=`var(--total-scale-factor) * ${r}px`,d=`var(--total-scale-factor) * ${i}px`,h=l?`round(down, ${c}, var(--scale-round-x))`:`calc(${c})`,f=l?`round(down, ${d}, var(--scale-round-y))`:`calc(${d})`;!t||e.rotation%180===0?(a.width=h,a.height=f):(a.width=f,a.height=h)}s&&n.setAttribute("data-main-rotation",e.rotation)}class vr{constructor(){const{pixelRatio:e}=vr;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(e,t,s,r,i=-1){let a=1/0,l=1/0,c=1/0;s=vr.capPixels(s,i),s>0&&(a=Math.sqrt(s/(e*t))),r!==-1&&(l=r/e,c=r/t);const d=Math.min(a,l,c);return this.sx>d||this.sy>d?(this.sx=d,this.sy=d,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(e,t){if(t>=0){const s=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+t/100));return e>0?Math.min(e,s):s}return e}}const x0=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class OD{static get isDarkMode(){var e;return de(this,"isDarkMode",!!((e=window==null?void 0:window.matchMedia)!=null&&e.call(window,"(prefers-color-scheme: dark)").matches))}}class cC{static get commentForegroundColor(){const e=document.createElement("span");e.classList.add("comment","sidebar");const{style:t}=e;t.width=t.height="0",t.display="none",t.color="var(--comment-fg-color)",document.body.append(e);const{color:s}=window.getComputedStyle(e);return e.remove(),de(this,"commentForegroundColor",Zu(s))}}function dC(n,e,t,s){s=Math.min(Math.max(s??1,0),1);const r=255*(1-s);return n=Math.round(n*s+r),e=Math.round(e*s+r),t=Math.round(t*s+r),[n,e,t]}function hA(n,e){const t=n[0]/255,s=n[1]/255,r=n[2]/255,i=Math.max(t,s,r),a=Math.min(t,s,r),l=(i+a)/2;if(i===a)e[0]=e[1]=0;else{const c=i-a;switch(e[1]=l<.5?c/(i+a):c/(2-i-a),i){case t:e[0]=((s-r)/c+(s<r?6:0))*60;break;case s:e[0]=((r-t)/c+2)*60;break;case r:e[0]=((t-s)/c+4)*60;break}}e[2]=l}function kv(n,e){const t=n[0],s=n[1],r=n[2],i=(1-Math.abs(2*r-1))*s,a=i*(1-Math.abs(t/60%2-1)),l=r-i/2;switch(Math.floor(t/60)){case 0:e[0]=i+l,e[1]=a+l,e[2]=l;break;case 1:e[0]=a+l,e[1]=i+l,e[2]=l;break;case 2:e[0]=l,e[1]=i+l,e[2]=a+l;break;case 3:e[0]=l,e[1]=a+l,e[2]=i+l;break;case 4:e[0]=a+l,e[1]=l,e[2]=i+l;break;case 5:case 6:e[0]=i+l,e[1]=l,e[2]=a+l;break}}function fA(n){return n<=.03928?n/12.92:((n+.055)/1.055)**2.4}function pA(n,e,t){kv(n,t),t.map(fA);const s=.2126*t[0]+.7152*t[1]+.0722*t[2];kv(e,t),t.map(fA);const r=.2126*t[0]+.7152*t[1]+.0722*t[2];return s>r?(s+.05)/(r+.05):(r+.05)/(s+.05)}const mA=new Map;function uC(n,e){const t=n[0]+n[1]*256+n[2]*65536+e[0]*16777216+e[1]*4294967296+e[2]*1099511627776;let s=mA.get(t);if(s)return s;const r=new Float32Array(9),i=r.subarray(0,3),a=r.subarray(3,6);hA(n,a);const l=r.subarray(6,9);hA(e,l);const c=l[2]<.5,d=c?12:4.5;if(a[2]=c?Math.sqrt(a[2]):1-Math.sqrt(1-a[2]),pA(a,l,i)<d){let h,f;c?(h=a[2],f=1):(h=0,f=a[2]);const p=.005;for(;f-h>p;){const m=a[2]=(h+f)/2;c===pA(a,l,i)<d?h=m:f=m}a[2]=c?f:h}return kv(a,i),s=K.makeHexColor(Math.round(i[0]*255),Math.round(i[1]*255),Math.round(i[2]*255)),mA.set(t,s),s}function e1({html:n,dir:e,className:t},s){const r=document.createDocumentFragment();if(typeof n=="string"){const i=document.createElement("p");i.dir=e||"auto";const a=n.split(/(?:\r\n?|\n)/);for(let l=0,c=a.length;l<c;++l){const d=a[l];i.append(document.createTextNode(d)),l<c-1&&i.append(document.createElement("br"))}r.append(i)}else Zw.render({xfaHtml:n,div:r,intent:"richText"});r.firstChild.classList.add("richText",t),s.append(r)}var ga,ya,Es,Cs,Sf,xa,ad,od,Ef,j0,hC,Zt,fC,pC,Nc,xh;const ci=class ci{constructor(e){k(this,Zt);k(this,ga,null);k(this,ya,null);k(this,Es);k(this,Cs,null);k(this,Sf,null);k(this,xa,null);k(this,ad,null);k(this,od,null);y(this,Es,e),o(ci,Ef)||y(ci,Ef,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const e=y(this,ga,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=o(this,Es)._uiManager._signal;t instanceof AbortSignal&&!t.aborted&&(e.addEventListener("contextmenu",vs,{signal:t}),e.addEventListener("pointerdown",E(ci,j0,hC),{signal:t}));const s=y(this,Cs,document.createElement("div"));s.className="buttons",e.append(s);const r=o(this,Es).toolbarPosition;if(r){const{style:i}=e,a=o(this,Es)._uiManager.direction==="ltr"?1-r[0]:r[0];i.insetInlineEnd=`${100*a}%`,i.top=`calc(${100*r[1]}% + var(--editor-toolbar-vert-offset))`}return e}get div(){return o(this,ga)}hide(){var e;o(this,ga).classList.add("hidden"),(e=o(this,ya))==null||e.hideDropdown()}show(){var e,t;o(this,ga).classList.remove("hidden"),(e=o(this,Sf))==null||e.shown(),(t=o(this,xa))==null||t.shown()}addDeleteButton(){const{editorType:e,_uiManager:t}=o(this,Es),s=document.createElement("button");s.classList.add("basic","deleteButton"),s.tabIndex=0,s.setAttribute("data-l10n-id",o(ci,Ef)[e]),E(this,Zt,Nc).call(this,s)&&s.addEventListener("click",r=>{t.delete()},{signal:t._signal}),o(this,Cs).append(s)}async addAltText(e){const t=await e.render();E(this,Zt,Nc).call(this,t),o(this,Cs).append(t,o(this,Zt,xh)),y(this,Sf,e)}addComment(e,t=null){if(o(this,xa))return;const s=e.renderForToolbar();if(!s)return;E(this,Zt,Nc).call(this,s);const r=y(this,ad,o(this,Zt,xh));t?(o(this,Cs).insertBefore(s,t),o(this,Cs).insertBefore(r,t)):o(this,Cs).append(s,r),y(this,xa,e),e.toolbar=this}addColorPicker(e){if(o(this,ya))return;y(this,ya,e);const t=e.renderButton();E(this,Zt,Nc).call(this,t),o(this,Cs).append(t,o(this,Zt,xh))}async addEditSignatureButton(e){const t=y(this,od,await e.renderEditButton(o(this,Es)));E(this,Zt,Nc).call(this,t),o(this,Cs).append(t,o(this,Zt,xh))}removeButton(e){var t,s;switch(e){case"comment":(t=o(this,xa))==null||t.removeToolbarCommentButton(),y(this,xa,null),(s=o(this,ad))==null||s.remove(),y(this,ad,null);break}}async addButton(e,t){switch(e){case"colorPicker":this.addColorPicker(t);break;case"altText":await this.addAltText(t);break;case"editSignature":await this.addEditSignatureButton(t);break;case"delete":this.addDeleteButton();break;case"comment":this.addComment(t);break}}async addButtonBefore(e,t,s){const r=o(this,Cs).querySelector(s);r&&e==="comment"&&this.addComment(t,r)}updateEditSignatureButton(e){o(this,od)&&(o(this,od).title=e)}remove(){var e;o(this,ga).remove(),(e=o(this,ya))==null||e.destroy(),y(this,ya,null)}};ga=new WeakMap,ya=new WeakMap,Es=new WeakMap,Cs=new WeakMap,Sf=new WeakMap,xa=new WeakMap,ad=new WeakMap,od=new WeakMap,Ef=new WeakMap,j0=new WeakSet,hC=function(e){e.stopPropagation()},Zt=new WeakSet,fC=function(e){o(this,Es)._focusEventsAllowed=!1,st(e)},pC=function(e){o(this,Es)._focusEventsAllowed=!0,st(e)},Nc=function(e){const t=o(this,Es)._uiManager._signal;return!(t instanceof AbortSignal)||t.aborted?!1:(e.addEventListener("focusin",E(this,Zt,fC).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",E(this,Zt,pC).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",vs,{signal:t}),!0)},xh=function(){const e=document.createElement("div");return e.className="divider",e},k(ci,j0),k(ci,Ef,null);let Av=ci;var Cf,Ko,hi,ra,mC,gC,Sv;class BD{constructor(e){k(this,ra);k(this,Cf,null);k(this,Ko,null);k(this,hi);y(this,hi,e)}show(e,t,s){const[r,i]=E(this,ra,gC).call(this,t,s),{style:a}=o(this,Ko)||y(this,Ko,E(this,ra,mC).call(this));e.append(o(this,Ko)),a.insetInlineEnd=`${100*r}%`,a.top=`calc(${100*i}% + var(--editor-toolbar-vert-offset))`}hide(){o(this,Ko).remove()}}Cf=new WeakMap,Ko=new WeakMap,hi=new WeakMap,ra=new WeakSet,mC=function(){const e=y(this,Ko,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar");const t=o(this,hi)._signal;t instanceof AbortSignal&&!t.aborted&&e.addEventListener("contextmenu",vs,{signal:t});const s=y(this,Cf,document.createElement("div"));return s.className="buttons",e.append(s),o(this,hi).hasCommentManager()&&E(this,ra,Sv).call(this,"commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{o(this,hi).commentSelection("floating_button")}),E(this,ra,Sv).call(this,"highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{o(this,hi).highlightSelection("floating_button")}),e},gC=function(e,t){let s=0,r=0;for(const i of e){const a=i.y+i.height;if(a<s)continue;const l=i.x+(t?i.width:0);if(a>s){r=l,s=a;continue}t?l>r&&(r=l):l<r&&(r=l)}return[t?1-r:r,s]},Sv=function(e,t,s,r){const i=document.createElement("button");i.classList.add("basic",e),i.tabIndex=0,i.setAttribute("data-l10n-id",t);const a=document.createElement("span");i.append(a),a.className="visuallyHidden",a.setAttribute("data-l10n-id",s);const l=o(this,hi)._signal;l instanceof AbortSignal&&!l.aborted&&(i.addEventListener("contextmenu",vs,{signal:l}),i.addEventListener("click",r,{signal:l})),o(this,Cf).append(i)};function yC(n,e,t){for(const s of t)e.addEventListener(s,n[s].bind(n))}var P0;class UD{constructor(){k(this,P0,0)}get id(){return`${mf}${Et(this,P0)._++}`}}P0=new WeakMap;var ld,Nf,on,cd,hg;const h1=class h1{constructor(){k(this,cd);k(this,ld,Qw());k(this,Nf,0);k(this,on,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',s=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),r=new Image;r.src=e;const i=r.decode().then(()=>(s.drawImage(r,0,0,1,1,0,0,1,3),new Uint32Array(s.getImageData(0,0,1,1).data.buffer)[0]===0));return de(this,"_isSVGFittingCanvas",i)}async getFromFile(e){const{lastModified:t,name:s,size:r,type:i}=e;return E(this,cd,hg).call(this,`${t}_${s}_${r}_${i}`,e)}async getFromUrl(e){return E(this,cd,hg).call(this,e,e)}async getFromBlob(e,t){const s=await t;return E(this,cd,hg).call(this,e,s)}async getFromId(e){o(this,on)||y(this,on,new Map);const t=o(this,on).get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:s}=t;return delete t.blobPromise,this.getFromBlob(t.id,s)}return this.getFromUrl(t.url)}getFromCanvas(e,t){o(this,on)||y(this,on,new Map);let s=o(this,on).get(e);if(s!=null&&s.bitmap)return s.refCounter+=1,s;const r=new OffscreenCanvas(t.width,t.height);return r.getContext("2d").drawImage(t,0,0),s={bitmap:r.transferToImageBitmap(),id:`image_${o(this,ld)}_${Et(this,Nf)._++}`,refCounter:1,isSvg:!1},o(this,on).set(e,s),o(this,on).set(s.id,s),s}getSvgUrl(e){const t=o(this,on).get(e);return t!=null&&t.isSvg?t.svgUrl:null}deleteId(e){var r;o(this,on)||y(this,on,new Map);const t=o(this,on).get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:s}=t;if(!t.url&&!t.file){const i=new OffscreenCanvas(s.width,s.height);i.getContext("bitmaprenderer").transferFromImageBitmap(s),t.blobPromise=i.convertToBlob()}(r=s.close)==null||r.call(s),t.bitmap=null}isValidId(e){return e.startsWith(`image_${o(this,ld)}_`)}};ld=new WeakMap,Nf=new WeakMap,on=new WeakMap,cd=new WeakSet,hg=async function(e,t){o(this,on)||y(this,on,new Map);let s=o(this,on).get(e);if(s===null)return null;if(s!=null&&s.bitmap)return s.refCounter+=1,s;try{s||(s={bitmap:null,id:`image_${o(this,ld)}_${Et(this,Nf)._++}`,refCounter:0,isSvg:!1});let r;if(typeof t=="string"?(s.url=t,r=await Ju(t,"blob")):t instanceof File?r=s.file=t:t instanceof Blob&&(r=t),r.type==="image/svg+xml"){const i=h1._isSVGFittingCanvas,a=new FileReader,l=new Image,c=new Promise((d,h)=>{l.onload=()=>{s.bitmap=l,s.isSvg=!0,d()},a.onload=async()=>{const f=s.svgUrl=a.result;l.src=await i?`${f}#svgView(preserveAspectRatio(none))`:f},l.onerror=a.onerror=h});a.readAsDataURL(r),await c}else s.bitmap=await createImageBitmap(r);s.refCounter=1}catch(r){ae(r),s=null}return o(this,on).set(e,s),s&&o(this,on).set(s.id,s),s};let Ev=h1;var mt,va,_f,et;class zD{constructor(e=128){k(this,mt,[]);k(this,va,!1);k(this,_f);k(this,et,-1);y(this,_f,e)}add({cmd:e,undo:t,post:s,mustExec:r,type:i=NaN,overwriteIfSameType:a=!1,keepUndo:l=!1}){if(r&&e(),o(this,va))return;const c={cmd:e,undo:t,post:s,type:i};if(o(this,et)===-1){o(this,mt).length>0&&(o(this,mt).length=0),y(this,et,0),o(this,mt).push(c);return}if(a&&o(this,mt)[o(this,et)].type===i){l&&(c.undo=o(this,mt)[o(this,et)].undo),o(this,mt)[o(this,et)]=c;return}const d=o(this,et)+1;d===o(this,_f)?o(this,mt).splice(0,1):(y(this,et,d),d<o(this,mt).length&&o(this,mt).splice(d)),o(this,mt).push(c)}undo(){if(o(this,et)===-1)return;y(this,va,!0);const{undo:e,post:t}=o(this,mt)[o(this,et)];e(),t==null||t(),y(this,va,!1),y(this,et,o(this,et)-1)}redo(){if(o(this,et)<o(this,mt).length-1){y(this,et,o(this,et)+1),y(this,va,!0);const{cmd:e,post:t}=o(this,mt)[o(this,et)];e(),t==null||t(),y(this,va,!1)}}hasSomethingToUndo(){return o(this,et)!==-1}hasSomethingToRedo(){return o(this,et)<o(this,mt).length-1}cleanType(e){if(o(this,et)!==-1){for(let t=o(this,et);t>=0;t--)if(o(this,mt)[t].type!==e){o(this,mt).splice(t+1,o(this,et)-t),y(this,et,t);return}o(this,mt).length=0,y(this,et,-1)}}destroy(){y(this,mt,null)}}mt=new WeakMap,va=new WeakMap,_f=new WeakMap,et=new WeakMap;var T0,xC;class gm{constructor(e){k(this,T0);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=zt.platform;for(const[s,r,i={}]of e)for(const a of s){const l=a.startsWith("mac+");t&&l?(this.callbacks.set(a.slice(4),{callback:r,options:i}),this.allKeys.add(a.split("+").at(-1))):!t&&!l&&(this.callbacks.set(a,{callback:r,options:i}),this.allKeys.add(a.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const s=this.callbacks.get(E(this,T0,xC).call(this,t));if(!s)return;const{callback:r,options:{bubbles:i=!1,args:a=[],checker:l=null}}=s;l&&!l(e,t)||(r.bind(e,...a,t)(),i||st(t))}}T0=new WeakSet,xC=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t};const R0=class R0{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return FD(e),de(this,"_colors",e)}convert(e){const t=Zu(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[s,r]of this._colors)if(r.every((i,a)=>i===t[a]))return R0._colorsMapping.get(s);return t}getHexCode(e){const t=this._colors.get(e);return t?K.makeHexColor(...t):e}};I(R0,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let Cv=R0;var dd,Xn,ud,lt,Nt,hd,Ns,fd,_s,ln,ba,wa,pd,ka,_r,js,Yo,jf,Pf,md,Tf,jr,Aa,gd,Sa,Pr,L0,Ea,yd,Rf,Ca,Qo,xd,Na,Lf,wt,_e,fi,_a,ja,Df,vd,Mf,Pa,Tr,pi,If,Ff,Ps,H,fg,Nv,vC,bC,vh,wC,kC,AC,_v,SC,jv,Pv,EC,xn,ii,CC,NC,Tv,_C,bh,Rv;const qc=class qc{constructor(e,t,s,r,i,a,l,c,d,h,f,p,m,v,x,A){k(this,H);k(this,dd,new AbortController);k(this,Xn,null);k(this,ud,null);k(this,lt,new Map);k(this,Nt,new Map);k(this,hd,null);k(this,Ns,null);k(this,fd,null);k(this,_s,new zD);k(this,ln,null);k(this,ba,null);k(this,wa,null);k(this,pd,0);k(this,ka,new Set);k(this,_r,null);k(this,js,null);k(this,Yo,new Set);I(this,"_editorUndoBar",null);k(this,jf,!1);k(this,Pf,!1);k(this,md,!1);k(this,Tf,null);k(this,jr,null);k(this,Aa,null);k(this,gd,null);k(this,Sa,!1);k(this,Pr,null);k(this,L0,new UD);k(this,Ea,!1);k(this,yd,!1);k(this,Rf,!1);k(this,Ca,null);k(this,Qo,null);k(this,xd,null);k(this,Na,null);k(this,Lf,null);k(this,wt,ie.NONE);k(this,_e,new Set);k(this,fi,null);k(this,_a,null);k(this,ja,null);k(this,Df,null);k(this,vd,null);k(this,Mf,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});k(this,Pa,[0,0]);k(this,Tr,null);k(this,pi,null);k(this,If,null);k(this,Ff,null);k(this,Ps,null);const b=this._signal=o(this,dd).signal;y(this,pi,e),y(this,If,t),y(this,Ff,s),y(this,hd,r),y(this,ln,i),y(this,_a,a),y(this,vd,c),this._eventBus=l,l._on("editingaction",this.onEditingAction.bind(this),{signal:b}),l._on("pagechanging",this.onPageChanging.bind(this),{signal:b}),l._on("scalechanging",this.onScaleChanging.bind(this),{signal:b}),l._on("rotationchanging",this.onRotationChanging.bind(this),{signal:b}),l._on("setpreference",this.onSetPreference.bind(this),{signal:b}),l._on("switchannotationeditorparams",g=>this.updateParams(g.type,g.value),{signal:b}),window.addEventListener("pointerdown",()=>{y(this,yd,!0)},{capture:!0,signal:b}),window.addEventListener("pointerup",()=>{y(this,yd,!1)},{capture:!0,signal:b}),E(this,H,wC).call(this),E(this,H,EC).call(this),E(this,H,_v).call(this),y(this,Ns,c.annotationStorage),y(this,Tf,c.filterFactory),y(this,ja,d),y(this,gd,h||null),y(this,jf,f),y(this,Pf,p),y(this,md,m),y(this,Lf,v||null),this.viewParameters={realScale:sa.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=x||null,this._supportsPinchToZoom=A!==!1,i==null||i.setSidebarUiManager(this)}static get _keyboardManager(){const e=qc.prototype,t=a=>o(a,pi).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&a.hasSomethingToControl(),s=(a,{target:l})=>{if(l instanceof HTMLInputElement){const{type:c}=l;return c!=="text"&&c!=="number"}return!0},r=this.TRANSLATE_SMALL,i=this.TRANSLATE_BIG;return de(this,"_keyboardManager",new gm([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:s}],[["ctrl+z","mac+meta+z"],e.undo,{checker:s}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:s}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:s}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(a,{target:l})=>!(l instanceof HTMLButtonElement)&&o(a,pi).contains(l)&&!a.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(a,{target:l})=>!(l instanceof HTMLButtonElement)&&o(a,pi).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-r,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[r,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-r],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,r],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:t}]]))}destroy(){var e,t,s,r,i,a,l,c,d;(e=o(this,Ps))==null||e.resolve(),y(this,Ps,null),(t=o(this,dd))==null||t.abort(),y(this,dd,null),this._signal=null;for(const h of o(this,Nt).values())h.destroy();o(this,Nt).clear(),o(this,lt).clear(),o(this,Yo).clear(),(s=o(this,Na))==null||s.clear(),y(this,Xn,null),o(this,_e).clear(),o(this,_s).destroy(),(r=o(this,hd))==null||r.destroy(),(i=o(this,ln))==null||i.destroy(),(a=o(this,_a))==null||a.destroy(),(l=o(this,Pr))==null||l.hide(),y(this,Pr,null),(c=o(this,xd))==null||c.destroy(),y(this,xd,null),y(this,ud,null),o(this,jr)&&(clearTimeout(o(this,jr)),y(this,jr,null)),o(this,Tr)&&(clearTimeout(o(this,Tr)),y(this,Tr,null)),(d=this._editorUndoBar)==null||d.destroy(),y(this,vd,null)}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return o(this,Lf)}get useNewAltTextFlow(){return o(this,Pf)}get useNewAltTextWhenAddingImage(){return o(this,md)}get hcmFilter(){return de(this,"hcmFilter",o(this,ja)?o(this,Tf).addHCMFilter(o(this,ja).foreground,o(this,ja).background):"none")}get direction(){return de(this,"direction",getComputedStyle(o(this,pi)).direction)}get _highlightColors(){return de(this,"_highlightColors",o(this,gd)?new Map(o(this,gd).split(",").map(e=>(e=e.split("=").map(t=>t.trim()),e[1]=e[1].toUpperCase(),e))):null)}get highlightColors(){const{_highlightColors:e}=this;if(!e)return de(this,"highlightColors",null);const t=new Map,s=!!o(this,ja);for(const[r,i]of e){const a=r.endsWith("_HCM");if(s&&a){t.set(r.replace("_HCM",""),i);continue}!s&&!a&&t.set(r,i)}return de(this,"highlightColors",t)}get highlightColorNames(){return de(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}getNonHCMColor(e){if(!this._highlightColors)return e;const t=this.highlightColorNames.get(e);return this._highlightColors.get(t)||e}getNonHCMColorName(e){return this.highlightColorNames.get(e)||e}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),y(this,wa,e)}setMainHighlightColorPicker(e){y(this,xd,e)}editAltText(e,t=!1){var s;(s=o(this,hd))==null||s.editAltText(this,e,t)}hasCommentManager(){return!!o(this,ln)}editComment(e,t,s,r){var i;(i=o(this,ln))==null||i.showDialog(this,e,t,s,r)}selectComment(e,t){const s=o(this,Nt).get(e),r=s==null?void 0:s.getEditorByUID(t);r==null||r.toggleComment(!0,!0)}updateComment(e){var t;(t=o(this,ln))==null||t.updateComment(e.getData())}updatePopupColor(e){var t;(t=o(this,ln))==null||t.updatePopupColor(e)}removeComment(e){var t;(t=o(this,ln))==null||t.removeComments([e.uid])}toggleComment(e,t,s=void 0){var r;(r=o(this,ln))==null||r.toggleCommentPopup(e,t,s)}makeCommentColor(e,t){var s;return e&&((s=o(this,ln))==null?void 0:s.makeCommentColor(e,t))||null}getCommentDialogElement(){var e;return((e=o(this,ln))==null?void 0:e.dialogElement)||null}async waitForEditorsRendered(e){if(o(this,Nt).has(e-1))return;const{resolve:t,promise:s}=Promise.withResolvers(),r=i=>{i.pageNumber===e&&(this._eventBus._off("editorsrendered",r),t())};this._eventBus.on("editorsrendered",r),await s}getSignature(e){var t;(t=o(this,_a))==null||t.getSignature({uiManager:this,editor:e})}get signatureManager(){return o(this,_a)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){switch(e){case"enableNewAltTextWhenAddingImage":y(this,md,t);break}}onPageChanging({pageNumber:e}){y(this,pd,e-1)}focusMainContainer(){o(this,pi).focus()}findParent(e,t){for(const s of o(this,Nt).values()){const{x:r,y:i,width:a,height:l}=s.div.getBoundingClientRect();if(e>=r&&e<=r+a&&t>=i&&t<=i+l)return s}return null}disableUserSelect(e=!1){o(this,If).classList.toggle("noUserSelect",e)}addShouldRescale(e){o(this,Yo).add(e)}removeShouldRescale(e){o(this,Yo).delete(e)}onScaleChanging({scale:e}){var t;this.commitOrRemove(),this.viewParameters.realScale=e*sa.PDF_TO_CSS_UNITS;for(const s of o(this,Yo))s.onScaleChanging();(t=o(this,wa))==null||t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e="",t=!1){const s=document.getSelection();if(!s||s.isCollapsed)return;const{anchorNode:r,anchorOffset:i,focusNode:a,focusOffset:l}=s,c=s.toString(),h=E(this,H,fg).call(this,s).closest(".textLayer"),f=this.getSelectionBoxes(h);if(!f)return;s.empty();const p=E(this,H,Nv).call(this,h),m=o(this,wt)===ie.NONE,v=()=>{const x=p==null?void 0:p.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:f,anchorNode:r,anchorOffset:i,focusNode:a,focusOffset:l,text:c});m&&this.showAllEditors("highlight",!0,!0),t&&(x==null||x.editComment())};if(m){this.switchToMode(ie.HIGHLIGHT,v);return}v()}commentSelection(e=""){this.highlightSelection(e,!0)}getAndRemoveDataFromAnnotationStorage(e){if(!o(this,Ns))return null;const t=`${mf}${e}`,s=o(this,Ns).getRawValue(t);return s&&o(this,Ns).remove(t),s}addToAnnotationStorage(e){!e.isEmpty()&&o(this,Ns)&&!o(this,Ns).has(e.id)&&o(this,Ns).setValue(e.id,e)}a11yAlert(e,t=null){const s=o(this,Ff);s&&(s.setAttribute("data-l10n-id",e),t?s.setAttribute("data-l10n-args",JSON.stringify(t)):s.removeAttribute("data-l10n-args"))}blur(){if(this.isShiftKeyDown=!1,o(this,Sa)&&(y(this,Sa,!1),E(this,H,vh).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of o(this,_e))if(t.div.contains(e)){y(this,Qo,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!o(this,Qo))return;const[e,t]=o(this,Qo);y(this,Qo,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){E(this,H,_v).call(this),E(this,H,jv).call(this)}removeEditListeners(){E(this,H,SC).call(this),E(this,H,Pv).call(this)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const s of o(this,js))if(s.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const s of o(this,js))if(s.isHandlingMimeForPasting(t.type)){s.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){var s;if(e.preventDefault(),(s=o(this,Xn))==null||s.commitOrRemove(),!this.hasSelection)return;const t=[];for(const r of o(this,_e)){const i=r.serialize(!0);i&&t.push(i)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const i of t.items)for(const a of o(this,js))if(a.isHandlingMimeForPasting(i.type)){a.paste(i,this.currentLayer);return}let s=t.getData("application/pdfjs");if(!s)return;try{s=JSON.parse(s)}catch(i){ae(`paste: "${i.message}".`);return}if(!Array.isArray(s))return;this.unselectAll();const r=this.currentLayer;try{const i=[];for(const c of s){const d=await r.deserialize(c);if(!d)return;i.push(d)}const a=()=>{for(const c of i)E(this,H,Tv).call(this,c);E(this,H,Rv).call(this,i)},l=()=>{for(const c of i)c.remove()};this.addCommands({cmd:a,undo:l,mustExec:!0})}catch(i){ae(`paste: "${i.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),o(this,wt)!==ie.NONE&&!this.isEditorHandlingKeyboard&&qc._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,o(this,Sa)&&(y(this,Sa,!1),E(this,H,vh).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}setEditingState(e){e?(E(this,H,kC).call(this),E(this,H,jv).call(this),E(this,H,xn).call(this,{isEditing:o(this,wt)!==ie.NONE,isEmpty:E(this,H,bh).call(this),hasSomethingToUndo:o(this,_s).hasSomethingToUndo(),hasSomethingToRedo:o(this,_s).hasSomethingToRedo(),hasSelectedEditor:!1})):(E(this,H,AC).call(this),E(this,H,Pv).call(this),E(this,H,xn).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!o(this,js)){y(this,js,e);for(const t of o(this,js))E(this,H,ii).call(this,t.defaultPropertiesToUpdate)}}getId(){return o(this,L0).id}get currentLayer(){return o(this,Nt).get(o(this,pd))}getLayer(e){return o(this,Nt).get(e)}get currentPageIndex(){return o(this,pd)}addLayer(e){o(this,Nt).set(e.pageIndex,e),o(this,Ea)?e.enable():e.disable()}removeLayer(e){o(this,Nt).delete(e.pageIndex)}async updateMode(e,t=null,s=!1,r=!1,i=!1){var a,l,c,d,h,f;if(o(this,wt)!==e&&!(o(this,Ps)&&(await o(this,Ps).promise,!o(this,Ps)))){if(y(this,Ps,Promise.withResolvers()),(a=o(this,wa))==null||a.commitOrRemove(),o(this,wt)===ie.POPUP&&((l=o(this,ln))==null||l.hideSidebar()),(c=o(this,ln))==null||c.destroyPopup(),y(this,wt,e),e===ie.NONE){this.setEditingState(!1),E(this,H,NC).call(this);for(const p of o(this,lt).values())p.hideStandaloneCommentButton();(d=this._editorUndoBar)==null||d.hide(),this.toggleComment(null),o(this,Ps).resolve();return}for(const p of o(this,lt).values())p.addStandaloneCommentButton();e===ie.SIGNATURE&&await((h=o(this,_a))==null?void 0:h.loadSignatures()),this.setEditingState(!0),await E(this,H,CC).call(this),this.unselectAll();for(const p of o(this,Nt).values())p.updateMode(e);if(e===ie.POPUP){o(this,ud)||y(this,ud,await o(this,vd).getAnnotationsByType(new Set(o(this,js).map(v=>v._editorType))));const p=new Set,m=[];for(const v of o(this,lt).values()){const{annotationElementId:x,hasComment:A,deleted:b}=v;x&&p.add(x),A&&!b&&m.push(v.getData())}for(const v of o(this,ud)){const{id:x,popupRef:A,contentsObj:b}=v;A&&(b!=null&&b.str)&&!p.has(x)&&!o(this,ka).has(x)&&m.push(v)}(f=o(this,ln))==null||f.showSidebar(m)}if(!t){s&&this.addNewEditorFromKeyboard(),o(this,Ps).resolve();return}for(const p of o(this,lt).values())p.uid===t?(this.setSelected(p),i?p.editComment():r?p.enterInEditMode():p.focus()):p.unselect();o(this,Ps).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e.mode!==o(this,wt)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...e})}updateParams(e,t){if(o(this,js)){switch(e){case ye.CREATE:this.currentLayer.addNewEditor(t);return;case ye.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(o(this,Df)||y(this,Df,new Map)).set(e,t),this.showAllEditors("highlight",t);break}if(this.hasSelection)for(const s of o(this,_e))s.updateParams(e,t);else for(const s of o(this,js))s.updateDefaultParams(e,t)}}showAllEditors(e,t,s=!1){var i;for(const a of o(this,lt).values())a.editorType===e&&a.show(t);(((i=o(this,Df))==null?void 0:i.get(ye.HIGHLIGHT_SHOW_ALL))??!0)!==t&&E(this,H,ii).call(this,[[ye.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(o(this,Rf)!==e){y(this,Rf,e);for(const t of o(this,Nt).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}*getEditors(e){for(const t of o(this,lt).values())t.pageIndex===e&&(yield t)}getEditor(e){return o(this,lt).get(e)}addEditor(e){o(this,lt).set(e.id,e)}removeEditor(e){var t,s;e.div.contains(document.activeElement)&&(o(this,jr)&&clearTimeout(o(this,jr)),y(this,jr,setTimeout(()=>{this.focusMainContainer(),y(this,jr,null)},0))),o(this,lt).delete(e.id),e.annotationElementId&&((t=o(this,Na))==null||t.delete(e.annotationElementId)),this.unselect(e),(!e.annotationElementId||!o(this,ka).has(e.annotationElementId))&&((s=o(this,Ns))==null||s.remove(e.id))}addDeletedAnnotationElement(e){o(this,ka).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return o(this,ka).has(e)}removeDeletedAnnotationElement(e){o(this,ka).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){o(this,Xn)!==e&&(y(this,Xn,e),e&&E(this,H,ii).call(this,e.propertiesToUpdate))}updateUI(e){o(this,H,_C)===e&&E(this,H,ii).call(this,e.propertiesToUpdate)}updateUIForDefaultProperties(e){E(this,H,ii).call(this,e.defaultPropertiesToUpdate)}toggleSelected(e){if(o(this,_e).has(e)){o(this,_e).delete(e),e.unselect(),E(this,H,xn).call(this,{hasSelectedEditor:this.hasSelection});return}o(this,_e).add(e),e.select(),E(this,H,ii).call(this,e.propertiesToUpdate),E(this,H,xn).call(this,{hasSelectedEditor:!0})}setSelected(e){var t;this.updateToolbar({mode:e.mode,editId:e.id}),(t=o(this,wa))==null||t.commitOrRemove();for(const s of o(this,_e))s!==e&&s.unselect();o(this,_e).clear(),o(this,_e).add(e),e.select(),E(this,H,ii).call(this,e.propertiesToUpdate),E(this,H,xn).call(this,{hasSelectedEditor:!0})}isSelected(e){return o(this,_e).has(e)}get firstSelectedEditor(){return o(this,_e).values().next().value}unselect(e){e.unselect(),o(this,_e).delete(e),E(this,H,xn).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return o(this,_e).size!==0}get isEnterHandled(){return o(this,_e).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var e;o(this,_s).undo(),E(this,H,xn).call(this,{hasSomethingToUndo:o(this,_s).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:E(this,H,bh).call(this)}),(e=this._editorUndoBar)==null||e.hide()}redo(){o(this,_s).redo(),E(this,H,xn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:o(this,_s).hasSomethingToRedo(),isEmpty:E(this,H,bh).call(this)})}addCommands(e){o(this,_s).add(e),E(this,H,xn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:E(this,H,bh).call(this)})}cleanUndoStack(e){o(this,_s).cleanType(e)}delete(){var i;this.commitOrRemove();const e=(i=this.currentLayer)==null?void 0:i.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const t=e?[e]:[...o(this,_e)],s=()=>{var a;(a=this._editorUndoBar)==null||a.show(r,t.length===1?t[0].editorType:t.length);for(const l of t)l.remove()},r=()=>{for(const a of t)E(this,H,Tv).call(this,a)};this.addCommands({cmd:s,undo:r,mustExec:!0})}commitOrRemove(){var e;(e=o(this,Xn))==null||e.commitOrRemove()}hasSomethingToControl(){return o(this,Xn)||this.hasSelection}selectAll(){for(const e of o(this,_e))e.commit();E(this,H,Rv).call(this,o(this,lt).values())}unselectAll(){var e;if(!(o(this,Xn)&&(o(this,Xn).commitOrRemove(),o(this,wt)!==ie.NONE))&&!((e=o(this,wa))!=null&&e.commitOrRemove())&&this.hasSelection){for(const t of o(this,_e))t.unselect();o(this,_e).clear(),E(this,H,xn).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,s=!1){if(s||this.commitOrRemove(),!this.hasSelection)return;o(this,Pa)[0]+=e,o(this,Pa)[1]+=t;const[r,i]=o(this,Pa),a=[...o(this,_e)],l=1e3;o(this,Tr)&&clearTimeout(o(this,Tr)),y(this,Tr,setTimeout(()=>{y(this,Tr,null),o(this,Pa)[0]=o(this,Pa)[1]=0,this.addCommands({cmd:()=>{for(const c of a)o(this,lt).has(c.id)&&(c.translateInPage(r,i),c.translationDone())},undo:()=>{for(const c of a)o(this,lt).has(c.id)&&(c.translateInPage(-r,-i),c.translationDone())},mustExec:!1})},l));for(const c of a)c.translateInPage(e,t),c.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),y(this,_r,new Map);for(const e of o(this,_e))o(this,_r).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!o(this,_r))return!1;this.disableUserSelect(!1);const e=o(this,_r);y(this,_r,null);let t=!1;for(const[{x:r,y:i,pageIndex:a},l]of e)l.newX=r,l.newY=i,l.newPageIndex=a,t||(t=r!==l.savedX||i!==l.savedY||a!==l.savedPageIndex);if(!t)return!1;const s=(r,i,a,l)=>{if(o(this,lt).has(r.id)){const c=o(this,Nt).get(l);c?r._setParentAndPosition(c,i,a):(r.pageIndex=l,r.x=i,r.y=a)}};return this.addCommands({cmd:()=>{for(const[r,{newX:i,newY:a,newPageIndex:l}]of e)s(r,i,a,l)},undo:()=>{for(const[r,{savedX:i,savedY:a,savedPageIndex:l}]of e)s(r,i,a,l)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(o(this,_r))for(const s of o(this,_r).keys())s.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||o(this,_e).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return o(this,Xn)===e}getActive(){return o(this,Xn)}getMode(){return o(this,wt)}isEditingMode(){return o(this,wt)!==ie.NONE}get imageManager(){return de(this,"imageManager",new Ev)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let d=0,h=t.rangeCount;d<h;d++)if(!e.contains(t.getRangeAt(d).commonAncestorContainer))return null;const{x:s,y:r,width:i,height:a}=e.getBoundingClientRect();let l;switch(e.getAttribute("data-main-rotation")){case"90":l=(d,h,f,p)=>({x:(h-r)/a,y:1-(d+f-s)/i,width:p/a,height:f/i});break;case"180":l=(d,h,f,p)=>({x:1-(d+f-s)/i,y:1-(h+p-r)/a,width:f/i,height:p/a});break;case"270":l=(d,h,f,p)=>({x:1-(h+p-r)/a,y:(d-s)/i,width:p/a,height:f/i});break;default:l=(d,h,f,p)=>({x:(d-s)/i,y:(h-r)/a,width:f/i,height:p/a});break}const c=[];for(let d=0,h=t.rangeCount;d<h;d++){const f=t.getRangeAt(d);if(!f.collapsed)for(const{x:p,y:m,width:v,height:x}of f.getClientRects())v===0||x===0||c.push(l(p,m,v,x))}return c.length===0?null:c}addChangedExistingAnnotation({annotationElementId:e,id:t}){(o(this,fd)||y(this,fd,new Map)).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){var t;(t=o(this,fd))==null||t.delete(e)}renderAnnotationElement(e){var r;const t=(r=o(this,fd))==null?void 0:r.get(e.data.id);if(!t)return;const s=o(this,Ns).getRawValue(t);s&&(o(this,wt)===ie.NONE&&!s.hasBeenModified||s.renderAnnotationElement(e))}setMissingCanvas(e,t,s){var i;const r=(i=o(this,Na))==null?void 0:i.get(e);r&&(r.setCanvas(t,s),o(this,Na).delete(e))}addMissingCanvas(e,t){(o(this,Na)||y(this,Na,new Map)).set(e,t)}};dd=new WeakMap,Xn=new WeakMap,ud=new WeakMap,lt=new WeakMap,Nt=new WeakMap,hd=new WeakMap,Ns=new WeakMap,fd=new WeakMap,_s=new WeakMap,ln=new WeakMap,ba=new WeakMap,wa=new WeakMap,pd=new WeakMap,ka=new WeakMap,_r=new WeakMap,js=new WeakMap,Yo=new WeakMap,jf=new WeakMap,Pf=new WeakMap,md=new WeakMap,Tf=new WeakMap,jr=new WeakMap,Aa=new WeakMap,gd=new WeakMap,Sa=new WeakMap,Pr=new WeakMap,L0=new WeakMap,Ea=new WeakMap,yd=new WeakMap,Rf=new WeakMap,Ca=new WeakMap,Qo=new WeakMap,xd=new WeakMap,Na=new WeakMap,Lf=new WeakMap,wt=new WeakMap,_e=new WeakMap,fi=new WeakMap,_a=new WeakMap,ja=new WeakMap,Df=new WeakMap,vd=new WeakMap,Mf=new WeakMap,Pa=new WeakMap,Tr=new WeakMap,pi=new WeakMap,If=new WeakMap,Ff=new WeakMap,Ps=new WeakMap,H=new WeakSet,fg=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},Nv=function(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const s of o(this,Nt).values())if(s.hasTextLayer(e))return s;return null},vC=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const s=E(this,H,fg).call(this,e).closest(".textLayer"),r=this.getSelectionBoxes(s);r&&(o(this,Pr)||y(this,Pr,new BD(this)),o(this,Pr).show(s,r,this.direction==="ltr"))},bC=function(){var i,a,l;const e=document.getSelection();if(!e||e.isCollapsed){o(this,fi)&&((i=o(this,Pr))==null||i.hide(),y(this,fi,null),E(this,H,xn).call(this,{hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===o(this,fi))return;const r=E(this,H,fg).call(this,e).closest(".textLayer");if(!r){o(this,fi)&&((a=o(this,Pr))==null||a.hide(),y(this,fi,null),E(this,H,xn).call(this,{hasSelectedText:!1}));return}if((l=o(this,Pr))==null||l.hide(),y(this,fi,t),E(this,H,xn).call(this,{hasSelectedText:!0}),!(o(this,wt)!==ie.HIGHLIGHT&&o(this,wt)!==ie.NONE)&&(o(this,wt)===ie.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),y(this,Sa,this.isShiftKeyDown),!this.isShiftKeyDown)){const c=o(this,wt)===ie.HIGHLIGHT?E(this,H,Nv).call(this,r):null;if(c==null||c.toggleDrawing(),o(this,yd)){const d=new AbortController,h=this.combinedSignal(d),f=p=>{p.type==="pointerup"&&p.button!==0||(d.abort(),c==null||c.toggleDrawing(!0),p.type==="pointerup"&&E(this,H,vh).call(this,"main_toolbar"))};window.addEventListener("pointerup",f,{signal:h}),window.addEventListener("blur",f,{signal:h})}else c==null||c.toggleDrawing(!0),E(this,H,vh).call(this,"main_toolbar")}},vh=function(e=""){o(this,wt)===ie.HIGHLIGHT?this.highlightSelection(e):o(this,jf)&&E(this,H,vC).call(this)},wC=function(){document.addEventListener("selectionchange",E(this,H,bC).bind(this),{signal:this._signal})},kC=function(){if(o(this,Aa))return;y(this,Aa,new AbortController);const e=this.combinedSignal(o(this,Aa));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})},AC=function(){var e;(e=o(this,Aa))==null||e.abort(),y(this,Aa,null)},_v=function(){if(o(this,Ca))return;y(this,Ca,new AbortController);const e=this.combinedSignal(o(this,Ca));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})},SC=function(){var e;(e=o(this,Ca))==null||e.abort(),y(this,Ca,null)},jv=function(){if(o(this,ba))return;y(this,ba,new AbortController);const e=this.combinedSignal(o(this,ba));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})},Pv=function(){var e;(e=o(this,ba))==null||e.abort(),y(this,ba,null)},EC=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},xn=function(e){Object.entries(e).some(([s,r])=>o(this,Mf)[s]!==r)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(o(this,Mf),e)}),o(this,wt)===ie.HIGHLIGHT&&e.hasSelectedEditor===!1&&E(this,H,ii).call(this,[[ye.HIGHLIGHT_FREE,!0]]))},ii=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},CC=async function(){if(!o(this,Ea)){y(this,Ea,!0);const e=[];for(const t of o(this,Nt).values())e.push(t.enable());await Promise.all(e);for(const t of o(this,lt).values())t.enable()}},NC=function(){if(this.unselectAll(),o(this,Ea)){y(this,Ea,!1);for(const e of o(this,Nt).values())e.disable();for(const e of o(this,lt).values())e.disable()}},Tv=function(e){const t=o(this,Nt).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},_C=function(){let e=null;for(e of o(this,_e));return e},bh=function(){if(o(this,lt).size===0)return!0;if(o(this,lt).size===1)for(const e of o(this,lt).values())return e.isEmpty();return!1},Rv=function(e){for(const t of o(this,_e))t.unselect();o(this,_e).clear();for(const t of e)t.isEmpty()||(o(this,_e).add(t),t.select());E(this,H,xn).call(this,{hasSelectedEditor:this.hasSelection})},I(qc,"TRANSLATE_SMALL",1),I(qc,"TRANSLATE_BIG",10);let No=qc;var Rt,Rr,er,bd,Lr,Kn,wd,Dr,Rn,mi,Jo,Mr,Ta,pr,wh,pg;const vn=class vn{constructor(e){k(this,pr);k(this,Rt,null);k(this,Rr,!1);k(this,er,null);k(this,bd,null);k(this,Lr,null);k(this,Kn,null);k(this,wd,!1);k(this,Dr,null);k(this,Rn,null);k(this,mi,null);k(this,Jo,null);k(this,Mr,!1);y(this,Rn,e),y(this,Mr,e._uiManager.useNewAltTextFlow),o(vn,Ta)||y(vn,Ta,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){vn._l10n??(vn._l10n=e)}async render(){const e=y(this,er,document.createElement("button"));e.className="altText",e.tabIndex="0";const t=y(this,bd,document.createElement("span"));e.append(t),o(this,Mr)?(e.classList.add("new"),e.setAttribute("data-l10n-id",o(vn,Ta).missing),t.setAttribute("data-l10n-id",o(vn,Ta)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const s=o(this,Rn)._uiManager._signal;e.addEventListener("contextmenu",vs,{signal:s}),e.addEventListener("pointerdown",i=>i.stopPropagation(),{signal:s});const r=i=>{i.preventDefault(),o(this,Rn)._uiManager.editAltText(o(this,Rn)),o(this,Mr)&&o(this,Rn)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:o(this,pr,wh)}})};return e.addEventListener("click",r,{capture:!0,signal:s}),e.addEventListener("keydown",i=>{i.target===e&&i.key==="Enter"&&(y(this,wd,!0),r(i))},{signal:s}),await E(this,pr,pg).call(this),e}finish(){o(this,er)&&(o(this,er).focus({focusVisible:o(this,wd)}),y(this,wd,!1))}isEmpty(){return o(this,Mr)?o(this,Rt)===null:!o(this,Rt)&&!o(this,Rr)}hasData(){return o(this,Mr)?o(this,Rt)!==null||!!o(this,mi):this.isEmpty()}get guessedText(){return o(this,mi)}async setGuessedText(e){o(this,Rt)===null&&(y(this,mi,e),y(this,Jo,await vn._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),E(this,pr,pg).call(this))}toggleAltTextBadge(e=!1){var t;if(!o(this,Mr)||o(this,Rt)){(t=o(this,Dr))==null||t.remove(),y(this,Dr,null);return}if(!o(this,Dr)){const s=y(this,Dr,document.createElement("div"));s.className="noAltTextBadge",o(this,Rn).div.append(s)}o(this,Dr).classList.toggle("hidden",!e)}serialize(e){let t=o(this,Rt);return!e&&o(this,mi)===t&&(t=o(this,Jo)),{altText:t,decorative:o(this,Rr),guessedText:o(this,mi),textWithDisclaimer:o(this,Jo)}}get data(){return{altText:o(this,Rt),decorative:o(this,Rr)}}set data({altText:e,decorative:t,guessedText:s,textWithDisclaimer:r,cancel:i=!1}){s&&(y(this,mi,s),y(this,Jo,r)),!(o(this,Rt)===e&&o(this,Rr)===t)&&(i||(y(this,Rt,e),y(this,Rr,t)),E(this,pr,pg).call(this))}toggle(e=!1){o(this,er)&&(!e&&o(this,Kn)&&(clearTimeout(o(this,Kn)),y(this,Kn,null)),o(this,er).disabled=!e)}shown(){o(this,Rn)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:o(this,pr,wh)}})}destroy(){var e,t;(e=o(this,er))==null||e.remove(),y(this,er,null),y(this,bd,null),y(this,Lr,null),(t=o(this,Dr))==null||t.remove(),y(this,Dr,null)}};Rt=new WeakMap,Rr=new WeakMap,er=new WeakMap,bd=new WeakMap,Lr=new WeakMap,Kn=new WeakMap,wd=new WeakMap,Dr=new WeakMap,Rn=new WeakMap,mi=new WeakMap,Jo=new WeakMap,Mr=new WeakMap,Ta=new WeakMap,pr=new WeakSet,wh=function(){return o(this,Rt)&&"added"||o(this,Rt)===null&&this.guessedText&&"review"||"missing"},pg=async function(){var r,i,a;const e=o(this,er);if(!e)return;if(o(this,Mr)){if(e.classList.toggle("done",!!o(this,Rt)),e.setAttribute("data-l10n-id",o(vn,Ta)[o(this,pr,wh)]),(r=o(this,bd))==null||r.setAttribute("data-l10n-id",o(vn,Ta)[`${o(this,pr,wh)}-label`]),!o(this,Rt)){(i=o(this,Lr))==null||i.remove();return}}else{if(!o(this,Rt)&&!o(this,Rr)){e.classList.remove("done"),(a=o(this,Lr))==null||a.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=o(this,Lr);if(!t){y(this,Lr,t=document.createElement("span")),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${o(this,Rn).id}`;const l=100,c=o(this,Rn)._uiManager._signal;c.addEventListener("abort",()=>{clearTimeout(o(this,Kn)),y(this,Kn,null)},{once:!0}),e.addEventListener("mouseenter",()=>{y(this,Kn,setTimeout(()=>{y(this,Kn,null),o(this,Lr).classList.add("show"),o(this,Rn)._reportTelemetry({action:"alt_text_tooltip"})},l))},{signal:c}),e.addEventListener("mouseleave",()=>{var d;o(this,Kn)&&(clearTimeout(o(this,Kn)),y(this,Kn,null)),(d=o(this,Lr))==null||d.classList.remove("show")},{signal:c})}o(this,Rr)?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=o(this,Rt)),t.parentNode||e.append(t);const s=o(this,Rn).getElementForAltText();s==null||s.setAttribute("aria-describedby",t.id)},k(vn,Ta,null),I(vn,"_l10n",null);let v0=vn;var Wt,Ts,Zo,He,Of,el,tr,tl,nl,sl,Bf,Lv;class zm{constructor(e){k(this,Bf);k(this,Wt,null);k(this,Ts,null);k(this,Zo,!1);k(this,He,null);k(this,Of,null);k(this,el,null);k(this,tr,null);k(this,tl,null);k(this,nl,!1);k(this,sl,null);y(this,He,e)}renderForToolbar(){const e=y(this,Ts,document.createElement("button"));return e.className="comment",E(this,Bf,Lv).call(this,e,!1)}renderForStandalone(){const e=y(this,Wt,document.createElement("button"));e.className="annotationCommentButton";const t=o(this,He).commentButtonPosition;if(t){const{style:s}=e;s.insetInlineEnd=`calc(${100*(o(this,He)._uiManager.direction==="ltr"?1-t[0]:t[0])}% - var(--comment-button-dim))`,s.top=`calc(${100*t[1]}% - var(--comment-button-dim))`;const r=o(this,He).commentButtonColor;r&&(s.backgroundColor=r)}return E(this,Bf,Lv).call(this,e,!0)}focusButton(){setTimeout(()=>{var e;(e=o(this,Wt)??o(this,Ts))==null||e.focus()},0)}onUpdatedColor(){if(!o(this,Wt))return;const e=o(this,He).commentButtonColor;e&&(o(this,Wt).style.backgroundColor=e),o(this,He)._uiManager.updatePopupColor(o(this,He))}get commentButtonWidth(){var e;return(((e=o(this,Wt))==null?void 0:e.getBoundingClientRect().width)??0)/o(this,He).parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(o(this,sl))return o(this,sl);if(!o(this,Wt))return null;const{x:e,y:t,height:s}=o(this,Wt).getBoundingClientRect(),{x:r,y:i,width:a,height:l}=o(this,He).parent.boundingClientRect;return[(e-r)/a,(t+s-i)/l]}set commentPopupPositionInLayer(e){y(this,sl,e)}hasDefaultPopupPosition(){return o(this,sl)===null}removeStandaloneCommentButton(){var e;(e=o(this,Wt))==null||e.remove(),y(this,Wt,null)}removeToolbarCommentButton(){var e;(e=o(this,Ts))==null||e.remove(),y(this,Ts,null)}setCommentButtonStates({selected:e,hasPopup:t}){o(this,Wt)&&(o(this,Wt).classList.toggle("selected",e),o(this,Wt).ariaExpanded=t)}edit(e){const t=this.commentPopupPositionInLayer;let s,r;if(t)[s,r]=t;else{[s,r]=o(this,He).commentButtonPosition;const{width:h,height:f,x:p,y:m}=o(this,He);s=p+s*h,r=m+r*f}const i=o(this,He).parent.boundingClientRect,{x:a,y:l,width:c,height:d}=i;o(this,He)._uiManager.editComment(o(this,He),a+s*c,l+r*d,{...e,parentDimensions:i})}finish(){o(this,Ts)&&(o(this,Ts).focus({focusVisible:o(this,Zo)}),y(this,Zo,!1))}isDeleted(){return o(this,nl)||o(this,tr)===""}isEmpty(){return o(this,tr)===null}hasBeenEdited(){return this.isDeleted()||o(this,tr)!==o(this,Of)}serialize(){return this.data}get data(){return{text:o(this,tr),richText:o(this,el),date:o(this,tl),deleted:this.isDeleted()}}set data(e){if(e!==o(this,tr)&&y(this,el,null),e===null){y(this,tr,""),y(this,nl,!0);return}y(this,tr,e),y(this,tl,new Date),y(this,nl,!1)}setInitialText(e,t=null){y(this,Of,e),this.data=e,y(this,tl,null),y(this,el,t)}shown(){}destroy(){var e,t;(e=o(this,Ts))==null||e.remove(),y(this,Ts,null),(t=o(this,Wt))==null||t.remove(),y(this,Wt,null),y(this,tr,""),y(this,el,null),y(this,tl,null),y(this,He,null),y(this,Zo,!1),y(this,nl,!1)}}Wt=new WeakMap,Ts=new WeakMap,Zo=new WeakMap,He=new WeakMap,Of=new WeakMap,el=new WeakMap,tr=new WeakMap,tl=new WeakMap,nl=new WeakMap,sl=new WeakMap,Bf=new WeakSet,Lv=function(e,t){if(!o(this,He)._uiManager.hasCommentManager())return null;e.tabIndex="0",e.ariaHasPopup="dialog",t?(e.ariaControls="commentPopup",e.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(e.ariaControlsElements=[o(this,He)._uiManager.getCommentDialogElement()],e.setAttribute("data-l10n-id","pdfjs-editor-edit-comment-button"));const s=o(this,He)._uiManager._signal;if(!(s instanceof AbortSignal)||s.aborted)return e;e.addEventListener("contextmenu",vs,{signal:s}),t&&(e.addEventListener("focusin",i=>{o(this,He)._focusEventsAllowed=!1,st(i)},{capture:!0,signal:s}),e.addEventListener("focusout",i=>{o(this,He)._focusEventsAllowed=!0,st(i)},{capture:!0,signal:s})),e.addEventListener("pointerdown",i=>i.stopPropagation(),{signal:s});const r=i=>{i.preventDefault(),e===o(this,Ts)?this.edit():o(this,He).toggleComment(!0)};return e.addEventListener("click",r,{capture:!0,signal:s}),e.addEventListener("keydown",i=>{i.target===e&&i.key==="Enter"&&(y(this,Zo,!0),r(i))},{signal:s}),e.addEventListener("pointerenter",()=>{o(this,He).toggleComment(!1,!0)},{signal:s}),e.addEventListener("pointerleave",()=>{o(this,He).toggleComment(!1,!1)},{signal:s}),e};var kd,rl,Uf,zf,$f,Hf,Vf,gi,il,yi,al,xi,_o,jC,PC,TC;const f1=class f1{constructor({container:e,isPinchingDisabled:t=null,isPinchingStopped:s=null,onPinchStart:r=null,onPinching:i=null,onPinchEnd:a=null,signal:l}){k(this,_o);k(this,kd);k(this,rl,!1);k(this,Uf,null);k(this,zf);k(this,$f);k(this,Hf);k(this,Vf);k(this,gi,null);k(this,il);k(this,yi,null);k(this,al);k(this,xi,null);y(this,kd,e),y(this,Uf,s),y(this,zf,t),y(this,$f,r),y(this,Hf,i),y(this,Vf,a),y(this,al,new AbortController),y(this,il,AbortSignal.any([l,o(this,al).signal])),e.addEventListener("touchstart",E(this,_o,jC).bind(this),{passive:!1,signal:o(this,il)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/vr.pixelRatio}destroy(){var e,t;(e=o(this,al))==null||e.abort(),y(this,al,null),(t=o(this,gi))==null||t.abort(),y(this,gi,null)}};kd=new WeakMap,rl=new WeakMap,Uf=new WeakMap,zf=new WeakMap,$f=new WeakMap,Hf=new WeakMap,Vf=new WeakMap,gi=new WeakMap,il=new WeakMap,yi=new WeakMap,al=new WeakMap,xi=new WeakMap,_o=new WeakSet,jC=function(e){var r,i,a;if((r=o(this,zf))!=null&&r.call(this))return;if(e.touches.length===1){if(o(this,gi))return;const l=y(this,gi,new AbortController),c=AbortSignal.any([o(this,il),l.signal]),d=o(this,kd),h={capture:!0,signal:c,passive:!1},f=p=>{var m;p.pointerType==="touch"&&((m=o(this,gi))==null||m.abort(),y(this,gi,null))};d.addEventListener("pointerdown",p=>{p.pointerType==="touch"&&(st(p),f(p))},h),d.addEventListener("pointerup",f,h),d.addEventListener("pointercancel",f,h);return}if(!o(this,xi)){y(this,xi,new AbortController);const l=AbortSignal.any([o(this,il),o(this,xi).signal]),c=o(this,kd),d={signal:l,capture:!1,passive:!1};c.addEventListener("touchmove",E(this,_o,PC).bind(this),d);const h=E(this,_o,TC).bind(this);c.addEventListener("touchend",h,d),c.addEventListener("touchcancel",h,d),d.capture=!0,c.addEventListener("pointerdown",st,d),c.addEventListener("pointermove",st,d),c.addEventListener("pointercancel",st,d),c.addEventListener("pointerup",st,d),(i=o(this,$f))==null||i.call(this)}if(st(e),e.touches.length!==2||(a=o(this,Uf))!=null&&a.call(this)){y(this,yi,null);return}let[t,s]=e.touches;t.identifier>s.identifier&&([t,s]=[s,t]),y(this,yi,{touch0X:t.screenX,touch0Y:t.screenY,touch1X:s.screenX,touch1Y:s.screenY})},PC=function(e){var S;if(!o(this,yi)||e.touches.length!==2)return;st(e);let[t,s]=e.touches;t.identifier>s.identifier&&([t,s]=[s,t]);const{screenX:r,screenY:i}=t,{screenX:a,screenY:l}=s,c=o(this,yi),{touch0X:d,touch0Y:h,touch1X:f,touch1Y:p}=c,m=f-d,v=p-h,x=a-r,A=l-i,b=Math.hypot(x,A)||1,g=Math.hypot(m,v)||1;if(!o(this,rl)&&Math.abs(g-b)<=f1.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(c.touch0X=r,c.touch0Y=i,c.touch1X=a,c.touch1Y=l,!o(this,rl)){y(this,rl,!0);return}const w=[(r+a)/2,(i+l)/2];(S=o(this,Hf))==null||S.call(this,w,g,b)},TC=function(e){var t;e.touches.length>=2||(o(this,xi)&&(o(this,xi).abort(),y(this,xi,null),(t=o(this,Vf))==null||t.call(this)),o(this,yi)&&(st(e),y(this,yi,null),y(this,rl,!1)))};let vf=f1;var ol,nr,Ye,Oe,vi,Ad,Ra,Wf,Gt,ll,bi,Ir,La,Gf,cl,Yn,qf,dl,wi,Fr,Sd,Ed,Rs,ul,Xf,D0,ne,Dv,Kf,Mv,mg,RC,LC,Iv,gg,Fv,DC,MC,IC,Ov,FC,Bv,OC,BC,UC,Uv,kh;const oe=class oe{constructor(e){k(this,ne);k(this,ol,null);k(this,nr,null);k(this,Ye,null);k(this,Oe,null);k(this,vi,null);k(this,Ad,!1);k(this,Ra,null);k(this,Wf,"");k(this,Gt,null);k(this,ll,null);k(this,bi,null);k(this,Ir,null);k(this,La,null);k(this,Gf,"");k(this,cl,!1);k(this,Yn,null);k(this,qf,!1);k(this,dl,!1);k(this,wi,!1);k(this,Fr,null);k(this,Sd,0);k(this,Ed,0);k(this,Rs,null);k(this,ul,null);I(this,"isSelected",!1);I(this,"_isCopy",!1);I(this,"_editToolbar",null);I(this,"_initialOptions",Object.create(null));I(this,"_initialData",null);I(this,"_isVisible",!0);I(this,"_uiManager",null);I(this,"_focusEventsAllowed",!0);k(this,Xf,!1);k(this,D0,oe._zIndex++);this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null,this.annotationElementId=e.annotationElementId||null,this.creationDate=e.creationDate||new Date,this.modificationDate=e.modificationDate||null;const{rotation:t,rawDims:{pageWidth:s,pageHeight:r,pageX:i,pageY:a}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[s,r],this.pageTranslation=[i,a];const[l,c]=this.parentDimensions;this.x=e.x/l,this.y=e.y/c,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=oe.prototype._resizeWithKeyboard,t=No.TRANSLATE_SMALL,s=No.TRANSLATE_BIG;return de(this,"_resizerKeyboardManager",new gm([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-s,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[s,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-s]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,s]}],[["Escape","mac+Escape"],oe.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return de(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new $D({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(oe._l10n??(oe._l10n=e),oe._l10nResizer||(oe._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),oe._borderLineWidth!==-1)return;const s=getComputedStyle(document.documentElement);oe._borderLineWidth=parseFloat(s.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){$e("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return o(this,Xf)}set _isDraggable(e){var t;y(this,Xf,e),(t=this.div)==null||t.classList.toggle("draggable",e)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=o(this,D0)}setParent(e){var t;e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):(E(this,ne,kh).call(this),(t=o(this,Ir))==null||t.remove(),y(this,Ir,null)),this.parent=e}focusin(e){this._focusEventsAllowed&&(o(this,cl)?y(this,cl,!1):this.parent.setSelected(this))}focusout(e){var s;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const t=e.relatedTarget;t!=null&&t.closest(`#${this.id}`)||(e.preventDefault(),(s=this.parent)!=null&&s.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,s,r){const[i,a]=this.parentDimensions;[s,r]=this.screenToPageTranslation(s,r),this.x=(e+s)/i,this.y=(t+r)/a,this.fixAndSetPosition()}_moveAfterPaste(e,t){const[s,r]=this.parentDimensions;this.setAt(e*s,t*r,this.width*s,this.height*r),this._onTranslated()}translate(e,t){E(this,ne,Dv).call(this,this.parentDimensions,e,t)}translateInPage(e,t){o(this,Yn)||y(this,Yn,[this.x,this.y,this.width,this.height]),E(this,ne,Dv).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(e,t){o(this,Yn)||y(this,Yn,[this.x,this.y,this.width,this.height]);const{div:s,parentDimensions:[r,i]}=this;if(this.x+=e/r,this.y+=t/i,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:f,y:p}=this.div.getBoundingClientRect();this.parent.findNewParent(this,f,p)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:a,y:l}=this;const[c,d]=this.getBaseTranslation();a+=c,l+=d;const{style:h}=s;h.left=`${(100*a).toFixed(2)}%`,h.top=`${(100*l).toFixed(2)}%`,this._onTranslating(a,l),s.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!o(this,Yn)&&(o(this,Yn)[0]!==this.x||o(this,Yn)[1]!==this.y)}get _hasBeenResized(){return!!o(this,Yn)&&(o(this,Yn)[2]!==this.width||o(this,Yn)[3]!==this.height)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:s}=oe,r=s/e,i=s/t;switch(this.rotation){case 90:return[-r,i];case 180:return[r,i];case 270:return[r,-i];default:return[-r,-i]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:t},pageDimensions:[s,r]}=this;let{x:i,y:a,width:l,height:c}=this;if(l*=s,c*=r,i*=s,a*=r,this._mustFixPosition)switch(e){case 0:i=fn(i,0,s-l),a=fn(a,0,r-c);break;case 90:i=fn(i,0,s-c),a=fn(a,l,r);break;case 180:i=fn(i,l,s),a=fn(a,c,r);break;case 270:i=fn(i,c,s),a=fn(a,0,r-l);break}this.x=i/=s,this.y=a/=r;const[d,h]=this.getBaseTranslation();i+=d,a+=h,t.left=`${(100*i).toFixed(2)}%`,t.top=`${(100*a).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,t){var s;return E(s=oe,Kf,Mv).call(s,e,t,this.parentRotation)}pageTranslationToScreen(e,t){var s;return E(s=oe,Kf,Mv).call(s,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,s]}=this;return[t*e,s*e]}setDims(){const{div:{style:e},width:t,height:s}=this;e.width=`${(100*t).toFixed(2)}%`,e.height=`${(100*s).toFixed(2)}%`}getInitialTranslation(){return[0,0]}_onResized(){}static _round(e){return Math.round(e*1e4)/1e4}_onResizing(){}altTextFinish(){var e;(e=o(this,Ye))==null||e.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||o(this,dl))return this._editToolbar;this._editToolbar=new Av(this),this.div.append(this._editToolbar.render());const{toolbarButtons:e}=this;if(e)for(const[t,s]of e)await this._editToolbar.addButton(t,s);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){var e;(e=this._editToolbar)==null||e.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){var e;(e=this._editToolbar)==null||e.removeButton("comment")}removeEditToolbar(){var e,t;(e=this._editToolbar)==null||e.remove(),this._editToolbar=null,(t=o(this,Ye))==null||t.destroy()}addContainer(e){var s;const t=(s=this._editToolbar)==null?void 0:s.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return o(this,Ye)||(v0.initialize(oe._l10n),y(this,Ye,new v0(this)),o(this,ol)&&(o(this,Ye).data=o(this,ol),y(this,ol,null))),o(this,Ye)}get altTextData(){var e;return(e=o(this,Ye))==null?void 0:e.data}set altTextData(e){o(this,Ye)&&(o(this,Ye).data=e)}get guessedAltText(){var e;return(e=o(this,Ye))==null?void 0:e.guessedText}async setGuessedAltText(e){var t;await((t=o(this,Ye))==null?void 0:t.setGuessedText(e))}serializeAltText(e){var t;return(t=o(this,Ye))==null?void 0:t.serialize(e)}hasAltText(){return!!o(this,Ye)&&!o(this,Ye).isEmpty()}hasAltTextData(){var e;return((e=o(this,Ye))==null?void 0:e.hasData())??!1}focusCommentButton(){var e;(e=o(this,Oe))==null||e.focusButton()}addCommentButton(){return o(this,Oe)||y(this,Oe,new zm(this))}addStandaloneCommentButton(){if(o(this,vi)){this._uiManager.isEditingMode()&&o(this,vi).classList.remove("hidden");return}this.hasComment&&(y(this,vi,o(this,Oe).renderForStandalone()),this.div.append(o(this,vi)))}removeStandaloneCommentButton(){o(this,Oe).removeStandaloneCommentButton(),y(this,vi,null)}hideStandaloneCommentButton(){var e;(e=o(this,vi))==null||e.classList.add("hidden")}get comment(){const{data:{richText:e,text:t,date:s,deleted:r}}=o(this,Oe);return{text:t,richText:e,date:s,deleted:r,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(e){o(this,Oe)||y(this,Oe,new zm(this)),o(this,Oe).data=e,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:e,popupRef:t,richText:s}){if(!t||(o(this,Oe)||y(this,Oe,new zm(this)),o(this,Oe).setInitialText(e,s),!this.annotationElementId))return;const r=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);r&&this.updateFromAnnotationLayer(r)}get hasEditedComment(){var e;return(e=o(this,Oe))==null?void 0:e.hasBeenEdited()}get hasDeletedComment(){var e;return(e=o(this,Oe))==null?void 0:e.isDeleted()}get hasComment(){return!!o(this,Oe)&&!o(this,Oe).isEmpty()&&!o(this,Oe).isDeleted()}async editComment(e){o(this,Oe)||y(this,Oe,new zm(this)),o(this,Oe).edit(e)}toggleComment(e,t=void 0){this.hasComment&&this._uiManager.toggleComment(this,e,t)}setSelectedCommentButton(e){o(this,Oe).setSelectedButton(e)}addComment(e){if(this.hasEditedComment){const[,,,r]=e.rect,[i]=this.pageDimensions,[a]=this.pageTranslation,l=a+i+1,c=r-100,d=l+180;e.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[l,c,d,r]}}}updateFromAnnotationLayer({popup:{contents:e,deleted:t}}){o(this,Oe).data=t?null:e}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){var a;const e=this.div=document.createElement("div");e.setAttribute("data-editor-rotation",(360-this.rotation)%360),e.className=this.name,e.setAttribute("id",this.id),e.tabIndex=o(this,Ad)?-1:0,e.setAttribute("role","application"),this.defaultL10nId&&e.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||e.classList.add("hidden"),this.setInForeground(),E(this,ne,Bv).call(this);const[t,s]=this.parentDimensions;this.parentRotation%180!==0&&(e.style.maxWidth=`${(100*s/t).toFixed(2)}%`,e.style.maxHeight=`${(100*t/s).toFixed(2)}%`);const[r,i]=this.getInitialTranslation();return this.translate(r,i),yC(this,e,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(o(this,ul)||y(this,ul,new vf({container:e,isPinchingDisabled:()=>!this.isSelected,onPinchStart:E(this,ne,DC).bind(this),onPinching:E(this,ne,MC).bind(this),onPinchEnd:E(this,ne,IC).bind(this),signal:this._uiManager._signal}))),this.addStandaloneCommentButton(),(a=this._uiManager._editorUndoBar)==null||a.hide(),e}pointerdown(e){const{isMac:t}=zt.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(y(this,cl,!0),this._isDraggable){E(this,ne,FC).call(this,e);return}E(this,ne,Ov).call(this,e)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){o(this,Fr)&&clearTimeout(o(this,Fr)),y(this,Fr,setTimeout(()=>{var e;y(this,Fr,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,s){e.changeParent(this),this.x=t,this.y=s,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t,s=this.rotation){const r=this.parentScale,[i,a]=this.pageDimensions,[l,c]=this.pageTranslation,d=e/r,h=t/r,f=this.x*i,p=this.y*a,m=this.width*i,v=this.height*a;switch(s){case 0:return[f+d+l,a-p-h-v+c,f+d+m+l,a-p-h+c];case 90:return[f+h+l,a-p+d+c,f+h+v+l,a-p+d+m+c];case 180:return[f-d-m+l,a-p+h+c,f-d+l,a-p+h+v+c];case 270:return[f-h-v+l,a-p-d-m+c,f-h+l,a-p-d+c];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[s,r,i,a]=e,l=i-s,c=a-r;switch(this.rotation){case 0:return[s,t-a,l,c];case 90:return[s,t-r,c,l];case 180:return[i,t-r,l,c];case 270:return[i,t-a,c,l];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&oe._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){var e;(e=o(this,Oe))==null||e.onUpdatedColor()}getData(){const{comment:{text:e,color:t,date:s,opacity:r,deleted:i,richText:a},uid:l,pageIndex:c,creationDate:d,modificationDate:h}=this;return{id:l,pageIndex:c,rect:this.getPDFRect(),richText:a,contentsObj:{str:e},creationDate:d,modificationDate:s||h,popupRef:!i,color:t,opacity:r}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),y(this,dl,!0),!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),y(this,dl,!1),!0):!1}isInEditMode(){return o(this,dl)}shouldGetKeyboardEvents(){return o(this,wi)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:t,bottom:s,right:r}=this.getClientDimensions(),{innerHeight:i,innerWidth:a}=window;return t<a&&r>0&&e<i&&s>0}rebuild(){E(this,ne,Bv).call(this)}rotate(e){}resize(){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((e=this._initialData)==null?void 0:e.popupRef)||""}}serialize(e=!1,t=null){var s;return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:((s=this._initialData)==null?void 0:s.popupRef)||""}}static async deserialize(e,t,s){const r=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:s,annotationElementId:e.annotationElementId,creationDate:e.creationDate,modificationDate:e.modificationDate});r.rotation=e.rotation,y(r,ol,e.accessibilityData),r._isCopy=e.isCopy||!1;const[i,a]=r.pageDimensions,[l,c,d,h]=r.getRectInCurrentCoords(e.rect,a);return r.x=l/i,r.y=c/a,r.width=d/i,r.height=h/a,r}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var e,t;if((e=o(this,La))==null||e.abort(),y(this,La,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),o(this,Fr)&&(clearTimeout(o(this,Fr)),y(this,Fr,null)),E(this,ne,kh).call(this),this.removeEditToolbar(),o(this,Rs)){for(const s of o(this,Rs).values())clearTimeout(s);y(this,Rs,null)}this.parent=null,(t=o(this,ul))==null||t.destroy(),y(this,ul,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(E(this,ne,RC).call(this),o(this,Gt).classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[e,t]}=this,[s,r,i,a]=this.getPDFRect();return[oe._round(s+(i-s)*e),oe._round(r+(a-r)*(1-t))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return o(this,Oe).commentPopupPositionInLayer}set commentPopupPosition(e){o(this,Oe).commentPopupPositionInLayer=e}hasDefaultPopupPosition(){return o(this,Oe).hasDefaultPopupPosition()}get commentButtonWidth(){return o(this,Oe).commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(e){o(this,Oe).setCommentButtonStates(e)}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),y(this,bi,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=o(this,Gt).children;if(!o(this,nr)){y(this,nr,Array.from(t));const a=E(this,ne,OC).bind(this),l=E(this,ne,BC).bind(this),c=this._uiManager._signal;for(const d of o(this,nr)){const h=d.getAttribute("data-resizer-name");d.setAttribute("role","spinbutton"),d.addEventListener("keydown",a,{signal:c}),d.addEventListener("blur",l,{signal:c}),d.addEventListener("focus",E(this,ne,UC).bind(this,h),{signal:c}),d.setAttribute("data-l10n-id",oe._l10nResizer[h])}}const s=o(this,nr)[0];let r=0;for(const a of t){if(a===s)break;r++}const i=(360-this.rotation+this.parentRotation)%360/90*(o(this,nr).length/4);if(i!==r){if(i<r)for(let l=0;l<r-i;l++)o(this,Gt).append(o(this,Gt).firstChild);else if(i>r)for(let l=0;l<i-r;l++)o(this,Gt).firstChild.before(o(this,Gt).lastChild);let a=0;for(const l of t){const d=o(this,nr)[a++].getAttribute("data-resizer-name");l.setAttribute("data-l10n-id",oe._l10nResizer[d])}}E(this,ne,Uv).call(this,0),y(this,wi,!0),o(this,Gt).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){o(this,wi)&&E(this,ne,Fv).call(this,o(this,Gf),{deltaX:e,deltaY:t,fromKeyboard:!0})}_stopResizingWithKeyboard(){E(this,ne,kh).call(this),this.div.focus()}select(){var e,t,s;if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var r,i;(r=this.div)!=null&&r.classList.contains("selectedEditor")&&((i=this._editToolbar)==null||i.show())});return}(t=this._editToolbar)==null||t.show(),(s=o(this,Ye))==null||s.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>{var e;return(e=this.div)==null?void 0:e.focus({preventScroll:!0})},0)}unselect(){var e,t,s,r,i;this.isSelected&&(this.isSelected=!1,(e=o(this,Gt))==null||e.classList.add("hidden"),(t=this.div)==null||t.classList.remove("selectedEditor"),(s=this.div)!=null&&s.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(r=this._editToolbar)==null||r.hide(),(i=o(this,Ye))==null||i.toggleAltTextBadge(!0),this.hasComment&&this._uiManager.toggleComment(this,!1,!1))}updateParams(e,t){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(e){e.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return o(this,qf)}set isEditing(e){y(this,qf,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){o(this,Rs)||y(this,Rs,new Map);const{action:s}=e;let r=o(this,Rs).get(s);r&&clearTimeout(r),r=setTimeout(()=>{this._reportTelemetry(e),o(this,Rs).delete(s),o(this,Rs).size===0&&y(this,Rs,null)},oe._telemetryTimeout),o(this,Rs).set(s,r);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),y(this,Ad,!1)}disable(){this.div&&(this.div.tabIndex=-1),y(this,Ad,!0)}updateFakeAnnotationElement(e){if(!o(this,Ir)&&!this.deleted){y(this,Ir,e.addFakeAnnotation(this));return}if(this.deleted){o(this,Ir).remove(),y(this,Ir,null);return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&o(this,Ir).updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const s=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),s.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;(t==null?void 0:t.nodeName)==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}};ol=new WeakMap,nr=new WeakMap,Ye=new WeakMap,Oe=new WeakMap,vi=new WeakMap,Ad=new WeakMap,Ra=new WeakMap,Wf=new WeakMap,Gt=new WeakMap,ll=new WeakMap,bi=new WeakMap,Ir=new WeakMap,La=new WeakMap,Gf=new WeakMap,cl=new WeakMap,Yn=new WeakMap,qf=new WeakMap,dl=new WeakMap,wi=new WeakMap,Fr=new WeakMap,Sd=new WeakMap,Ed=new WeakMap,Rs=new WeakMap,ul=new WeakMap,Xf=new WeakMap,D0=new WeakMap,ne=new WeakSet,Dv=function([e,t],s,r){[s,r]=this.screenToPageTranslation(s,r),this.x+=s/e,this.y+=r/t,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},Kf=new WeakSet,Mv=function(e,t,s){switch(s){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}},mg=function(e){switch(e){case 90:{const[t,s]=this.pageDimensions;return[0,-t/s,s/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,s]=this.pageDimensions;return[0,t/s,-s/t,0]}default:return[1,0,0,1]}},RC=function(){if(o(this,Gt))return;y(this,Gt,document.createElement("div")),o(this,Gt).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const s of e){const r=document.createElement("div");o(this,Gt).append(r),r.classList.add("resizer",s),r.setAttribute("data-resizer-name",s),r.addEventListener("pointerdown",E(this,ne,LC).bind(this,s),{signal:t}),r.addEventListener("contextmenu",vs,{signal:t}),r.tabIndex=-1}this.div.prepend(o(this,Gt))},LC=function(e,t){var h;t.preventDefault();const{isMac:s}=zt.platform;if(t.button!==0||t.ctrlKey&&s)return;(h=o(this,Ye))==null||h.toggle(!1);const r=this._isDraggable;this._isDraggable=!1,y(this,ll,[t.screenX,t.screenY]);const i=new AbortController,a=this._uiManager.combinedSignal(i);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",E(this,ne,Fv).bind(this,e),{passive:!0,capture:!0,signal:a}),window.addEventListener("touchmove",st,{passive:!1,signal:a}),window.addEventListener("contextmenu",vs,{signal:a}),y(this,bi,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const l=this.parent.div.style.cursor,c=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const d=()=>{var f;i.abort(),this.parent.togglePointerEvents(!0),(f=o(this,Ye))==null||f.toggle(!0),this._isDraggable=r,this.parent.div.style.cursor=l,this.div.style.cursor=c,E(this,ne,gg).call(this)};window.addEventListener("pointerup",d,{signal:a}),window.addEventListener("blur",d,{signal:a})},Iv=function(e,t,s,r){this.width=s,this.height=r,this.x=e,this.y=t,this.setDims(),this.fixAndSetPosition(),this._onResized()},gg=function(){if(!o(this,bi))return;const{savedX:e,savedY:t,savedWidth:s,savedHeight:r}=o(this,bi);y(this,bi,null);const i=this.x,a=this.y,l=this.width,c=this.height;i===e&&a===t&&l===s&&c===r||this.addCommands({cmd:E(this,ne,Iv).bind(this,i,a,l,c),undo:E(this,ne,Iv).bind(this,e,t,s,r),mustExec:!0})},Fv=function(e,t){const[s,r]=this.parentDimensions,i=this.x,a=this.y,l=this.width,c=this.height,d=oe.MIN_SIZE/s,h=oe.MIN_SIZE/r,f=E(this,ne,mg).call(this,this.rotation),p=(B,z)=>[f[0]*B+f[2]*z,f[1]*B+f[3]*z],m=E(this,ne,mg).call(this,360-this.rotation),v=(B,z)=>[m[0]*B+m[2]*z,m[1]*B+m[3]*z];let x,A,b=!1,g=!1;switch(e){case"topLeft":b=!0,x=(B,z)=>[0,0],A=(B,z)=>[B,z];break;case"topMiddle":x=(B,z)=>[B/2,0],A=(B,z)=>[B/2,z];break;case"topRight":b=!0,x=(B,z)=>[B,0],A=(B,z)=>[0,z];break;case"middleRight":g=!0,x=(B,z)=>[B,z/2],A=(B,z)=>[0,z/2];break;case"bottomRight":b=!0,x=(B,z)=>[B,z],A=(B,z)=>[0,0];break;case"bottomMiddle":x=(B,z)=>[B/2,z],A=(B,z)=>[B/2,0];break;case"bottomLeft":b=!0,x=(B,z)=>[0,z],A=(B,z)=>[B,0];break;case"middleLeft":g=!0,x=(B,z)=>[0,z/2],A=(B,z)=>[B,z/2];break}const w=x(l,c),S=A(l,c);let C=p(...S);const N=oe._round(i+C[0]),_=oe._round(a+C[1]);let P=1,L=1,R,M;if(t.fromKeyboard)({deltaX:R,deltaY:M}=t);else{const{screenX:B,screenY:z}=t,[D,$]=o(this,ll);[R,M]=this.screenToPageTranslation(B-D,z-$),o(this,ll)[0]=B,o(this,ll)[1]=z}if([R,M]=v(R/s,M/r),b){const B=Math.hypot(l,c);P=L=Math.max(Math.min(Math.hypot(S[0]-w[0]-R,S[1]-w[1]-M)/B,1/l,1/c),d/l,h/c)}else g?P=fn(Math.abs(S[0]-w[0]-R),d,1)/l:L=fn(Math.abs(S[1]-w[1]-M),h,1)/c;const F=oe._round(l*P),G=oe._round(c*L);C=p(...A(F,G));const U=N-C[0],ee=_-C[1];o(this,Yn)||y(this,Yn,[this.x,this.y,this.width,this.height]),this.width=F,this.height=G,this.x=U,this.y=ee,this.setDims(),this.fixAndSetPosition(),this._onResizing()},DC=function(){var e;y(this,bi,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(e=o(this,Ye))==null||e.toggle(!1),this.parent.togglePointerEvents(!1)},MC=function(e,t,s){let i=.7*(s/t)+1-.7;if(i===1)return;const a=E(this,ne,mg).call(this,this.rotation),l=(N,_)=>[a[0]*N+a[2]*_,a[1]*N+a[3]*_],[c,d]=this.parentDimensions,h=this.x,f=this.y,p=this.width,m=this.height,v=oe.MIN_SIZE/c,x=oe.MIN_SIZE/d;i=Math.max(Math.min(i,1/p,1/m),v/p,x/m);const A=oe._round(p*i),b=oe._round(m*i);if(A===p&&b===m)return;o(this,Yn)||y(this,Yn,[h,f,p,m]);const g=l(p/2,m/2),w=oe._round(h+g[0]),S=oe._round(f+g[1]),C=l(A/2,b/2);this.x=w-C[0],this.y=S-C[1],this.width=A,this.height=b,this.setDims(),this.fixAndSetPosition(),this._onResizing()},IC=function(){var e;(e=o(this,Ye))==null||e.toggle(!0),this.parent.togglePointerEvents(!0),E(this,ne,gg).call(this)},Ov=function(e){const{isMac:t}=zt.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)},FC=function(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();let s=!1;const r=new AbortController,i=this._uiManager.combinedSignal(r),a={capture:!0,passive:!1,signal:i},l=d=>{r.abort(),y(this,Ra,null),y(this,cl,!1),this._uiManager.endDragSession()||E(this,ne,Ov).call(this,d),s&&this._onStopDragging()};t&&(y(this,Sd,e.clientX),y(this,Ed,e.clientY),y(this,Ra,e.pointerId),y(this,Wf,e.pointerType),window.addEventListener("pointermove",d=>{s||(s=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:h,clientY:f,pointerId:p}=d;if(p!==o(this,Ra)){st(d);return}const[m,v]=this.screenToPageTranslation(h-o(this,Sd),f-o(this,Ed));y(this,Sd,h),y(this,Ed,f),this._uiManager.dragSelectedEditors(m,v)},a),window.addEventListener("touchmove",st,a),window.addEventListener("pointerdown",d=>{d.pointerType===o(this,Wf)&&(o(this,ul)||d.isPrimary)&&l(d),st(d)},a));const c=d=>{if(!o(this,Ra)||o(this,Ra)===d.pointerId){l(d);return}st(d)};window.addEventListener("pointerup",c,{signal:i}),window.addEventListener("blur",c,{signal:i})},Bv=function(){if(o(this,La)||!this.div)return;y(this,La,new AbortController);const e=this._uiManager.combinedSignal(o(this,La));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})},OC=function(e){oe._resizerKeyboardManager.exec(this,e)},BC=function(e){var t;o(this,wi)&&((t=e.relatedTarget)==null?void 0:t.parentNode)!==o(this,Gt)&&E(this,ne,kh).call(this)},UC=function(e){y(this,Gf,o(this,wi)?e:"")},Uv=function(e){if(o(this,nr))for(const t of o(this,nr))t.tabIndex=e},kh=function(){y(this,wi,!1),E(this,ne,Uv).call(this,-1),E(this,ne,gg).call(this)},k(oe,Kf),I(oe,"_l10n",null),I(oe,"_l10nResizer",null),I(oe,"_borderLineWidth",-1),I(oe,"_colorManager",new Cv),I(oe,"_zIndex",1),I(oe,"_telemetryTimeout",1e3);let We=oe;class $D extends We{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const gA=3285377520,As=4294901760,Er=65535;class zC{constructor(e){this.h1=e?e&4294967295:gA,this.h2=e?e&4294967295:gA}update(e){let t,s;if(typeof e=="string"){t=new Uint8Array(e.length*2),s=0;for(let x=0,A=e.length;x<A;x++){const b=e.charCodeAt(x);b<=255?t[s++]=b:(t[s++]=b>>>8,t[s++]=b&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),s=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const r=s>>2,i=s-r*4,a=new Uint32Array(t.buffer,0,r);let l=0,c=0,d=this.h1,h=this.h2;const f=3432918353,p=461845907,m=f&Er,v=p&Er;for(let x=0;x<r;x++)x&1?(l=a[x],l=l*f&As|l*m&Er,l=l<<15|l>>>17,l=l*p&As|l*v&Er,d^=l,d=d<<13|d>>>19,d=d*5+3864292196):(c=a[x],c=c*f&As|c*m&Er,c=c<<15|c>>>17,c=c*p&As|c*v&Er,h^=c,h=h<<13|h>>>19,h=h*5+3864292196);switch(l=0,i){case 3:l^=t[r*4+2]<<16;case 2:l^=t[r*4+1]<<8;case 1:l^=t[r*4],l=l*f&As|l*m&Er,l=l<<15|l>>>17,l=l*p&As|l*v&Er,r&1?d^=l:h^=l}this.h1=d,this.h2=h}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&As|e*36045&Er,t=t*4283543511&As|((t<<16|e>>>16)*2950163797&As)>>>16,e^=t>>>1,e=e*444984403&As|e*60499&Er,t=t*3301882366&As|((t<<16|e>>>16)*3120437893&As)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const zv=Object.freeze({map:null,hash:"",transfer:void 0});var hl,fl,ki,qt,M0,$C;class t1{constructor(){k(this,M0);k(this,hl,!1);k(this,fl,null);k(this,ki,null);k(this,qt,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const s=o(this,qt).get(e);return s===void 0?t:Object.assign(t,s)}getRawValue(e){return o(this,qt).get(e)}remove(e){const t=o(this,qt).get(e);if(t!==void 0&&(t instanceof We&&o(this,ki).delete(t.annotationElementId),o(this,qt).delete(e),o(this,qt).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const s of o(this,qt).values())if(s instanceof We)return;this.onAnnotationEditor(null)}}setValue(e,t){const s=o(this,qt).get(e);let r=!1;if(s!==void 0)for(const[i,a]of Object.entries(t))s[i]!==a&&(r=!0,s[i]=a);else r=!0,o(this,qt).set(e,t);r&&E(this,M0,$C).call(this),t instanceof We&&((o(this,ki)||y(this,ki,new Map)).set(t.annotationElementId,t),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type))}has(e){return o(this,qt).has(e)}get size(){return o(this,qt).size}resetModified(){o(this,hl)&&(y(this,hl,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new HC(this)}get serializable(){if(o(this,qt).size===0)return zv;const e=new Map,t=new zC,s=[],r=Object.create(null);let i=!1;for(const[a,l]of o(this,qt)){const c=l instanceof We?l.serialize(!1,r):l;c&&(e.set(a,c),t.update(`${a}:${JSON.stringify(c)}`),i||(i=!!c.bitmap))}if(i)for(const a of e.values())a.bitmap&&s.push(a.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:s}:zv}get editorStats(){let e=null;const t=new Map;let s=0,r=0;for(const i of o(this,qt).values()){if(!(i instanceof We)){i.popup&&(i.popup.deleted?r+=1:s+=1);continue}i.isCommentDeleted?r+=1:i.hasEditedComment&&(s+=1);const a=i.telemetryFinalData;if(!a)continue;const{type:l}=a;t.has(l)||t.set(l,Object.getPrototypeOf(i).constructor),e||(e=Object.create(null));const c=e[l]||(e[l]=new Map);for(const[d,h]of Object.entries(a)){if(d==="type")continue;let f=c.get(d);f||(f=new Map,c.set(d,f));const p=f.get(h)??0;f.set(h,p+1)}}if((r>0||s>0)&&(e||(e=Object.create(null)),e.comments={deleted:r,edited:s}),!e)return null;for(const[i,a]of t)e[i]=a.computeTelemetryFinalData(e[i]);return e}resetModifiedIds(){y(this,fl,null)}updateEditor(e,t){var r;const s=(r=o(this,ki))==null?void 0:r.get(e);return s?(s.updateFromAnnotationLayer(t),!0):!1}getEditor(e){var t;return((t=o(this,ki))==null?void 0:t.get(e))||null}get modifiedIds(){if(o(this,fl))return o(this,fl);const e=[];if(o(this,ki))for(const t of o(this,ki).values())t.serialize()&&e.push(t.annotationElementId);return y(this,fl,{ids:new Set(e),hash:e.join(",")})}[Symbol.iterator](){return o(this,qt).entries()}}hl=new WeakMap,fl=new WeakMap,ki=new WeakMap,qt=new WeakMap,M0=new WeakSet,$C=function(){o(this,hl)||(y(this,hl,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var Yf;class HC extends t1{constructor(t){super();k(this,Yf);const{map:s,hash:r,transfer:i}=t.serializable,a=structuredClone(s,i?{transfer:i}:null);y(this,Yf,{map:a,hash:r,transfer:i})}get print(){$e("Should not call PrintAnnotationStorage.print")}get serializable(){return o(this,Yf)}get modifiedIds(){return de(this,"modifiedIds",{ids:new Set,hash:""})}}Yf=new WeakMap;var Cd;class HD{constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){k(this,Cd,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),o(this,Cd).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,disableFontFace:t,_inspectFont:s}){if(!(!e||o(this,Cd).has(e.loadedName))){if(ve(!t,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:r,src:i,style:a}=e,l=new FontFace(r,i,a);this.addNativeFontFace(l);try{await l.load(),o(this,Cd).add(r),s==null||s(e)}catch{ae(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(l)}return}$e("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const s=e.createNativeFontFace();if(s){this.addNativeFontFace(s);try{await s.loaded}catch(r){throw ae(`Failed to load font '${s.family}': '${r}'.`),e.disableFontFace=!0,r}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(s=>{const r=this._queueLoadingCallback(s);this._prepareFontLoadEvent(e,r)})}}get isFontLoadingAPISupported(){var t;const e=!!((t=this._document)!=null&&t.fonts);return de(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){return de(this,"isSyncFontLoadingSupported",An||zt.platform.isFirefox)}_queueLoadingCallback(e){function t(){for(ve(!r.done,"completeRequest() cannot be called twice."),r.done=!0;s.length>0&&s[0].done;){const i=s.shift();setTimeout(i.callback,0)}}const{loadingRequests:s}=this,r={done:!1,complete:t,callback:e};return s.push(r),r}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return de(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function s(S,C){return S.charCodeAt(C)<<24|S.charCodeAt(C+1)<<16|S.charCodeAt(C+2)<<8|S.charCodeAt(C+3)&255}function r(S,C,N,_){const P=S.substring(0,C),L=S.substring(C+N);return P+_+L}let i,a;const l=this._document.createElement("canvas");l.width=1,l.height=1;const c=l.getContext("2d");let d=0;function h(S,C){if(++d>30){ae("Load test font never loaded."),C();return}if(c.font="30px "+S,c.fillText(".",0,20),c.getImageData(0,0,1,1).data[3]>0){C();return}setTimeout(h.bind(null,S,C))}const f=`lt${Date.now()}${this.loadTestFontId++}`;let p=this._loadTestFont;p=r(p,976,f.length,f);const v=16,x=1482184792;let A=s(p,v);for(i=0,a=f.length-3;i<a;i+=4)A=A-x+s(f,i)|0;i<f.length&&(A=A-x+s(f+"XXX",i)|0),p=r(p,v,4,PD(A));const b=`url(data:font/opentype;base64,${btoa(p)});`,g=`@font-face {font-family:"${f}";src:${b}}`;this.insertRule(g);const w=this._document.createElement("div");w.style.visibility="hidden",w.style.width=w.style.height="10px",w.style.position="absolute",w.style.top=w.style.left="0px";for(const S of[e.loadedName,f]){const C=this._document.createElement("span");C.textContent="Hi",C.style.fontFamily=S,w.append(C)}this._document.body.append(w),h(f,()=>{w.remove(),t.complete()})}}Cd=new WeakMap;var Re;class VD{constructor(e,t=null,s,r){k(this,Re);this.compiledGlyphs=Object.create(null),y(this,Re,e),this._inspectFont=t,s&&Object.assign(this,s),r&&(this.charProcOperatorList=r)}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const s={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(s.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,s)}return(t=this._inspectFont)==null||t.call(this,this),e}createFontFaceRule(){var s;if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${iC(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let r=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(r+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${r}src:${e}}`}return(s=this._inspectFont)==null||s.call(this,this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];const s=this.loadedName+"_path_"+t;let r;try{r=e.get(s)}catch(a){ae(`getPathGenerator - ignoring character: "${a}".`)}const i=new Path2D(r||"");return this.fontExtraProperties||e.delete(s),this.compiledGlyphs[t]=i}get black(){return o(this,Re).black}get bold(){return o(this,Re).bold}get disableFontFace(){return o(this,Re).disableFontFace??!1}get fontExtraProperties(){return o(this,Re).fontExtraProperties??!1}get isInvalidPDFjsFont(){return o(this,Re).isInvalidPDFjsFont}get isType3Font(){return o(this,Re).isType3Font}get italic(){return o(this,Re).italic}get missingFile(){return o(this,Re).missingFile}get remeasure(){return o(this,Re).remeasure}get vertical(){return o(this,Re).vertical}get ascent(){return o(this,Re).ascent}get defaultWidth(){return o(this,Re).defaultWidth}get descent(){return o(this,Re).descent}get bbox(){return o(this,Re).bbox}get fontMatrix(){return o(this,Re).fontMatrix}get fallbackName(){return o(this,Re).fallbackName}get loadedName(){return o(this,Re).loadedName}get mimetype(){return o(this,Re).mimetype}get name(){return o(this,Re).name}get data(){return o(this,Re).data}clearData(){o(this,Re).clearData()}get cssFontInfo(){return o(this,Re).cssFontInfo}get systemFontInfo(){return o(this,Re).systemFontInfo}get defaultVMetrics(){return o(this,Re).defaultVMetrics}}Re=new WeakMap;function WD(n){if(n instanceof URL)return n.href;if(typeof n=="string"){if(An)return n;const e=URL.parse(n,window.location);if(e)return e.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function GD(n){if(An&&typeof Buffer<"u"&&n instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength)return n;if(typeof n=="string")return fm(n);if(n instanceof ArrayBuffer||ArrayBuffer.isView(n)||typeof n=="object"&&!isNaN(n==null?void 0:n.length))return new Uint8Array(n);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function $m(n){if(typeof n!="string")return null;if(n.endsWith("/"))return n;throw new Error(`Invalid factory url: "${n}" must include trailing slash.`)}const $v=n=>typeof n=="object"&&Number.isInteger(n==null?void 0:n.num)&&n.num>=0&&Number.isInteger(n==null?void 0:n.gen)&&n.gen>=0,qD=n=>typeof n=="object"&&typeof(n==null?void 0:n.name)=="string",VC=DD.bind(null,$v,qD);var Ai,I0;class XD{constructor(){k(this,Ai,new Map);k(this,I0,Promise.resolve())}postMessage(e,t){const s={data:structuredClone(e,t?{transfer:t}:null)};o(this,I0).then(()=>{for(const[r]of o(this,Ai))r.call(this,s)})}addEventListener(e,t,s=null){let r=null;if((s==null?void 0:s.signal)instanceof AbortSignal){const{signal:i}=s;if(i.aborted){ae("LoopbackPort - cannot use an `aborted` signal.");return}const a=()=>this.removeEventListener(e,t);r=()=>i.removeEventListener("abort",a),i.addEventListener("abort",a)}o(this,Ai).set(t,r)}removeEventListener(e,t){const s=o(this,Ai).get(t);s==null||s(),o(this,Ai).delete(t)}terminate(){for(const[,e]of o(this,Ai))e==null||e();o(this,Ai).clear()}}Ai=new WeakMap,I0=new WeakMap;const Hm={DATA:1,ERROR:2},bt={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function yA(){}function Pn(n){if(n instanceof na||n instanceof y0||n instanceof cA||n instanceof gf||n instanceof hx)return n;switch(n instanceof Error||typeof n=="object"&&n!==null||$e('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),n.name){case"AbortException":return new na(n.message);case"InvalidPDFException":return new y0(n.message);case"PasswordException":return new cA(n.message,n.code);case"ResponseException":return new gf(n.message,n.status,n.missing);case"UnknownErrorException":return new hx(n.message,n.details)}return new hx(n.message,n.toString())}var Nd,Hs,WC,GC,qC,yg;class Ah{constructor(e,t,s){k(this,Hs);k(this,Nd,new AbortController);this.sourceName=e,this.targetName=t,this.comObj=s,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),s.addEventListener("message",E(this,Hs,WC).bind(this),{signal:o(this,Nd).signal})}on(e,t){const s=this.actionHandler;if(s[e])throw new Error(`There is already an actionName called "${e}"`);s[e]=t}send(e,t,s){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},s)}sendWithPromise(e,t,s){const r=this.callbackId++,i=Promise.withResolvers();this.callbackCapabilities[r]=i;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:r,data:t},s)}catch(a){i.reject(a)}return i.promise}sendWithStream(e,t,s,r){const i=this.streamId++,a=this.sourceName,l=this.targetName,c=this.comObj;return new ReadableStream({start:d=>{const h=Promise.withResolvers();return this.streamControllers[i]={controller:d,startCall:h,pullCall:null,cancelCall:null,isClosed:!1},c.postMessage({sourceName:a,targetName:l,action:e,streamId:i,data:t,desiredSize:d.desiredSize},r),h.promise},pull:d=>{const h=Promise.withResolvers();return this.streamControllers[i].pullCall=h,c.postMessage({sourceName:a,targetName:l,stream:bt.PULL,streamId:i,desiredSize:d.desiredSize}),h.promise},cancel:d=>{ve(d instanceof Error,"cancel must have a valid reason");const h=Promise.withResolvers();return this.streamControllers[i].cancelCall=h,this.streamControllers[i].isClosed=!0,c.postMessage({sourceName:a,targetName:l,stream:bt.CANCEL,streamId:i,reason:Pn(d)}),h.promise}},s)}destroy(){var e;(e=o(this,Nd))==null||e.abort(),y(this,Nd,null)}}Nd=new WeakMap,Hs=new WeakSet,WC=function({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){E(this,Hs,qC).call(this,e);return}if(e.callback){const s=e.callbackId,r=this.callbackCapabilities[s];if(!r)throw new Error(`Cannot resolve callback ${s}`);if(delete this.callbackCapabilities[s],e.callback===Hm.DATA)r.resolve(e.data);else if(e.callback===Hm.ERROR)r.reject(Pn(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const s=this.sourceName,r=e.sourceName,i=this.comObj;Promise.try(t,e.data).then(function(a){i.postMessage({sourceName:s,targetName:r,callback:Hm.DATA,callbackId:e.callbackId,data:a})},function(a){i.postMessage({sourceName:s,targetName:r,callback:Hm.ERROR,callbackId:e.callbackId,reason:Pn(a)})});return}if(e.streamId){E(this,Hs,GC).call(this,e);return}t(e.data)},GC=function(e){const t=e.streamId,s=this.sourceName,r=e.sourceName,i=this.comObj,a=this,l=this.actionHandler[e.action],c={enqueue(d,h=1,f){if(this.isCancelled)return;const p=this.desiredSize;this.desiredSize-=h,p>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),i.postMessage({sourceName:s,targetName:r,stream:bt.ENQUEUE,streamId:t,chunk:d},f)},close(){this.isCancelled||(this.isCancelled=!0,i.postMessage({sourceName:s,targetName:r,stream:bt.CLOSE,streamId:t}),delete a.streamSinks[t])},error(d){ve(d instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,i.postMessage({sourceName:s,targetName:r,stream:bt.ERROR,streamId:t,reason:Pn(d)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};c.sinkCapability.resolve(),c.ready=c.sinkCapability.promise,this.streamSinks[t]=c,Promise.try(l,e.data,c).then(function(){i.postMessage({sourceName:s,targetName:r,stream:bt.START_COMPLETE,streamId:t,success:!0})},function(d){i.postMessage({sourceName:s,targetName:r,stream:bt.START_COMPLETE,streamId:t,reason:Pn(d)})})},qC=function(e){const t=e.streamId,s=this.sourceName,r=e.sourceName,i=this.comObj,a=this.streamControllers[t],l=this.streamSinks[t];switch(e.stream){case bt.START_COMPLETE:e.success?a.startCall.resolve():a.startCall.reject(Pn(e.reason));break;case bt.PULL_COMPLETE:e.success?a.pullCall.resolve():a.pullCall.reject(Pn(e.reason));break;case bt.PULL:if(!l){i.postMessage({sourceName:s,targetName:r,stream:bt.PULL_COMPLETE,streamId:t,success:!0});break}l.desiredSize<=0&&e.desiredSize>0&&l.sinkCapability.resolve(),l.desiredSize=e.desiredSize,Promise.try(l.onPull||yA).then(function(){i.postMessage({sourceName:s,targetName:r,stream:bt.PULL_COMPLETE,streamId:t,success:!0})},function(d){i.postMessage({sourceName:s,targetName:r,stream:bt.PULL_COMPLETE,streamId:t,reason:Pn(d)})});break;case bt.ENQUEUE:if(ve(a,"enqueue should have stream controller"),a.isClosed)break;a.controller.enqueue(e.chunk);break;case bt.CLOSE:if(ve(a,"close should have stream controller"),a.isClosed)break;a.isClosed=!0,a.controller.close(),E(this,Hs,yg).call(this,a,t);break;case bt.ERROR:ve(a,"error should have stream controller"),a.controller.error(Pn(e.reason)),E(this,Hs,yg).call(this,a,t);break;case bt.CANCEL_COMPLETE:e.success?a.cancelCall.resolve():a.cancelCall.reject(Pn(e.reason)),E(this,Hs,yg).call(this,a,t);break;case bt.CANCEL:if(!l)break;const c=Pn(e.reason);Promise.try(l.onCancel||yA,c).then(function(){i.postMessage({sourceName:s,targetName:r,stream:bt.CANCEL_COMPLETE,streamId:t,success:!0})},function(d){i.postMessage({sourceName:s,targetName:r,stream:bt.CANCEL_COMPLETE,streamId:t,reason:Pn(d)})}),l.sinkCapability.reject(c),l.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}},yg=async function(e,t){var s,r,i;await Promise.allSettled([(s=e.startCall)==null?void 0:s.promise,(r=e.pullCall)==null?void 0:r.promise,(i=e.cancelCall)==null?void 0:i.promise]),delete this.streamControllers[t]};var Qf;class XC{constructor({enableHWA:e=!1}){k(this,Qf,!1);y(this,Qf,e)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const s=this._createCanvas(e,t);return{canvas:s,context:s.getContext("2d",{willReadFrequently:!o(this,Qf)})}}reset(e,t,s){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||s<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=s}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){$e("Abstract method `_createCanvas` called.")}}Qf=new WeakMap;class KD extends XC{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const s=this._document.createElement("canvas");return s.width=e,s.height=t,s}}class KC{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(s=>({cMapData:s,isCompressed:this.isCompressed})).catch(s=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){$e("Abstract method `_fetch` called.")}}class xA extends KC{async _fetch(e){const t=await Ju(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):fm(t)}}class YC{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,s,r,i){return"none"}destroy(e=!1){}}var pl,_d,Si,Ei,cn,ml,gl,q,an,Sh,_c,xg,jc,QC,Hv,Pc,Eh,Ch,Vv,Nh;class YD extends YC{constructor({docId:t,ownerDocument:s=globalThis.document}){super();k(this,q);k(this,pl);k(this,_d);k(this,Si);k(this,Ei);k(this,cn);k(this,ml);k(this,gl,0);y(this,Ei,t),y(this,cn,s)}addFilter(t){if(!t)return"none";let s=o(this,q,an).get(t);if(s)return s;const[r,i,a]=E(this,q,xg).call(this,t),l=t.length===1?r:`${r}${i}${a}`;if(s=o(this,q,an).get(l),s)return o(this,q,an).set(t,s),s;const c=`g_${o(this,Ei)}_transfer_map_${Et(this,gl)._++}`,d=E(this,q,jc).call(this,c);o(this,q,an).set(t,d),o(this,q,an).set(l,d);const h=E(this,q,Pc).call(this,c);return E(this,q,Ch).call(this,r,i,a,h),d}addHCMFilter(t,s){var v;const r=`${t}-${s}`,i="base";let a=o(this,q,Sh).get(i);if((a==null?void 0:a.key)===r||(a?((v=a.filter)==null||v.remove(),a.key=r,a.url="none",a.filter=null):(a={key:r,url:"none",filter:null},o(this,q,Sh).set(i,a)),!t||!s))return a.url;const l=E(this,q,Nh).call(this,t);t=K.makeHexColor(...l);const c=E(this,q,Nh).call(this,s);if(s=K.makeHexColor(...c),o(this,q,_c).style.color="",t==="#000000"&&s==="#ffffff"||t===s)return a.url;const d=new Array(256);for(let x=0;x<=255;x++){const A=x/255;d[x]=A<=.03928?A/12.92:((A+.055)/1.055)**2.4}const h=d.join(","),f=`g_${o(this,Ei)}_hcm_filter`,p=a.filter=E(this,q,Pc).call(this,f);E(this,q,Ch).call(this,h,h,h,p),E(this,q,Hv).call(this,p);const m=(x,A)=>{const b=l[x]/255,g=c[x]/255,w=new Array(A+1);for(let S=0;S<=A;S++)w[S]=b+S/A*(g-b);return w.join(",")};return E(this,q,Ch).call(this,m(0,5),m(1,5),m(2,5),p),a.url=E(this,q,jc).call(this,f),a.url}addAlphaFilter(t){let s=o(this,q,an).get(t);if(s)return s;const[r]=E(this,q,xg).call(this,[t]),i=`alpha_${r}`;if(s=o(this,q,an).get(i),s)return o(this,q,an).set(t,s),s;const a=`g_${o(this,Ei)}_alpha_map_${Et(this,gl)._++}`,l=E(this,q,jc).call(this,a);o(this,q,an).set(t,l),o(this,q,an).set(i,l);const c=E(this,q,Pc).call(this,a);return E(this,q,Vv).call(this,r,c),l}addLuminosityFilter(t){let s=o(this,q,an).get(t||"luminosity");if(s)return s;let r,i;if(t?([r]=E(this,q,xg).call(this,[t]),i=`luminosity_${r}`):i="luminosity",s=o(this,q,an).get(i),s)return o(this,q,an).set(t,s),s;const a=`g_${o(this,Ei)}_luminosity_map_${Et(this,gl)._++}`,l=E(this,q,jc).call(this,a);o(this,q,an).set(t,l),o(this,q,an).set(i,l);const c=E(this,q,Pc).call(this,a);return E(this,q,QC).call(this,c),t&&E(this,q,Vv).call(this,r,c),l}addHighlightHCMFilter(t,s,r,i,a){var g;const l=`${s}-${r}-${i}-${a}`;let c=o(this,q,Sh).get(t);if((c==null?void 0:c.key)===l||(c?((g=c.filter)==null||g.remove(),c.key=l,c.url="none",c.filter=null):(c={key:l,url:"none",filter:null},o(this,q,Sh).set(t,c)),!s||!r))return c.url;const[d,h]=[s,r].map(E(this,q,Nh).bind(this));let f=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),p=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),[m,v]=[i,a].map(E(this,q,Nh).bind(this));p<f&&([f,p,m,v]=[p,f,v,m]),o(this,q,_c).style.color="";const x=(w,S,C)=>{const N=new Array(256),_=(p-f)/C,P=w/255,L=(S-w)/(255*C);let R=0;for(let M=0;M<=C;M++){const F=Math.round(f+M*_),G=P+M*L;for(let U=R;U<=F;U++)N[U]=G;R=F+1}for(let M=R;M<256;M++)N[M]=N[R-1];return N.join(",")},A=`g_${o(this,Ei)}_hcm_${t}_filter`,b=c.filter=E(this,q,Pc).call(this,A);return E(this,q,Hv).call(this,b),E(this,q,Ch).call(this,x(m[0],v[0],5),x(m[1],v[1],5),x(m[2],v[2],5),b),c.url=E(this,q,jc).call(this,A),c.url}destroy(t=!1){var s,r,i,a;t&&((s=o(this,ml))!=null&&s.size)||((r=o(this,Si))==null||r.parentNode.parentNode.remove(),y(this,Si,null),(i=o(this,_d))==null||i.clear(),y(this,_d,null),(a=o(this,ml))==null||a.clear(),y(this,ml,null),y(this,gl,0))}}pl=new WeakMap,_d=new WeakMap,Si=new WeakMap,Ei=new WeakMap,cn=new WeakMap,ml=new WeakMap,gl=new WeakMap,q=new WeakSet,an=function(){return o(this,_d)||y(this,_d,new Map)},Sh=function(){return o(this,ml)||y(this,ml,new Map)},_c=function(){if(!o(this,Si)){const t=o(this,cn).createElement("div"),{style:s}=t;s.visibility="hidden",s.contain="strict",s.width=s.height=0,s.position="absolute",s.top=s.left=0,s.zIndex=-1;const r=o(this,cn).createElementNS(ri,"svg");r.setAttribute("width",0),r.setAttribute("height",0),y(this,Si,o(this,cn).createElementNS(ri,"defs")),t.append(r),r.append(o(this,Si)),o(this,cn).body.append(t)}return o(this,Si)},xg=function(t){if(t.length===1){const d=t[0],h=new Array(256);for(let p=0;p<256;p++)h[p]=d[p]/255;const f=h.join(",");return[f,f,f]}const[s,r,i]=t,a=new Array(256),l=new Array(256),c=new Array(256);for(let d=0;d<256;d++)a[d]=s[d]/255,l[d]=r[d]/255,c[d]=i[d]/255;return[a.join(","),l.join(","),c.join(",")]},jc=function(t){if(o(this,pl)===void 0){y(this,pl,"");const s=o(this,cn).URL;s!==o(this,cn).baseURI&&(mm(s)?ae('#createUrl: ignore "data:"-URL for performance reasons.'):y(this,pl,Yw(s,"")))}return`url(${o(this,pl)}#${t})`},QC=function(t){const s=o(this,cn).createElementNS(ri,"feColorMatrix");s.setAttribute("type","matrix"),s.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(s)},Hv=function(t){const s=o(this,cn).createElementNS(ri,"feColorMatrix");s.setAttribute("type","matrix"),s.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(s)},Pc=function(t){const s=o(this,cn).createElementNS(ri,"filter");return s.setAttribute("color-interpolation-filters","sRGB"),s.setAttribute("id",t),o(this,q,_c).append(s),s},Eh=function(t,s,r){const i=o(this,cn).createElementNS(ri,s);i.setAttribute("type","discrete"),i.setAttribute("tableValues",r),t.append(i)},Ch=function(t,s,r,i){const a=o(this,cn).createElementNS(ri,"feComponentTransfer");i.append(a),E(this,q,Eh).call(this,a,"feFuncR",t),E(this,q,Eh).call(this,a,"feFuncG",s),E(this,q,Eh).call(this,a,"feFuncB",r)},Vv=function(t,s){const r=o(this,cn).createElementNS(ri,"feComponentTransfer");s.append(r),E(this,q,Eh).call(this,r,"feFuncA",t)},Nh=function(t){return o(this,q,_c).style.color=t,Zu(getComputedStyle(o(this,q,_c)).getPropertyValue("color"))};class JC{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(s=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){$e("Abstract method `_fetch` called.")}}class vA extends JC{async _fetch(e){const t=await Ju(e,"arraybuffer");return new Uint8Array(t)}}class ZC{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!e)throw new Error("Wasm filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(s=>{throw new Error(`Unable to load wasm data at: ${t}`)})}async _fetch(e){$e("Abstract method `_fetch` called.")}}class bA extends ZC{async _fetch(e){const t=await Ju(e,"arraybuffer");return new Uint8Array(t)}}An&&ae("Please use the `legacy` build in Node.js environments.");async function n1(n){const t=await process.getBuiltinModule("fs").promises.readFile(n);return new Uint8Array(t)}class QD extends YC{}class JD extends XC{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,t)}}class ZD extends KC{async _fetch(e){return n1(e)}}class eM extends JC{async _fetch(e){return n1(e)}}class tM extends ZC{async _fetch(e){return n1(e)}}const Ec="__forcedDependency",{floor:wA,ceil:kA}=Math;function Vm(n,e,t,s,r,i){n[e*4+0]=Math.min(n[e*4+0],t),n[e*4+1]=Math.min(n[e*4+1],s),n[e*4+2]=Math.max(n[e*4+2],r),n[e*4+3]=Math.max(n[e*4+3],i)}const Wv=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];var jd,Da;class nM{constructor(e,t){k(this,jd);k(this,Da);y(this,jd,e),y(this,Da,t)}get length(){return o(this,jd).length}isEmpty(e){return o(this,jd)[e]===Wv}minX(e){return o(this,Da)[e*4+0]/256}minY(e){return o(this,Da)[e*4+1]/256}maxX(e){return(o(this,Da)[e*4+2]+1)/256}maxY(e){return(o(this,Da)[e*4+3]+1)/256}}jd=new WeakMap,Da=new WeakMap;const Wm=(n,e)=>{if(!n)return;let t=n.get(e);return t||(t={dependencies:new Set,isRenderingOperation:!1},n.set(e,t)),t};var Ln,Dn,yl,sr,xl,Ci,je,Le,Ni,Mn,Jf,Pd,vl,bl,_i,dn,Or,Zf,Gv;class sM{constructor(e,t,s=!1){k(this,Zf);k(this,Ln,{__proto__:null});k(this,Dn,{__proto__:null,transform:[],moveText:[],sameLineText:[],[Ec]:[]});k(this,yl,new Map);k(this,sr,[]);k(this,xl,[]);k(this,Ci,[[1,0,0,1,0,0]]);k(this,je,[-1/0,-1/0,1/0,1/0]);k(this,Le,new Float64Array([1/0,1/0,-1/0,-1/0]));k(this,Ni,-1);k(this,Mn,new Set);k(this,Jf,new Map);k(this,Pd,new Map);k(this,vl);k(this,bl);k(this,_i);k(this,dn);k(this,Or);y(this,vl,e.width),y(this,bl,e.height),E(this,Zf,Gv).call(this,t),s&&y(this,Or,new Map)}growOperationsCount(e){e>=o(this,dn).length&&E(this,Zf,Gv).call(this,e,o(this,dn))}save(e){return y(this,Ln,{__proto__:o(this,Ln)}),y(this,Dn,{__proto__:o(this,Dn),transform:{__proto__:o(this,Dn).transform},moveText:{__proto__:o(this,Dn).moveText},sameLineText:{__proto__:o(this,Dn).sameLineText},[Ec]:{__proto__:o(this,Dn)[Ec]}}),y(this,je,{__proto__:o(this,je)}),o(this,sr).push(e),this}restore(e){var r;const t=Object.getPrototypeOf(o(this,Ln));if(t===null)return this;y(this,Ln,t),y(this,Dn,Object.getPrototypeOf(o(this,Dn))),y(this,je,Object.getPrototypeOf(o(this,je)));const s=o(this,sr).pop();return s!==void 0&&((r=Wm(o(this,Or),e))==null||r.dependencies.add(s),o(this,dn)[e]=o(this,dn)[s]),this}recordOpenMarker(e){return o(this,sr).push(e),this}getOpenMarker(){return o(this,sr).length===0?null:o(this,sr).at(-1)}recordCloseMarker(e){var s;const t=o(this,sr).pop();return t!==void 0&&((s=Wm(o(this,Or),e))==null||s.dependencies.add(t),o(this,dn)[e]=o(this,dn)[t]),this}beginMarkedContent(e){return o(this,xl).push(e),this}endMarkedContent(e){var s;const t=o(this,xl).pop();return t!==void 0&&((s=Wm(o(this,Or),e))==null||s.dependencies.add(t),o(this,dn)[e]=o(this,dn)[t]),this}pushBaseTransform(e){return o(this,Ci).push(K.multiplyByDOMMatrix(o(this,Ci).at(-1),e.getTransform())),this}popBaseTransform(){return o(this,Ci).length>1&&o(this,Ci).pop(),this}recordSimpleData(e,t){return o(this,Ln)[e]=t,this}recordIncrementalData(e,t){return o(this,Dn)[e].push(t),this}resetIncrementalData(e,t){return o(this,Dn)[e].length=0,this}recordNamedData(e,t){return o(this,yl).set(e,t),this}recordSimpleDataFromNamed(e,t,s){o(this,Ln)[e]=o(this,yl).get(t)??s}recordFutureForcedDependency(e,t){return this.recordIncrementalData(Ec,t),this}inheritSimpleDataAsFutureForcedDependencies(e){for(const t of e)t in o(this,Ln)&&this.recordFutureForcedDependency(t,o(this,Ln)[t]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const e of o(this,Mn))this.recordFutureForcedDependency(Ec,e);return this}resetBBox(e){return o(this,Ni)!==e&&(y(this,Ni,e),o(this,Le)[0]=1/0,o(this,Le)[1]=1/0,o(this,Le)[2]=-1/0,o(this,Le)[3]=-1/0),this}recordClipBox(e,t,s,r,i,a){const l=K.multiplyByDOMMatrix(o(this,Ci).at(-1),t.getTransform()),c=[1/0,1/0,-1/0,-1/0];K.axialAlignedBoundingBox([s,i,r,a],l,c);const d=K.intersect(o(this,je),c);return d?(o(this,je)[0]=d[0],o(this,je)[1]=d[1],o(this,je)[2]=d[2],o(this,je)[3]=d[3]):(o(this,je)[0]=o(this,je)[1]=1/0,o(this,je)[2]=o(this,je)[3]=-1/0),this}recordBBox(e,t,s,r,i,a){const l=o(this,je);if(l[0]===1/0)return this;const c=K.multiplyByDOMMatrix(o(this,Ci).at(-1),t.getTransform());if(l[0]===-1/0)return K.axialAlignedBoundingBox([s,i,r,a],c,o(this,Le)),this;const d=[1/0,1/0,-1/0,-1/0];return K.axialAlignedBoundingBox([s,i,r,a],c,d),o(this,Le)[0]=Math.min(o(this,Le)[0],Math.max(d[0],l[0])),o(this,Le)[1]=Math.min(o(this,Le)[1],Math.max(d[1],l[1])),o(this,Le)[2]=Math.max(o(this,Le)[2],Math.min(d[2],l[2])),o(this,Le)[3]=Math.max(o(this,Le)[3],Math.min(d[3],l[3])),this}recordCharacterBBox(e,t,s,r=1,i=0,a=0,l){const c=s.bbox;let d,h;if(c&&(d=c[2]!==c[0]&&c[3]!==c[1]&&o(this,Pd).get(s),d!==!1&&(h=[0,0,0,0],K.axialAlignedBoundingBox(c,s.fontMatrix,h),(r!==1||i!==0||a!==0)&&K.scaleMinMax([r,0,0,-r,i,a],h),d)))return this.recordBBox(e,t,h[0],h[2],h[1],h[3]);if(!l)return this.recordFullPageBBox(e);const f=l();return c&&h&&d===void 0&&(d=h[0]<=i-f.actualBoundingBoxLeft&&h[2]>=i+f.actualBoundingBoxRight&&h[1]<=a-f.actualBoundingBoxAscent&&h[3]>=a+f.actualBoundingBoxDescent,o(this,Pd).set(s,d),d)?this.recordBBox(e,t,h[0],h[2],h[1],h[3]):this.recordBBox(e,t,i-f.actualBoundingBoxLeft,i+f.actualBoundingBoxRight,a-f.actualBoundingBoxAscent,a+f.actualBoundingBoxDescent)}recordFullPageBBox(e){return o(this,Le)[0]=Math.max(0,o(this,je)[0]),o(this,Le)[1]=Math.max(0,o(this,je)[1]),o(this,Le)[2]=Math.min(o(this,vl),o(this,je)[2]),o(this,Le)[3]=Math.min(o(this,bl),o(this,je)[3]),this}getSimpleIndex(e){return o(this,Ln)[e]}recordDependencies(e,t){const s=o(this,Mn),r=o(this,Ln),i=o(this,Dn);for(const a of t)a in o(this,Ln)?s.add(r[a]):a in i&&i[a].forEach(s.add,s);return this}recordNamedDependency(e,t){return o(this,yl).has(t)&&o(this,Mn).add(o(this,yl).get(t)),this}recordOperation(e,t=!1){if(this.recordDependencies(e,[Ec]),o(this,Or)){const s=Wm(o(this,Or),e),{dependencies:r}=s;o(this,Mn).forEach(r.add,r),o(this,sr).forEach(r.add,r),o(this,xl).forEach(r.add,r),r.delete(e),s.isRenderingOperation=!0}if(o(this,Ni)===e){const s=wA(o(this,Le)[0]*256/o(this,vl)),r=wA(o(this,Le)[1]*256/o(this,bl)),i=kA(o(this,Le)[2]*256/o(this,vl)),a=kA(o(this,Le)[3]*256/o(this,bl));Vm(o(this,_i),e,s,r,i,a);for(const l of o(this,Mn))l!==e&&Vm(o(this,_i),l,s,r,i,a);for(const l of o(this,sr))l!==e&&Vm(o(this,_i),l,s,r,i,a);for(const l of o(this,xl))l!==e&&Vm(o(this,_i),l,s,r,i,a);t||(o(this,Mn).clear(),y(this,Ni,-1))}return this}recordShowTextOperation(e,t=!1){const s=Array.from(o(this,Mn));this.recordOperation(e,t),this.recordIncrementalData("sameLineText",e);for(const r of s)this.recordIncrementalData("sameLineText",r);return this}bboxToClipBoxDropOperation(e,t=!1){return o(this,Ni)===e&&(y(this,Ni,-1),o(this,je)[0]=Math.max(o(this,je)[0],o(this,Le)[0]),o(this,je)[1]=Math.max(o(this,je)[1],o(this,Le)[1]),o(this,je)[2]=Math.min(o(this,je)[2],o(this,Le)[2]),o(this,je)[3]=Math.min(o(this,je)[3],o(this,Le)[3]),t||o(this,Mn).clear()),this}_takePendingDependencies(){const e=o(this,Mn);return y(this,Mn,new Set),e}_extractOperation(e){const t=o(this,Jf).get(e);return o(this,Jf).delete(e),t}_pushPendingDependencies(e){for(const t of e)o(this,Mn).add(t)}take(){return o(this,Pd).clear(),new nM(o(this,dn),o(this,_i))}takeDebugMetadata(){return o(this,Or)}}Ln=new WeakMap,Dn=new WeakMap,yl=new WeakMap,sr=new WeakMap,xl=new WeakMap,Ci=new WeakMap,je=new WeakMap,Le=new WeakMap,Ni=new WeakMap,Mn=new WeakMap,Jf=new WeakMap,Pd=new WeakMap,vl=new WeakMap,bl=new WeakMap,_i=new WeakMap,dn=new WeakMap,Or=new WeakMap,Zf=new WeakSet,Gv=function(e,t){const s=new ArrayBuffer(e*4);y(this,_i,new Uint8ClampedArray(s)),y(this,dn,new Uint32Array(s)),t&&t.length>0?(o(this,dn).set(t),o(this,dn).fill(Wv,t.length)):o(this,dn).fill(Wv)};var Be,ct,rr,Td,Rd;const p1=class p1{constructor(e,t,s){k(this,Be);k(this,ct);k(this,rr);k(this,Td,0);k(this,Rd,0);if(e instanceof p1&&o(e,rr)===!!s)return e;y(this,Be,e),y(this,ct,t),y(this,rr,!!s)}growOperationsCount(){throw new Error("Unreachable")}save(e){return Et(this,Rd)._++,o(this,Be).save(o(this,ct)),this}restore(e){return o(this,Rd)>0&&(o(this,Be).restore(o(this,ct)),Et(this,Rd)._--),this}recordOpenMarker(e){return Et(this,Td)._++,this}getOpenMarker(){return o(this,Td)>0?o(this,ct):o(this,Be).getOpenMarker()}recordCloseMarker(e){return Et(this,Td)._--,this}beginMarkedContent(e){return this}endMarkedContent(e){return this}pushBaseTransform(e){return o(this,Be).pushBaseTransform(e),this}popBaseTransform(){return o(this,Be).popBaseTransform(),this}recordSimpleData(e,t){return o(this,Be).recordSimpleData(e,o(this,ct)),this}recordIncrementalData(e,t){return o(this,Be).recordIncrementalData(e,o(this,ct)),this}resetIncrementalData(e,t){return o(this,Be).resetIncrementalData(e,o(this,ct)),this}recordNamedData(e,t){return this}recordSimpleDataFromNamed(e,t,s){return o(this,Be).recordSimpleDataFromNamed(e,t,o(this,ct)),this}recordFutureForcedDependency(e,t){return o(this,Be).recordFutureForcedDependency(e,o(this,ct)),this}inheritSimpleDataAsFutureForcedDependencies(e){return o(this,Be).inheritSimpleDataAsFutureForcedDependencies(e),this}inheritPendingDependenciesAsFutureForcedDependencies(){return o(this,Be).inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(e){return o(this,rr)||o(this,Be).resetBBox(o(this,ct)),this}recordClipBox(e,t,s,r,i,a){return o(this,rr)||o(this,Be).recordClipBox(o(this,ct),t,s,r,i,a),this}recordBBox(e,t,s,r,i,a){return o(this,rr)||o(this,Be).recordBBox(o(this,ct),t,s,r,i,a),this}recordCharacterBBox(e,t,s,r,i,a,l){return o(this,rr)||o(this,Be).recordCharacterBBox(o(this,ct),t,s,r,i,a,l),this}recordFullPageBBox(e){return o(this,rr)||o(this,Be).recordFullPageBBox(o(this,ct)),this}getSimpleIndex(e){return o(this,Be).getSimpleIndex(e)}recordDependencies(e,t){return o(this,Be).recordDependencies(o(this,ct),t),this}recordNamedDependency(e,t){return o(this,Be).recordNamedDependency(o(this,ct),t),this}recordOperation(e){return o(this,Be).recordOperation(o(this,ct),!0),this}recordShowTextOperation(e){return o(this,Be).recordShowTextOperation(o(this,ct),!0),this}bboxToClipBoxDropOperation(e){return o(this,rr)||o(this,Be).bboxToClipBoxDropOperation(o(this,ct),!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}};Be=new WeakMap,ct=new WeakMap,rr=new WeakMap,Td=new WeakMap,Rd=new WeakMap;let b0=p1;const Ss={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},Qt={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function qv(n,e){if(!e)return;const t=e[2]-e[0],s=e[3]-e[1],r=new Path2D;r.rect(e[0],e[1],t,s),n.clip(r)}class s1{isModifyingCurrentTransform(){return!1}getPattern(){$e("Abstract method `getPattern` called.")}}class rM extends s1{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const s of this._colorStops)t.addColorStop(s[0],s[1]);return t}getPattern(e,t,s,r){let i;if(r===Qt.STROKE||r===Qt.FILL){const a=t.current.getClippedPathBoundingBox(r,tt(e))||[0,0,0,0],l=Math.ceil(a[2]-a[0])||1,c=Math.ceil(a[3]-a[1])||1,d=t.cachedCanvases.getCanvas("pattern",l,c),h=d.context;h.clearRect(0,0,h.canvas.width,h.canvas.height),h.beginPath(),h.rect(0,0,h.canvas.width,h.canvas.height),h.translate(-a[0],-a[1]),s=K.transform(s,[1,0,0,1,a[0],a[1]]),h.transform(...t.baseTransform),this.matrix&&h.transform(...this.matrix),qv(h,this._bbox),h.fillStyle=this._createGradient(h),h.fill(),i=e.createPattern(d.canvas,"no-repeat");const f=new DOMMatrix(s);i.setTransform(f)}else qv(e,this._bbox),i=this._createGradient(e);return i}}function mx(n,e,t,s,r,i,a,l){const c=e.coords,d=e.colors,h=n.data,f=n.width*4;let p;c[t+1]>c[s+1]&&(p=t,t=s,s=p,p=i,i=a,a=p),c[s+1]>c[r+1]&&(p=s,s=r,r=p,p=a,a=l,l=p),c[t+1]>c[s+1]&&(p=t,t=s,s=p,p=i,i=a,a=p);const m=(c[t]+e.offsetX)*e.scaleX,v=(c[t+1]+e.offsetY)*e.scaleY,x=(c[s]+e.offsetX)*e.scaleX,A=(c[s+1]+e.offsetY)*e.scaleY,b=(c[r]+e.offsetX)*e.scaleX,g=(c[r+1]+e.offsetY)*e.scaleY;if(v>=g)return;const w=d[i],S=d[i+1],C=d[i+2],N=d[a],_=d[a+1],P=d[a+2],L=d[l],R=d[l+1],M=d[l+2],F=Math.round(v),G=Math.round(g);let U,ee,B,z,D,$,V,J;for(let W=F;W<=G;W++){if(W<A){const fe=W<v?0:(v-W)/(v-A);U=m-(m-x)*fe,ee=w-(w-N)*fe,B=S-(S-_)*fe,z=C-(C-P)*fe}else{let fe;W>g?fe=1:A===g?fe=0:fe=(A-W)/(A-g),U=x-(x-b)*fe,ee=N-(N-L)*fe,B=_-(_-R)*fe,z=P-(P-M)*fe}let te;W<v?te=0:W>g?te=1:te=(v-W)/(v-g),D=m-(m-b)*te,$=w-(w-L)*te,V=S-(S-R)*te,J=C-(C-M)*te;const re=Math.round(Math.min(U,D)),pe=Math.round(Math.max(U,D));let Ee=f*W+re*4;for(let fe=re;fe<=pe;fe++)te=(U-fe)/(U-D),te<0?te=0:te>1&&(te=1),h[Ee++]=ee-(ee-$)*te|0,h[Ee++]=B-(B-V)*te|0,h[Ee++]=z-(z-J)*te|0,h[Ee++]=255}}function iM(n,e,t){const s=e.coords,r=e.colors;let i,a;switch(e.type){case"lattice":const l=e.verticesPerRow,c=Math.floor(s.length/l)-1,d=l-1;for(i=0;i<c;i++){let h=i*l;for(let f=0;f<d;f++,h++)mx(n,t,s[h],s[h+1],s[h+l],r[h],r[h+1],r[h+l]),mx(n,t,s[h+l+1],s[h+1],s[h+l],r[h+l+1],r[h+1],r[h+l])}break;case"triangles":for(i=0,a=s.length;i<a;i+=3)mx(n,t,s[i],s[i+1],s[i+2],r[i],r[i+1],r[i+2]);break;default:throw new Error("illegal figure")}}class aM extends s1{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[6],this._background=e[7],this.matrix=null}_createMeshCanvas(e,t,s){const l=Math.floor(this._bounds[0]),c=Math.floor(this._bounds[1]),d=Math.ceil(this._bounds[2])-l,h=Math.ceil(this._bounds[3])-c,f=Math.min(Math.ceil(Math.abs(d*e[0]*1.1)),3e3),p=Math.min(Math.ceil(Math.abs(h*e[1]*1.1)),3e3),m=d/f,v=h/p,x={coords:this._coords,colors:this._colors,offsetX:-l,offsetY:-c,scaleX:1/m,scaleY:1/v},A=f+2*2,b=p+2*2,g=s.getCanvas("mesh",A,b),w=g.context,S=w.createImageData(f,p);if(t){const N=S.data;for(let _=0,P=N.length;_<P;_+=4)N[_]=t[0],N[_+1]=t[1],N[_+2]=t[2],N[_+3]=255}for(const N of this._figures)iM(S,N,x);return w.putImageData(S,2,2),{canvas:g.canvas,offsetX:l-2*m,offsetY:c-2*v,scaleX:m,scaleY:v}}isModifyingCurrentTransform(){return!0}getPattern(e,t,s,r){qv(e,this._bbox);const i=new Float32Array(2);if(r===Qt.SHADING)K.singularValueDecompose2dScale(tt(e),i);else if(this.matrix){K.singularValueDecompose2dScale(this.matrix,i);const[l,c]=i;K.singularValueDecompose2dScale(t.baseTransform,i),i[0]*=l,i[1]*=c}else K.singularValueDecompose2dScale(t.baseTransform,i);const a=this._createMeshCanvas(i,r===Qt.SHADING?null:this._background,t.cachedCanvases);return r!==Qt.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(a.offsetX,a.offsetY),e.scale(a.scaleX,a.scaleY),e.createPattern(a.canvas,"no-repeat")}}class oM extends s1{getPattern(){return"hotpink"}}function lM(n){switch(n[0]){case"RadialAxial":return new rM(n);case"Mesh":return new aM(n);case"Dummy":return new oM}throw new Error(`Unknown IR type: ${n[0]}`)}const AA={COLORED:1,UNCOLORED:2},F0=class F0{constructor(e,t,s,r){this.color=e[1],this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.ctx=t,this.canvasGraphicsFactory=s,this.baseTransform=r}createPatternCanvas(e,t){var $,V;const{bbox:s,operatorList:r,paintType:i,tilingType:a,color:l,canvasGraphicsFactory:c}=this;let{xstep:d,ystep:h}=this;d=Math.abs(d),h=Math.abs(h),vy("TilingType: "+a);const f=s[0],p=s[1],m=s[2],v=s[3],x=m-f,A=v-p,b=new Float32Array(2);K.singularValueDecompose2dScale(this.matrix,b);const[g,w]=b;K.singularValueDecompose2dScale(this.baseTransform,b);const S=g*b[0],C=w*b[1];let N=x,_=A,P=!1,L=!1;const R=Math.ceil(d*S),M=Math.ceil(h*C),F=Math.ceil(x*S),G=Math.ceil(A*C);R>=F?N=d:P=!0,M>=G?_=h:L=!0;const U=this.getSizeAndScale(N,this.ctx.canvas.width,S),ee=this.getSizeAndScale(_,this.ctx.canvas.height,C),B=e.cachedCanvases.getCanvas("pattern",U.size,ee.size),z=B.context,D=c.createCanvasGraphics(z,t);if(D.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(D,i,l),z.translate(-U.scale*f,-ee.scale*p),D.transform(0,U.scale,0,0,ee.scale,0,0),z.save(),($=D.dependencyTracker)==null||$.save(),this.clipBbox(D,f,p,m,v),D.baseTransform=tt(D.ctx),D.executeOperatorList(r),D.endDrawing(),(V=D.dependencyTracker)==null||V.restore(),z.restore(),P||L){const J=B.canvas;P&&(N=d),L&&(_=h);const W=this.getSizeAndScale(N,this.ctx.canvas.width,S),te=this.getSizeAndScale(_,this.ctx.canvas.height,C),re=W.size,pe=te.size,Ee=e.cachedCanvases.getCanvas("pattern-workaround",re,pe),fe=Ee.context,Gs=P?Math.floor(x/d):0,qs=L?Math.floor(A/h):0;for(let $t=0;$t<=Gs;$t++)for(let Ae=0;Ae<=qs;Ae++)fe.drawImage(J,re*$t,pe*Ae,re,pe,0,0,re,pe);return{canvas:Ee.canvas,scaleX:W.scale,scaleY:te.scale,offsetX:f,offsetY:p}}return{canvas:B.canvas,scaleX:U.scale,scaleY:ee.scale,offsetX:f,offsetY:p}}getSizeAndScale(e,t,s){const r=Math.max(F0.MAX_PATTERN_SIZE,t);let i=Math.ceil(e*s);return i>=r?i=r:s=i/e,{scale:s,size:i}}clipBbox(e,t,s,r,i){const a=r-t,l=i-s;e.ctx.rect(t,s,a,l),K.axialAlignedBoundingBox([t,s,r,i],tt(e.ctx),e.current.minMax),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,s){const r=e.ctx,i=e.current;switch(t){case AA.COLORED:const{fillStyle:a,strokeStyle:l}=this.ctx;r.fillStyle=i.fillColor=a,r.strokeStyle=i.strokeColor=l;break;case AA.UNCOLORED:r.fillStyle=r.strokeStyle=s,i.fillColor=i.strokeColor=s;break;default:throw new jD(`Unsupported paint type: ${t}`)}}isModifyingCurrentTransform(){return!1}getPattern(e,t,s,r,i){let a=s;r!==Qt.SHADING&&(a=K.transform(a,t.baseTransform),this.matrix&&(a=K.transform(a,this.matrix)));const l=this.createPatternCanvas(t,i);let c=new DOMMatrix(a);c=c.translate(l.offsetX,l.offsetY),c=c.scale(1/l.scaleX,1/l.scaleY);const d=e.createPattern(l.canvas,"repeat");return d.setTransform(c),d}};I(F0,"MAX_PATTERN_SIZE",3e3);let Xv=F0;function cM({src:n,srcPos:e=0,dest:t,width:s,height:r,nonBlackColor:i=4294967295,inverseDecode:a=!1}){const l=zt.isLittleEndian?4278190080:255,[c,d]=a?[i,l]:[l,i],h=s>>3,f=s&7,p=n.length;t=new Uint32Array(t.buffer);let m=0;for(let v=0;v<r;v++){for(const A=e+h;e<A;e++){const b=e<p?n[e]:255;t[m++]=b&128?d:c,t[m++]=b&64?d:c,t[m++]=b&32?d:c,t[m++]=b&16?d:c,t[m++]=b&8?d:c,t[m++]=b&4?d:c,t[m++]=b&2?d:c,t[m++]=b&1?d:c}if(f===0)continue;const x=e<p?n[e++]:255;for(let A=0;A<f;A++)t[m++]=x&1<<7-A?d:c}return{srcPos:e,destPos:m}}const SA=16,EA=100,dM=15,CA=10,Bn=16,gx=new DOMMatrix,fs=new Float32Array(2),Gc=new Float32Array([1/0,1/0,-1/0,-1/0]);function uM(n,e){if(n._removeMirroring)throw new Error("Context is already forwarding operations.");n.__originalSave=n.save,n.__originalRestore=n.restore,n.__originalRotate=n.rotate,n.__originalScale=n.scale,n.__originalTranslate=n.translate,n.__originalTransform=n.transform,n.__originalSetTransform=n.setTransform,n.__originalResetTransform=n.resetTransform,n.__originalClip=n.clip,n.__originalMoveTo=n.moveTo,n.__originalLineTo=n.lineTo,n.__originalBezierCurveTo=n.bezierCurveTo,n.__originalRect=n.rect,n.__originalClosePath=n.closePath,n.__originalBeginPath=n.beginPath,n._removeMirroring=()=>{n.save=n.__originalSave,n.restore=n.__originalRestore,n.rotate=n.__originalRotate,n.scale=n.__originalScale,n.translate=n.__originalTranslate,n.transform=n.__originalTransform,n.setTransform=n.__originalSetTransform,n.resetTransform=n.__originalResetTransform,n.clip=n.__originalClip,n.moveTo=n.__originalMoveTo,n.lineTo=n.__originalLineTo,n.bezierCurveTo=n.__originalBezierCurveTo,n.rect=n.__originalRect,n.closePath=n.__originalClosePath,n.beginPath=n.__originalBeginPath,delete n._removeMirroring},n.save=function(){e.save(),this.__originalSave()},n.restore=function(){e.restore(),this.__originalRestore()},n.translate=function(t,s){e.translate(t,s),this.__originalTranslate(t,s)},n.scale=function(t,s){e.scale(t,s),this.__originalScale(t,s)},n.transform=function(t,s,r,i,a,l){e.transform(t,s,r,i,a,l),this.__originalTransform(t,s,r,i,a,l)},n.setTransform=function(t,s,r,i,a,l){e.setTransform(t,s,r,i,a,l),this.__originalSetTransform(t,s,r,i,a,l)},n.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},n.rotate=function(t){e.rotate(t),this.__originalRotate(t)},n.clip=function(t){e.clip(t),this.__originalClip(t)},n.moveTo=function(t,s){e.moveTo(t,s),this.__originalMoveTo(t,s)},n.lineTo=function(t,s){e.lineTo(t,s),this.__originalLineTo(t,s)},n.bezierCurveTo=function(t,s,r,i,a,l){e.bezierCurveTo(t,s,r,i,a,l),this.__originalBezierCurveTo(t,s,r,i,a,l)},n.rect=function(t,s,r,i){e.rect(t,s,r,i),this.__originalRect(t,s,r,i)},n.closePath=function(){e.closePath(),this.__originalClosePath()},n.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class hM{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,s){let r;return this.cache[e]!==void 0?(r=this.cache[e],this.canvasFactory.reset(r,t,s)):(r=this.canvasFactory.create(t,s),this.cache[e]=r),r}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function Gm(n,e,t,s,r,i,a,l,c,d){const[h,f,p,m,v,x]=tt(n);if(f===0&&p===0){const g=a*h+v,w=Math.round(g),S=l*m+x,C=Math.round(S),N=(a+c)*h+v,_=Math.abs(Math.round(N)-w)||1,P=(l+d)*m+x,L=Math.abs(Math.round(P)-C)||1;return n.setTransform(Math.sign(h),0,0,Math.sign(m),w,C),n.drawImage(e,t,s,r,i,0,0,_,L),n.setTransform(h,f,p,m,v,x),[_,L]}if(h===0&&m===0){const g=l*p+v,w=Math.round(g),S=a*f+x,C=Math.round(S),N=(l+d)*p+v,_=Math.abs(Math.round(N)-w)||1,P=(a+c)*f+x,L=Math.abs(Math.round(P)-C)||1;return n.setTransform(0,Math.sign(f),Math.sign(p),0,w,C),n.drawImage(e,t,s,r,i,0,0,L,_),n.setTransform(h,f,p,m,v,x),[L,_]}n.drawImage(e,t,s,r,i,a,l,c,d);const A=Math.hypot(h,f),b=Math.hypot(p,m);return[A*c,b*d]}class NA{constructor(e,t,s){I(this,"alphaIsShape",!1);I(this,"fontSize",0);I(this,"fontSizeScale",1);I(this,"textMatrix",null);I(this,"textMatrixScale",1);I(this,"fontMatrix",bv);I(this,"leading",0);I(this,"x",0);I(this,"y",0);I(this,"lineX",0);I(this,"lineY",0);I(this,"charSpacing",0);I(this,"wordSpacing",0);I(this,"textHScale",1);I(this,"textRenderingMode",Vt.FILL);I(this,"textRise",0);I(this,"fillColor","#000000");I(this,"strokeColor","#000000");I(this,"patternFill",!1);I(this,"patternStroke",!1);I(this,"fillAlpha",1);I(this,"strokeAlpha",1);I(this,"lineWidth",1);I(this,"activeSMask",null);I(this,"transferMaps","none");s==null||s(this),this.clipBox=new Float32Array([0,0,e,t]),this.minMax=Gc.slice()}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e.minMax=this.minMax.slice(),e}getPathBoundingBox(e=Qt.FILL,t=null){const s=this.minMax.slice();if(e===Qt.STROKE){t||$e("Stroke bounding box must include transform."),K.singularValueDecompose2dScale(t,fs);const r=fs[0]*this.lineWidth/2,i=fs[1]*this.lineWidth/2;s[0]-=r,s[1]-=i,s[2]+=r,s[3]+=i}return s}updateClipFromPath(){const e=K.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(e){this.clipBox.set(e,0),this.minMax.set(Gc,0)}getClippedPathBoundingBox(e=Qt.FILL,t=null){return K.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function _A(n,e){if(e instanceof ImageData){n.putImageData(e,0,0);return}const t=e.height,s=e.width,r=t%Bn,i=(t-r)/Bn,a=r===0?i:i+1,l=n.createImageData(s,Bn);let c=0,d;const h=e.data,f=l.data;let p,m,v,x;if(e.kind===Xh.GRAYSCALE_1BPP){const A=h.byteLength,b=new Uint32Array(f.buffer,0,f.byteLength>>2),g=b.length,w=s+7>>3,S=4294967295,C=zt.isLittleEndian?4278190080:255;for(p=0;p<a;p++){for(v=p<i?Bn:r,d=0,m=0;m<v;m++){const N=A-c;let _=0;const P=N>w?s:N*8-7,L=P&-8;let R=0,M=0;for(;_<L;_+=8)M=h[c++],b[d++]=M&128?S:C,b[d++]=M&64?S:C,b[d++]=M&32?S:C,b[d++]=M&16?S:C,b[d++]=M&8?S:C,b[d++]=M&4?S:C,b[d++]=M&2?S:C,b[d++]=M&1?S:C;for(;_<P;_++)R===0&&(M=h[c++],R=128),b[d++]=M&R?S:C,R>>=1}for(;d<g;)b[d++]=0;n.putImageData(l,0,p*Bn)}}else if(e.kind===Xh.RGBA_32BPP){for(m=0,x=s*Bn*4,p=0;p<i;p++)f.set(h.subarray(c,c+x)),c+=x,n.putImageData(l,0,m),m+=Bn;p<a&&(x=s*r*4,f.set(h.subarray(c,c+x)),n.putImageData(l,0,m))}else if(e.kind===Xh.RGB_24BPP)for(v=Bn,x=s*v,p=0;p<a;p++){for(p>=i&&(v=r,x=s*v),d=0,m=x;m--;)f[d++]=h[c++],f[d++]=h[c++],f[d++]=h[c++],f[d++]=255;n.putImageData(l,0,p*Bn)}else throw new Error(`bad image kind: ${e.kind}`)}function jA(n,e){if(e.bitmap){n.drawImage(e.bitmap,0,0);return}const t=e.height,s=e.width,r=t%Bn,i=(t-r)/Bn,a=r===0?i:i+1,l=n.createImageData(s,Bn);let c=0;const d=e.data,h=l.data;for(let f=0;f<a;f++){const p=f<i?Bn:r;({srcPos:c}=cM({src:d,srcPos:c,dest:h,width:s,height:p,nonBlackColor:0})),n.putImageData(l,0,f*Bn)}}function ch(n,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const s of t)n[s]!==void 0&&(e[s]=n[s]);n.setLineDash!==void 0&&(e.setLineDash(n.getLineDash()),e.lineDashOffset=n.lineDashOffset)}function qm(n){n.strokeStyle=n.fillStyle="#000000",n.fillRule="nonzero",n.globalAlpha=1,n.lineWidth=1,n.lineCap="butt",n.lineJoin="miter",n.miterLimit=10,n.globalCompositeOperation="source-over",n.font="10px sans-serif",n.setLineDash!==void 0&&(n.setLineDash([]),n.lineDashOffset=0);const{filter:e}=n;e!=="none"&&e!==""&&(n.filter="none")}function PA(n,e){if(e)return!0;K.singularValueDecompose2dScale(n,fs);const t=Math.fround(vr.pixelRatio*sa.PDF_TO_CSS_UNITS);return fs[0]<=t&&fs[1]<=t}const fM=["butt","round","square"],pM=["miter","round","bevel"],mM={},TA={};var br,Kv,Yv,Qv;const m1=class m1{constructor(e,t,s,r,i,{optionalContentConfig:a,markedContentStack:l=null},c,d,h){k(this,br);this.ctx=e,this.current=new NA(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=s,this.canvasFactory=r,this.filterFactory=i,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=l||[],this.optionalContentConfig=a,this.cachedCanvases=new hM(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=c,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=d,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=h??null}getObject(e,t,s=null){var r;return typeof t=="string"?((r=this.dependencyTracker)==null||r.recordNamedDependency(e,t),t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t)):s}beginDrawing({transform:e,viewport:t,transparency:s=!1,background:r=null}){const i=this.ctx.canvas.width,a=this.ctx.canvas.height,l=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,i,a),this.ctx.fillStyle=l,s){const c=this.cachedCanvases.getCanvas("transparent",i,a);this.compositeCtx=this.ctx,this.transparentCanvas=c.canvas,this.ctx=c.context,this.ctx.save(),this.ctx.transform(...tt(this.compositeCtx))}this.ctx.save(),qm(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=tt(this.ctx)}executeOperatorList(e,t,s,r,i){var b;const a=e.argsArray,l=e.fnArray;let c=t||0;const d=a.length;if(d===c)return c;const h=d-c>CA&&typeof s=="function",f=h?Date.now()+dM:0;let p=0;const m=this.commonObjs,v=this.objs;let x,A;for(;;){if(r!==void 0&&c===r.nextBreakPoint)return r.breakIt(c,s),c;if(!i||i(c))if(x=l[c],A=a[c]??null,x!==zu.dependency)A===null?this[x](c):this[x](c,...A);else for(const g of A){(b=this.dependencyTracker)==null||b.recordNamedData(g,c);const w=g.startsWith("g_")?m:v;if(!w.has(g))return w.get(g,s),c}if(c++,c===d)return c;if(h&&++p>CA){if(Date.now()>f)return s(),c;p=0}}}endDrawing(){E(this,br,Kv).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),E(this,br,Yv).call(this)}_scaleImage(e,t){const s=e.width??e.displayWidth,r=e.height??e.displayHeight;let i=Math.max(Math.hypot(t[0],t[1]),1),a=Math.max(Math.hypot(t[2],t[3]),1),l=s,c=r,d="prescale1",h,f;for(;i>2&&l>1||a>2&&c>1;){let p=l,m=c;i>2&&l>1&&(p=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l/2),i/=l/p),a>2&&c>1&&(m=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c)/2,a/=c/m),h=this.cachedCanvases.getCanvas(d,p,m),f=h.context,f.clearRect(0,0,p,m),f.drawImage(e,0,0,l,c,0,0,p,m),e=h.canvas,l=p,c=m,d=d==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:l,paintHeight:c}}_createMaskCanvas(e,t){var R,M;const s=this.ctx,{width:r,height:i}=t,a=this.current.fillColor,l=this.current.patternFill,c=tt(s);let d,h,f,p;if((t.bitmap||t.data)&&t.count>1){const F=t.bitmap||t.data.buffer;h=JSON.stringify(l?c:[c.slice(0,4),a]),d=this._cachedBitmapsMap.get(F),d||(d=new Map,this._cachedBitmapsMap.set(F,d));const G=d.get(h);if(G&&!l){const U=Math.round(Math.min(c[0],c[2])+c[4]),ee=Math.round(Math.min(c[1],c[3])+c[5]);return(R=this.dependencyTracker)==null||R.recordDependencies(e,Ss.transformAndFill),{canvas:G,offsetX:U,offsetY:ee}}f=G}f||(p=this.cachedCanvases.getCanvas("maskCanvas",r,i),jA(p.context,t));let m=K.transform(c,[1/r,0,0,-1/i,0,0]);m=K.transform(m,[1,0,0,1,0,-i]);const v=Gc.slice();K.axialAlignedBoundingBox([0,0,r,i],m,v);const[x,A,b,g]=v,w=Math.round(b-x)||1,S=Math.round(g-A)||1,C=this.cachedCanvases.getCanvas("fillCanvas",w,S),N=C.context,_=x,P=A;N.translate(-_,-P),N.transform(...m),f||(f=this._scaleImage(p.canvas,Sr(N)),f=f.img,d&&l&&d.set(h,f)),N.imageSmoothingEnabled=PA(tt(N),t.interpolate),Gm(N,f,0,0,f.width,f.height,0,0,r,i),N.globalCompositeOperation="source-in";const L=K.transform(Sr(N),[1,0,0,1,-_,-P]);return N.fillStyle=l?a.getPattern(s,this,L,Qt.FILL,e):a,N.fillRect(0,0,r,i),d&&!l&&(this.cachedCanvases.delete("fillCanvas"),d.set(h,C.canvas)),(M=this.dependencyTracker)==null||M.recordDependencies(e,Ss.transformAndFill),{canvas:C.canvas,offsetX:Math.round(_),offsetY:Math.round(P)}}setLineWidth(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("lineWidth",e),t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("lineCap",e),this.ctx.lineCap=fM[t]}setLineJoin(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("lineJoin",e),this.ctx.lineJoin=pM[t]}setMiterLimit(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("miterLimit",e),this.ctx.miterLimit=t}setDash(e,t,s){var i;(i=this.dependencyTracker)==null||i.recordSimpleData("dash",e);const r=this.ctx;r.setLineDash!==void 0&&(r.setLineDash(t),r.lineDashOffset=s)}setRenderingIntent(e,t){}setFlatness(e,t){}setGState(e,t){var s,r,i,a,l;for(const[c,d]of t)switch(c){case"LW":this.setLineWidth(e,d);break;case"LC":this.setLineCap(e,d);break;case"LJ":this.setLineJoin(e,d);break;case"ML":this.setMiterLimit(e,d);break;case"D":this.setDash(e,d[0],d[1]);break;case"RI":this.setRenderingIntent(e,d);break;case"FL":this.setFlatness(e,d);break;case"Font":this.setFont(e,d[0],d[1]);break;case"CA":(s=this.dependencyTracker)==null||s.recordSimpleData("strokeAlpha",e),this.current.strokeAlpha=d;break;case"ca":(r=this.dependencyTracker)==null||r.recordSimpleData("fillAlpha",e),this.ctx.globalAlpha=this.current.fillAlpha=d;break;case"BM":(i=this.dependencyTracker)==null||i.recordSimpleData("globalCompositeOperation",e),this.ctx.globalCompositeOperation=d;break;case"SMask":(a=this.dependencyTracker)==null||a.recordSimpleData("SMask",e),this.current.activeSMask=d?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":(l=this.dependencyTracker)==null||l.recordSimpleData("filter",e),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(d);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(e){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,s=this.ctx.canvas.height,r="smaskGroupAt"+this.groupLevel,i=this.cachedCanvases.getCanvas(r,t,s);this.suspendedCtx=this.ctx;const a=this.ctx=i.context;a.setTransform(this.suspendedCtx.getTransform()),ch(this.suspendedCtx,a),uM(a,this.suspendedCtx),this.setGState(e,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),ch(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,s=this.suspendedCtx;this.composeSMask(s,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,s,r){const i=r[0],a=r[1],l=r[2]-i,c=r[3]-a;l===0||c===0||(this.genericComposeSMask(t.context,s,l,c,t.subtype,t.backdrop,t.transferMap,i,a,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(s.canvas,0,0),e.restore())}genericComposeSMask(e,t,s,r,i,a,l,c,d,h,f){let p=e.canvas,m=c-h,v=d-f;if(a)if(m<0||v<0||m+s>p.width||v+r>p.height){const A=this.cachedCanvases.getCanvas("maskExtension",s,r),b=A.context;b.drawImage(p,-m,-v),b.globalCompositeOperation="destination-atop",b.fillStyle=a,b.fillRect(0,0,s,r),b.globalCompositeOperation="source-over",p=A.canvas,m=v=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const A=new Path2D;A.rect(m,v,s,r),e.clip(A),e.globalCompositeOperation="destination-atop",e.fillStyle=a,e.fillRect(m,v,s,r),e.restore()}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),i==="Alpha"&&l?t.filter=this.filterFactory.addAlphaFilter(l):i==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(l));const x=new Path2D;x.rect(c,d,s,r),t.clip(x),t.globalCompositeOperation="destination-in",t.drawImage(p,m,v,s,r,c,d,s,r),t.restore()}save(e){var s;this.inSMaskMode&&ch(this.ctx,this.suspendedCtx),this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone(),(s=this.dependencyTracker)==null||s.save(e)}restore(e){var t;if((t=this.dependencyTracker)==null||t.restore(e),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&ch(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(e,t,s,r,i,a,l){var c;(c=this.dependencyTracker)==null||c.recordIncrementalData("transform",e),this.ctx.transform(t,s,r,i,a,l),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,s,r){let[i]=s;if(!r){i||(i=s[0]=new Path2D),this[t](e,i);return}if(this.dependencyTracker!==null){const a=t===zu.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(e).recordBBox(e,this.ctx,r[0]-a,r[2]+a,r[1]-a,r[3]+a).recordDependencies(e,["transform"])}if(!(i instanceof Path2D)){const a=s[0]=new Path2D;for(let l=0,c=i.length;l<c;)switch(i[l++]){case Um.moveTo:a.moveTo(i[l++],i[l++]);break;case Um.lineTo:a.lineTo(i[l++],i[l++]);break;case Um.curveTo:a.bezierCurveTo(i[l++],i[l++],i[l++],i[l++],i[l++],i[l++]);break;case Um.closePath:a.closePath();break;default:ae(`Unrecognized drawing path operator: ${i[l-1]}`);break}i=a}K.axialAlignedBoundingBox(r,tt(this.ctx),this.current.minMax),this[t](e,i),this._pathStartIdx=e}closePath(e){this.ctx.closePath()}stroke(e,t,s=!0){var a;const r=this.ctx,i=this.current.strokeColor;if(r.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof i=="object"&&(i!=null&&i.getPattern)){const l=i.isModifyingCurrentTransform()?r.getTransform():null;if(r.save(),r.strokeStyle=i.getPattern(r,this,Sr(r),Qt.STROKE,e),l){const c=new Path2D;c.addPath(t,r.getTransform().invertSelf().multiplySelf(l)),t=c}this.rescaleAndStroke(t,!1),r.restore()}else this.rescaleAndStroke(t,!0);(a=this.dependencyTracker)==null||a.recordDependencies(e,Ss.stroke),s&&this.consumePath(e,t,this.current.getClippedPathBoundingBox(Qt.STROKE,tt(this.ctx))),r.globalAlpha=this.current.fillAlpha}closeStroke(e,t){this.stroke(e,t)}fill(e,t,s=!0){var d,h,f;const r=this.ctx,i=this.current.fillColor,a=this.current.patternFill;let l=!1;if(a){const p=i.isModifyingCurrentTransform()?r.getTransform():null;if((d=this.dependencyTracker)==null||d.save(e),r.save(),r.fillStyle=i.getPattern(r,this,Sr(r),Qt.FILL,e),p){const m=new Path2D;m.addPath(t,r.getTransform().invertSelf().multiplySelf(p)),t=m}l=!0}const c=this.current.getClippedPathBoundingBox();this.contentVisible&&c!==null&&(this.pendingEOFill?(r.fill(t,"evenodd"),this.pendingEOFill=!1):r.fill(t)),(h=this.dependencyTracker)==null||h.recordDependencies(e,Ss.fill),l&&(r.restore(),(f=this.dependencyTracker)==null||f.restore(e)),s&&this.consumePath(e,t,c)}eoFill(e,t){this.pendingEOFill=!0,this.fill(e,t)}fillStroke(e,t){this.fill(e,t,!1),this.stroke(e,t,!1),this.consumePath(e,t)}eoFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}closeFillStroke(e,t){this.fillStroke(e,t)}closeEOFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}endPath(e,t){this.consumePath(e,t)}rawFillPath(e,t){var s;this.ctx.fill(t),(s=this.dependencyTracker)==null||s.recordDependencies(e,Ss.rawFillPath).recordOperation(e)}clip(e){var t;(t=this.dependencyTracker)==null||t.recordFutureForcedDependency("clipMode",e),this.pendingClip=mM}eoClip(e){var t;(t=this.dependencyTracker)==null||t.recordFutureForcedDependency("clipMode",e),this.pendingClip=TA}beginText(e){var t;this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,(t=this.dependencyTracker)==null||t.recordOpenMarker(e).resetIncrementalData("sameLineText").resetIncrementalData("moveText",e)}endText(e){const t=this.pendingTextPaths,s=this.ctx;if(this.dependencyTracker){const{dependencyTracker:r}=this;t!==void 0&&r.recordFutureForcedDependency("textClip",r.getOpenMarker()).recordFutureForcedDependency("textClip",e),r.recordCloseMarker(e)}if(t!==void 0){const r=new Path2D,i=s.getTransform().invertSelf();for(const{transform:a,x:l,y:c,fontSize:d,path:h}of t)h&&r.addPath(h,new DOMMatrix(a).preMultiplySelf(i).translate(l,c).scale(d,-d));s.clip(r)}delete this.pendingTextPaths}setCharSpacing(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("charSpacing",e),this.current.charSpacing=t}setWordSpacing(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("wordSpacing",e),this.current.wordSpacing=t}setHScale(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("hScale",e),this.current.textHScale=t/100}setLeading(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("leading",e),this.current.leading=-t}setFont(e,t,s){var f,p;(f=this.dependencyTracker)==null||f.recordSimpleData("font",e).recordSimpleDataFromNamed("fontObj",t,e);const r=this.commonObjs.get(t),i=this.current;if(!r)throw new Error(`Can't find font for ${t}`);if(i.fontMatrix=r.fontMatrix||bv,(i.fontMatrix[0]===0||i.fontMatrix[3]===0)&&ae("Invalid font matrix for font "+t),s<0?(s=-s,i.fontDirection=-1):i.fontDirection=1,this.current.font=r,this.current.fontSize=s,r.isType3Font)return;const a=r.loadedName||"sans-serif",l=((p=r.systemFontInfo)==null?void 0:p.css)||`"${a}", ${r.fallbackName}`;let c="normal";r.black?c="900":r.bold&&(c="bold");const d=r.italic?"italic":"normal";let h=s;s<SA?h=SA:s>EA&&(h=EA),this.current.fontSizeScale=s/h,this.ctx.font=`${d} ${c} ${h}px ${l}`}setTextRenderingMode(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("textRenderingMode",e),this.current.textRenderingMode=t}setTextRise(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("textRise",e),this.current.textRise=t}moveText(e,t,s){var r;(r=this.dependencyTracker)==null||r.resetIncrementalData("sameLineText").recordIncrementalData("moveText",e),this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=s}setLeadingMoveText(e,t,s){this.setLeading(e,-s),this.moveText(e,t,s)}setTextMatrix(e,t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("textMatrix",e);const{current:s}=this;s.textMatrix=t,s.textMatrixScale=Math.hypot(t[0],t[1]),s.x=s.lineX=0,s.y=s.lineY=0}nextLine(e){var t;this.moveText(e,0,this.current.leading),(t=this.dependencyTracker)==null||t.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??e)}paintChar(e,t,s,r,i,a){var b,g,w,S;const l=this.ctx,c=this.current,d=c.font,h=c.textRenderingMode,f=c.fontSize/c.fontSizeScale,p=h&Vt.FILL_STROKE_MASK,m=!!(h&Vt.ADD_TO_PATH_FLAG),v=c.patternFill&&!d.missingFile,x=c.patternStroke&&!d.missingFile;let A;if((d.disableFontFace||m||v||x)&&!d.missingFile&&(A=d.getPathGenerator(this.commonObjs,t)),A&&(d.disableFontFace||v||x)){l.save(),l.translate(s,r),l.scale(f,-f),(b=this.dependencyTracker)==null||b.recordCharacterBBox(e,l,d);let C;if(p===Vt.FILL||p===Vt.FILL_STROKE)if(i){C=l.getTransform(),l.setTransform(...i);const N=E(this,br,Qv).call(this,A,C,i);l.fill(N)}else l.fill(A);if(p===Vt.STROKE||p===Vt.FILL_STROKE)if(a){C||(C=l.getTransform()),l.setTransform(...a);const{a:N,b:_,c:P,d:L}=C,R=K.inverseTransform(a),M=K.transform([N,_,P,L,0,0],R);K.singularValueDecompose2dScale(M,fs),l.lineWidth*=Math.max(fs[0],fs[1])/f,l.stroke(E(this,br,Qv).call(this,A,C,a))}else l.lineWidth/=f,l.stroke(A);l.restore()}else(p===Vt.FILL||p===Vt.FILL_STROKE)&&(l.fillText(t,s,r),(g=this.dependencyTracker)==null||g.recordCharacterBBox(e,l,d,f,s,r,()=>l.measureText(t))),(p===Vt.STROKE||p===Vt.FILL_STROKE)&&(this.dependencyTracker&&((w=this.dependencyTracker)==null||w.recordCharacterBBox(e,l,d,f,s,r,()=>l.measureText(t)).recordDependencies(e,Ss.stroke)),l.strokeText(t,s,r));m&&((this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:tt(l),x:s,y:r,fontSize:f,path:A}),(S=this.dependencyTracker)==null||S.recordCharacterBBox(e,l,d,f,s,r))}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let s=!1;for(let r=3;r<t.length;r+=4)if(t[r]>0&&t[r]<255){s=!0;break}return de(this,"isFontSubpixelAAEnabled",s)}showText(e,t){var P,L,R,M;this.dependencyTracker&&(this.dependencyTracker.recordDependencies(e,Ss.showText).resetBBox(e),this.current.textRenderingMode&Vt.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",e).inheritPendingDependenciesAsFutureForcedDependencies());const s=this.current,r=s.font;if(r.isType3Font){this.showType3Text(e,t),(P=this.dependencyTracker)==null||P.recordShowTextOperation(e);return}const i=s.fontSize;if(i===0){(L=this.dependencyTracker)==null||L.recordOperation(e);return}const a=this.ctx,l=s.fontSizeScale,c=s.charSpacing,d=s.wordSpacing,h=s.fontDirection,f=s.textHScale*h,p=t.length,m=r.vertical,v=m?1:-1,x=r.defaultVMetrics,A=i*s.fontMatrix[0],b=s.textRenderingMode===Vt.FILL&&!r.disableFontFace&&!s.patternFill;a.save(),s.textMatrix&&a.transform(...s.textMatrix),a.translate(s.x,s.y+s.textRise),h>0?a.scale(f,-1):a.scale(f,1);let g,w;if(s.patternFill){a.save();const F=s.fillColor.getPattern(a,this,Sr(a),Qt.FILL,e);g=tt(a),a.restore(),a.fillStyle=F}if(s.patternStroke){a.save();const F=s.strokeColor.getPattern(a,this,Sr(a),Qt.STROKE,e);w=tt(a),a.restore(),a.strokeStyle=F}let S=s.lineWidth;const C=s.textMatrixScale;if(C===0||S===0){const F=s.textRenderingMode&Vt.FILL_STROKE_MASK;(F===Vt.STROKE||F===Vt.FILL_STROKE)&&(S=this.getSinglePixelWidth())}else S/=C;if(l!==1&&(a.scale(l,l),S/=l),a.lineWidth=S,r.isInvalidPDFjsFont){const F=[];let G=0;for(const ee of t)F.push(ee.unicode),G+=ee.width;const U=F.join("");if(a.fillText(U,0,0),this.dependencyTracker!==null){const ee=a.measureText(U);this.dependencyTracker.recordBBox(e,this.ctx,-ee.actualBoundingBoxLeft,ee.actualBoundingBoxRight,-ee.actualBoundingBoxAscent,ee.actualBoundingBoxDescent).recordShowTextOperation(e)}s.x+=G*A*f,a.restore(),this.compose();return}let N=0,_;for(_=0;_<p;++_){const F=t[_];if(typeof F=="number"){N+=v*F*i/1e3;continue}let G=!1;const U=(F.isSpace?d:0)+c,ee=F.fontChar,B=F.accent;let z,D,$=F.width;if(m){const W=F.vmetric||x,te=-(F.vmetric?W[1]:$*.5)*A,re=W[2]*A;$=W?-W[0]:$,z=te/l,D=(N+re)/l}else z=N/l,D=0;let V;if(r.remeasure&&$>0){V=a.measureText(ee);const W=V.width*1e3/i*l;if($<W&&this.isFontSubpixelAAEnabled){const te=$/W;G=!0,a.save(),a.scale(te,1),z/=te}else $!==W&&(z+=($-W)/2e3*i/l)}if(this.contentVisible&&(F.isInFont||r.missingFile)){if(b&&!B)a.fillText(ee,z,D),(R=this.dependencyTracker)==null||R.recordCharacterBBox(e,a,V?{bbox:null}:r,i/l,z,D,()=>V??a.measureText(ee));else if(this.paintChar(e,ee,z,D,g,w),B){const W=z+i*B.offset.x/l,te=D-i*B.offset.y/l;this.paintChar(e,B.fontChar,W,te,g,w)}}const J=m?$*A-U*h:$*A+U*h;N+=J,G&&a.restore()}m?s.y-=N:s.x+=N*f,a.restore(),this.compose(),(M=this.dependencyTracker)==null||M.recordShowTextOperation(e)}showType3Text(e,t){const s=this.ctx,r=this.current,i=r.font,a=r.fontSize,l=r.fontDirection,c=i.vertical?1:-1,d=r.charSpacing,h=r.wordSpacing,f=r.textHScale*l,p=r.fontMatrix||bv,m=t.length,v=r.textRenderingMode===Vt.INVISIBLE;let x,A,b,g;if(v||a===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,s.save(),r.textMatrix&&s.transform(...r.textMatrix),s.translate(r.x,r.y+r.textRise),s.scale(f,l);const w=this.dependencyTracker;for(this.dependencyTracker=w?new b0(w,e):null,x=0;x<m;++x){if(A=t[x],typeof A=="number"){g=c*A*a/1e3,this.ctx.translate(g,0),r.x+=g*f;continue}const S=(A.isSpace?h:0)+d,C=i.charProcOperatorList[A.operatorListId];C?this.contentVisible&&(this.save(),s.scale(a,a),s.transform(...p),this.executeOperatorList(C),this.restore()):ae(`Type3 character "${A.operatorListId}" is not available.`);const N=[A.width,0];K.applyTransform(N,p),b=N[0]*a+S,s.translate(b,0),r.x+=b*f}s.restore(),w&&(this.dependencyTracker=w)}setCharWidth(e,t,s){}setCharWidthAndBounds(e,t,s,r,i,a,l){var d;const c=new Path2D;c.rect(r,i,a-r,l-i),this.ctx.clip(c),(d=this.dependencyTracker)==null||d.recordBBox(e,this.ctx,r,a,i,l).recordClipBox(e,this.ctx,r,a,i,l),this.endPath(e)}getColorN_Pattern(e,t){let s;if(t[0]==="TilingPattern"){const r=this.baseTransform||tt(this.ctx),i={createCanvasGraphics:(a,l)=>new m1(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new b0(this.dependencyTracker,l,!0):null)};s=new Xv(t,this.ctx,i,r)}else s=this._getPattern(e,t[1],t[2]);return s}setStrokeColorN(e,...t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("strokeColor",e),this.current.strokeColor=this.getColorN_Pattern(e,t),this.current.patternStroke=!0}setFillColorN(e,...t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("fillColor",e),this.current.fillColor=this.getColorN_Pattern(e,t),this.current.patternFill=!0}setStrokeRGBColor(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor=t,this.current.patternStroke=!1}setStrokeTransparent(e){var t;(t=this.dependencyTracker)==null||t.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor=t,this.current.patternFill=!1}setFillTransparent(e){var t;(t=this.dependencyTracker)==null||t.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t,s=null){let r;return this.cachedPatterns.has(t)?r=this.cachedPatterns.get(t):(r=lM(this.getObject(e,t)),this.cachedPatterns.set(t,r)),s&&(r.matrix=s),r}shadingFill(e,t){var a;if(!this.contentVisible)return;const s=this.ctx;this.save(e);const r=this._getPattern(e,t);s.fillStyle=r.getPattern(s,this,Sr(s),Qt.SHADING,e);const i=Sr(s);if(i){const{width:l,height:c}=s.canvas,d=Gc.slice();K.axialAlignedBoundingBox([0,0,l,c],i,d);const[h,f,p,m]=d;this.ctx.fillRect(h,f,p-h,m-f)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);(a=this.dependencyTracker)==null||a.resetBBox(e).recordFullPageBBox(e).recordDependencies(e,Ss.transform).recordDependencies(e,Ss.fill).recordOperation(e),this.compose(this.current.getClippedPathBoundingBox()),this.restore(e)}beginInlineImage(){$e("Should not call beginInlineImage")}beginImageData(){$e("Should not call beginImageData")}paintFormXObjectBegin(e,t,s){var r;if(this.contentVisible&&(this.save(e),this.baseTransformStack.push(this.baseTransform),t&&this.transform(e,...t),this.baseTransform=tt(this.ctx),s)){K.axialAlignedBoundingBox(s,this.baseTransform,this.current.minMax);const[i,a,l,c]=s,d=new Path2D;d.rect(i,a,l-i,c-a),this.ctx.clip(d),(r=this.dependencyTracker)==null||r.recordClipBox(e,this.ctx,i,l,a,c),this.endPath(e)}}paintFormXObjectEnd(e){this.contentVisible&&(this.restore(e),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e,t){var w;if(!this.contentVisible)return;this.save(e),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const s=this.ctx;t.isolated||vy("TODO: Support non-isolated groups."),t.knockout&&ae("Knockout groups not supported.");const r=tt(s);if(t.matrix&&s.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let i=Gc.slice();K.axialAlignedBoundingBox(t.bbox,tt(s),i);const a=[0,0,s.canvas.width,s.canvas.height];i=K.intersect(i,a)||[0,0,0,0];const l=Math.floor(i[0]),c=Math.floor(i[1]),d=Math.max(Math.ceil(i[2])-l,1),h=Math.max(Math.ceil(i[3])-c,1);this.current.startNewPathAndClipBox([0,0,d,h]);let f="groupAt"+this.groupLevel;t.smask&&(f+="_smask_"+this.smaskCounter++%2);const p=this.cachedCanvases.getCanvas(f,d,h),m=p.context;m.translate(-l,-c),m.transform(...r);let v=new Path2D;const[x,A,b,g]=t.bbox;if(v.rect(x,A,b-x,g-A),t.matrix){const S=new Path2D;S.addPath(v,new DOMMatrix(t.matrix)),v=S}m.clip(v),t.smask&&this.smaskStack.push({canvas:p.canvas,context:m,offsetX:l,offsetY:c,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}),(!t.smask||this.dependencyTracker)&&(s.setTransform(1,0,0,1,0,0),s.translate(l,c),s.save()),ch(s,m),this.ctx=m,(w=this.dependencyTracker)==null||w.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(s),this.setGState(e,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(s),this.groupLevel++}endGroup(e,t){var i;if(!this.contentVisible)return;this.groupLevel--;const s=this.ctx,r=this.groupStack.pop();if(this.ctx=r,this.ctx.imageSmoothingEnabled=!1,(i=this.dependencyTracker)==null||i.popBaseTransform(),t.smask)this.tempSMask=this.smaskStack.pop(),this.restore(e),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const a=tt(this.ctx);this.restore(e),this.ctx.save(),this.ctx.setTransform(...a);const l=Gc.slice();K.axialAlignedBoundingBox([0,0,s.canvas.width,s.canvas.height],a,l),this.ctx.drawImage(s.canvas,0,0),this.ctx.restore(),this.compose(l)}}beginAnnotation(e,t,s,r,i,a){if(E(this,br,Kv).call(this),qm(this.ctx),this.ctx.save(),this.save(e),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),s){const l=s[2]-s[0],c=s[3]-s[1];if(a&&this.annotationCanvasMap){r=r.slice(),r[4]-=s[0],r[5]-=s[1],s=s.slice(),s[0]=s[1]=0,s[2]=l,s[3]=c,K.singularValueDecompose2dScale(tt(this.ctx),fs);const{viewportScale:d}=this,h=Math.ceil(l*this.outputScaleX*d),f=Math.ceil(c*this.outputScaleY*d);this.annotationCanvas=this.canvasFactory.create(h,f);const{canvas:p,context:m}=this.annotationCanvas;this.annotationCanvasMap.set(t,p),this.annotationCanvas.savedCtx=this.ctx,this.ctx=m,this.ctx.save(),this.ctx.setTransform(fs[0],0,0,-fs[1],0,c*fs[1]),qm(this.ctx)}else{qm(this.ctx),this.endPath(e);const d=new Path2D;d.rect(s[0],s[1],l,c),this.ctx.clip(d)}}this.current=new NA(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(e,...r),this.transform(e,...i)}endAnnotation(e){this.annotationCanvas&&(this.ctx.restore(),E(this,br,Yv).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e,t){var l;if(!this.contentVisible)return;const s=t.count;t=this.getObject(e,t.data,t),t.count=s;const r=this.ctx,i=this._createMaskCanvas(e,t),a=i.canvas;r.save(),r.setTransform(1,0,0,1,0,0),r.drawImage(a,i.offsetX,i.offsetY),(l=this.dependencyTracker)==null||l.resetBBox(e).recordBBox(e,this.ctx,i.offsetX,i.offsetX+a.width,i.offsetY,i.offsetY+a.height).recordOperation(e),r.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,s,r=0,i=0,a,l){var f,p,m;if(!this.contentVisible)return;t=this.getObject(e,t.data,t);const c=this.ctx;c.save();const d=tt(c);c.transform(s,r,i,a,0,0);const h=this._createMaskCanvas(e,t);c.setTransform(1,0,0,1,h.offsetX-d[4],h.offsetY-d[5]),(f=this.dependencyTracker)==null||f.resetBBox(e);for(let v=0,x=l.length;v<x;v+=2){const A=K.transform(d,[s,r,i,a,l[v],l[v+1]]);c.drawImage(h.canvas,A[4],A[5]),(p=this.dependencyTracker)==null||p.recordBBox(e,this.ctx,A[4],A[4]+h.canvas.width,A[5],A[5]+h.canvas.height)}c.restore(),this.compose(),(m=this.dependencyTracker)==null||m.recordOperation(e)}paintImageMaskXObjectGroup(e,t){var a,l,c;if(!this.contentVisible)return;const s=this.ctx,r=this.current.fillColor,i=this.current.patternFill;(a=this.dependencyTracker)==null||a.resetBBox(e).recordDependencies(e,Ss.transformAndFill);for(const d of t){const{data:h,width:f,height:p,transform:m}=d,v=this.cachedCanvases.getCanvas("maskCanvas",f,p),x=v.context;x.save();const A=this.getObject(e,h,d);jA(x,A),x.globalCompositeOperation="source-in",x.fillStyle=i?r.getPattern(x,this,Sr(s),Qt.FILL,e):r,x.fillRect(0,0,f,p),x.restore(),s.save(),s.transform(...m),s.scale(1,-1),Gm(s,v.canvas,0,0,f,p,0,-1,1,1),(l=this.dependencyTracker)==null||l.recordBBox(e,s,0,f,0,p),s.restore()}this.compose(),(c=this.dependencyTracker)==null||c.recordOperation(e)}paintImageXObject(e,t){if(!this.contentVisible)return;const s=this.getObject(e,t);if(!s){ae("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e,s)}paintImageXObjectRepeat(e,t,s,r,i){if(!this.contentVisible)return;const a=this.getObject(e,t);if(!a){ae("Dependent image isn't ready yet");return}const l=a.width,c=a.height,d=[];for(let h=0,f=i.length;h<f;h+=2)d.push({transform:[s,0,0,r,i[h],i[h+1]],x:0,y:0,w:l,h:c});this.paintInlineImageXObjectGroup(e,a,d)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:s,height:r}=e,i=this.cachedCanvases.getCanvas("inlineImage",s,r),a=i.context;return a.filter=this.current.transferMaps,a.drawImage(t,0,0),a.filter="none",i.canvas}paintInlineImageXObject(e,t){var d;if(!this.contentVisible)return;const s=t.width,r=t.height,i=this.ctx;this.save(e);const{filter:a}=i;a!=="none"&&a!==""&&(i.filter="none"),i.scale(1/s,-1/r);let l;if(t.bitmap)l=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)l=t;else{const f=this.cachedCanvases.getCanvas("inlineImage",s,r).context;_A(f,t),l=this.applyTransferMapsToCanvas(f)}const c=this._scaleImage(l,Sr(i));i.imageSmoothingEnabled=PA(tt(i),t.interpolate),(d=this.dependencyTracker)==null||d.resetBBox(e).recordBBox(e,i,0,s,-r,0).recordDependencies(e,Ss.imageXObject).recordOperation(e),Gm(i,c.img,0,0,c.paintWidth,c.paintHeight,0,-r,s,r),this.compose(),this.restore(e)}paintInlineImageXObjectGroup(e,t,s){var a,l,c;if(!this.contentVisible)return;const r=this.ctx;let i;if(t.bitmap)i=t.bitmap;else{const d=t.width,h=t.height,p=this.cachedCanvases.getCanvas("inlineImage",d,h).context;_A(p,t),i=this.applyTransferMapsToCanvas(p)}(a=this.dependencyTracker)==null||a.resetBBox(e);for(const d of s)r.save(),r.transform(...d.transform),r.scale(1,-1),Gm(r,i,d.x,d.y,d.w,d.h,0,-1,1,1),(l=this.dependencyTracker)==null||l.recordBBox(e,r,0,1,-1,0),r.restore();(c=this.dependencyTracker)==null||c.recordOperation(e),this.compose()}paintSolidColorImageMask(e){var t;this.contentVisible&&((t=this.dependencyTracker)==null||t.resetBBox(e).recordBBox(e,this.ctx,0,1,0,1).recordDependencies(e,Ss.fill).recordOperation(e),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e,t){}markPointProps(e,t,s){}beginMarkedContent(e,t){var s;(s=this.dependencyTracker)==null||s.beginMarkedContent(e),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t,s){var r;(r=this.dependencyTracker)==null||r.beginMarkedContent(e),t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(s)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(e){var t;(t=this.dependencyTracker)==null||t.endMarkedContent(e),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(e){}endCompat(e){}consumePath(e,t,s){var a,l;const r=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(s);const i=this.ctx;this.pendingClip?(r||(this.pendingClip===TA?i.clip(t,"evenodd"):i.clip(t)),this.pendingClip=null,(a=this.dependencyTracker)==null||a.bboxToClipBoxDropOperation(e).recordFutureForcedDependency("clipPath",e)):(l=this.dependencyTracker)==null||l.recordOperation(e),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=tt(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),s=Math.hypot(e[0],e[2]),r=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(s,r)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:s,c:r,d:i}=this.ctx.getTransform();let a,l;if(s===0&&r===0){const c=Math.abs(t),d=Math.abs(i);if(c===d)if(e===0)a=l=1/c;else{const h=c*e;a=l=h<1?1/h:1}else if(e===0)a=1/c,l=1/d;else{const h=c*e,f=d*e;a=h<1?1/h:1,l=f<1?1/f:1}}else{const c=Math.abs(t*i-s*r),d=Math.hypot(t,s),h=Math.hypot(r,i);if(e===0)a=h/c,l=d/c;else{const f=e*c;a=h>f?h/f:1,l=d>f?d/f:1}}this._cachedScaleForStroking[0]=a,this._cachedScaleForStroking[1]=l}return this._cachedScaleForStroking}rescaleAndStroke(e,t){const{ctx:s,current:{lineWidth:r}}=this,[i,a]=this.getScaleForStroking();if(i===a){s.lineWidth=(r||1)*i,s.stroke(e);return}const l=s.getLineDash();t&&s.save(),s.scale(i,a),gx.a=1/i,gx.d=1/a;const c=new Path2D;if(c.addPath(e,gx),l.length>0){const d=Math.max(i,a);s.setLineDash(l.map(h=>h/d)),s.lineDashOffset/=d}s.lineWidth=r||1,s.stroke(c),t&&s.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};br=new WeakSet,Kv=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},Yv=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}},Qv=function(e,t,s){const r=new Path2D;return r.addPath(e,new DOMMatrix(s).invertSelf().multiplySelf(t)),r};let sd=m1;for(const n in zu)sd.prototype[n]!==void 0&&(sd.prototype[zu[n]]=sd.prototype[n]);var Ld,Dd,ep,Md,vg;const Xc=class Xc{constructor(e){k(this,Md);k(this,Ld);k(this,Dd);k(this,ep);y(this,Ld,e),y(this,Dd,new DataView(o(this,Ld))),y(this,ep,new TextDecoder)}static write(e){const t=new TextEncoder,s={};let r=0;for(const d of Xc.strings){const h=t.encode(e[d]);s[d]=h,r+=4+h.length}const i=new ArrayBuffer(r),a=new Uint8Array(i),l=new DataView(i);let c=0;for(const d of Xc.strings){const h=s[d],f=h.length;l.setUint32(c,f),a.set(h,c+4),c+=4+f}return ve(c===i.byteLength,"CssFontInfo.write: Buffer overflow"),i}get fontFamily(){return E(this,Md,vg).call(this,0)}get fontWeight(){return E(this,Md,vg).call(this,1)}get italicAngle(){return E(this,Md,vg).call(this,2)}};Ld=new WeakMap,Dd=new WeakMap,ep=new WeakMap,Md=new WeakSet,vg=function(e){ve(e<Xc.strings.length,"Invalid string index");let t=0;for(let r=0;r<e;r++)t+=o(this,Dd).getUint32(t)+4;const s=o(this,Dd).getUint32(t);return o(this,ep).decode(new Uint8Array(o(this,Ld),t+4,s))},I(Xc,"strings",["fontFamily","fontWeight","italicAngle"]);let w0=Xc;var Ma,Br,wl,kl,_h;const Kc=class Kc{constructor(e){k(this,kl);k(this,Ma);k(this,Br);k(this,wl);y(this,Ma,e),y(this,Br,new DataView(o(this,Ma))),y(this,wl,new TextDecoder)}static write(e){const t=new TextEncoder,s={};let r=0;for(const p of Kc.strings){const m=t.encode(e[p]);s[p]=m,r+=4+m.length}r+=4;let i,a,l=1+r;e.style&&(i=t.encode(e.style.style),a=t.encode(e.style.weight),l+=4+i.length+4+a.length);const c=new ArrayBuffer(l),d=new Uint8Array(c),h=new DataView(c);let f=0;h.setUint8(f++,e.guessFallback?1:0),h.setUint32(f,0),f+=4,r=0;for(const p of Kc.strings){const m=s[p],v=m.length;r+=4+v,h.setUint32(f,v),d.set(m,f+4),f+=4+v}return h.setUint32(f-r-4,r),e.style&&(h.setUint32(f,i.length),d.set(i,f+4),f+=4+i.length,h.setUint32(f,a.length),d.set(a,f+4),f+=4+a.length),ve(f<=c.byteLength,"SubstitionInfo.write: Buffer overflow"),c.transferToFixedLength(f)}get guessFallback(){return o(this,Br).getUint8(0)!==0}get css(){return E(this,kl,_h).call(this,0)}get loadedName(){return E(this,kl,_h).call(this,1)}get baseFontName(){return E(this,kl,_h).call(this,2)}get src(){return E(this,kl,_h).call(this,3)}get style(){let e=1;e+=4+o(this,Br).getUint32(e);const t=o(this,Br).getUint32(e),s=o(this,wl).decode(new Uint8Array(o(this,Ma),e+4,t));e+=4+t;const r=o(this,Br).getUint32(e),i=o(this,wl).decode(new Uint8Array(o(this,Ma),e+4,r));return{style:s,weight:i}}};Ma=new WeakMap,Br=new WeakMap,wl=new WeakMap,kl=new WeakSet,_h=function(e){ve(e<Kc.strings.length,"Invalid string index");let t=5;for(let r=0;r<e;r++)t+=o(this,Br).getUint32(t)+4;const s=o(this,Br).getUint32(t);return o(this,wl).decode(new Uint8Array(o(this,Ma),t+4,s))},I(Kc,"strings",["css","loadedName","baseFontName","src"]);let k0=Kc;var Id,Fd,Od,Bd,Qn,Ur,tp,De,ht,Qs,bg,jh;const le=class le{constructor({data:e,extra:t}){k(this,ht);k(this,Ur);k(this,tp);k(this,De);y(this,Ur,e),y(this,tp,new TextDecoder),y(this,De,new DataView(o(this,Ur))),t&&Object.assign(this,t)}get black(){return E(this,ht,Qs).call(this,0)}get bold(){return E(this,ht,Qs).call(this,1)}get disableFontFace(){return E(this,ht,Qs).call(this,2)}get fontExtraProperties(){return E(this,ht,Qs).call(this,3)}get isInvalidPDFjsFont(){return E(this,ht,Qs).call(this,4)}get isType3Font(){return E(this,ht,Qs).call(this,5)}get italic(){return E(this,ht,Qs).call(this,6)}get missingFile(){return E(this,ht,Qs).call(this,7)}get remeasure(){return E(this,ht,Qs).call(this,8)}get vertical(){return E(this,ht,Qs).call(this,9)}get ascent(){return E(this,ht,bg).call(this,0)}get defaultWidth(){return E(this,ht,bg).call(this,1)}get descent(){return E(this,ht,bg).call(this,2)}get bbox(){let e=o(le,Fd);if(o(this,De).getUint8(e)===0)return;e+=1;const s=[];for(let r=0;r<4;r++)s.push(o(this,De).getInt16(e,!0)),e+=2;return s}get fontMatrix(){let e=o(le,Od);if(o(this,De).getUint8(e)===0)return;e+=1;const s=[];for(let r=0;r<6;r++)s.push(o(this,De).getFloat64(e,!0)),e+=8;return s}get defaultVMetrics(){let e=o(le,Bd);if(o(this,De).getUint8(e)===0)return;e+=1;const s=[];for(let r=0;r<3;r++)s.push(o(this,De).getInt16(e,!0)),e+=2;return s}get fallbackName(){return E(this,ht,jh).call(this,0)}get loadedName(){return E(this,ht,jh).call(this,1)}get mimetype(){return E(this,ht,jh).call(this,2)}get name(){return E(this,ht,jh).call(this,3)}get data(){let e=o(le,Qn);const t=o(this,De).getUint32(e);e+=4+t;const s=o(this,De).getUint32(e);e+=4+s;const r=o(this,De).getUint32(e);e+=4+r;const i=o(this,De).getUint32(e);if(i!==0)return new Uint8Array(o(this,Ur),e+4,i)}clearData(){let e=o(le,Qn);const t=o(this,De).getUint32(e);e+=4+t;const s=o(this,De).getUint32(e);e+=4+s;const r=o(this,De).getUint32(e);e+=4+r;const i=o(this,De).getUint32(e);new Uint8Array(o(this,Ur),e+4,i).fill(0),o(this,De).setUint32(e,0)}get cssFontInfo(){let e=o(le,Qn);const t=o(this,De).getUint32(e);e+=4+t;const s=o(this,De).getUint32(e);e+=4+s;const r=o(this,De).getUint32(e);if(r===0)return null;const i=new Uint8Array(r);return i.set(new Uint8Array(o(this,Ur),e+4,r)),new w0(i.buffer)}get systemFontInfo(){let e=o(le,Qn);const t=o(this,De).getUint32(e);e+=4+t;const s=o(this,De).getUint32(e);if(s===0)return null;const r=new Uint8Array(s);return r.set(new Uint8Array(o(this,Ur),e+4,s)),new k0(r.buffer)}static write(e){const t=e.systemFontInfo?k0.write(e.systemFontInfo):null,s=e.cssFontInfo?w0.write(e.cssFontInfo):null,r=new TextEncoder,i={};let a=0;for(const x of le.strings)i[x]=r.encode(e[x]),a+=4+i[x].length;const l=o(le,Qn)+4+a+4+(t?t.byteLength:0)+4+(s?s.byteLength:0)+4+(e.data?e.data.length:0),c=new ArrayBuffer(l),d=new Uint8Array(c),h=new DataView(c);let f=0;const p=le.bools.length;let m=0,v=0;for(let x=0;x<p;x++){const A=e[le.bools[x]];m|=(A===void 0?0:A?2:1)<<v,v+=2,(v===8||x===p-1)&&(h.setUint8(f++,m),m=0,v=0)}ve(f===o(le,Id),"FontInfo.write: Boolean properties offset mismatch");for(const x of le.numbers)h.setFloat64(f,e[x]),f+=8;if(ve(f===o(le,Fd),"FontInfo.write: Number properties offset mismatch"),e.bbox){h.setUint8(f++,4);for(const x of e.bbox)h.setInt16(f,x,!0),f+=2}else h.setUint8(f++,0),f+=2*4;if(ve(f===o(le,Od),"FontInfo.write: BBox properties offset mismatch"),e.fontMatrix){h.setUint8(f++,6);for(const x of e.fontMatrix)h.setFloat64(f,x,!0),f+=8}else h.setUint8(f++,0),f+=8*6;if(ve(f===o(le,Bd),"FontInfo.write: FontMatrix properties offset mismatch"),e.defaultVMetrics){h.setUint8(f++,1);for(const x of e.defaultVMetrics)h.setInt16(f,x,!0),f+=2}else h.setUint8(f++,0),f+=3*2;ve(f===o(le,Qn),"FontInfo.write: DefaultVMetrics properties offset mismatch"),h.setUint32(o(le,Qn),0),f+=4;for(const x of le.strings){const A=i[x],b=A.length;h.setUint32(f,b),d.set(A,f+4),f+=4+b}if(h.setUint32(o(le,Qn),f-o(le,Qn)-4),!t)h.setUint32(f,0),f+=4;else{const x=t.byteLength;h.setUint32(f,x),ve(f+4+x<=c.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),d.set(new Uint8Array(t),f+4),f+=4+x}if(!s)h.setUint32(f,0),f+=4;else{const x=s.byteLength;h.setUint32(f,x),ve(f+4+x<=c.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),d.set(new Uint8Array(s),f+4),f+=4+x}return e.data===void 0?(h.setUint32(f,0),f+=4):(h.setUint32(f,e.data.length),d.set(e.data,f+4),f+=4+e.data.length),ve(f<=c.byteLength,"FontInfo.write: Buffer overflow"),c.transferToFixedLength(f)}};Id=new WeakMap,Fd=new WeakMap,Od=new WeakMap,Bd=new WeakMap,Qn=new WeakMap,Ur=new WeakMap,tp=new WeakMap,De=new WeakMap,ht=new WeakSet,Qs=function(e){ve(e<le.bools.length,"Invalid boolean index");const t=Math.floor(e/4),s=e*2%8,r=o(this,De).getUint8(t)>>s&3;return r===0?void 0:r===2},bg=function(e){return ve(e<le.numbers.length,"Invalid number index"),o(this,De).getFloat64(o(le,Id)+e*8)},jh=function(e){ve(e<le.strings.length,"Invalid string index");let t=o(le,Qn)+4;for(let i=0;i<e;i++)t+=o(this,De).getUint32(t)+4;const s=o(this,De).getUint32(t),r=new Uint8Array(s);return r.set(new Uint8Array(o(this,Ur),t+4,s)),o(this,tp).decode(r)},I(le,"bools",["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"]),I(le,"numbers",["ascent","defaultWidth","descent"]),I(le,"strings",["fallbackName","loadedName","mimetype","name"]),k(le,Id,Math.ceil(le.bools.length*2/8)),k(le,Fd,o(le,Id)+le.numbers.length*8),k(le,Od,o(le,Fd)+1+2*4),k(le,Bd,o(le,Od)+1+8*6),k(le,Qn,o(le,Bd)+1+2*3);let Jv=le;var np,sp;class Bs{static get workerPort(){return o(this,np)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");y(this,np,e)}static get workerSrc(){return o(this,sp)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");y(this,sp,e)}}np=new WeakMap,sp=new WeakMap,k(Bs,np,null),k(Bs,sp,"");var Ud,rp;class gM{constructor({parsedData:e,rawData:t}){k(this,Ud);k(this,rp);y(this,Ud,e),y(this,rp,t)}getRaw(){return o(this,rp)}get(e){return o(this,Ud).get(e)??null}[Symbol.iterator](){return o(this,Ud).entries()}}Ud=new WeakMap,rp=new WeakMap;const Tc=Symbol("INTERNAL");var ip,ap,op,zd;class yM{constructor(e,{name:t,intent:s,usage:r,rbGroups:i}){k(this,ip,!1);k(this,ap,!1);k(this,op,!1);k(this,zd,!0);y(this,ip,!!(e&us.DISPLAY)),y(this,ap,!!(e&us.PRINT)),this.name=t,this.intent=s,this.usage=r,this.rbGroups=i}get visible(){if(o(this,op))return o(this,zd);if(!o(this,zd))return!1;const{print:e,view:t}=this.usage;return o(this,ip)?(t==null?void 0:t.viewState)!=="OFF":o(this,ap)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,t,s=!1){e!==Tc&&$e("Internal method `_setVisible` called."),y(this,op,s),y(this,zd,t)}}ip=new WeakMap,ap=new WeakMap,op=new WeakMap,zd=new WeakMap;var Ia,Me,$d,Hd,lp,Zv;class xM{constructor(e,t=us.DISPLAY){k(this,lp);k(this,Ia,null);k(this,Me,new Map);k(this,$d,null);k(this,Hd,null);if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,y(this,Hd,e.order);for(const s of e.groups)o(this,Me).set(s.id,new yM(t,s));if(e.baseState==="OFF")for(const s of o(this,Me).values())s._setVisible(Tc,!1);for(const s of e.on)o(this,Me).get(s)._setVisible(Tc,!0);for(const s of e.off)o(this,Me).get(s)._setVisible(Tc,!1);y(this,$d,this.getHash())}}isVisible(e){if(o(this,Me).size===0)return!0;if(!e)return vy("Optional content group not defined."),!0;if(e.type==="OCG")return o(this,Me).has(e.id)?o(this,Me).get(e.id).visible:(ae(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return E(this,lp,Zv).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!o(this,Me).has(t))return ae(`Optional content group not found: ${t}`),!0;if(o(this,Me).get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!o(this,Me).has(t))return ae(`Optional content group not found: ${t}`),!0;if(!o(this,Me).get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!o(this,Me).has(t))return ae(`Optional content group not found: ${t}`),!0;if(!o(this,Me).get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!o(this,Me).has(t))return ae(`Optional content group not found: ${t}`),!0;if(o(this,Me).get(t).visible)return!1}return!0}return ae(`Unknown optional content policy ${e.policy}.`),!0}return ae(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,s=!0){var i;const r=o(this,Me).get(e);if(!r){ae(`Optional content group not found: ${e}`);return}if(s&&t&&r.rbGroups.length)for(const a of r.rbGroups)for(const l of a)l!==e&&((i=o(this,Me).get(l))==null||i._setVisible(Tc,!1,!0));r._setVisible(Tc,!!t,!0),y(this,Ia,null)}setOCGState({state:e,preserveRB:t}){let s;for(const r of e){switch(r){case"ON":case"OFF":case"Toggle":s=r;continue}const i=o(this,Me).get(r);if(i)switch(s){case"ON":this.setVisibility(r,!0,t);break;case"OFF":this.setVisibility(r,!1,t);break;case"Toggle":this.setVisibility(r,!i.visible,t);break}}y(this,Ia,null)}get hasInitialVisibility(){return o(this,$d)===null||this.getHash()===o(this,$d)}getOrder(){return o(this,Me).size?o(this,Hd)?o(this,Hd).slice():[...o(this,Me).keys()]:null}getGroup(e){return o(this,Me).get(e)||null}getHash(){if(o(this,Ia)!==null)return o(this,Ia);const e=new zC;for(const[t,s]of o(this,Me))e.update(`${t}:${s.visible}`);return y(this,Ia,e.hexdigest())}[Symbol.iterator](){return o(this,Me).entries()}}Ia=new WeakMap,Me=new WeakMap,$d=new WeakMap,Hd=new WeakMap,lp=new WeakSet,Zv=function(e){const t=e.length;if(t<2)return!0;const s=e[0];for(let r=1;r<t;r++){const i=e[r];let a;if(Array.isArray(i))a=E(this,lp,Zv).call(this,i);else if(o(this,Me).has(i))a=o(this,Me).get(i).visible;else return ae(`Optional content group not found: ${i}`),!0;switch(s){case"And":if(!a)return!1;break;case"Or":if(a)return!0;break;case"Not":return!a;default:return!0}}return s==="And"};class vM{constructor(e,{disableRange:t=!1,disableStream:s=!1}){ve(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:r,initialData:i,progressiveDone:a,contentDispositionFilename:l}=e;if(this._queuedChunks=[],this._progressiveDone=a,this._contentDispositionFilename=l,(i==null?void 0:i.length)>0){const c=i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength?i.buffer:new Uint8Array(i).buffer;this._queuedChunks.push(c)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!s,this._isRangeSupported=!t,this._contentLength=r,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((c,d)=>{this._onReceiveData({begin:c,chunk:d})}),e.addProgressListener((c,d)=>{this._onProgress({loaded:c,total:d})}),e.addProgressiveReadListener(c=>{this._onReceiveData({chunk:c})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const s=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(s):this._queuedChunks.push(s);else{const r=this._rangeReaders.some(function(i){return i._begin!==e?!1:(i._enqueue(s),!0)});ve(r,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var t,s,r,i;e.total===void 0?(s=(t=this._rangeReaders[0])==null?void 0:t.onProgress)==null||s.call(t,{loaded:e.loaded}):(i=(r=this._fullRequestReader)==null?void 0:r.onProgress)==null||i.call(r,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){ve(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new bM(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const s=new wM(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(s),s}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const s of this._rangeReaders.slice(0))s.cancel(e);this._pdfDataRangeTransport.abort()}}class bM{constructor(e,t,s=!1,r=null){this._stream=e,this._done=s||!1,this._filename=wy(r)?r:null,this._queuedChunks=t||[],this._loaded=0;for(const i of this._queuedChunks)this._loaded+=i.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class wM{constructor(e,t,s){this._stream=e,this._begin=t,this._end=s,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function kM(n){let e=!0,t=s("filename\\*","i").exec(n);if(t){t=t[1];let h=l(t);return h=unescape(h),h=c(h),h=d(h),i(h)}if(t=a(n),t){const h=d(t);return i(h)}if(t=s("filename","i").exec(n),t){t=t[1];let h=l(t);return h=d(h),i(h)}function s(h,f){return new RegExp("(?:^|;)\\s*"+h+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',f)}function r(h,f){if(h){if(!/^[\x00-\xFF]+$/.test(f))return f;try{const p=new TextDecoder(h,{fatal:!0}),m=fm(f);f=p.decode(m),e=!1}catch{}}return f}function i(h){return e&&/[\x80-\xff]/.test(h)&&(h=r("utf-8",h),e&&(h=r("iso-8859-1",h))),h}function a(h){const f=[];let p;const m=s("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(p=m.exec(h))!==null;){let[,x,A,b]=p;if(x=parseInt(x,10),x in f){if(x===0)break;continue}f[x]=[A,b]}const v=[];for(let x=0;x<f.length&&x in f;++x){let[A,b]=f[x];b=l(b),A&&(b=unescape(b),x===0&&(b=c(b))),v.push(b)}return v.join("")}function l(h){if(h.startsWith('"')){const f=h.slice(1).split('\\"');for(let p=0;p<f.length;++p){const m=f[p].indexOf('"');m!==-1&&(f[p]=f[p].slice(0,m),f.length=p+1),f[p]=f[p].replaceAll(/\\(.)/g,"$1")}h=f.join('"')}return h}function c(h){const f=h.indexOf("'");if(f===-1)return h;const p=h.slice(0,f),v=h.slice(f+1).replace(/^[^']*'/,"");return r(p,v)}function d(h){return!h.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(h)?h:h.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(f,p,m,v){if(m==="q"||m==="Q")return v=v.replaceAll("_"," "),v=v.replaceAll(/=([0-9a-fA-F]{2})/g,function(x,A){return String.fromCharCode(parseInt(A,16))}),r(p,v);try{v=atob(v)}catch{}return r(p,v)})}return""}function eN(n,e){const t=new Headers;if(!n||!e||typeof e!="object")return t;for(const s in e){const r=e[s];r!==void 0&&t.append(s,r)}return t}function ky(n){var e;return((e=URL.parse(n))==null?void 0:e.origin)??null}function tN({responseHeaders:n,isHttp:e,rangeChunkSize:t,disableRange:s}){const r={allowRangeRequests:!1,suggestedLength:void 0},i=parseInt(n.get("Content-Length"),10);return!Number.isInteger(i)||(r.suggestedLength=i,i<=2*t)||s||!e||n.get("Accept-Ranges")!=="bytes"||(n.get("Content-Encoding")||"identity")!=="identity"||(r.allowRangeRequests=!0),r}function nN(n){const e=n.get("Content-Disposition");if(e){let t=kM(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(wy(t))return t}return null}function ym(n,e){return new gf(`Unexpected server response (${n}) while retrieving PDF "${e}".`,n,n===404||n===0&&e.startsWith("file:"))}function sN(n){return n===200||n===206}function rN(n,e,t){return{method:"GET",headers:n,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function iN(n){return n instanceof Uint8Array?n.buffer:n instanceof ArrayBuffer?n:(ae(`getArrayBuffer - unexpected data format: ${n}`),new Uint8Array(n).buffer)}class AM{constructor(e){I(this,"_responseOrigin",null);this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=eN(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return ve(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new SM(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const s=new EM(this,e,t);return this._rangeRequestReaders.push(s),s}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const s of this._rangeRequestReaders.slice(0))s.cancel(e)}}class SM{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const s=new Headers(e.headers),r=t.url;fetch(r,rN(s,this._withCredentials,this._abortController)).then(i=>{if(e._responseOrigin=ky(i.url),!sN(i.status))throw ym(i.status,r);this._reader=i.body.getReader(),this._headersCapability.resolve();const a=i.headers,{allowRangeRequests:l,suggestedLength:c}=tN({responseHeaders:a,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=l,this._contentLength=c||this._contentLength,this._filename=nN(a),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new na("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded,total:this._contentLength}),{value:iN(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}class EM{constructor(e,t,s){this._stream=e,this._reader=null,this._loaded=0;const r=e.source;this._withCredentials=r.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!r.disableStream,this._abortController=new AbortController;const i=new Headers(e.headers);i.append("Range",`bytes=${t}-${s-1}`);const a=r.url;fetch(a,rN(i,this._withCredentials,this._abortController)).then(l=>{const c=ky(l.url);if(c!==e._responseOrigin)throw new Error(`Expected range response-origin "${c}" to match "${e._responseOrigin}".`);if(!sN(l.status))throw ym(l.status,a);this._readCapability.resolve(),this._reader=l.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded}),{value:iN(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}const yx=200,xx=206;function CM(n){const e=n.response;return typeof e!="string"?e:fm(e).buffer}class NM{constructor({url:e,httpHeaders:t,withCredentials:s}){I(this,"_responseOrigin",null);this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=eN(this.isHttp,t),this.withCredentials=s||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const t=new XMLHttpRequest,s=this.currXhrId++,r=this.pendingRequests[s]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[i,a]of this.headers)t.setRequestHeader(i,a);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),r.expectedStatus=xx):r.expectedStatus=yx,t.responseType="arraybuffer",ve(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>{e.onError(t.status)},t.onreadystatechange=this.onStateChange.bind(this,s),t.onprogress=this.onProgress.bind(this,s),r.onHeadersReceived=e.onHeadersReceived,r.onDone=e.onDone,r.onError=e.onError,r.onProgress=e.onProgress,t.send(null),s}onProgress(e,t){var r;const s=this.pendingRequests[e];s&&((r=s.onProgress)==null||r.call(s,t))}onStateChange(e,t){const s=this.pendingRequests[e];if(!s)return;const r=s.xhr;if(r.readyState>=2&&s.onHeadersReceived&&(s.onHeadersReceived(),delete s.onHeadersReceived),r.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],r.status===0&&this.isHttp){s.onError(r.status);return}const i=r.status||yx;if(!(i===yx&&s.expectedStatus===xx)&&i!==s.expectedStatus){s.onError(r.status);return}const l=CM(r);if(i===xx){const c=r.getResponseHeader("Content-Range"),d=/bytes (\d+)-(\d+)\/(\d+)/.exec(c);d?s.onDone({begin:parseInt(d[1],10),chunk:l}):(ae('Missing or invalid "Content-Range" header.'),s.onError(0))}else l?s.onDone({begin:0,chunk:l}):s.onError(r.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class _M{constructor(e){this._source=e,this._manager=new NM(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return ve(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new jM(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const s=new PM(this._manager,e,t);return s.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(s),s}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const s of this._rangeRequestReaders.slice(0))s.cancel(e)}}class jM{constructor(e,t){this._manager=e,this._url=t.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=ky(t.responseURL);const s=t.getAllResponseHeaders(),r=new Headers(s?s.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(l=>{const[c,...d]=l.split(": ");return[c,d.join(": ")]}):[]),{allowRangeRequests:i,suggestedLength:a}=tN({responseHeaders:r,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});i&&(this._isRangeSupported=!0),this._contentLength=a||this._contentLength,this._filename=nN(r),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=ym(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;(t=this.onProgress)==null||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class PM{constructor(e,t,s){this._manager=e,this._url=e.url,this._requestId=e.request({begin:t,end:s,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var t;const e=ky((t=this._manager.getRequestXhr(this._requestId))==null?void 0:t.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??(this._storedError=ym(e,this._url));for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(t=this.onProgress)==null||t.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const TM=/^[a-z][a-z0-9\-+.]+:/i;function RM(n){if(TM.test(n))return new URL(n);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(n))}class LM{constructor(e){this.source=e,this.url=RM(e.url),ve(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return ve(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new DM(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const s=new MM(this,e,t);return this._rangeRequestReaders.push(s),s}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const s of this._rangeRequestReaders.slice(0))s.cancel(e)}}class DM{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const s=process.getBuiltinModule("fs");s.promises.lstat(this._url).then(r=>{this._contentLength=r.size,this._setReadableStream(s.createReadStream(this._url)),this._headersCapability.resolve()},r=>{r.code==="ENOENT"&&(r=ym(0,this._url.href)),this._storedError=r,this._headersCapability.reject(r)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new na("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class MM{constructor(e,t,s){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const r=e.source;this._isStreamingSupported=!r.disableStream;const i=process.getBuiltinModule("fs");this._setReadableStream(i.createReadStream(this._url,{start:t,end:s-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const dh=Symbol("INITIAL_DATA");var Jn,cp,eb;class aN{constructor(){k(this,cp);k(this,Jn,Object.create(null))}get(e,t=null){if(t){const r=E(this,cp,eb).call(this,e);return r.promise.then(()=>t(r.data)),null}const s=o(this,Jn)[e];if(!s||s.data===dh)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return s.data}has(e){const t=o(this,Jn)[e];return!!t&&t.data!==dh}delete(e){const t=o(this,Jn)[e];return!t||t.data===dh?!1:(delete o(this,Jn)[e],!0)}resolve(e,t=null){const s=E(this,cp,eb).call(this,e);s.data=t,s.resolve()}clear(){var e;for(const t in o(this,Jn)){const{data:s}=o(this,Jn)[t];(e=s==null?void 0:s.bitmap)==null||e.close()}y(this,Jn,Object.create(null))}*[Symbol.iterator](){for(const e in o(this,Jn)){const{data:t}=o(this,Jn)[e];t!==dh&&(yield[e,t])}}}Jn=new WeakMap,cp=new WeakSet,eb=function(e){var t;return(t=o(this,Jn))[e]||(t[e]={...Promise.withResolvers(),data:dh})};const IM=1e5,RA=30;var VA,Fa,In,dp,up,Al,ji,hp,fp,Sl,Vd,Wd,Oa,Gd,pp,qd,El,mp,gp,ut,Xd,Cl,yp,Ba,Kd,ia,oN,lN,tb,ys,wg,nb,cN,dN;let bf=(ut=class{constructor({textContentSource:e,container:t,viewport:s}){k(this,ia);k(this,Fa,Promise.withResolvers());k(this,In,null);k(this,dp,!1);k(this,up,!!((VA=globalThis.FontInspector)!=null&&VA.enabled));k(this,Al,null);k(this,ji,null);k(this,hp,0);k(this,fp,0);k(this,Sl,null);k(this,Vd,null);k(this,Wd,0);k(this,Oa,0);k(this,Gd,Object.create(null));k(this,pp,[]);k(this,qd,null);k(this,El,[]);k(this,mp,new WeakMap);k(this,gp,null);var c;if(e instanceof ReadableStream)y(this,qd,e);else if(typeof e=="object")y(this,qd,new ReadableStream({start(d){d.enqueue(e),d.close()}}));else throw new Error('No "textContentSource" parameter specified.');y(this,In,y(this,Vd,t)),y(this,Oa,s.scale*vr.pixelRatio),y(this,Wd,s.rotation),y(this,ji,{div:null,properties:null,ctx:null});const{pageWidth:r,pageHeight:i,pageX:a,pageY:l}=s.rawDims;y(this,gp,[1,0,0,-1,-a,l+i]),y(this,fp,r),y(this,hp,i),E(c=ut,ys,cN).call(c),Co(t,s),o(this,Fa).promise.finally(()=>{o(ut,Kd).delete(this),y(this,ji,null),y(this,Gd,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=zt.platform;return de(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{o(this,Sl).read().then(({value:t,done:s})=>{if(s){o(this,Fa).resolve();return}o(this,Al)??y(this,Al,t.lang),Object.assign(o(this,Gd),t.styles),E(this,ia,oN).call(this,t.items),e()},o(this,Fa).reject)};return y(this,Sl,o(this,qd).getReader()),o(ut,Kd).add(this),e(),o(this,Fa).promise}update({viewport:e,onBefore:t=null}){var i;const s=e.scale*vr.pixelRatio,r=e.rotation;if(r!==o(this,Wd)&&(t==null||t(),y(this,Wd,r),Co(o(this,Vd),{rotation:r})),s!==o(this,Oa)){t==null||t(),y(this,Oa,s);const a={div:null,properties:null,ctx:E(i=ut,ys,wg).call(i,o(this,Al))};for(const l of o(this,El))a.properties=o(this,mp).get(l),a.div=l,E(this,ia,tb).call(this,a)}}cancel(){var t;const e=new na("TextLayer task cancelled.");(t=o(this,Sl))==null||t.cancel(e).catch(()=>{}),y(this,Sl,null),o(this,Fa).reject(e)}get textDivs(){return o(this,El)}get textContentItemsStr(){return o(this,pp)}static cleanup(){if(!(o(this,Kd).size>0)){o(this,Xd).clear();for(const{canvas:e}of o(this,Cl).values())e.remove();o(this,Cl).clear()}}},Fa=new WeakMap,In=new WeakMap,dp=new WeakMap,up=new WeakMap,Al=new WeakMap,ji=new WeakMap,hp=new WeakMap,fp=new WeakMap,Sl=new WeakMap,Vd=new WeakMap,Wd=new WeakMap,Oa=new WeakMap,Gd=new WeakMap,pp=new WeakMap,qd=new WeakMap,El=new WeakMap,mp=new WeakMap,gp=new WeakMap,Xd=new WeakMap,Cl=new WeakMap,yp=new WeakMap,Ba=new WeakMap,Kd=new WeakMap,ia=new WeakSet,oN=function(e){var r,i;if(o(this,dp))return;(i=o(this,ji)).ctx??(i.ctx=E(r=ut,ys,wg).call(r,o(this,Al)));const t=o(this,El),s=o(this,pp);for(const a of e){if(t.length>IM){ae("Ignoring additional textDivs for performance reasons."),y(this,dp,!0);return}if(a.str===void 0){if(a.type==="beginMarkedContentProps"||a.type==="beginMarkedContent"){const l=o(this,In);y(this,In,document.createElement("span")),o(this,In).classList.add("markedContent"),a.id&&o(this,In).setAttribute("id",`${a.id}`),l.append(o(this,In))}else a.type==="endMarkedContent"&&y(this,In,o(this,In).parentNode);continue}s.push(a.str),E(this,ia,lN).call(this,a)}},lN=function(e){var x;const t=document.createElement("span"),s={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};o(this,El).push(t);const r=K.transform(o(this,gp),e.transform);let i=Math.atan2(r[1],r[0]);const a=o(this,Gd)[e.fontName];a.vertical&&(i+=Math.PI/2);let l=o(this,up)&&a.fontSubstitution||a.fontFamily;l=ut.fontFamilyMap.get(l)||l;const c=Math.hypot(r[2],r[3]),d=c*E(x=ut,ys,dN).call(x,l,a,o(this,Al));let h,f;i===0?(h=r[4],f=r[5]-d):(h=r[4]+d*Math.sin(i),f=r[5]-d*Math.cos(i));const p="calc(var(--total-scale-factor) *",m=t.style;o(this,In)===o(this,Vd)?(m.left=`${(100*h/o(this,fp)).toFixed(2)}%`,m.top=`${(100*f/o(this,hp)).toFixed(2)}%`):(m.left=`${p}${h.toFixed(2)}px)`,m.top=`${p}${f.toFixed(2)}px)`),m.fontSize=`${p}${(o(ut,Ba)*c).toFixed(2)}px)`,m.fontFamily=l,s.fontSize=c,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,o(this,up)&&(t.dataset.fontName=a.fontSubstitutionLoadedName||e.fontName),i!==0&&(s.angle=i*(180/Math.PI));let v=!1;if(e.str.length>1)v=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const A=Math.abs(e.transform[0]),b=Math.abs(e.transform[3]);A!==b&&Math.max(A,b)/Math.min(A,b)>1.5&&(v=!0)}if(v&&(s.canvasWidth=a.vertical?e.height:e.width),o(this,mp).set(t,s),o(this,ji).div=t,o(this,ji).properties=s,E(this,ia,tb).call(this,o(this,ji)),s.hasText&&o(this,In).append(t),s.hasEOL){const A=document.createElement("br");A.setAttribute("role","presentation"),o(this,In).append(A)}},tb=function(e){var l;const{div:t,properties:s,ctx:r}=e,{style:i}=t;let a="";if(o(ut,Ba)>1&&(a=`scale(${1/o(ut,Ba)})`),s.canvasWidth!==0&&s.hasText){const{fontFamily:c}=i,{canvasWidth:d,fontSize:h}=s;E(l=ut,ys,nb).call(l,r,h*o(this,Oa),c);const{width:f}=r.measureText(t.textContent);f>0&&(a=`scaleX(${d*o(this,Oa)/f}) ${a}`)}s.angle!==0&&(a=`rotate(${s.angle}deg) ${a}`),a.length>0&&(i.transform=a)},ys=new WeakSet,wg=function(e=null){let t=o(this,Cl).get(e||(e=""));if(!t){const s=document.createElement("canvas");s.className="hiddenCanvasElement",s.lang=e,document.body.append(s),t=s.getContext("2d",{alpha:!1,willReadFrequently:!0}),o(this,Cl).set(e,t),o(this,yp).set(t,{size:0,family:""})}return t},nb=function(e,t,s){const r=o(this,yp).get(e);t===r.size&&s===r.family||(e.font=`${t}px ${s}`,r.size=t,r.family=s)},cN=function(){if(o(this,Ba)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),y(this,Ba,e.getBoundingClientRect().height),e.remove()},dN=function(e,t,s){const r=o(this,Xd).get(e);if(r)return r;const i=E(this,ys,wg).call(this,s);i.canvas.width=i.canvas.height=RA,E(this,ys,nb).call(this,i,RA,e);const a=i.measureText(""),l=a.fontBoundingBoxAscent,c=Math.abs(a.fontBoundingBoxDescent);i.canvas.width=i.canvas.height=0;let d=.8;return l?d=l/(l+c):(zt.platform.isFirefox&&ae("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),t.ascent?d=t.ascent:t.descent&&(d=1+t.descent)),o(this,Xd).set(e,d),d},k(ut,ys),k(ut,Xd,new Map),k(ut,Cl,new Map),k(ut,yp,new WeakMap),k(ut,Ba,null),k(ut,Kd,new Set),ut);const FM=100;function r1(n={}){typeof n=="string"||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});const e=new sb,{docId:t}=e,s=n.url?WD(n.url):null,r=n.data?GD(n.data):null,i=n.httpHeaders||null,a=n.withCredentials===!0,l=n.password??null,c=n.range instanceof i1?n.range:null,d=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:2**16;let h=n.worker instanceof $u?n.worker:null;const f=n.verbosity,p=typeof n.docBaseUrl=="string"&&!mm(n.docBaseUrl)?n.docBaseUrl:null,m=$m(n.cMapUrl),v=n.cMapPacked!==!1,x=n.CMapReaderFactory||(An?ZD:xA),A=$m(n.iccUrl),b=$m(n.standardFontDataUrl),g=n.StandardFontDataFactory||(An?eM:vA),w=$m(n.wasmUrl),S=n.WasmFactory||(An?tM:bA),C=n.stopAtErrors!==!0,N=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,_=n.isEvalSupported!==!1,P=typeof n.isOffscreenCanvasSupported=="boolean"?n.isOffscreenCanvasSupported:!An,L=typeof n.isImageDecoderSupported=="boolean"?n.isImageDecoderSupported:!An&&(zt.platform.isFirefox||!globalThis.chrome),R=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,M=typeof n.disableFontFace=="boolean"?n.disableFontFace:An,F=n.fontExtraProperties===!0,G=n.enableXfa===!0,U=n.ownerDocument||globalThis.document,ee=n.disableRange===!0,B=n.disableStream===!0,z=n.disableAutoFetch===!0,D=n.pdfBug===!0,$=n.CanvasFactory||(An?JD:KD),V=n.FilterFactory||(An?QD:YD),J=n.enableHWA===!0,W=n.useWasm!==!1,te=c?c.length:n.length??NaN,re=typeof n.useSystemFonts=="boolean"?n.useSystemFonts:!An&&!M,pe=typeof n.useWorkerFetch=="boolean"?n.useWorkerFetch:!!(x===xA&&g===vA&&S===bA&&m&&b&&w&&yh(m,document.baseURI)&&yh(b,document.baseURI)&&yh(w,document.baseURI)),Ee=null;CD(f);const fe={canvasFactory:new $({ownerDocument:U,enableHWA:J}),filterFactory:new V({docId:t,ownerDocument:U}),cMapReaderFactory:pe?null:new x({baseUrl:m,isCompressed:v}),standardFontDataFactory:pe?null:new g({baseUrl:b}),wasmFactory:pe?null:new S({baseUrl:w})};h||(h=$u.create({verbosity:f,port:Bs.workerPort}),e._worker=h);const Gs={docId:t,apiVersion:"5.4.296",data:r,password:l,disableAutoFetch:z,rangeChunkSize:d,length:te,docBaseUrl:p,enableXfa:G,evaluatorOptions:{maxImageSize:N,disableFontFace:M,ignoreErrors:C,isEvalSupported:_,isOffscreenCanvasSupported:P,isImageDecoderSupported:L,canvasMaxAreaInBytes:R,fontExtraProperties:F,useSystemFonts:re,useWasm:W,useWorkerFetch:pe,cMapUrl:m,iccUrl:A,standardFontDataUrl:b,wasmUrl:w}},qs={ownerDocument:U,pdfBug:D,styleElement:Ee,loadingParams:{disableAutoFetch:z,enableXfa:G}};return h.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const $t=h.messageHandler.sendWithPromise("GetDocRequest",Gs,r?[r.buffer]:null);let Ae;if(c)Ae=new vM(c,{disableRange:ee,disableStream:B});else if(!r){if(!s)throw new Error("getDocument - no `url` parameter provided.");const Xs=yh(s)?AM:An?LM:_M;Ae=new Xs({url:s,length:te,httpHeaders:i,withCredentials:a,rangeChunkSize:d,disableRange:ee,disableStream:B})}return $t.then(Xs=>{if(e.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const Ne=new Ah(t,Xs,h.port),Te=new UM(Ne,e,Ae,qs,fe,J);e._transport=Te,Ne.send("Ready",null)})}).catch(e._capability.reject),e}var O0;const B0=class B0{constructor(){I(this,"_capability",Promise.withResolvers());I(this,"_transport",null);I(this,"_worker",null);I(this,"docId",`d${Et(B0,O0)._++}`);I(this,"destroyed",!1);I(this,"onPassword",null);I(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var e,t,s,r;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((t=this._transport)==null?void 0:t.destroy())}catch(i){throw(s=this._worker)!=null&&s.port&&delete this._worker._pendingDestroy,i}this._transport=null,(r=this._worker)==null||r.destroy(),this._worker=null}async getData(){return this._transport.getData()}};O0=new WeakMap,k(B0,O0,0);let sb=B0;var Nl,xp,vp,bp,wp,WA;let i1=(WA=class{constructor(e,t,s=!1,r=null){k(this,Nl,Promise.withResolvers());k(this,xp,[]);k(this,vp,[]);k(this,bp,[]);k(this,wp,[]);this.length=e,this.initialData=t,this.progressiveDone=s,this.contentDispositionFilename=r}addRangeListener(e){o(this,wp).push(e)}addProgressListener(e){o(this,bp).push(e)}addProgressiveReadListener(e){o(this,vp).push(e)}addProgressiveDoneListener(e){o(this,xp).push(e)}onDataRange(e,t){for(const s of o(this,wp))s(e,t)}onDataProgress(e,t){o(this,Nl).promise.then(()=>{for(const s of o(this,bp))s(e,t)})}onDataProgressiveRead(e){o(this,Nl).promise.then(()=>{for(const t of o(this,vp))t(e)})}onDataProgressiveDone(){o(this,Nl).promise.then(()=>{for(const e of o(this,xp))e()})}transportReady(){o(this,Nl).resolve()}requestDataRange(e,t){$e("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}},Nl=new WeakMap,xp=new WeakMap,vp=new WeakMap,bp=new WeakMap,wp=new WeakMap,WA);class OM{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return de(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(e,t){return this._transport.getAnnotationsByType(e,t)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var Pi,_l,Ph;class BM{constructor(e,t,s,r=!1){k(this,_l);k(this,Pi,!1);this._pageIndex=e,this._pageInfo=t,this._transport=s,this._stats=r?new uA:null,this._pdfBug=r,this.commonObjs=s.commonObjs,this.objs=new aN,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:s=0,offsetY:r=0,dontFlip:i=!1}={}){return new pm({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:s,offsetY:r,dontFlip:i})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return de(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,canvas:t=e.canvas,viewport:s,intent:r="display",annotationMode:i=Jr.ENABLE,transform:a=null,background:l=null,optionalContentConfigPromise:c=null,annotationCanvasMap:d=null,pageColors:h=null,printAnnotationStorage:f=null,isEditing:p=!1,recordOperations:m=!1,operationsFilter:v=null}){var L,R,M;(L=this._stats)==null||L.time("Overall");const x=this._transport.getRenderingIntent(r,i,f,p),{renderingIntent:A,cacheKey:b}=x;y(this,Pi,!1),c||(c=this._transport.getOptionalContentConfig(A));let g=this._intentStates.get(b);g||(g=Object.create(null),this._intentStates.set(b,g)),g.streamReaderCancelTimeout&&(clearTimeout(g.streamReaderCancelTimeout),g.streamReaderCancelTimeout=null);const w=!!(A&us.PRINT);g.displayReadyCapability||(g.displayReadyCapability=Promise.withResolvers(),g.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(R=this._stats)==null||R.time("Page Request"),this._pumpOperatorList(x));const S=!!(this._pdfBug&&((M=globalThis.StepperManager)!=null&&M.enabled)),C=!this.recordedBBoxes&&(m||S),N=F=>{var G,U;if(g.renderTasks.delete(_),C){const ee=(G=_.gfx)==null?void 0:G.dependencyTracker.take();ee&&(_.stepper&&_.stepper.setOperatorBBoxes(ee,_.gfx.dependencyTracker.takeDebugMetadata()),m&&(this.recordedBBoxes=ee))}w&&y(this,Pi,!0),E(this,_l,Ph).call(this),F?(_.capability.reject(F),this._abortOperatorList({intentState:g,reason:F instanceof Error?F:new Error(F)})):_.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(U=globalThis.Stats)!=null&&U.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},_=new rb({callback:N,params:{canvas:t,canvasContext:e,dependencyTracker:C?new sM(t,g.operatorList.length,S):null,viewport:s,transform:a,background:l},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:d,operatorList:g.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!w,pdfBug:this._pdfBug,pageColors:h,enableHWA:this._transport.enableHWA,operationsFilter:v});(g.renderTasks||(g.renderTasks=new Set)).add(_);const P=_.task;return Promise.all([g.displayReadyCapability.promise,c]).then(([F,G])=>{var U;if(this.destroyed){N();return}if((U=this._stats)==null||U.time("Rendering"),!(G.renderingIntent&A))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");_.initializeGraphics({transparency:F,optionalContentConfig:G}),_.operatorListChanged()}).catch(N),P}getOperatorList({intent:e="display",annotationMode:t=Jr.ENABLE,printAnnotationStorage:s=null,isEditing:r=!1}={}){var d;function i(){l.operatorList.lastChunk&&(l.opListReadCapability.resolve(l.operatorList),l.renderTasks.delete(c))}const a=this._transport.getRenderingIntent(e,t,s,r,!0);let l=this._intentStates.get(a.cacheKey);l||(l=Object.create(null),this._intentStates.set(a.cacheKey,l));let c;return l.opListReadCapability||(c=Object.create(null),c.operatorListChanged=i,l.opListReadCapability=Promise.withResolvers(),(l.renderTasks||(l.renderTasks=new Set)).add(c),l.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(d=this._stats)==null||d.time("Page Request"),this._pumpOperatorList(a)),l.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(r){return r.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(s=>yf.textContent(s));const t=this.streamTextContent(e);return new Promise(function(s,r){function i(){a.read().then(function({value:c,done:d}){if(d){s(l);return}l.lang??(l.lang=c.lang),Object.assign(l.styles,c.styles),l.items.push(...c.items),i()},r)}const a=t.getReader(),l={items:[],styles:Object.create(null),lang:null};i()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const s of t.renderTasks)e.push(s.completed),s.cancel();return this.objs.clear(),y(this,Pi,!1),Promise.all(e)}cleanup(e=!1){y(this,Pi,!0);const t=E(this,_l,Ph).call(this);return e&&t&&this._stats&&(this._stats=new uA),t}_startRenderPage(e,t){var r,i;const s=this._intentStates.get(t);s&&((r=this._stats)==null||r.timeEnd("Page Request"),(i=s.displayReadyCapability)==null||i.resolve(e))}_renderPageChunk(e,t){for(let s=0,r=e.length;s<r;s++)t.operatorList.fnArray.push(e.fnArray[s]),t.operatorList.argsArray.push(e.argsArray[s]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const s of t.renderTasks)s.operatorListChanged();e.lastChunk&&E(this,_l,Ph).call(this)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:s,modifiedIds:r}){const{map:i,transfer:a}=s,c=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:i,modifiedIds:r},a).getReader(),d=this._intentStates.get(t);d.streamReader=c;const h=()=>{c.read().then(({value:f,done:p})=>{if(p){d.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(f,d),h())},f=>{if(d.streamReader=null,!this._transport.destroyed){if(d.operatorList){d.operatorList.lastChunk=!0;for(const p of d.renderTasks)p.operatorListChanged();E(this,_l,Ph).call(this)}if(d.displayReadyCapability)d.displayReadyCapability.reject(f);else if(d.opListReadCapability)d.opListReadCapability.reject(f);else throw f}})};h()}_abortOperatorList({intentState:e,reason:t,force:s=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!s){if(e.renderTasks.size>0)return;if(t instanceof by){let r=FM;t.extraDelay>0&&t.extraDelay<1e3&&(r+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},r);return}}if(e.streamReader.cancel(new na(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[r,i]of this._intentStates)if(i===e){this._intentStates.delete(r);break}this.cleanup()}}}get stats(){return this._stats}}Pi=new WeakMap,_l=new WeakSet,Ph=function(){if(!o(this,Pi)||this.destroyed)return!1;for(const{renderTasks:e,operatorList:t}of this._intentStates.values())if(e.size>0||!t.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),y(this,Pi,!1),!0};var Ua,ir,Ti,jl,U0,Pl,Tl,En,kg,uN,hN,Th,Yd,Ag;const Ke=class Ke{constructor({name:e=null,port:t=null,verbosity:s=ND()}={}){k(this,En);k(this,Ua,Promise.withResolvers());k(this,ir,null);k(this,Ti,null);k(this,jl,null);if(this.name=e,this.destroyed=!1,this.verbosity=s,t){if(o(Ke,Tl).has(t))throw new Error("Cannot use more than one PDFWorker per port.");o(Ke,Tl).set(t,this),E(this,En,uN).call(this,t)}else E(this,En,hN).call(this)}get promise(){return o(this,Ua).promise}get port(){return o(this,Ti)}get messageHandler(){return o(this,ir)}destroy(){var e,t;this.destroyed=!0,(e=o(this,jl))==null||e.terminate(),y(this,jl,null),o(Ke,Tl).delete(o(this,Ti)),y(this,Ti,null),(t=o(this,ir))==null||t.destroy(),y(this,ir,null)}static create(e){const t=o(this,Tl).get(e==null?void 0:e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new Ke(e)}static get workerSrc(){if(Bs.workerSrc)return Bs.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return de(this,"_setupFakeWorkerGlobal",(async()=>o(this,Yd,Ag)?o(this,Yd,Ag):(await import(this.workerSrc)).WorkerMessageHandler)())}};Ua=new WeakMap,ir=new WeakMap,Ti=new WeakMap,jl=new WeakMap,U0=new WeakMap,Pl=new WeakMap,Tl=new WeakMap,En=new WeakSet,kg=function(){o(this,Ua).resolve(),o(this,ir).send("configure",{verbosity:this.verbosity})},uN=function(e){y(this,Ti,e),y(this,ir,new Ah("main","worker",e)),o(this,ir).on("ready",()=>{}),E(this,En,kg).call(this)},hN=function(){if(o(Ke,Pl)||o(Ke,Yd,Ag)){E(this,En,Th).call(this);return}let{workerSrc:e}=Ke;try{Ke._isSameOrigin(window.location,e)||(e=Ke._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),s=new Ah("main","worker",t),r=()=>{i.abort(),s.destroy(),t.terminate(),this.destroyed?o(this,Ua).reject(new Error("Worker was destroyed")):E(this,En,Th).call(this)},i=new AbortController;t.addEventListener("error",()=>{o(this,jl)||r()},{signal:i.signal}),s.on("test",l=>{if(i.abort(),this.destroyed||!l){r();return}y(this,ir,s),y(this,Ti,t),y(this,jl,t),E(this,En,kg).call(this)}),s.on("ready",l=>{if(i.abort(),this.destroyed){r();return}try{a()}catch{E(this,En,Th).call(this)}});const a=()=>{const l=new Uint8Array;s.send("test",l,[l.buffer])};a();return}catch{vy("The worker has been disabled.")}E(this,En,Th).call(this)},Th=function(){o(Ke,Pl)||(ae("Setting up fake worker."),y(Ke,Pl,!0)),Ke._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){o(this,Ua).reject(new Error("Worker was destroyed"));return}const t=new XD;y(this,Ti,t);const s=`fake${Et(Ke,U0)._++}`,r=new Ah(s+"_worker",s,t);e.setup(r,t),y(this,ir,new Ah(s,s+"_worker",t)),E(this,En,kg).call(this)}).catch(e=>{o(this,Ua).reject(new Error(`Setting up fake worker failed: "${e.message}".`))})},Yd=new WeakSet,Ag=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},k(Ke,Yd),k(Ke,U0,0),k(Ke,Pl,!1),k(Ke,Tl,new WeakMap),An&&(y(Ke,Pl,!0),Bs.workerSrc||(Bs.workerSrc="./pdf.worker.mjs")),Ke._isSameOrigin=(e,t)=>{const s=URL.parse(e);if(!(s!=null&&s.origin)||s.origin==="null")return!1;const r=new URL(t,s);return s.origin===r.origin},Ke._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))},Ke.fromPort=e=>{if(ID("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return Ke.create(e)};let $u=Ke;var Ri,zr,Qd,Jd,Li,Rl,Rh;class UM{constructor(e,t,s,r,i,a){k(this,Rl);k(this,Ri,new Map);k(this,zr,new Map);k(this,Qd,new Map);k(this,Jd,new Map);k(this,Li,null);this.messageHandler=e,this.loadingTask=t,this.commonObjs=new aN,this.fontLoader=new HD({ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this.loadingParams=r.loadingParams,this._params=r,this.canvasFactory=i.canvasFactory,this.filterFactory=i.filterFactory,this.cMapReaderFactory=i.cMapReaderFactory,this.standardFontDataFactory=i.standardFontDataFactory,this.wasmFactory=i.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=s,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=a,this.setupMessageHandler()}get annotationStorage(){return de(this,"annotationStorage",new t1)}getRenderingIntent(e,t=Jr.ENABLE,s=null,r=!1,i=!1){let a=us.DISPLAY,l=zv;switch(e){case"any":a=us.ANY;break;case"display":break;case"print":a=us.PRINT;break;default:ae(`getRenderingIntent - invalid intent: ${e}`)}const c=a&us.PRINT&&s instanceof HC?s:this.annotationStorage;switch(t){case Jr.DISABLE:a+=us.ANNOTATIONS_DISABLE;break;case Jr.ENABLE:break;case Jr.ENABLE_FORMS:a+=us.ANNOTATIONS_FORMS;break;case Jr.ENABLE_STORAGE:a+=us.ANNOTATIONS_STORAGE,l=c.serializable;break;default:ae(`getRenderingIntent - invalid annotationMode: ${t}`)}r&&(a+=us.IS_EDITING),i&&(a+=us.OPLIST);const{ids:d,hash:h}=c.modifiedIds,f=[a,l.hash,h];return{renderingIntent:a,cacheKey:f.join("_"),annotationStorageSerializable:l,modifiedIds:d}}destroy(){var s;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(s=o(this,Li))==null||s.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const r of o(this,zr).values())e.push(r._destroy());o(this,zr).clear(),o(this,Qd).clear(),o(this,Jd).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{var r,i;this.commonObjs.clear(),this.fontLoader.clear(),o(this,Ri).clear(),this.filterFactory.destroy(),bf.cleanup(),(r=this._networkStream)==null||r.cancelAllRequests(new na("Worker was terminated.")),(i=this.messageHandler)==null||i.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(s,r)=>{ve(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=i=>{this._lastProgress={loaded:i.loaded,total:i.total}},r.onPull=()=>{this._fullReader.read().then(function({value:i,done:a}){if(a){r.close();return}ve(i instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(i),1,[i])}).catch(i=>{r.error(i)})},r.onCancel=i=>{this._fullReader.cancel(i),r.ready.catch(a=>{if(!this.destroyed)throw a})}}),e.on("ReaderHeadersReady",async s=>{var l;await this._fullReader.headersReady;const{isStreamingSupported:r,isRangeSupported:i,contentLength:a}=this._fullReader;return(!r||!i)&&(this._lastProgress&&((l=t.onProgress)==null||l.call(t,this._lastProgress)),this._fullReader.onProgress=c=>{var d;(d=t.onProgress)==null||d.call(t,{loaded:c.loaded,total:c.total})}),{isStreamingSupported:r,isRangeSupported:i,contentLength:a}}),e.on("GetRangeReader",(s,r)=>{ve(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const i=this._networkStream.getRangeReader(s.begin,s.end);if(!i){r.close();return}r.onPull=()=>{i.read().then(function({value:a,done:l}){if(l){r.close();return}ve(a instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{r.error(a)})},r.onCancel=a=>{i.cancel(a),r.ready.catch(l=>{if(!this.destroyed)throw l})}}),e.on("GetDoc",({pdfInfo:s})=>{this._numPages=s.numPages,this._htmlForXfa=s.htmlForXfa,delete s.htmlForXfa,t._capability.resolve(new OM(s,this))}),e.on("DocException",s=>{t._capability.reject(Pn(s))}),e.on("PasswordRequest",s=>{y(this,Li,Promise.withResolvers());try{if(!t.onPassword)throw Pn(s);const r=i=>{i instanceof Error?o(this,Li).reject(i):o(this,Li).resolve({password:i})};t.onPassword(r,s.code)}catch(r){o(this,Li).reject(r)}return o(this,Li).promise}),e.on("DataLoaded",s=>{var r;(r=t.onProgress)==null||r.call(t,{loaded:s.length,total:s.length}),this.downloadInfoCapability.resolve(s)}),e.on("StartRenderPage",s=>{if(this.destroyed)return;o(this,zr).get(s.pageIndex)._startRenderPage(s.transparency,s.cacheKey)}),e.on("commonobj",([s,r,i])=>{var a;if(this.destroyed||this.commonObjs.has(s))return null;switch(r){case"Font":if("error"in i){const f=i.error;ae(`Error during font loading: ${f}`),this.commonObjs.resolve(s,f);break}const l=new Jv(i),c=this._params.pdfBug&&((a=globalThis.FontInspector)!=null&&a.enabled)?(f,p)=>globalThis.FontInspector.fontAdded(f,p):null,d=new VD(l,c,i.extra,i.charProcOperatorList);this.fontLoader.bind(d).catch(()=>e.sendWithPromise("FontFallback",{id:s})).finally(()=>{!d.fontExtraProperties&&d.data&&d.clearData(),this.commonObjs.resolve(s,d)});break;case"CopyLocalImage":const{imageRef:h}=i;ve(h,"The imageRef must be defined.");for(const f of o(this,zr).values())for(const[,p]of f.objs)if((p==null?void 0:p.ref)===h)return p.dataLen?(this.commonObjs.resolve(s,structuredClone(p)),p.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(s,i);break;default:throw new Error(`Got unknown common object type ${r}`)}return null}),e.on("obj",([s,r,i,a])=>{var c;if(this.destroyed)return;const l=o(this,zr).get(r);if(!l.objs.has(s)){if(l._intentStates.size===0){(c=a==null?void 0:a.bitmap)==null||c.close();return}switch(i){case"Image":case"Pattern":l.objs.resolve(s,a);break;default:throw new Error(`Got unknown object type ${i}`)}}}),e.on("DocProgress",s=>{var r;this.destroyed||(r=t.onProgress)==null||r.call(t,{loaded:s.loaded,total:s.total})}),e.on("FetchBinaryData",async s=>{if(this.destroyed)throw new Error("Worker was destroyed.");const r=this[s.type];if(!r)throw new Error(`${s.type} not initialized, see the \`useWorkerFetch\` parameter.`);return r.fetch(s)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var s;this.annotationStorage.size<=0&&ae("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((s=this._fullReader)==null?void 0:s.filename)??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,s=o(this,Qd).get(t);if(s)return s;const r=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(i=>{if(this.destroyed)throw new Error("Transport destroyed");i.refStr&&o(this,Jd).set(i.refStr,e);const a=new BM(t,i,this,this._params.pdfBug);return o(this,zr).set(t,a),a});return o(this,Qd).set(t,r),r}getPageIndex(e){return $v(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return E(this,Rl,Rh).call(this,"GetFieldObjects")}hasJSActions(){return E(this,Rl,Rh).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(e,t){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:e,pageIndexesToSkip:t})}getDocJSActions(){return E(this,Rl,Rh).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return E(this,Rl,Rh).call(this,"GetOptionalContentConfig").then(t=>new xM(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=o(this,Ri).get(e);if(t)return t;const s=this.messageHandler.sendWithPromise(e,null).then(r=>{var i,a;return{info:r[0],metadata:r[1]?new gM(r[1]):null,contentDispositionFilename:((i=this._fullReader)==null?void 0:i.filename)??null,contentLength:((a=this._fullReader)==null?void 0:a.contentLength)??null}});return o(this,Ri).set(e,s),s}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of o(this,zr).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),o(this,Ri).clear(),this.filterFactory.destroy(!0),bf.cleanup()}}cachedPageNumber(e){if(!$v(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return o(this,Jd).get(t)??null}}Ri=new WeakMap,zr=new WeakMap,Qd=new WeakMap,Jd=new WeakMap,Li=new WeakMap,Rl=new WeakSet,Rh=function(e,t=null){const s=o(this,Ri).get(e);if(s)return s;const r=this.messageHandler.sendWithPromise(e,t);return o(this,Ri).set(e,r),r};var za;class zM{constructor(e){k(this,za,null);I(this,"onContinue",null);I(this,"onError",null);y(this,za,e)}get promise(){return o(this,za).capability.promise}cancel(e=0){o(this,za).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=o(this,za).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=o(this,za);return e.form||e.canvas&&(t==null?void 0:t.size)>0}}za=new WeakMap;var $a,Ll;const Ho=class Ho{constructor({callback:e,params:t,objs:s,commonObjs:r,annotationCanvasMap:i,operatorList:a,pageIndex:l,canvasFactory:c,filterFactory:d,useRequestAnimationFrame:h=!1,pdfBug:f=!1,pageColors:p=null,enableHWA:m=!1,operationsFilter:v=null}){k(this,$a,null);this.callback=e,this.params=t,this.objs=s,this.commonObjs=r,this.annotationCanvasMap=i,this.operatorListIdx=null,this.operatorList=a,this._pageIndex=l,this.canvasFactory=c,this.filterFactory=d,this._pdfBug=f,this.pageColors=p,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=h===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new zM(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvas,this._canvasContext=t.canvas?null:t.canvasContext,this._enableHWA=m,this._dependencyTracker=t.dependencyTracker,this._operationsFilter=v}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){var c,d;if(this.cancelled)return;if(this._canvas){if(o(Ho,Ll).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");o(Ho,Ll).add(this._canvas)}this._pdfBug&&((c=globalThis.StepperManager)!=null&&c.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:s,transform:r,background:i,dependencyTracker:a}=this.params,l=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new sd(l,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors,a),this.gfx.beginDrawing({transform:r,viewport:s,transparency:e,background:i}),this.operatorListIdx=0,this.graphicsReady=!0,(d=this.graphicsReadyCallback)==null||d.call(this)}cancel(e=null,t=0){var s,r,i;this.running=!1,this.cancelled=!0,(s=this.gfx)==null||s.endDrawing(),o(this,$a)&&(window.cancelAnimationFrame(o(this,$a)),y(this,$a,null)),o(Ho,Ll).delete(this._canvas),e||(e=new by(`Rendering cancelled, page ${this._pageIndex+1}`,t)),this.callback(e),(i=(r=this.task).onError)==null||i.call(r,e)}operatorListChanged(){var e,t;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.gfx.dependencyTracker)==null||e.growOperationsCount(this.operatorList.fnArray.length),(t=this.stepper)==null||t.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?y(this,$a,window.requestAnimationFrame(()=>{y(this,$a,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),o(Ho,Ll).delete(this._canvas),this.callback())))}};$a=new WeakMap,Ll=new WeakMap,k(Ho,Ll,new WeakSet);let rb=Ho;const a1="5.4.296",fN="f56dc8601";var Zn,Dl,Zd,_t,kp,eu,Di,Ap,Ha,ar,Sp,Ie,ib,ab,ob,Bo,pN,ua;const Tn=class Tn{constructor({editor:e=null,uiManager:t=null}){k(this,Ie);k(this,Zn,null);k(this,Dl,null);k(this,Zd);k(this,_t,null);k(this,kp,!1);k(this,eu,!1);k(this,Di,null);k(this,Ap);k(this,Ha,null);k(this,ar,null);var s,r;e?(y(this,eu,!1),y(this,Di,e)):y(this,eu,!0),y(this,ar,(e==null?void 0:e._uiManager)||t),y(this,Ap,o(this,ar)._eventBus),y(this,Zd,((s=e==null?void 0:e.color)==null?void 0:s.toUpperCase())||((r=o(this,ar))==null?void 0:r.highlightColors.values().next().value)||"#FFFF98"),o(Tn,Sp)||y(Tn,Sp,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return de(this,"_keyboardManager",new gm([[["Escape","mac+Escape"],Tn.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Tn.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Tn.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Tn.prototype._moveToPrevious],[["Home","mac+Home"],Tn.prototype._moveToBeginning],[["End","mac+End"],Tn.prototype._moveToEnd]]))}renderButton(){const e=y(this,Zn,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.ariaHasPopup="true",o(this,Di)&&(e.ariaControls=`${o(this,Di).id}_colorpicker_dropdown`);const t=o(this,ar)._signal;e.addEventListener("click",E(this,Ie,Bo).bind(this),{signal:t}),e.addEventListener("keydown",E(this,Ie,ob).bind(this),{signal:t});const s=y(this,Dl,document.createElement("span"));return s.className="swatch",s.ariaHidden="true",s.style.backgroundColor=o(this,Zd),e.append(s),e}renderMainDropdown(){const e=y(this,_t,E(this,Ie,ib).call(this));return e.ariaOrientation="horizontal",e.ariaLabelledBy="highlightColorPickerLabel",e}_colorSelectFromKeyboard(e){if(e.target===o(this,Zn)){E(this,Ie,Bo).call(this,e);return}const t=e.target.getAttribute("data-color");t&&E(this,Ie,ab).call(this,t,e)}_moveToNext(e){var t,s;if(!o(this,Ie,ua)){E(this,Ie,Bo).call(this,e);return}if(e.target===o(this,Zn)){(t=o(this,_t).firstChild)==null||t.focus();return}(s=e.target.nextSibling)==null||s.focus()}_moveToPrevious(e){var t,s;if(e.target===((t=o(this,_t))==null?void 0:t.firstChild)||e.target===o(this,Zn)){o(this,Ie,ua)&&this._hideDropdownFromKeyboard();return}o(this,Ie,ua)||E(this,Ie,Bo).call(this,e),(s=e.target.previousSibling)==null||s.focus()}_moveToBeginning(e){var t;if(!o(this,Ie,ua)){E(this,Ie,Bo).call(this,e);return}(t=o(this,_t).firstChild)==null||t.focus()}_moveToEnd(e){var t;if(!o(this,Ie,ua)){E(this,Ie,Bo).call(this,e);return}(t=o(this,_t).lastChild)==null||t.focus()}hideDropdown(){var e,t;(e=o(this,_t))==null||e.classList.add("hidden"),o(this,Zn).ariaExpanded="false",(t=o(this,Ha))==null||t.abort(),y(this,Ha,null)}_hideDropdownFromKeyboard(){var e;if(!o(this,eu)){if(!o(this,Ie,ua)){(e=o(this,Di))==null||e.unselect();return}this.hideDropdown(),o(this,Zn).focus({preventScroll:!0,focusVisible:o(this,kp)})}}updateColor(e){if(o(this,Dl)&&(o(this,Dl).style.backgroundColor=e),!o(this,_t))return;const t=o(this,ar).highlightColors.values();for(const s of o(this,_t).children)s.ariaSelected=t.next().value===e.toUpperCase()}destroy(){var e,t;(e=o(this,Zn))==null||e.remove(),y(this,Zn,null),y(this,Dl,null),(t=o(this,_t))==null||t.remove(),y(this,_t,null)}};Zn=new WeakMap,Dl=new WeakMap,Zd=new WeakMap,_t=new WeakMap,kp=new WeakMap,eu=new WeakMap,Di=new WeakMap,Ap=new WeakMap,Ha=new WeakMap,ar=new WeakMap,Sp=new WeakMap,Ie=new WeakSet,ib=function(){const e=document.createElement("div"),t=o(this,ar)._signal;e.addEventListener("contextmenu",vs,{signal:t}),e.className="dropdown",e.role="listbox",e.ariaMultiSelectable="false",e.ariaOrientation="vertical",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),o(this,Di)&&(e.id=`${o(this,Di).id}_colorpicker_dropdown`);for(const[s,r]of o(this,ar).highlightColors){const i=document.createElement("button");i.tabIndex="0",i.role="option",i.setAttribute("data-color",r),i.title=s,i.setAttribute("data-l10n-id",o(Tn,Sp)[s]);const a=document.createElement("span");i.append(a),a.className="swatch",a.style.backgroundColor=r,i.ariaSelected=r===o(this,Zd),i.addEventListener("click",E(this,Ie,ab).bind(this,r),{signal:t}),e.append(i)}return e.addEventListener("keydown",E(this,Ie,ob).bind(this),{signal:t}),e},ab=function(e,t){t.stopPropagation(),o(this,Ap).dispatch("switchannotationeditorparams",{source:this,type:ye.HIGHLIGHT_COLOR,value:e}),this.updateColor(e)},ob=function(e){Tn._keyboardManager.exec(this,e)},Bo=function(e){if(o(this,Ie,ua)){this.hideDropdown();return}if(y(this,kp,e.detail===0),o(this,Ha)||(y(this,Ha,new AbortController),window.addEventListener("pointerdown",E(this,Ie,pN).bind(this),{signal:o(this,ar).combinedSignal(o(this,Ha))})),o(this,Zn).ariaExpanded="true",o(this,_t)){o(this,_t).classList.remove("hidden");return}const t=y(this,_t,E(this,Ie,ib).call(this));o(this,Zn).append(t)},pN=function(e){var t;(t=o(this,_t))!=null&&t.contains(e.target)||this.hideDropdown()},ua=function(){return o(this,_t)&&!o(this,_t).classList.contains("hidden")},k(Tn,Sp,null);let wf=Tn;var $r,Ep,tu,Cp;const Vo=class Vo{constructor(e){k(this,$r,null);k(this,Ep,null);k(this,tu,null);y(this,Ep,e),y(this,tu,e._uiManager),o(Vo,Cp)||y(Vo,Cp,Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"}))}renderButton(){if(o(this,$r))return o(this,$r);const{editorType:e,colorType:t,colorValue:s}=o(this,Ep),r=y(this,$r,document.createElement("input"));return r.type="color",r.value=s||"#000000",r.className="basicColorPicker",r.tabIndex=0,r.setAttribute("data-l10n-id",o(Vo,Cp)[e]),r.addEventListener("input",()=>{o(this,tu).updateParams(t,r.value)},{signal:o(this,tu)._signal}),r}update(e){o(this,$r)&&(o(this,$r).value=e)}destroy(){var e;(e=o(this,$r))==null||e.remove(),y(this,$r,null)}hideDropdown(){}};$r=new WeakMap,Ep=new WeakMap,tu=new WeakMap,Cp=new WeakMap,k(Vo,Cp,null);let A0=Vo;function LA(n){return Math.floor(Math.max(0,Math.min(1,n))*255).toString(16).padStart(2,"0")}function uh(n){return Math.max(0,Math.min(255,255*n))}class DA{static CMYK_G([e,t,s,r]){return["G",1-Math.min(1,.3*e+.59*s+.11*t+r)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=uh(e),[e,e,e]}static G_HTML([e]){const t=LA(e);return`#${t}${t}${t}`}static RGB_G([e,t,s]){return["G",.3*e+.59*t+.11*s]}static RGB_rgb(e){return e.map(uh)}static RGB_HTML(e){return`#${e.map(LA).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,s,r]){return["RGB",1-Math.min(1,e+r),1-Math.min(1,s+r),1-Math.min(1,t+r)]}static CMYK_rgb([e,t,s,r]){return[uh(1-Math.min(1,e+r)),uh(1-Math.min(1,s+r)),uh(1-Math.min(1,t+r))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,s]){const r=1-e,i=1-t,a=1-s,l=Math.min(r,i,a);return["CMYK",r,i,a,l]}}class $M{create(e,t,s=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),s||(r.setAttribute("width",`${e}px`),r.setAttribute("height",`${t}px`)),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox",`0 0 ${e} ${t}`),r}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){$e("Abstract method `_createSVG` called.")}}class kf extends $M{_createSVG(e){return document.createElementNS(ri,e)}}const HM=9,gc=new WeakSet,VM=new Date().getTimezoneOffset()*60*1e3;class MA{static create(e){switch(e.data.annotationType){case pt.LINK:return new o1(e);case pt.TEXT:return new GM(e);case pt.WIDGET:switch(e.data.fieldType){case"Tx":return new qM(e);case"Btn":return e.data.radioButton?new yN(e):e.data.checkBox?new KM(e):new YM(e);case"Ch":return new QM(e);case"Sig":return new XM(e)}return new wc(e);case pt.POPUP:return new cb(e);case pt.FREETEXT:return new kN(e);case pt.LINE:return new ZM(e);case pt.SQUARE:return new eI(e);case pt.CIRCLE:return new tI(e);case pt.POLYLINE:return new AN(e);case pt.CARET:return new sI(e);case pt.INK:return new l1(e);case pt.POLYGON:return new nI(e);case pt.HIGHLIGHT:return new SN(e);case pt.UNDERLINE:return new rI(e);case pt.SQUIGGLY:return new iI(e);case pt.STRIKEOUT:return new aI(e);case pt.STAMP:return new EN(e);case pt.FILEATTACHMENT:return new oI(e);default:return new it(e)}}}var Ml,nu,Ls,Np,lb;const g1=class g1{constructor(e,{isRenderable:t=!1,ignoreBorder:s=!1,createQuadrilaterals:r=!1}={}){k(this,Np);k(this,Ml,null);k(this,nu,!1);k(this,Ls,null);this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableComment=e.enableComment,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(s)),r&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:e,richText:t}){return!!(e!=null&&e.str||t!=null&&t.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return g1._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){var s;const{data:e}=this,t=(s=this.annotationStorage)==null?void 0:s.getEditor(e.id);return t?t.getData():e}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){var l;const e=(l=this.annotationStorage)==null?void 0:l.getEditor(this.data.id);if(e)return e.commentButtonPositionInPage;const{quadPoints:t,inkLists:s,rect:r}=this.data;let i=-1/0,a=-1/0;if((t==null?void 0:t.length)>=8){for(let c=0;c<t.length;c+=8)t[c+1]>a?(a=t[c+1],i=t[c+2]):t[c+1]===a&&(i=Math.max(i,t[c+2]));return[i,a]}if((s==null?void 0:s.length)>=1){for(const c of s)for(let d=0,h=c.length;d<h;d+=2)c[d+1]>a?(a=c[d+1],i=c[d]):c[d+1]===a&&(i=Math.max(i,c[d]));if(i!==1/0)return[i,a]}return r?[r[2],r[3]]:null}_normalizePoint(e){const{page:{view:t},viewport:{rawDims:{pageWidth:s,pageHeight:r,pageX:i,pageY:a}}}=this.parent;return e[1]=t[3]-e[1]+t[1],e[0]=100*(e[0]-i)/s,e[1]=100*(e[1]-a)/r,e}get commentText(){var t,s,r;const{data:e}=this;return((s=(t=this.annotationStorage.getRawValue(`${mf}${e.id}`))==null?void 0:t.popup)==null?void 0:s.contents)||((r=e.contentsObj)==null?void 0:r.str)||""}set commentText(e){const{data:t}=this,s={deleted:!e,contents:e||""};this.annotationStorage.updateEditor(t.id,{popup:s})||this.annotationStorage.setValue(`${mf}${t.id}`,{id:t.id,annotationType:t.annotationType,pageIndex:this.parent.page._pageIndex,popup:s,popupRef:t.popupRef,modificationDate:new Date}),e||this.removePopup()}removePopup(){var e,t;(t=((e=o(this,Ls))==null?void 0:e.popup)||this.popup)==null||t.remove(),y(this,Ls,this.popup=null)}updateEdited(e){var i;if(!this.container)return;e.rect&&(o(this,Ml)||y(this,Ml,{rect:this.data.rect.slice(0)}));const{rect:t,popup:s}=e;t&&E(this,Np,lb).call(this,t);let r=((i=o(this,Ls))==null?void 0:i.popup)||this.popup;!r&&(s!=null&&s.text)&&(this._createPopup(s),r=o(this,Ls).popup),r&&(r.updateEdited(e),s!=null&&s.deleted&&(r.remove(),y(this,Ls,null),this.popup=null))}resetEdited(){var e;o(this,Ml)&&(E(this,Np,lb).call(this,o(this,Ml).rect),(e=o(this,Ls))==null||e.popup.resetEdited(),y(this,Ml,null))}_createContainer(e){const{data:t,parent:{page:s,viewport:r}}=this,i=document.createElement("section");i.setAttribute("data-annotation-id",t.id),!(this instanceof wc)&&!(this instanceof o1)&&(i.tabIndex=0);const{style:a}=i;if(a.zIndex=this.parent.zIndex,this.parent.zIndex+=2,t.alternativeText&&(i.title=t.alternativeText),t.noRotate&&i.classList.add("norotate"),!t.rect||this instanceof cb){const{rotation:x}=t;return!t.hasOwnCanvas&&x!==0&&this.setRotation(x,i),i}const{width:l,height:c}=this;if(!e&&t.borderStyle.width>0){a.borderWidth=`${t.borderStyle.width}px`;const x=t.borderStyle.horizontalCornerRadius,A=t.borderStyle.verticalCornerRadius;if(x>0||A>0){const g=`calc(${x}px * var(--total-scale-factor)) / calc(${A}px * var(--total-scale-factor))`;a.borderRadius=g}else if(this instanceof yN){const g=`calc(${l}px * var(--total-scale-factor)) / calc(${c}px * var(--total-scale-factor))`;a.borderRadius=g}switch(t.borderStyle.style){case Cc.SOLID:a.borderStyle="solid";break;case Cc.DASHED:a.borderStyle="dashed";break;case Cc.BEVELED:ae("Unimplemented border style: beveled");break;case Cc.INSET:ae("Unimplemented border style: inset");break;case Cc.UNDERLINE:a.borderBottomStyle="solid";break}const b=t.borderColor||null;b?(y(this,nu,!0),a.borderColor=K.makeHexColor(b[0]|0,b[1]|0,b[2]|0)):a.borderWidth=0}const d=K.normalizeRect([t.rect[0],s.view[3]-t.rect[1]+s.view[1],t.rect[2],s.view[3]-t.rect[3]+s.view[1]]),{pageWidth:h,pageHeight:f,pageX:p,pageY:m}=r.rawDims;a.left=`${100*(d[0]-p)/h}%`,a.top=`${100*(d[1]-m)/f}%`;const{rotation:v}=t;return t.hasOwnCanvas||v===0?(a.width=`${100*l/h}%`,a.height=`${100*c/f}%`):this.setRotation(v,i),i}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:s,pageHeight:r}=this.parent.viewport.rawDims;let{width:i,height:a}=this;e%180!==0&&([i,a]=[a,i]),t.style.width=`${100*i/s}%`,t.style.height=`${100*a/r}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,s,r)=>{const i=r.detail[t],a=i[0],l=i.slice(1);r.target.style[s]=DA[`${a}_HTML`](l),this.annotationStorage.setValue(this.data.id,{[s]:DA[`${a}_rgb`](l)})};return de(this,"_commonActions",{display:t=>{const{display:s}=t.detail,r=s%2===1;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:r,noPrint:s===1||s===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:s}=t.detail;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:s,noView:s})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const s=t.detail.rotation;this.setRotation(s),this.annotationStorage.setValue(this.data.id,{rotation:s})}})}_dispatchEventFromSandbox(e,t){const s=this._commonActions;for(const r of Object.keys(t.detail)){const i=e[r]||s[r];i==null||i(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const s=this._commonActions;for(const[r,i]of Object.entries(t)){const a=s[r];if(a){const l={detail:{[r]:i},target:e};a(l),delete t[r]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,s,r,i]=this.data.rect.map(x=>Math.fround(x));if(e.length===8){const[x,A,b,g]=e.subarray(2,6);if(r===x&&i===A&&t===b&&s===g)return}const{style:a}=this.container;let l;if(o(this,nu)){const{borderColor:x,borderWidth:A}=a;a.borderWidth=0,l=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${x}" stroke-width="${A}">`],this.container.classList.add("hasBorder")}const c=r-t,d=i-s,{svgFactory:h}=this,f=h.createElement("svg");f.classList.add("quadrilateralsContainer"),f.setAttribute("width",0),f.setAttribute("height",0),f.role="none";const p=h.createElement("defs");f.append(p);const m=h.createElement("clipPath"),v=`clippath_${this.data.id}`;m.setAttribute("id",v),m.setAttribute("clipPathUnits","objectBoundingBox"),p.append(m);for(let x=2,A=e.length;x<A;x+=8){const b=e[x],g=e[x+1],w=e[x+2],S=e[x+3],C=h.createElement("rect"),N=(w-t)/c,_=(i-g)/d,P=(b-w)/c,L=(g-S)/d;C.setAttribute("x",N),C.setAttribute("y",_),C.setAttribute("width",P),C.setAttribute("height",L),m.append(C),l==null||l.push(`<rect vector-effect="non-scaling-stroke" x="${N}" y="${_}" width="${P}" height="${L}"/>`)}o(this,nu)&&(l.push("</g></svg>')"),a.backgroundImage=l.join("")),this.container.append(f),this.container.style.clipPath=`url(#${v})`}_createPopup(e=null){const{data:t}=this;let s,r;e?(s={str:e.text},r=e.date):(s=t.contentsObj,r=t.modificationDate);const i=y(this,Ls,new cb({data:{color:t.color,titleObj:t.titleObj,modificationDate:r,contentsObj:s,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]}));this.parent._commentManager||this.parent.div.append(i.render())}get hasPopupElement(){return!!(o(this,Ls)||this.popup||this.data.popupRef)}get extraPopupElement(){return o(this,Ls)}render(){$e("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const s=[];if(this._fieldObjects){const r=this._fieldObjects[e];if(r)for(const{page:i,id:a,exportValues:l}of r){if(i===-1||a===t)continue;const c=typeof l=="string"?l:null,d=document.querySelector(`[data-element-id="${a}"]`);if(d&&!gc.has(d)){ae(`_getElementsByName - element not allowed: ${a}`);continue}s.push({id:a,exportValue:c,domElement:d})}return s}for(const r of document.getElementsByName(e)){const{exportValue:i}=r,a=r.getAttribute("data-element-id");a!==t&&gc.has(r)&&s.push({id:a,exportValue:i,domElement:r})}return s}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var s;(s=this.linkService.eventBus)==null||s.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};Ml=new WeakMap,nu=new WeakMap,Ls=new WeakMap,Np=new WeakSet,lb=function(e){const{container:{style:t},data:{rect:s,rotation:r},parent:{viewport:{rawDims:{pageWidth:i,pageHeight:a,pageX:l,pageY:c}}}}=this;s==null||s.splice(0,4,...e),t.left=`${100*(e[0]-l)/i}%`,t.top=`${100*(a-e[3]+c)/a}%`,r===0?(t.width=`${100*(e[2]-e[0])/i}%`,t.height=`${100*(e[3]-e[1])/a}%`):this.setRotation(r)};let it=g1;class WM extends it{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.editor=e.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:e}=this;e.hasComment&&(this._createPopup(e.comment),this.extraPopupElement.popup.renderCommentButton())}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(e){this.editor.comment=e,e||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.container.remove(),this.container=null,this.removePopup()}}var ps,Uo,mN,gN;class o1 extends it{constructor(t,s=null){super(t,{isRenderable:!0,ignoreBorder:!!(s!=null&&s.ignoreBorder),createQuadrilaterals:!0});k(this,ps);this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:s}=this,r=document.createElement("a");r.setAttribute("data-element-id",t.id);let i=!1;return t.url?(s.addLinkAttributes(r,t.url,t.newWindow),i=!0):t.action?(this._bindNamedAction(r,t.action,t.overlaidText),i=!0):t.attachment?(E(this,ps,mN).call(this,r,t.attachment,t.overlaidText,t.attachmentDest),i=!0):t.setOCGState?(E(this,ps,gN).call(this,r,t.setOCGState,t.overlaidText),i=!0):t.dest?(this._bindLink(r,t.dest,t.overlaidText),i=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(r,t),i=!0),t.resetForm?(this._bindResetFormAction(r,t.resetForm),i=!0):this.isTooltipOnly&&!i&&(this._bindLink(r,""),i=!0)),this.container.classList.add("linkAnnotation"),i&&this.container.append(r),this.container}_bindLink(t,s,r=""){t.href=this.linkService.getDestinationHash(s),t.onclick=()=>(s&&this.linkService.goToDestination(s),!1),(s||s==="")&&E(this,ps,Uo).call(this),r&&(t.title=r)}_bindNamedAction(t,s,r=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(s),!1),r&&(t.title=r),E(this,ps,Uo).call(this)}_bindJSAction(t,s){t.href=this.linkService.getAnchorUrl("");const r=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const i of Object.keys(s.actions)){const a=r.get(i);a&&(t[a]=()=>{var l;return(l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s.id,name:i}}),!1})}s.overlaidText&&(t.title=s.overlaidText),t.onclick||(t.onclick=()=>!1),E(this,ps,Uo).call(this)}_bindResetFormAction(t,s){const r=t.onclick;if(r||(t.href=this.linkService.getAnchorUrl("")),E(this,ps,Uo).call(this),!this._fieldObjects){ae('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),r||(t.onclick=()=>!1);return}t.onclick=()=>{var f;r==null||r();const{fields:i,refs:a,include:l}=s,c=[];if(i.length!==0||a.length!==0){const p=new Set(a);for(const m of i){const v=this._fieldObjects[m]||[];for(const{id:x}of v)p.add(x)}for(const m of Object.values(this._fieldObjects))for(const v of m)p.has(v.id)===l&&c.push(v)}else for(const p of Object.values(this._fieldObjects))c.push(...p);const d=this.annotationStorage,h=[];for(const p of c){const{id:m}=p;switch(h.push(m),p.type){case"text":{const x=p.defaultValue||"";d.setValue(m,{value:x});break}case"checkbox":case"radiobutton":{const x=p.defaultValue===p.exportValues;d.setValue(m,{value:x});break}case"combobox":case"listbox":{const x=p.defaultValue||"";d.setValue(m,{value:x});break}default:continue}const v=document.querySelector(`[data-element-id="${m}"]`);if(v){if(!gc.has(v)){ae(`_bindResetFormAction - element not allowed: ${m}`);continue}}else continue;v.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((f=this.linkService.eventBus)==null||f.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:h,name:"ResetForm"}})),!1}}}ps=new WeakSet,Uo=function(){this.container.setAttribute("data-internal-link","")},mN=function(t,s,r="",i=null){t.href=this.linkService.getAnchorUrl(""),s.description?t.title=s.description:r&&(t.title=r),t.onclick=()=>{var a;return(a=this.downloadManager)==null||a.openOrDownloadData(s.content,s.filename,i),!1},E(this,ps,Uo).call(this)},gN=function(t,s,r=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(s),!1),r&&(t.title=r),E(this,ps,Uo).call(this)};class GM extends it{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class wc extends it{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&(((t=e.previousSibling)==null?void 0:t.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return zt.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,s,r,i){s.includes("mouse")?e.addEventListener(s,a=>{var l;(l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:i(a),shift:a.shiftKey,modifier:this._getKeyModifier(a)}})}):e.addEventListener(s,a=>{var l;if(s==="blur"){if(!t.focused||!a.relatedTarget)return;t.focused=!1}else if(s==="focus"){if(t.focused)return;t.focused=!0}i&&((l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:i(a)}}))})}_setEventListeners(e,t,s,r){var i,a,l;for(const[c,d]of s)(d==="Action"||(i=this.data.actions)!=null&&i[d])&&((d==="Focus"||d==="Blur")&&(t||(t={focused:!1})),this._setEventListener(e,t,c,d,r),d==="Focus"&&!((a=this.data.actions)!=null&&a.Blur)?this._setEventListener(e,t,"blur","Blur",null):d==="Blur"&&!((l=this.data.actions)!=null&&l.Focus)&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":K.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:s}=this.data.defaultAppearanceData,r=this.data.defaultAppearanceData.fontSize||HM,i=e.style;let a;const l=2,c=d=>Math.round(10*d)/10;if(this.data.multiLine){const d=Math.abs(this.data.rect[3]-this.data.rect[1]-l),h=Math.round(d/(ux*r))||1,f=d/h;a=Math.min(r,c(f/ux))}else{const d=Math.abs(this.data.rect[3]-this.data.rect[1]-l);a=Math.min(r,c(d/ux))}i.fontSize=`calc(${a}px * var(--total-scale-factor))`,i.color=K.makeHexColor(s[0],s[1],s[2]),this.data.textAlignment!==null&&(i.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class qM extends wc{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,s,r){const i=this.annotationStorage;for(const a of this._getElementsByName(e.name,e.id))a.domElement&&(a.domElement[t]=s),i.setValue(a.id,{[r]:s})}render(){var r,i;const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let s=null;if(this.renderForms){const a=e.getValue(t,{value:this.data.fieldValue});let l=a.value||"";const c=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;c&&l.length>c&&(l=l.slice(0,c));let d=a.formattedValue||((r=this.data.textContent)==null?void 0:r.join(`
`))||null;d&&this.data.comb&&(d=d.replaceAll(/\s+/g,""));const h={userValue:l,formattedValue:d,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(s=document.createElement("textarea"),s.textContent=d??l,this.data.doNotScroll&&(s.style.overflowY="hidden")):(s=document.createElement("input"),s.type=this.data.password?"password":"text",s.setAttribute("value",d??l),this.data.doNotScroll&&(s.style.overflowX="hidden")),this.data.hasOwnCanvas&&(s.hidden=!0),gc.add(s),s.setAttribute("data-element-id",t),s.disabled=this.data.readOnly,s.name=this.data.fieldName,s.tabIndex=0;const{datetimeFormat:f,datetimeType:p,timeStep:m}=this.data,v=!!p&&this.enableScripting;f&&(s.title=f),this._setRequired(s,this.data.required),c&&(s.maxLength=c),s.addEventListener("input",A=>{e.setValue(t,{value:A.target.value}),this.setPropertyOnSiblings(s,"value",A.target.value,"value"),h.formattedValue=null}),s.addEventListener("resetform",A=>{const b=this.data.defaultFieldValue??"";s.value=h.userValue=b,h.formattedValue=null});let x=A=>{const{formattedValue:b}=h;b!=null&&(A.target.value=b),A.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){s.addEventListener("focus",b=>{var w;if(h.focused)return;const{target:g}=b;if(v&&(g.type=p,m&&(g.step=m)),h.userValue){const S=h.userValue;if(v)if(p==="time"){const C=new Date(S),N=[C.getHours(),C.getMinutes(),C.getSeconds()];g.value=N.map(_=>_.toString().padStart(2,"0")).join(":")}else g.value=new Date(S-VM).toISOString().split(p==="date"?"T":".",1)[0];else g.value=S}h.lastCommittedValue=g.value,h.commitKey=1,(w=this.data.actions)!=null&&w.Focus||(h.focused=!0)}),s.addEventListener("updatefromsandbox",b=>{this.showElementAndHideCanvas(b.target);const g={value(w){h.userValue=w.detail.value??"",v||e.setValue(t,{value:h.userValue.toString()}),w.target.value=h.userValue},formattedValue(w){const{formattedValue:S}=w.detail;h.formattedValue=S,S!=null&&w.target!==document.activeElement&&(w.target.value=S);const C={formattedValue:S};v&&(C.value=S),e.setValue(t,C)},selRange(w){w.target.setSelectionRange(...w.detail.selRange)},charLimit:w=>{var _;const{charLimit:S}=w.detail,{target:C}=w;if(S===0){C.removeAttribute("maxLength");return}C.setAttribute("maxLength",S);let N=h.userValue;!N||N.length<=S||(N=N.slice(0,S),C.value=h.userValue=N,e.setValue(t,{value:N}),(_=this.linkService.eventBus)==null||_.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:N,willCommit:!0,commitKey:1,selStart:C.selectionStart,selEnd:C.selectionEnd}}))}};this._dispatchEventFromSandbox(g,b)}),s.addEventListener("keydown",b=>{var S;h.commitKey=1;let g=-1;if(b.key==="Escape"?g=0:b.key==="Enter"&&!this.data.multiLine?g=2:b.key==="Tab"&&(h.commitKey=3),g===-1)return;const{value:w}=b.target;h.lastCommittedValue!==w&&(h.lastCommittedValue=w,h.userValue=w,(S=this.linkService.eventBus)==null||S.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:w,willCommit:!0,commitKey:g,selStart:b.target.selectionStart,selEnd:b.target.selectionEnd}}))});const A=x;x=null,s.addEventListener("blur",b=>{var S,C;if(!h.focused||!b.relatedTarget)return;(S=this.data.actions)!=null&&S.Blur||(h.focused=!1);const{target:g}=b;let{value:w}=g;if(v){if(w&&p==="time"){const N=w.split(":").map(_=>parseInt(_,10));w=new Date(2e3,0,1,N[0],N[1],N[2]||0).valueOf(),g.step=""}else w.includes("T")||(w=`${w}T00:00`),w=new Date(w).valueOf();g.type="text"}h.userValue=w,h.lastCommittedValue!==w&&((C=this.linkService.eventBus)==null||C.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:w,willCommit:!0,commitKey:h.commitKey,selStart:b.target.selectionStart,selEnd:b.target.selectionEnd}})),A(b)}),(i=this.data.actions)!=null&&i.Keystroke&&s.addEventListener("beforeinput",b=>{var L;h.lastCommittedValue=null;const{data:g,target:w}=b,{value:S,selectionStart:C,selectionEnd:N}=w;let _=C,P=N;switch(b.inputType){case"deleteWordBackward":{const R=S.substring(0,C).match(/\w*[^\w]*$/);R&&(_-=R[0].length);break}case"deleteWordForward":{const R=S.substring(C).match(/^[^\w]*\w*/);R&&(P+=R[0].length);break}case"deleteContentBackward":C===N&&(_-=1);break;case"deleteContentForward":C===N&&(P+=1);break}b.preventDefault(),(L=this.linkService.eventBus)==null||L.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:S,change:g||"",willCommit:!1,selStart:_,selEnd:P}})}),this._setEventListeners(s,h,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],b=>b.target.value)}if(x&&s.addEventListener("blur",x),this.data.comb){const b=(this.data.rect[2]-this.data.rect[0])/c;s.classList.add("comb"),s.style.letterSpacing=`calc(${b}px * var(--total-scale-factor) - 1ch)`}}else s=document.createElement("div"),s.textContent=this.data.fieldValue,s.style.verticalAlign="middle",s.style.display="table-cell",this.data.hasOwnCanvas&&(s.hidden=!0);return this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class XM extends wc{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class KM extends wc{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,s=t.id;let r=e.getValue(s,{value:t.exportValue===t.fieldValue}).value;typeof r=="string"&&(r=r!=="Off",e.setValue(s,{value:r})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const i=document.createElement("input");return gc.add(i),i.setAttribute("data-element-id",s),i.disabled=t.readOnly,this._setRequired(i,this.data.required),i.type="checkbox",i.name=t.fieldName,r&&i.setAttribute("checked",!0),i.setAttribute("exportValue",t.exportValue),i.tabIndex=0,i.addEventListener("change",a=>{const{name:l,checked:c}=a.target;for(const d of this._getElementsByName(l,s)){const h=c&&d.exportValue===t.exportValue;d.domElement&&(d.domElement.checked=h),e.setValue(d.id,{value:h})}e.setValue(s,{value:c})}),i.addEventListener("resetform",a=>{const l=t.defaultFieldValue||"Off";a.target.checked=l===t.exportValue}),this.enableScripting&&this.hasJSActions&&(i.addEventListener("updatefromsandbox",a=>{const l={value(c){c.target.checked=c.detail.value!=="Off",e.setValue(s,{value:c.target.checked})}};this._dispatchEventFromSandbox(l,a)}),this._setEventListeners(i,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class yN extends wc{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,s=t.id;let r=e.getValue(s,{value:t.fieldValue===t.buttonValue}).value;if(typeof r=="string"&&(r=r!==t.buttonValue,e.setValue(s,{value:r})),r)for(const a of this._getElementsByName(t.fieldName,s))e.setValue(a.id,{value:!1});const i=document.createElement("input");if(gc.add(i),i.setAttribute("data-element-id",s),i.disabled=t.readOnly,this._setRequired(i,this.data.required),i.type="radio",i.name=t.fieldName,r&&i.setAttribute("checked",!0),i.tabIndex=0,i.addEventListener("change",a=>{const{name:l,checked:c}=a.target;for(const d of this._getElementsByName(l,s))e.setValue(d.id,{value:!1});e.setValue(s,{value:c})}),i.addEventListener("resetform",a=>{const l=t.defaultFieldValue;a.target.checked=l!=null&&l===t.buttonValue}),this.enableScripting&&this.hasJSActions){const a=t.buttonValue;i.addEventListener("updatefromsandbox",l=>{const c={value:d=>{const h=a===d.detail.value;for(const f of this._getElementsByName(d.target.name)){const p=h&&f.id===s;f.domElement&&(f.domElement.checked=p),e.setValue(f.id,{value:p})}}};this._dispatchEventFromSandbox(c,l)}),this._setEventListeners(i,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],l=>l.target.checked)}return this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class YM extends o1{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",s=>{this._dispatchEventFromSandbox({},s)})),e}}class QM extends wc{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,s=e.getValue(t,{value:this.data.fieldValue}),r=document.createElement("select");gc.add(r),r.setAttribute("data-element-id",t),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=0;let i=this.data.combo&&this.data.options.length>0;this.data.combo||(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener("resetform",h=>{const f=this.data.defaultFieldValue;for(const p of r.options)p.selected=p.value===f});for(const h of this.data.options){const f=document.createElement("option");f.textContent=h.displayValue,f.value=h.exportValue,s.value.includes(h.exportValue)&&(f.setAttribute("selected",!0),i=!1),r.append(f)}let a=null;if(i){const h=document.createElement("option");h.value=" ",h.setAttribute("hidden",!0),h.setAttribute("selected",!0),r.prepend(h),a=()=>{h.remove(),r.removeEventListener("input",a),a=null},r.addEventListener("input",a)}const l=h=>{const f=h?"value":"textContent",{options:p,multiple:m}=r;return m?Array.prototype.filter.call(p,v=>v.selected).map(v=>v[f]):p.selectedIndex===-1?null:p[p.selectedIndex][f]};let c=l(!1);const d=h=>{const f=h.target.options;return Array.prototype.map.call(f,p=>({displayValue:p.textContent,exportValue:p.value}))};return this.enableScripting&&this.hasJSActions?(r.addEventListener("updatefromsandbox",h=>{const f={value(p){a==null||a();const m=p.detail.value,v=new Set(Array.isArray(m)?m:[m]);for(const x of r.options)x.selected=v.has(x.value);e.setValue(t,{value:l(!0)}),c=l(!1)},multipleSelection(p){r.multiple=!0},remove(p){const m=r.options,v=p.detail.remove;m[v].selected=!1,r.remove(v),m.length>0&&Array.prototype.findIndex.call(m,A=>A.selected)===-1&&(m[0].selected=!0),e.setValue(t,{value:l(!0),items:d(p)}),c=l(!1)},clear(p){for(;r.length!==0;)r.remove(0);e.setValue(t,{value:null,items:[]}),c=l(!1)},insert(p){const{index:m,displayValue:v,exportValue:x}=p.detail.insert,A=r.children[m],b=document.createElement("option");b.textContent=v,b.value=x,A?A.before(b):r.append(b),e.setValue(t,{value:l(!0),items:d(p)}),c=l(!1)},items(p){const{items:m}=p.detail;for(;r.length!==0;)r.remove(0);for(const v of m){const{displayValue:x,exportValue:A}=v,b=document.createElement("option");b.textContent=x,b.value=A,r.append(b)}r.options.length>0&&(r.options[0].selected=!0),e.setValue(t,{value:l(!0),items:d(p)}),c=l(!1)},indices(p){const m=new Set(p.detail.indices);for(const v of p.target.options)v.selected=m.has(v.index);e.setValue(t,{value:l(!0)}),c=l(!1)},editable(p){p.target.disabled=!p.detail.editable}};this._dispatchEventFromSandbox(f,h)}),r.addEventListener("input",h=>{var m;const f=l(!0),p=l(!1);e.setValue(t,{value:f}),h.preventDefault(),(m=this.linkService.eventBus)==null||m.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:c,change:p,changeEx:f,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(r,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],h=>h.target.value)):r.addEventListener("input",function(h){e.setValue(t,{value:l(!0)})}),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}var _p,db;class cb extends it{constructor(t){const{data:s,elements:r,parent:i}=t,a=!!i._commentManager;super(t,{isRenderable:!a&&it._hasPopupData(s)});k(this,_p);if(this.elements=r,a&&it._hasPopupData(s)){const l=this.popup=E(this,_p,db).call(this);for(const c of r)c.popup=l}else this.popup=null}render(){const{container:t}=this;t.classList.add("popupAnnotation"),t.role="comment";const s=this.popup=E(this,_p,db).call(this),r=[];for(const i of this.elements)i.popup=s,i.container.ariaHasPopup="dialog",r.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",r.map(i=>`${Jw}${i}`).join(",")),this.container}}_p=new WeakSet,db=function(){return new JM({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})};var es,Va,z0,$0,su,ru,dt,Hr,Wa,Il,iu,au,Vr,ts,Mi,Ii,Lt,Fi,Ga,jp,Oi,ou,Fl,qa,un,Xa,he,Sg,ub,hb,fb,Eg,pb,xN,vN,bN,wN,Cg,Ng,mb;class JM{constructor({container:e,color:t,elements:s,titleObj:r,modificationDate:i,contentsObj:a,richText:l,parent:c,rect:d,parentRect:h,open:f,commentManager:p=null}){k(this,he);k(this,es,null);k(this,Va,E(this,he,bN).bind(this));k(this,z0,E(this,he,mb).bind(this));k(this,$0,E(this,he,Ng).bind(this));k(this,su,E(this,he,Cg).bind(this));k(this,ru,null);k(this,dt,null);k(this,Hr,null);k(this,Wa,null);k(this,Il,null);k(this,iu,null);k(this,au,null);k(this,Vr,!1);k(this,ts,null);k(this,Mi,null);k(this,Ii,null);k(this,Lt,null);k(this,Fi,null);k(this,Ga,null);k(this,jp,null);k(this,Oi,null);k(this,ou,null);k(this,Fl,null);k(this,qa,!1);k(this,un,null);k(this,Xa,null);y(this,dt,e),y(this,ou,r),y(this,Hr,a),y(this,Oi,l),y(this,iu,c),y(this,ru,t),y(this,jp,d),y(this,au,h),y(this,Il,s),y(this,es,p),y(this,un,s[0]),y(this,Wa,xf.toDateObject(i)),this.trigger=s.flatMap(m=>m.getElementsToTriggerPopup()),p?this.renderCommentButton():(E(this,he,Sg).call(this),o(this,dt).hidden=!0,f&&E(this,he,Cg).call(this))}renderCommentButton(){if(o(this,Lt)||(o(this,Fi)||E(this,he,ub).call(this),!o(this,Fi)))return;const{signal:e}=y(this,Mi,new AbortController),t=!!o(this,un).extraPopupElement,s=()=>{o(this,es).toggleCommentPopup(this,!0,void 0,!t)},r=()=>{o(this,es).toggleCommentPopup(this,!1,!0,!t)},i=()=>{o(this,es).toggleCommentPopup(this,!1,!1)};if(t){y(this,Lt,o(this,un).container);for(const a of this.trigger)a.ariaHasPopup="dialog",a.ariaControls="commentPopup",a.addEventListener("keydown",o(this,Va),{signal:e}),a.addEventListener("click",s,{signal:e}),a.addEventListener("pointerenter",r,{signal:e}),a.addEventListener("pointerleave",i,{signal:e}),a.classList.add("popupTriggerArea")}else{const a=y(this,Lt,document.createElement("button"));a.className="annotationCommentButton";const l=o(this,un).container;a.style.zIndex=l.style.zIndex+1,a.tabIndex=0,a.ariaHasPopup="dialog",a.ariaControls="commentPopup",a.setAttribute("data-l10n-id","pdfjs-show-comment-button"),E(this,he,fb).call(this),E(this,he,hb).call(this),a.addEventListener("keydown",o(this,Va),{signal:e}),a.addEventListener("click",s,{signal:e}),a.addEventListener("pointerenter",r,{signal:e}),a.addEventListener("pointerleave",i,{signal:e}),l.after(a)}}get commentButtonColor(){const{color:e,opacity:t}=o(this,un).commentData;return e?o(this,iu)._commentManager.makeCommentColor(e,t):null}focusCommentButton(){setTimeout(()=>{var e;(e=o(this,Lt))==null||e.focus()},0)}getData(){const{richText:e,color:t,opacity:s,creationDate:r,modificationDate:i}=o(this,un).commentData;return{contentsObj:{str:this.comment},richText:e,color:t,opacity:s,creationDate:r,modificationDate:i}}get elementBeforePopup(){return o(this,Lt)}get comment(){return o(this,Xa)||y(this,Xa,o(this,un).commentText),o(this,Xa)}set comment(e){e!==this.comment&&(o(this,un).commentText=y(this,Xa,e))}get parentBoundingClientRect(){return o(this,un).layer.getBoundingClientRect()}setCommentButtonStates({selected:e,hasPopup:t}){o(this,Lt)&&(o(this,Lt).classList.toggle("selected",e),o(this,Lt).ariaExpanded=t)}setSelectedCommentButton(e){o(this,Lt).classList.toggle("selected",e)}get commentPopupPosition(){if(o(this,Ga))return o(this,Ga);const{x:e,y:t,height:s}=o(this,Lt).getBoundingClientRect(),{x:r,y:i,width:a,height:l}=o(this,un).layer.getBoundingClientRect();return[(e-r)/a,(t+s-i)/l]}set commentPopupPosition(e){y(this,Ga,e)}hasDefaultPopupPosition(){return o(this,Ga)===null}get commentButtonPosition(){return o(this,Fi)}get commentButtonWidth(){return o(this,Lt).getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(e){const[t,s]=o(this,Ga)||this.commentButtonPosition.map(d=>d/100),r=this.parentBoundingClientRect,{x:i,y:a,width:l,height:c}=r;o(this,es).showDialog(null,this,i+t*l,a+s*c,{...e,parentDimensions:r})}render(){var s,r;if(o(this,ts))return;const e=y(this,ts,document.createElement("div"));if(e.className="popup",o(this,ru)){const i=e.style.outlineColor=K.makeHexColor(...o(this,ru));e.style.backgroundColor=`color-mix(in srgb, ${i} 30%, white)`}const t=document.createElement("span");if(t.className="header",(s=o(this,ou))!=null&&s.str){const i=document.createElement("span");i.className="title",t.append(i),{dir:i.dir,str:i.textContent}=o(this,ou)}if(e.append(t),o(this,Wa)){const i=document.createElement("time");i.className="popupDate",i.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),i.setAttribute("data-l10n-args",JSON.stringify({dateObj:o(this,Wa).valueOf()})),i.dateTime=o(this,Wa).toISOString(),t.append(i)}e1({html:o(this,he,Eg)||o(this,Hr).str,dir:(r=o(this,Hr))==null?void 0:r.dir,className:"popupContent"},e),o(this,dt).append(e)}updateEdited({rect:e,popup:t,deleted:s}){var r;if(o(this,es)){s?(this.remove(),y(this,Xa,null)):t&&(t.deleted?this.remove():(E(this,he,fb).call(this),y(this,Xa,t.text))),e&&(y(this,Fi,null),E(this,he,ub).call(this),E(this,he,hb).call(this));return}if(s||t!=null&&t.deleted){this.remove();return}E(this,he,Sg).call(this),o(this,Fl)||y(this,Fl,{contentsObj:o(this,Hr),richText:o(this,Oi)}),e&&y(this,Ii,null),t&&t.text&&(y(this,Oi,E(this,he,vN).call(this,t.text)),y(this,Wa,xf.toDateObject(t.date)),y(this,Hr,null)),(r=o(this,ts))==null||r.remove(),y(this,ts,null)}resetEdited(){var e;o(this,Fl)&&({contentsObj:Et(this,Hr)._,richText:Et(this,Oi)._}=o(this,Fl),y(this,Fl,null),(e=o(this,ts))==null||e.remove(),y(this,ts,null),y(this,Ii,null))}remove(){var e,t,s;if((e=o(this,Mi))==null||e.abort(),y(this,Mi,null),(t=o(this,ts))==null||t.remove(),y(this,ts,null),y(this,qa,!1),y(this,Vr,!1),(s=o(this,Lt))==null||s.remove(),y(this,Lt,null),this.trigger)for(const r of this.trigger)r.classList.remove("popupTriggerArea")}forceHide(){y(this,qa,this.isVisible),o(this,qa)&&(o(this,dt).hidden=!0)}maybeShow(){o(this,es)||(E(this,he,Sg).call(this),o(this,qa)&&(o(this,ts)||E(this,he,Ng).call(this),y(this,qa,!1),o(this,dt).hidden=!1))}get isVisible(){return o(this,es)?!1:o(this,dt).hidden===!1}}es=new WeakMap,Va=new WeakMap,z0=new WeakMap,$0=new WeakMap,su=new WeakMap,ru=new WeakMap,dt=new WeakMap,Hr=new WeakMap,Wa=new WeakMap,Il=new WeakMap,iu=new WeakMap,au=new WeakMap,Vr=new WeakMap,ts=new WeakMap,Mi=new WeakMap,Ii=new WeakMap,Lt=new WeakMap,Fi=new WeakMap,Ga=new WeakMap,jp=new WeakMap,Oi=new WeakMap,ou=new WeakMap,Fl=new WeakMap,qa=new WeakMap,un=new WeakMap,Xa=new WeakMap,he=new WeakSet,Sg=function(){var t;if(o(this,Mi))return;y(this,Mi,new AbortController);const{signal:e}=o(this,Mi);for(const s of this.trigger)s.addEventListener("click",o(this,su),{signal:e}),s.addEventListener("pointerenter",o(this,$0),{signal:e}),s.addEventListener("pointerleave",o(this,z0),{signal:e}),s.classList.add("popupTriggerArea");for(const s of o(this,Il))(t=s.container)==null||t.addEventListener("keydown",o(this,Va),{signal:e})},ub=function(){const e=o(this,Il).find(t=>t.hasCommentButton);e&&y(this,Fi,e._normalizePoint(e.commentButtonPosition))},hb=function(){if(o(this,un).extraPopupElement&&!o(this,un).editor)return;this.renderCommentButton();const[e,t]=o(this,Fi),{style:s}=o(this,Lt);s.left=`calc(${e}%)`,s.top=`calc(${t}% - var(--comment-button-dim))`},fb=function(){o(this,un).extraPopupElement||(this.renderCommentButton(),o(this,Lt).style.backgroundColor=this.commentButtonColor||"")},Eg=function(){const e=o(this,Oi),t=o(this,Hr);return e!=null&&e.str&&(!(t!=null&&t.str)||t.str===e.str)&&o(this,Oi).html||null},pb=function(){var e,t,s;return((s=(t=(e=o(this,he,Eg))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:s.fontSize)||0},xN=function(){var e,t,s;return((s=(t=(e=o(this,he,Eg))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:s.color)||null},vN=function(e){const t=[],s={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},r={style:{color:o(this,he,xN),fontSize:o(this,he,pb)?`calc(${o(this,he,pb)}px * var(--total-scale-factor))`:""}};for(const i of e.split(`
`))t.push({name:"span",value:i,attributes:r});return s},bN=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&o(this,Vr))&&E(this,he,Cg).call(this)},wN=function(){if(o(this,Ii)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:s,pageX:r,pageY:i}}}=o(this,iu);let a=!!o(this,au),l=a?o(this,au):o(this,jp);for(const v of o(this,Il))if(!l||K.intersect(v.data.rect,l)!==null){l=v.data.rect,a=!0;break}const c=K.normalizeRect([l[0],e[3]-l[1]+e[1],l[2],e[3]-l[3]+e[1]]),h=a?l[2]-l[0]+5:0,f=c[0]+h,p=c[1];y(this,Ii,[100*(f-r)/t,100*(p-i)/s]);const{style:m}=o(this,dt);m.left=`${o(this,Ii)[0]}%`,m.top=`${o(this,Ii)[1]}%`},Cg=function(){if(o(this,es)){o(this,es).toggleCommentPopup(this,!1);return}y(this,Vr,!o(this,Vr)),o(this,Vr)?(E(this,he,Ng).call(this),o(this,dt).addEventListener("click",o(this,su)),o(this,dt).addEventListener("keydown",o(this,Va))):(E(this,he,mb).call(this),o(this,dt).removeEventListener("click",o(this,su)),o(this,dt).removeEventListener("keydown",o(this,Va)))},Ng=function(){o(this,ts)||this.render(),this.isVisible?o(this,Vr)&&o(this,dt).classList.add("focused"):(E(this,he,wN).call(this),o(this,dt).hidden=!1,o(this,dt).style.zIndex=parseInt(o(this,dt).style.zIndex)+1e3)},mb=function(){o(this,dt).classList.remove("focused"),!(o(this,Vr)||!this.isVisible)&&(o(this,dt).hidden=!0,o(this,dt).style.zIndex=parseInt(o(this,dt).style.zIndex)-1e3)};class kN extends it{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=ie.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const s=document.createElement("span");s.textContent=t,e.append(s)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Pp;class ZM extends it{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});k(this,Pp,null)}render(){this.container.classList.add("lineAnnotation");const{data:t,width:s,height:r}=this,i=this.svgFactory.create(s,r,!0),a=y(this,Pp,this.svgFactory.createElement("svg:line"));return a.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),a.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),a.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),a.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),a.setAttribute("stroke-width",t.borderStyle.width||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),i.append(a),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return o(this,Pp)}addHighlightArea(){this.container.classList.add("highlightArea")}}Pp=new WeakMap;var Tp;class eI extends it{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});k(this,Tp,null)}render(){this.container.classList.add("squareAnnotation");const{data:t,width:s,height:r}=this,i=this.svgFactory.create(s,r,!0),a=t.borderStyle.width,l=y(this,Tp,this.svgFactory.createElement("svg:rect"));return l.setAttribute("x",a/2),l.setAttribute("y",a/2),l.setAttribute("width",s-a),l.setAttribute("height",r-a),l.setAttribute("stroke-width",a||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),i.append(l),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return o(this,Tp)}addHighlightArea(){this.container.classList.add("highlightArea")}}Tp=new WeakMap;var Rp;class tI extends it{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});k(this,Rp,null)}render(){this.container.classList.add("circleAnnotation");const{data:t,width:s,height:r}=this,i=this.svgFactory.create(s,r,!0),a=t.borderStyle.width,l=y(this,Rp,this.svgFactory.createElement("svg:ellipse"));return l.setAttribute("cx",s/2),l.setAttribute("cy",r/2),l.setAttribute("rx",s/2-a/2),l.setAttribute("ry",r/2-a/2),l.setAttribute("stroke-width",a||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),i.append(l),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return o(this,Rp)}addHighlightArea(){this.container.classList.add("highlightArea")}}Rp=new WeakMap;var Lp;class AN extends it{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});k(this,Lp,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:s,borderStyle:r,popupRef:i},width:a,height:l}=this;if(!s)return this.container;const c=this.svgFactory.create(a,l,!0);let d=[];for(let f=0,p=s.length;f<p;f+=2){const m=s[f]-t[0],v=t[3]-s[f+1];d.push(`${m},${v}`)}d=d.join(" ");const h=y(this,Lp,this.svgFactory.createElement(this.svgElementName));return h.setAttribute("points",d),h.setAttribute("stroke-width",r.width||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),c.append(h),this.container.append(c),!i&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return o(this,Lp)}addHighlightArea(){this.container.classList.add("highlightArea")}}Lp=new WeakMap;class nI extends AN{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class sI extends it{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var Dp,Ol,Mp,gb;class l1 extends it{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});k(this,Mp);k(this,Dp,null);k(this,Ol,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?ie.HIGHLIGHT:ie.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:s,inkLists:r,borderStyle:i,popupRef:a}}=this,{transform:l,width:c,height:d}=E(this,Mp,gb).call(this,s,t),h=this.svgFactory.create(c,d,!0),f=y(this,Dp,this.svgFactory.createElement("svg:g"));h.append(f),f.setAttribute("stroke-width",i.width||1),f.setAttribute("stroke-linecap","round"),f.setAttribute("stroke-linejoin","round"),f.setAttribute("stroke-miterlimit",10),f.setAttribute("stroke","transparent"),f.setAttribute("fill","transparent"),f.setAttribute("transform",l);for(let p=0,m=r.length;p<m;p++){const v=this.svgFactory.createElement(this.svgElementName);o(this,Ol).push(v),v.setAttribute("points",r[p].join(",")),f.append(v)}return!a&&this.hasPopupData&&this._createPopup(),this.container.append(h),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:s,points:r,rect:i}=t,a=o(this,Dp);if(s>=0&&a.setAttribute("stroke-width",s||1),r)for(let l=0,c=o(this,Ol).length;l<c;l++)o(this,Ol)[l].setAttribute("points",r[l].join(","));if(i){const{transform:l,width:c,height:d}=E(this,Mp,gb).call(this,this.data.rotation,i);a.parentElement.setAttribute("viewBox",`0 0 ${c} ${d}`),a.setAttribute("transform",l)}}getElementsToTriggerPopup(){return o(this,Ol)}addHighlightArea(){this.container.classList.add("highlightArea")}}Dp=new WeakMap,Ol=new WeakMap,Mp=new WeakSet,gb=function(t,s){switch(t){case 90:return{transform:`rotate(90) translate(${-s[0]},${s[1]}) scale(1,-1)`,width:s[3]-s[1],height:s[2]-s[0]};case 180:return{transform:`rotate(180) translate(${-s[2]},${s[1]}) scale(1,-1)`,width:s[2]-s[0],height:s[3]-s[1]};case 270:return{transform:`rotate(270) translate(${-s[2]},${s[3]}) scale(1,-1)`,width:s[3]-s[1],height:s[2]-s[0]};default:return{transform:`translate(${-s[0]},${s[3]}) scale(1,-1)`,width:s[2]-s[0],height:s[3]-s[1]}}};class SN extends it{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=ie.HIGHLIGHT}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),e){const s=document.createElement("mark");s.classList.add("overlaidText"),s.textContent=e,this.container.append(s)}return this.container}}class rI extends it{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),e){const s=document.createElement("u");s.classList.add("overlaidText"),s.textContent=e,this.container.append(s)}return this.container}}class iI extends it{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),e){const s=document.createElement("u");s.classList.add("overlaidText"),s.textContent=e,this.container.append(s)}return this.container}}class aI extends it{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),e){const s=document.createElement("s");s.classList.add("overlaidText"),s.textContent=e,this.container.append(s)}return this.container}}class EN extends it{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=ie.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Ip,Fp,yb;class oI extends it{constructor(t){var r;super(t,{isRenderable:!0});k(this,Fp);k(this,Ip,null);const{file:s}=this.data;this.filename=s.filename,this.content=s.content,(r=this.linkService.eventBus)==null||r.dispatch("fileattachmentannotation",{source:this,...s})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:s}=this;let r;s.hasAppearance||s.fillAlpha===0?r=document.createElement("div"):(r=document.createElement("img"),r.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(s.name)?"paperclip":"pushpin"}.svg`,s.fillAlpha&&s.fillAlpha<1&&(r.style=`filter: opacity(${Math.round(s.fillAlpha*100)}%);`)),r.addEventListener("dblclick",E(this,Fp,yb).bind(this)),y(this,Ip,r);const{isMac:i}=zt.platform;return t.addEventListener("keydown",a=>{a.key==="Enter"&&(i?a.metaKey:a.ctrlKey)&&E(this,Fp,yb).call(this)}),!s.popupRef&&this.hasPopupData?this._createPopup():r.classList.add("popupTriggerArea"),t.append(r),t}getElementsToTriggerPopup(){return o(this,Ip)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ip=new WeakMap,Fp=new WeakSet,yb=function(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.content,this.filename)};var lu,Bl,cu,Ka,Op,Ul,jo,xb,vb,du;let c1=(du=class{constructor({div:e,accessibilityManager:t,annotationCanvasMap:s,annotationEditorUIManager:r,page:i,viewport:a,structTreeLayer:l,commentManager:c,linkService:d,annotationStorage:h}){k(this,jo);k(this,lu,null);k(this,Bl,null);k(this,cu,null);k(this,Ka,new Map);k(this,Op,null);k(this,Ul,null);this.div=e,y(this,lu,t),y(this,Bl,s),y(this,Op,l||null),y(this,Ul,d||null),y(this,cu,h||new t1),this.page=i,this.viewport=a,this.zIndex=0,this._annotationEditorUIManager=r,this._commentManager=c||null}hasEditableAnnotations(){return o(this,Ka).size>0}async render(e){var a,l,c;const{annotations:t}=e,s=this.div;Co(s,this.viewport);const r=new Map,i={data:null,layer:s,linkService:o(this,Ul),downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new kf,annotationStorage:o(this,cu),enableComment:e.enableComment===!0,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const d of t){if(d.noHTML)continue;const h=d.annotationType===pt.POPUP;if(h){const m=r.get(d.id);if(!m)continue;i.elements=m}else if(d.rect[2]===d.rect[0]||d.rect[3]===d.rect[1])continue;i.data=d;const f=MA.create(i);if(!f.isRenderable)continue;if(!h&&d.popupRef){const m=r.get(d.popupRef);m?m.push(f):r.set(d.popupRef,[f])}const p=f.render();d.hidden&&(p.style.visibility="hidden"),await E(this,jo,xb).call(this,p,d.id,i.elements),(l=(a=f.extraPopupElement)==null?void 0:a.popup)==null||l.renderCommentButton(),f._isEditable&&(o(this,Ka).set(f.data.id,f),(c=this._annotationEditorUIManager)==null||c.renderAnnotationElement(f))}E(this,jo,vb).call(this)}async addLinkAnnotations(e){const t={data:null,layer:this.div,linkService:o(this,Ul),svgFactory:new kf,parent:this};for(const s of e){s.borderStyle||(s.borderStyle=du._defaultBorderStyle),t.data=s;const r=MA.create(t);if(!r.isRenderable)continue;const i=r.render();await E(this,jo,xb).call(this,i,s.id,null)}}update({viewport:e}){const t=this.div;this.viewport=e,Co(t,{rotation:e.rotation}),E(this,jo,vb).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(o(this,Ka).values())}getEditableAnnotation(e){return o(this,Ka).get(e)}addFakeAnnotation(e){var l;const{div:t}=this,{id:s,rotation:r}=e,i=new WM({data:{id:s,rect:e.getPDFRect(),rotation:r},editor:e,layer:t,parent:this,enableComment:!!this._commentManager,linkService:o(this,Ul),annotationStorage:o(this,cu)}),a=i.render();return t.append(a),(l=o(this,lu))==null||l.moveElementInDOM(t,a,a,!1),i.createOrUpdatePopup(),i}static get _defaultBorderStyle(){return de(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:Cc.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}},lu=new WeakMap,Bl=new WeakMap,cu=new WeakMap,Ka=new WeakMap,Op=new WeakMap,Ul=new WeakMap,jo=new WeakSet,xb=async function(e,t,s){var l,c;const r=e.firstChild||e,i=r.id=`${Jw}${t}`,a=await((l=o(this,Op))==null?void 0:l.getAriaAttributes(i));if(a)for(const[d,h]of a)r.setAttribute(d,h);s?s.at(-1).container.after(e):(this.div.append(e),(c=o(this,lu))==null||c.moveElementInDOM(this.div,e,r,!1))},vb=function(){var t;if(!o(this,Bl))return;const e=this.div;for(const[s,r]of o(this,Bl)){const i=e.querySelector(`[data-annotation-id="${s}"]`);if(!i)continue;r.className="annotationContent";const{firstChild:a}=i;a?a.nodeName==="CANVAS"?a.replaceWith(r):a.classList.contains("annotationContent")?a.after(r):a.before(r):i.append(r);const l=o(this,Ka).get(s);l&&(l._hasNoCanvas?((t=this._annotationEditorUIManager)==null||t.setMissingCanvas(s,i.id,r),l._hasNoCanvas=!1):l.canvas=r)}o(this,Bl).clear()},du);const Xm=/\r\n?|\n/g;var ns,Bp,zl,ss,At,CN,NN,_N,_g,Qi,jg,Pg,jN,wb,PN;const qe=class qe extends We{constructor(t){super({...t,name:"freeTextEditor"});k(this,At);k(this,ns,"");k(this,Bp,`${this.id}-editor`);k(this,zl,null);k(this,ss);I(this,"_colorPicker",null);this.color=t.color||qe._defaultColor||We._defaultLineColor,y(this,ss,t.fontSize||qe._defaultFontSize),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static get _keyboardManager(){const t=qe.prototype,s=a=>a.isEmpty(),r=No.TRANSLATE_SMALL,i=No.TRANSLATE_BIG;return de(this,"_keyboardManager",new gm([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-r,0],checker:s}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:s}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[r,0],checker:s}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[i,0],checker:s}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-r],checker:s}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:s}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,r],checker:s}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,i],checker:s}]]))}static initialize(t,s){We.initialize(t,s);const r=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(r.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,s){switch(t){case ye.FREETEXT_SIZE:qe._defaultFontSize=s;break;case ye.FREETEXT_COLOR:qe._defaultColor=s;break}}updateParams(t,s){switch(t){case ye.FREETEXT_SIZE:E(this,At,CN).call(this,s);break;case ye.FREETEXT_COLOR:E(this,At,NN).call(this,s);break}}static get defaultPropertiesToUpdate(){return[[ye.FREETEXT_SIZE,qe._defaultFontSize],[ye.FREETEXT_COLOR,qe._defaultColor||We._defaultLineColor]]}get propertiesToUpdate(){return[[ye.FREETEXT_SIZE,o(this,ss)],[ye.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new A0(this)),[["colorPicker",this._colorPicker]]}get colorType(){return ye.FREETEXT_COLOR}onUpdatedColor(){var t;this.editorDiv.style.color=this.color,(t=this._colorPicker)==null||t.update(this.color),super.onUpdatedColor()}_translateEmpty(t,s){this._uiManager.translateSelectedEditors(t,s,!0)}getInitialTranslation(){const t=this.parentScale;return[-qe._internalPadding*t,-(qe._internalPadding+o(this,ss))*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),y(this,zl,new AbortController);const t=this._uiManager.combinedSignal(o(this,zl));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){var t;return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",o(this,Bp)),this._isDraggable=!0,(t=o(this,zl))==null||t.abort(),y(this,zl,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){var s;this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),(s=this._initialOptions)!=null&&s.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=o(this,ns),s=y(this,ns,E(this,At,_N).call(this).trimEnd());if(t===s)return;const r=i=>{if(y(this,ns,i),!i){this.remove();return}E(this,At,Pg).call(this),this._uiManager.rebuild(this),E(this,At,_g).call(this)};this.addCommands({cmd:()=>{r(s)},undo:()=>{r(t)},mustExec:!1}),E(this,At,_g).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){qe._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,s;(this._isCopy||this.annotationElementId)&&(t=this.x,s=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",o(this,Bp)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:r}=this.editorDiv;if(r.fontSize=`calc(${o(this,ss)}px * var(--total-scale-factor))`,r.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[i,a]=this.parentDimensions;if(this.annotationElementId){const{position:l}=this._initialData;let[c,d]=this.getInitialTranslation();[c,d]=this.pageTranslationToScreen(c,d);const[h,f]=this.pageDimensions,[p,m]=this.pageTranslation;let v,x;switch(this.rotation){case 0:v=t+(l[0]-p)/h,x=s+this.height-(l[1]-m)/f;break;case 90:v=t+(l[0]-p)/h,x=s-(l[1]-m)/f,[c,d]=[d,-c];break;case 180:v=t-this.width+(l[0]-p)/h,x=s-(l[1]-m)/f,[c,d]=[-c,-d];break;case 270:v=t+(l[0]-p-this.height*f)/h,x=s+(l[1]-m-this.width*h)/f,[c,d]=[-d,c];break}this.setAt(v*i,x*a,c,d)}else this._moveAfterPaste(t,s);E(this,At,Pg).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){var v,x,A;const s=t.clipboardData||window.clipboardData,{types:r}=s;if(r.length===1&&r[0]==="text/plain")return;t.preventDefault();const i=E(v=qe,Qi,wb).call(v,s.getData("text")||"").replaceAll(Xm,`
`);if(!i)return;const a=window.getSelection();if(!a.rangeCount)return;this.editorDiv.normalize(),a.deleteFromDocument();const l=a.getRangeAt(0);if(!i.includes(`
`)){l.insertNode(document.createTextNode(i)),this.editorDiv.normalize(),a.collapseToStart();return}const{startContainer:c,startOffset:d}=l,h=[],f=[];if(c.nodeType===Node.TEXT_NODE){const b=c.parentElement;if(f.push(c.nodeValue.slice(d).replaceAll(Xm,"")),b!==this.editorDiv){let g=h;for(const w of this.editorDiv.childNodes){if(w===b){g=f;continue}g.push(E(x=qe,Qi,jg).call(x,w))}}h.push(c.nodeValue.slice(0,d).replaceAll(Xm,""))}else if(c===this.editorDiv){let b=h,g=0;for(const w of this.editorDiv.childNodes)g++===d&&(b=f),b.push(E(A=qe,Qi,jg).call(A,w))}y(this,ns,`${h.join(`
`)}${i}${f.join(`
`)}`),E(this,At,Pg).call(this);const p=new Range;let m=Math.sumPrecise(h.map(b=>b.length));for(const{firstChild:b}of this.editorDiv.childNodes)if(b.nodeType===Node.TEXT_NODE){const g=b.nodeValue.length;if(m<=g){p.setStart(b,m),p.setEnd(b,m);break}m-=g}a.removeAllRanges(),a.addRange(p)}get contentDiv(){return this.editorDiv}getPDFRect(){const t=qe._internalPadding*this.parentScale;return this.getRect(t,t)}static async deserialize(t,s,r){var l;let i=null;if(t instanceof kN){const{data:{defaultAppearanceData:{fontSize:c,fontColor:d},rect:h,rotation:f,id:p,popupRef:m,richText:v,contentsObj:x,creationDate:A,modificationDate:b},textContent:g,textPosition:w,parent:{page:{pageNumber:S}}}=t;if(!g||g.length===0)return null;i=t={annotationType:ie.FREETEXT,color:Array.from(d),fontSize:c,value:g.join(`
`),position:w,pageIndex:S-1,rect:h.slice(0),rotation:f,annotationElementId:p,id:p,deleted:!1,popupRef:m,comment:(x==null?void 0:x.str)||null,richText:v,creationDate:A,modificationDate:b}}const a=await super.deserialize(t,s,r);return y(a,ss,t.fontSize),a.color=K.makeHexColor(...t.color),y(a,ns,E(l=qe,Qi,wb).call(l,t.value)),a._initialData=i,t.comment&&a.setCommentData(t),a}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s=We._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),r=Object.assign(super.serialize(t),{color:s,fontSize:o(this,ss),value:E(this,At,jN).call(this)});return this.addComment(r),t?(r.isCopy=!0,r):this.annotationElementId&&!E(this,At,PN).call(this,r)?null:(r.id=this.annotationElementId,r)}renderAnnotationElement(t){const s=super.renderAnnotationElement(t);if(!s)return null;const{style:r}=s;r.fontSize=`calc(${o(this,ss)}px * var(--total-scale-factor))`,r.color=this.color,s.replaceChildren();for(const i of o(this,ns).split(`
`)){const a=document.createElement("div");a.append(i?document.createTextNode(i):document.createElement("br")),s.append(a)}return t.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:o(this,ns)}}),s}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};ns=new WeakMap,Bp=new WeakMap,zl=new WeakMap,ss=new WeakMap,At=new WeakSet,CN=function(t){const s=i=>{this.editorDiv.style.fontSize=`calc(${i}px * var(--total-scale-factor))`,this.translate(0,-(i-o(this,ss))*this.parentScale),y(this,ss,i),E(this,At,_g).call(this)},r=o(this,ss);this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ye.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},NN=function(t){const s=i=>{this.color=i,this.onUpdatedColor()},r=this.color;this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ye.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},_N=function(){var r;const t=[];this.editorDiv.normalize();let s=null;for(const i of this.editorDiv.childNodes)(s==null?void 0:s.nodeType)===Node.TEXT_NODE&&i.nodeName==="BR"||(t.push(E(r=qe,Qi,jg).call(r,i)),s=i);return t.join(`
`)},_g=function(){const[t,s]=this.parentDimensions;let r;if(this.isAttachedToDOM)r=this.div.getBoundingClientRect();else{const{currentLayer:i,div:a}=this,l=a.style.display,c=a.classList.contains("hidden");a.classList.remove("hidden"),a.style.display="hidden",i.div.append(this.div),r=a.getBoundingClientRect(),a.remove(),a.style.display=l,a.classList.toggle("hidden",c)}this.rotation%180===this.parentRotation%180?(this.width=r.width/t,this.height=r.height/s):(this.width=r.height/t,this.height=r.width/s),this.fixAndSetPosition()},Qi=new WeakSet,jg=function(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(Xm,"")},Pg=function(){if(this.editorDiv.replaceChildren(),!!o(this,ns))for(const t of o(this,ns).split(`
`)){const s=document.createElement("div");s.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(s)}},jN=function(){return o(this,ns).replaceAll(""," ")},wb=function(t){return t.replaceAll(" ","")},PN=function(t){const{value:s,fontSize:r,color:i,pageIndex:a}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||t.value!==s||t.fontSize!==r||t.color.some((l,c)=>l!==i[c])||t.pageIndex!==a},k(qe,Qi),I(qe,"_freeTextDefaultContent",""),I(qe,"_internalPadding",0),I(qe,"_defaultColor",null),I(qe,"_defaultFontSize",10),I(qe,"_type","freetext"),I(qe,"_editorType",ie.FREETEXT);let bb=qe;class X{toSVGPath(){$e("Abstract method `toSVGPath` must be implemented.")}get box(){$e("Abstract getter `box` must be implemented.")}serialize(e,t){$e("Abstract method `serialize` must be implemented.")}static _rescale(e,t,s,r,i,a){a||(a=new Float32Array(e.length));for(let l=0,c=e.length;l<c;l+=2)a[l]=t+e[l]*r,a[l+1]=s+e[l+1]*i;return a}static _rescaleAndSwap(e,t,s,r,i,a){a||(a=new Float32Array(e.length));for(let l=0,c=e.length;l<c;l+=2)a[l]=t+e[l+1]*r,a[l+1]=s+e[l]*i;return a}static _translate(e,t,s,r){r||(r=new Float32Array(e.length));for(let i=0,a=e.length;i<a;i+=2)r[i]=t+e[i],r[i+1]=s+e[i+1];return r}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,t,s,r,i){switch(i){case 90:return[1-t/s,e/r];case 180:return[1-e/s,1-t/r];case 270:return[t/s,1-e/r];default:return[e/s,t/r]}}static _normalizePagePoint(e,t,s){switch(s){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,s,r,i,a){return[(e+5*s)/6,(t+5*r)/6,(5*s+i)/6,(5*r+a)/6,(s+i)/2,(r+a)/2]}}I(X,"PRECISION",1e-4);var rs,or,uu,hu,Wr,me,$l,Hl,Up,zp,fu,pu,Ya,$p,H0,V0,Tt,Lh,TN,RN,LN,DN,MN,IN;const di=class di{constructor({x:e,y:t},s,r,i,a,l=0){k(this,Tt);k(this,rs);k(this,or,[]);k(this,uu);k(this,hu);k(this,Wr,[]);k(this,me,new Float32Array(18));k(this,$l);k(this,Hl);k(this,Up);k(this,zp);k(this,fu);k(this,pu);k(this,Ya,[]);y(this,rs,s),y(this,pu,i*r),y(this,hu,a),o(this,me).set([NaN,NaN,NaN,NaN,e,t],6),y(this,uu,l),y(this,zp,o(di,$p)*r),y(this,Up,o(di,V0)*r),y(this,fu,r),o(this,Ya).push(e,t)}isEmpty(){return isNaN(o(this,me)[8])}add({x:e,y:t}){var L;y(this,$l,e),y(this,Hl,t);const[s,r,i,a]=o(this,rs);let[l,c,d,h]=o(this,me).subarray(8,12);const f=e-d,p=t-h,m=Math.hypot(f,p);if(m<o(this,Up))return!1;const v=m-o(this,zp),x=v/m,A=x*f,b=x*p;let g=l,w=c;l=d,c=h,d+=A,h+=b,(L=o(this,Ya))==null||L.push(e,t);const S=-b/v,C=A/v,N=S*o(this,pu),_=C*o(this,pu);return o(this,me).set(o(this,me).subarray(2,8),0),o(this,me).set([d+N,h+_],4),o(this,me).set(o(this,me).subarray(14,18),12),o(this,me).set([d-N,h-_],16),isNaN(o(this,me)[6])?(o(this,Wr).length===0&&(o(this,me).set([l+N,c+_],2),o(this,Wr).push(NaN,NaN,NaN,NaN,(l+N-s)/i,(c+_-r)/a),o(this,me).set([l-N,c-_],14),o(this,or).push(NaN,NaN,NaN,NaN,(l-N-s)/i,(c-_-r)/a)),o(this,me).set([g,w,l,c,d,h],6),!this.isEmpty()):(o(this,me).set([g,w,l,c,d,h],6),Math.abs(Math.atan2(w-c,g-l)-Math.atan2(b,A))<Math.PI/2?([l,c,d,h]=o(this,me).subarray(2,6),o(this,Wr).push(NaN,NaN,NaN,NaN,((l+d)/2-s)/i,((c+h)/2-r)/a),[l,c,g,w]=o(this,me).subarray(14,18),o(this,or).push(NaN,NaN,NaN,NaN,((g+l)/2-s)/i,((w+c)/2-r)/a),!0):([g,w,l,c,d,h]=o(this,me).subarray(0,6),o(this,Wr).push(((g+5*l)/6-s)/i,((w+5*c)/6-r)/a,((5*l+d)/6-s)/i,((5*c+h)/6-r)/a,((l+d)/2-s)/i,((c+h)/2-r)/a),[d,h,l,c,g,w]=o(this,me).subarray(12,18),o(this,or).push(((g+5*l)/6-s)/i,((w+5*c)/6-r)/a,((5*l+d)/6-s)/i,((5*c+h)/6-r)/a,((l+d)/2-s)/i,((c+h)/2-r)/a),!0))}toSVGPath(){if(this.isEmpty())return"";const e=o(this,Wr),t=o(this,or);if(isNaN(o(this,me)[6])&&!this.isEmpty())return E(this,Tt,TN).call(this);const s=[];s.push(`M${e[4]} ${e[5]}`);for(let r=6;r<e.length;r+=6)isNaN(e[r])?s.push(`L${e[r+4]} ${e[r+5]}`):s.push(`C${e[r]} ${e[r+1]} ${e[r+2]} ${e[r+3]} ${e[r+4]} ${e[r+5]}`);E(this,Tt,LN).call(this,s);for(let r=t.length-6;r>=6;r-=6)isNaN(t[r])?s.push(`L${t[r+4]} ${t[r+5]}`):s.push(`C${t[r]} ${t[r+1]} ${t[r+2]} ${t[r+3]} ${t[r+4]} ${t[r+5]}`);return E(this,Tt,RN).call(this,s),s.join(" ")}newFreeDrawOutline(e,t,s,r,i,a){return new FN(e,t,s,r,i,a)}getOutlines(){var f;const e=o(this,Wr),t=o(this,or),s=o(this,me),[r,i,a,l]=o(this,rs),c=new Float32Array((((f=o(this,Ya))==null?void 0:f.length)??0)+2);for(let p=0,m=c.length-2;p<m;p+=2)c[p]=(o(this,Ya)[p]-r)/a,c[p+1]=(o(this,Ya)[p+1]-i)/l;if(c[c.length-2]=(o(this,$l)-r)/a,c[c.length-1]=(o(this,Hl)-i)/l,isNaN(s[6])&&!this.isEmpty())return E(this,Tt,DN).call(this,c);const d=new Float32Array(o(this,Wr).length+24+o(this,or).length);let h=e.length;for(let p=0;p<h;p+=2){if(isNaN(e[p])){d[p]=d[p+1]=NaN;continue}d[p]=e[p],d[p+1]=e[p+1]}h=E(this,Tt,IN).call(this,d,h);for(let p=t.length-6;p>=6;p-=6)for(let m=0;m<6;m+=2){if(isNaN(t[p+m])){d[h]=d[h+1]=NaN,h+=2;continue}d[h]=t[p+m],d[h+1]=t[p+m+1],h+=2}return E(this,Tt,MN).call(this,d,h),this.newFreeDrawOutline(d,c,o(this,rs),o(this,fu),o(this,uu),o(this,hu))}};rs=new WeakMap,or=new WeakMap,uu=new WeakMap,hu=new WeakMap,Wr=new WeakMap,me=new WeakMap,$l=new WeakMap,Hl=new WeakMap,Up=new WeakMap,zp=new WeakMap,fu=new WeakMap,pu=new WeakMap,Ya=new WeakMap,$p=new WeakMap,H0=new WeakMap,V0=new WeakMap,Tt=new WeakSet,Lh=function(){const e=o(this,me).subarray(4,6),t=o(this,me).subarray(16,18),[s,r,i,a]=o(this,rs);return[(o(this,$l)+(e[0]-t[0])/2-s)/i,(o(this,Hl)+(e[1]-t[1])/2-r)/a,(o(this,$l)+(t[0]-e[0])/2-s)/i,(o(this,Hl)+(t[1]-e[1])/2-r)/a]},TN=function(){const[e,t,s,r]=o(this,rs),[i,a,l,c]=E(this,Tt,Lh).call(this);return`M${(o(this,me)[2]-e)/s} ${(o(this,me)[3]-t)/r} L${(o(this,me)[4]-e)/s} ${(o(this,me)[5]-t)/r} L${i} ${a} L${l} ${c} L${(o(this,me)[16]-e)/s} ${(o(this,me)[17]-t)/r} L${(o(this,me)[14]-e)/s} ${(o(this,me)[15]-t)/r} Z`},RN=function(e){const t=o(this,or);e.push(`L${t[4]} ${t[5]} Z`)},LN=function(e){const[t,s,r,i]=o(this,rs),a=o(this,me).subarray(4,6),l=o(this,me).subarray(16,18),[c,d,h,f]=E(this,Tt,Lh).call(this);e.push(`L${(a[0]-t)/r} ${(a[1]-s)/i} L${c} ${d} L${h} ${f} L${(l[0]-t)/r} ${(l[1]-s)/i}`)},DN=function(e){const t=o(this,me),[s,r,i,a]=o(this,rs),[l,c,d,h]=E(this,Tt,Lh).call(this),f=new Float32Array(36);return f.set([NaN,NaN,NaN,NaN,(t[2]-s)/i,(t[3]-r)/a,NaN,NaN,NaN,NaN,(t[4]-s)/i,(t[5]-r)/a,NaN,NaN,NaN,NaN,l,c,NaN,NaN,NaN,NaN,d,h,NaN,NaN,NaN,NaN,(t[16]-s)/i,(t[17]-r)/a,NaN,NaN,NaN,NaN,(t[14]-s)/i,(t[15]-r)/a],0),this.newFreeDrawOutline(f,e,o(this,rs),o(this,fu),o(this,uu),o(this,hu))},MN=function(e,t){const s=o(this,or);return e.set([NaN,NaN,NaN,NaN,s[4],s[5]],t),t+=6},IN=function(e,t){const s=o(this,me).subarray(4,6),r=o(this,me).subarray(16,18),[i,a,l,c]=o(this,rs),[d,h,f,p]=E(this,Tt,Lh).call(this);return e.set([NaN,NaN,NaN,NaN,(s[0]-i)/l,(s[1]-a)/c,NaN,NaN,NaN,NaN,d,h,NaN,NaN,NaN,NaN,f,p,NaN,NaN,NaN,NaN,(r[0]-i)/l,(r[1]-a)/c],t),t+=24},k(di,$p,8),k(di,H0,2),k(di,V0,o(di,$p)+o(di,H0));let S0=di;var mu,Vl,Bi,Hp,is,Vp,gt,W0,ON;class FN extends X{constructor(t,s,r,i,a,l){super();k(this,W0);k(this,mu);k(this,Vl,new Float32Array(4));k(this,Bi);k(this,Hp);k(this,is);k(this,Vp);k(this,gt);y(this,gt,t),y(this,is,s),y(this,mu,r),y(this,Vp,i),y(this,Bi,a),y(this,Hp,l),this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],E(this,W0,ON).call(this,l);const[c,d,h,f]=o(this,Vl);for(let p=0,m=t.length;p<m;p+=2)t[p]=(t[p]-c)/h,t[p+1]=(t[p+1]-d)/f;for(let p=0,m=s.length;p<m;p+=2)s[p]=(s[p]-c)/h,s[p+1]=(s[p+1]-d)/f}toSVGPath(){const t=[`M${o(this,gt)[4]} ${o(this,gt)[5]}`];for(let s=6,r=o(this,gt).length;s<r;s+=6){if(isNaN(o(this,gt)[s])){t.push(`L${o(this,gt)[s+4]} ${o(this,gt)[s+5]}`);continue}t.push(`C${o(this,gt)[s]} ${o(this,gt)[s+1]} ${o(this,gt)[s+2]} ${o(this,gt)[s+3]} ${o(this,gt)[s+4]} ${o(this,gt)[s+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,s,r,i],a){const l=r-t,c=i-s;let d,h;switch(a){case 0:d=X._rescale(o(this,gt),t,i,l,-c),h=X._rescale(o(this,is),t,i,l,-c);break;case 90:d=X._rescaleAndSwap(o(this,gt),t,s,l,c),h=X._rescaleAndSwap(o(this,is),t,s,l,c);break;case 180:d=X._rescale(o(this,gt),r,s,-l,c),h=X._rescale(o(this,is),r,s,-l,c);break;case 270:d=X._rescaleAndSwap(o(this,gt),r,i,-l,-c),h=X._rescaleAndSwap(o(this,is),r,i,-l,-c);break}return{outline:Array.from(d),points:[Array.from(h)]}}get box(){return o(this,Vl)}newOutliner(t,s,r,i,a,l=0){return new S0(t,s,r,i,a,l)}getNewOutline(t,s){const[r,i,a,l]=o(this,Vl),[c,d,h,f]=o(this,mu),p=a*h,m=l*f,v=r*h+c,x=i*f+d,A=this.newOutliner({x:o(this,is)[0]*p+v,y:o(this,is)[1]*m+x},o(this,mu),o(this,Vp),t,o(this,Hp),s??o(this,Bi));for(let b=2;b<o(this,is).length;b+=2)A.add({x:o(this,is)[b]*p+v,y:o(this,is)[b+1]*m+x});return A.getOutlines()}}mu=new WeakMap,Vl=new WeakMap,Bi=new WeakMap,Hp=new WeakMap,is=new WeakMap,Vp=new WeakMap,gt=new WeakMap,W0=new WeakSet,ON=function(t){const s=o(this,gt);let r=s[4],i=s[5];const a=[r,i,r,i];let l=r,c=i,d=r,h=i;const f=t?Math.max:Math.min,p=new Float32Array(4);for(let v=6,x=s.length;v<x;v+=6){const A=s[v+4],b=s[v+5];isNaN(s[v])?(K.pointBoundingBox(A,b,a),c>b?(l=A,c=b):c===b&&(l=f(l,A)),h<b?(d=A,h=b):h===b&&(d=f(d,A))):(p[0]=p[1]=1/0,p[2]=p[3]=-1/0,K.bezierBoundingBox(r,i,...s.slice(v,v+6),p),K.rectBoundingBox(p[0],p[1],p[2],p[3],a),c>p[1]?(l=p[0],c=p[1]):c===p[1]&&(l=f(l,p[0])),h<p[3]?(d=p[2],h=p[3]):h===p[3]&&(d=f(d,p[2]))),r=A,i=b}const m=o(this,Vl);m[0]=a[0]-o(this,Bi),m[1]=a[1]-o(this,Bi),m[2]=a[2]-a[0]+2*o(this,Bi),m[3]=a[3]-a[1]+2*o(this,Bi),this.firstPoint=[l,c],this.lastPoint=[d,h]};var Wp,Gp,qp,Qa,lr,Nn,BN,Tg,UN,zN,Ab;class kb{constructor(e,t=0,s=0,r=!0){k(this,Nn);k(this,Wp);k(this,Gp);k(this,qp);k(this,Qa,[]);k(this,lr,[]);const i=[1/0,1/0,-1/0,-1/0],a=10**-4;for(const{x,y:A,width:b,height:g}of e){const w=Math.floor((x-t)/a)*a,S=Math.ceil((x+b+t)/a)*a,C=Math.floor((A-t)/a)*a,N=Math.ceil((A+g+t)/a)*a,_=[w,C,N,!0],P=[S,C,N,!1];o(this,Qa).push(_,P),K.rectBoundingBox(w,C,S,N,i)}const l=i[2]-i[0]+2*s,c=i[3]-i[1]+2*s,d=i[0]-s,h=i[1]-s;let f=r?-1/0:1/0,p=1/0;const m=o(this,Qa).at(r?-1:-2),v=[m[0],m[2]];for(const x of o(this,Qa)){const[A,b,g,w]=x;!w&&r?b<p?(p=b,f=A):b===p&&(f=Math.max(f,A)):w&&!r&&(b<p?(p=b,f=A):b===p&&(f=Math.min(f,A))),x[0]=(A-d)/l,x[1]=(b-h)/c,x[2]=(g-h)/c}y(this,Wp,new Float32Array([d,h,l,c])),y(this,Gp,[f,p]),y(this,qp,v)}getOutlines(){o(this,Qa).sort((t,s)=>t[0]-s[0]||t[1]-s[1]||t[2]-s[2]);const e=[];for(const t of o(this,Qa))t[3]?(e.push(...E(this,Nn,Ab).call(this,t)),E(this,Nn,UN).call(this,t)):(E(this,Nn,zN).call(this,t),e.push(...E(this,Nn,Ab).call(this,t)));return E(this,Nn,BN).call(this,e)}}Wp=new WeakMap,Gp=new WeakMap,qp=new WeakMap,Qa=new WeakMap,lr=new WeakMap,Nn=new WeakSet,BN=function(e){const t=[],s=new Set;for(const a of e){const[l,c,d]=a;t.push([l,c,a],[l,d,a])}t.sort((a,l)=>a[1]-l[1]||a[0]-l[0]);for(let a=0,l=t.length;a<l;a+=2){const c=t[a][2],d=t[a+1][2];c.push(d),d.push(c),s.add(c),s.add(d)}const r=[];let i;for(;s.size>0;){const a=s.values().next().value;let[l,c,d,h,f]=a;s.delete(a);let p=l,m=c;for(i=[l,d],r.push(i);;){let v;if(s.has(h))v=h;else if(s.has(f))v=f;else break;s.delete(v),[l,c,d,h,f]=v,p!==l&&(i.push(p,m,l,m===c?c:d),p=l),m=m===c?d:c}i.push(p,m)}return new lI(r,o(this,Wp),o(this,Gp),o(this,qp))},Tg=function(e){const t=o(this,lr);let s=0,r=t.length-1;for(;s<=r;){const i=s+r>>1,a=t[i][0];if(a===e)return i;a<e?s=i+1:r=i-1}return r+1},UN=function([,e,t]){const s=E(this,Nn,Tg).call(this,e);o(this,lr).splice(s,0,[e,t])},zN=function([,e,t]){const s=E(this,Nn,Tg).call(this,e);for(let r=s;r<o(this,lr).length;r++){const[i,a]=o(this,lr)[r];if(i!==e)break;if(i===e&&a===t){o(this,lr).splice(r,1);return}}for(let r=s-1;r>=0;r--){const[i,a]=o(this,lr)[r];if(i!==e)break;if(i===e&&a===t){o(this,lr).splice(r,1);return}}},Ab=function(e){const[t,s,r]=e,i=[[t,s,r]],a=E(this,Nn,Tg).call(this,r);for(let l=0;l<a;l++){const[c,d]=o(this,lr)[l];for(let h=0,f=i.length;h<f;h++){const[,p,m]=i[h];if(!(d<=p||m<=c)){if(p>=c){if(m>d)i[h][1]=d;else{if(f===1)return[];i.splice(h,1),h--,f--}continue}i[h][2]=c,m>d&&i.push([t,d,m])}}}return i};var Xp,gu;class lI extends X{constructor(t,s,r,i){super();k(this,Xp);k(this,gu);y(this,gu,t),y(this,Xp,s),this.firstPoint=r,this.lastPoint=i}toSVGPath(){const t=[];for(const s of o(this,gu)){let[r,i]=s;t.push(`M${r} ${i}`);for(let a=2;a<s.length;a+=2){const l=s[a],c=s[a+1];l===r?(t.push(`V${c}`),i=c):c===i&&(t.push(`H${l}`),r=l)}t.push("Z")}return t.join(" ")}serialize([t,s,r,i],a){const l=[],c=r-t,d=i-s;for(const h of o(this,gu)){const f=new Array(h.length);for(let p=0;p<h.length;p+=2)f[p]=t+h[p]*c,f[p+1]=i-h[p+1]*d;l.push(f)}return l}get box(){return o(this,Xp)}get classNamesForOutlining(){return["highlightOutline"]}}Xp=new WeakMap,gu=new WeakMap;class Sb extends S0{newFreeDrawOutline(e,t,s,r,i,a){return new cI(e,t,s,r,i,a)}}class cI extends FN{newOutliner(e,t,s,r,i,a=0){return new Sb(e,t,s,r,i,a)}}var yu,Kp,Ui,Wl,Yp,Fn,Qp,Jp,Gl,as,os,Xt,xu,vu,hn,bu,Ds,Zp,ue,Eb,Rg,$N,HN,VN,Cb,zo,Us,Rc,WN,Lg,Dg,GN,qN,XN,KN,YN;const Se=class Se extends We{constructor(t){super({...t,name:"highlightEditor"});k(this,ue);k(this,yu,null);k(this,Kp,0);k(this,Ui);k(this,Wl,null);k(this,Yp,null);k(this,Fn,null);k(this,Qp,null);k(this,Jp,0);k(this,Gl,null);k(this,as,null);k(this,os,null);k(this,Xt,!1);k(this,xu,null);k(this,vu,null);k(this,hn,null);k(this,bu,"");k(this,Ds);k(this,Zp,"");this.color=t.color||Se._defaultColor,y(this,Ds,t.thickness||Se._defaultThickness),this.opacity=t.opacity||Se._defaultOpacity,y(this,Ui,t.boxes||null),y(this,Zp,t.methodOfCreation||""),y(this,bu,t.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(y(this,Xt,!0),E(this,ue,Rg).call(this,t),E(this,ue,zo).call(this)):o(this,Ui)&&(y(this,yu,t.anchorNode),y(this,Kp,t.anchorOffset),y(this,Qp,t.focusNode),y(this,Jp,t.focusOffset),E(this,ue,Eb).call(this),E(this,ue,zo).call(this),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}static get _keyboardManager(){const t=Se.prototype;return de(this,"_keyboardManager",new gm([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:o(this,Xt)?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:o(this,Ds),methodOfCreation:o(this,Zp)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,s){var r;We.initialize(t,s),Se._defaultColor||(Se._defaultColor=((r=s.highlightColors)==null?void 0:r.values().next().value)||"#fff066")}static updateDefaultParams(t,s){switch(t){case ye.HIGHLIGHT_COLOR:Se._defaultColor=s;break;case ye.HIGHLIGHT_THICKNESS:Se._defaultThickness=s;break}}translateInPage(t,s){}get toolbarPosition(){return o(this,vu)}get commentButtonPosition(){return o(this,xu)}updateParams(t,s){switch(t){case ye.HIGHLIGHT_COLOR:E(this,ue,$N).call(this,s);break;case ye.HIGHLIGHT_THICKNESS:E(this,ue,HN).call(this,s);break}}static get defaultPropertiesToUpdate(){return[[ye.HIGHLIGHT_COLOR,Se._defaultColor],[ye.HIGHLIGHT_THICKNESS,Se._defaultThickness]]}get propertiesToUpdate(){return[[ye.HIGHLIGHT_COLOR,this.color||Se._defaultColor],[ye.HIGHLIGHT_THICKNESS,o(this,Ds)||Se._defaultThickness],[ye.HIGHLIGHT_FREE,o(this,Xt)]]}onUpdatedColor(){var t,s;(t=this.parent)==null||t.drawLayer.updateProperties(o(this,os),{root:{fill:this.color,"fill-opacity":this.opacity}}),(s=o(this,Yp))==null||s.updateColor(this.color),super.onUpdatedColor()}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",y(this,Yp,new wf({editor:this}))]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(E(this,ue,Dg).call(this))}getBaseTranslation(){return[0,0]}getRect(t,s){return super.getRect(t,s,E(this,ue,Dg).call(this))}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){E(this,ue,Cb).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(E(this,ue,zo).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var r;let s=!1;this.parent&&!t?E(this,ue,Cb).call(this):t&&(E(this,ue,zo).call(this,t),s=!this.parent&&((r=this.div)==null?void 0:r.classList.contains("selectedEditor"))),super.setParent(t),this.show(this._isVisible),s&&this.select()}rotate(t){var i,a,l;const{drawLayer:s}=this.parent;let r;o(this,Xt)?(t=(t-this.rotation+360)%360,r=E(i=Se,Us,Rc).call(i,o(this,as).box,t)):r=E(a=Se,Us,Rc).call(a,[this.x,this.y,this.width,this.height],t),s.updateProperties(o(this,os),{bbox:r,root:{"data-main-rotation":t}}),s.updateProperties(o(this,hn),{bbox:E(l=Se,Us,Rc).call(l,o(this,Fn).box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();o(this,bu)&&(t.setAttribute("aria-label",o(this,bu)),t.setAttribute("role","mark")),o(this,Xt)?t.classList.add("free"):this.div.addEventListener("keydown",E(this,ue,WN).bind(this),{signal:this._uiManager._signal});const s=y(this,Gl,document.createElement("div"));return t.append(s),s.setAttribute("aria-hidden","true"),s.className="internal",s.style.clipPath=o(this,Wl),this.setDims(this.width,this.height),yC(this,o(this,Gl),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(o(this,hn),{rootClass:{hovered:!0}})}pointerleave(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(o(this,hn),{rootClass:{hovered:!1}})}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:E(this,ue,Lg).call(this,!0);break;case 1:case 3:E(this,ue,Lg).call(this,!1);break}}select(){var t;super.select(),o(this,hn)&&((t=this.parent)==null||t.drawLayer.updateProperties(o(this,hn),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var t;super.unselect(),o(this,hn)&&((t=this.parent)==null||t.drawLayer.updateProperties(o(this,hn),{rootClass:{selected:!1}}),o(this,Xt)||E(this,ue,Lg).call(this,!1))}get _mustFixPosition(){return!o(this,Xt)}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(o(this,os),{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(o(this,hn),{rootClass:{hidden:!t}}))}static startHighlighting(t,s,{target:r,x:i,y:a}){const{x:l,y:c,width:d,height:h}=r.getBoundingClientRect(),f=new AbortController,p=t.combinedSignal(f),m=v=>{f.abort(),E(this,Us,KN).call(this,t,v)};window.addEventListener("blur",m,{signal:p}),window.addEventListener("pointerup",m,{signal:p}),window.addEventListener("pointerdown",st,{capture:!0,passive:!1,signal:p}),window.addEventListener("contextmenu",vs,{signal:p}),r.addEventListener("pointermove",E(this,Us,XN).bind(this,t),{signal:p}),this._freeHighlight=new Sb({x:i,y:a},[l,c,d,h],t.scale,this._defaultThickness/2,s,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(t,s,r){var x,A,b,g;let i=null;if(t instanceof SN){const{data:{quadPoints:w,rect:S,rotation:C,id:N,color:_,opacity:P,popupRef:L,richText:R,contentsObj:M,creationDate:F,modificationDate:G},parent:{page:{pageNumber:U}}}=t;i=t={annotationType:ie.HIGHLIGHT,color:Array.from(_),opacity:P,quadPoints:w,boxes:null,pageIndex:U-1,rect:S.slice(0),rotation:C,annotationElementId:N,id:N,deleted:!1,popupRef:L,richText:R,comment:(M==null?void 0:M.str)||null,creationDate:F,modificationDate:G}}else if(t instanceof l1){const{data:{inkLists:w,rect:S,rotation:C,id:N,color:_,borderStyle:{rawWidth:P},popupRef:L,richText:R,contentsObj:M,creationDate:F,modificationDate:G},parent:{page:{pageNumber:U}}}=t;i=t={annotationType:ie.HIGHLIGHT,color:Array.from(_),thickness:P,inkLists:w,boxes:null,pageIndex:U-1,rect:S.slice(0),rotation:C,annotationElementId:N,id:N,deleted:!1,popupRef:L,richText:R,comment:(M==null?void 0:M.str)||null,creationDate:F,modificationDate:G}}const{color:a,quadPoints:l,inkLists:c,opacity:d}=t,h=await super.deserialize(t,s,r);h.color=K.makeHexColor(...a),h.opacity=d||1,c&&y(h,Ds,t.thickness),h._initialData=i,t.comment&&h.setCommentData(t);const[f,p]=h.pageDimensions,[m,v]=h.pageTranslation;if(l){const w=y(h,Ui,[]);for(let S=0;S<l.length;S+=8)w.push({x:(l[S]-m)/f,y:1-(l[S+1]-v)/p,width:(l[S+2]-l[S])/f,height:(l[S+1]-l[S+5])/p});E(x=h,ue,Eb).call(x),E(A=h,ue,zo).call(A),h.rotate(h.rotation)}else if(c){y(h,Xt,!0);const w=c[0],S={x:w[0]-m,y:p-(w[1]-v)},C=new Sb(S,[0,0,f,p],1,o(h,Ds)/2,!0,.001);for(let P=0,L=w.length;P<L;P+=2)S.x=w[P]-m,S.y=p-(w[P+1]-v),C.add(S);const{id:N,clipPathId:_}=s.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:h.color,"fill-opacity":h._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:C.toSVGPath()}},!0,!0);E(b=h,ue,Rg).call(b,{highlightOutlines:C.getOutlines(),highlightId:N,clipPathId:_}),E(g=h,ue,zo).call(g),h.rotate(h.parentRotation)}return h}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const s=We._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),r=super.serialize(t);return Object.assign(r,{color:s,opacity:this.opacity,thickness:o(this,Ds),quadPoints:E(this,ue,GN).call(this),outlines:E(this,ue,qN).call(this,r.rect)}),this.addComment(r),this.annotationElementId&&!E(this,ue,YN).call(this,r)?null:(r.id=this.annotationElementId,r)}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}};yu=new WeakMap,Kp=new WeakMap,Ui=new WeakMap,Wl=new WeakMap,Yp=new WeakMap,Fn=new WeakMap,Qp=new WeakMap,Jp=new WeakMap,Gl=new WeakMap,as=new WeakMap,os=new WeakMap,Xt=new WeakMap,xu=new WeakMap,vu=new WeakMap,hn=new WeakMap,bu=new WeakMap,Ds=new WeakMap,Zp=new WeakMap,ue=new WeakSet,Eb=function(){const t=new kb(o(this,Ui),.001);y(this,as,t.getOutlines()),[this.x,this.y,this.width,this.height]=o(this,as).box;const s=new kb(o(this,Ui),.0025,.001,this._uiManager.direction==="ltr");y(this,Fn,s.getOutlines());const{firstPoint:r}=o(this,as);y(this,xu,[(r[0]-this.x)/this.width,(r[1]-this.y)/this.height]);const{lastPoint:i}=o(this,Fn);y(this,vu,[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height])},Rg=function({highlightOutlines:t,highlightId:s,clipPathId:r}){var p,m;if(y(this,as,t),y(this,Fn,t.getNewOutline(o(this,Ds)/2+1.5,.0025)),s>=0)y(this,os,s),y(this,Wl,r),this.parent.drawLayer.finalizeDraw(s,{bbox:t.box,path:{d:t.toSVGPath()}}),y(this,hn,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:o(this,Fn).box,path:{d:o(this,Fn).toSVGPath()}},!0));else if(this.parent){const v=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(o(this,os),{bbox:E(p=Se,Us,Rc).call(p,o(this,as).box,(v-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(o(this,hn),{bbox:E(m=Se,Us,Rc).call(m,o(this,Fn).box,v),path:{d:o(this,Fn).toSVGPath()}})}const[a,l,c,d]=t.box;switch(this.rotation){case 0:this.x=a,this.y=l,this.width=c,this.height=d;break;case 90:{const[v,x]=this.parentDimensions;this.x=l,this.y=1-a,this.width=c*x/v,this.height=d*v/x;break}case 180:this.x=1-a,this.y=1-l,this.width=c,this.height=d;break;case 270:{const[v,x]=this.parentDimensions;this.x=1-l,this.y=a,this.width=c*x/v,this.height=d*v/x;break}}const{firstPoint:h}=t;y(this,xu,[(h[0]-a)/c,(h[1]-l)/d]);const{lastPoint:f}=o(this,Fn);y(this,vu,[(f[0]-a)/c,(f[1]-l)/d])},$N=function(t){const s=(a,l)=>{this.color=a,this.opacity=l,this.onUpdatedColor()},r=this.color,i=this.opacity;this.addCommands({cmd:s.bind(this,t,Se._defaultOpacity),undo:s.bind(this,r,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ye.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(t)},!0)},HN=function(t){const s=o(this,Ds),r=i=>{y(this,Ds,i),E(this,ue,VN).call(this,i)};this.addCommands({cmd:r.bind(this,t),undo:r.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ye.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)},VN=function(t){o(this,Xt)&&(E(this,ue,Rg).call(this,{highlightOutlines:o(this,as).getNewOutline(t/2)}),this.fixAndSetPosition(),this.setDims(this.width,this.height))},Cb=function(){o(this,os)===null||!this.parent||(this.parent.drawLayer.remove(o(this,os)),y(this,os,null),this.parent.drawLayer.remove(o(this,hn)),y(this,hn,null))},zo=function(t=this.parent){o(this,os)===null&&({id:Et(this,os)._,clipPathId:Et(this,Wl)._}=t.drawLayer.draw({bbox:o(this,as).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:o(this,Xt)},path:{d:o(this,as).toSVGPath()}},!1,!0),y(this,hn,t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:o(this,Xt)},bbox:o(this,Fn).box,path:{d:o(this,Fn).toSVGPath()}},o(this,Xt))),o(this,Gl)&&(o(this,Gl).style.clipPath=o(this,Wl)))},Us=new WeakSet,Rc=function([t,s,r,i],a){switch(a){case 90:return[1-s-i,t,i,r];case 180:return[1-t-r,1-s-i,r,i];case 270:return[s,1-t-r,i,r]}return[t,s,r,i]},WN=function(t){Se._keyboardManager.exec(this,t)},Lg=function(t){if(!o(this,yu))return;const s=window.getSelection();t?s.setPosition(o(this,yu),o(this,Kp)):s.setPosition(o(this,Qp),o(this,Jp))},Dg=function(){return o(this,Xt)?this.rotation:0},GN=function(){if(o(this,Xt))return null;const[t,s]=this.pageDimensions,[r,i]=this.pageTranslation,a=o(this,Ui),l=new Float32Array(a.length*8);let c=0;for(const{x:d,y:h,width:f,height:p}of a){const m=d*t+r,v=(1-h)*s+i;l[c]=l[c+4]=m,l[c+1]=l[c+3]=v,l[c+2]=l[c+6]=m+f*t,l[c+5]=l[c+7]=v-p*s,c+=8}return l},qN=function(t){return o(this,as).serialize(t,E(this,ue,Dg).call(this))},XN=function(t,s){this._freeHighlight.add(s)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},KN=function(t,s){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(s,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},YN=function(t){const{color:s}=this._initialData;return this.hasEditedComment||t.color.some((r,i)=>r!==s[i])},k(Se,Us),I(Se,"_defaultColor",null),I(Se,"_defaultOpacity",1),I(Se,"_defaultThickness",12),I(Se,"_type","highlight"),I(Se,"_editorType",ie.HIGHLIGHT),I(Se,"_freeHighlightId",-1),I(Se,"_freeHighlight",null),I(Se,"_freeHighlightClipId","");let E0=Se;var ql;class QN{constructor(){k(this,ql,Object.create(null))}updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(const[t,s]of Object.entries(e))t.startsWith("_")||this.updateProperty(t,s)}updateSVGProperty(e,t){o(this,ql)[e]=t}toSVGProperties(){const e=o(this,ql);return y(this,ql,Object.create(null)),{root:e}}reset(){y(this,ql,Object.create(null))}updateAll(e=this){this.updateProperties(e)}clone(){$e("Not implemented")}}ql=new WeakMap;var ls,wu,Dt,Xl,Kl,Ja,Za,eo,Yl,we,Nb,_b,jb,Dh,JN,Mg,Mh,Lc;const Q=class Q extends We{constructor(t){super(t);k(this,we);k(this,ls,null);k(this,wu);I(this,"_colorPicker",null);I(this,"_drawId",null);y(this,wu,t.mustBeCommitted||!1),this._addOutlines(t)}onUpdatedColor(){var t;(t=this._colorPicker)==null||t.update(this.color),super.onUpdatedColor()}_addOutlines(t){t.drawOutlines&&(E(this,we,Nb).call(this,t),E(this,we,Dh).call(this))}static _mergeSVGProperties(t,s){const r=new Set(Object.keys(t));for(const[i,a]of Object.entries(s))r.has(i)?Object.assign(t[i],a):t[i]=a;return t}static getDefaultDrawingOptions(t){$e("Not implemented")}static get typesMap(){$e("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,s){const r=this.typesMap.get(t);r&&this._defaultDrawingOptions.updateProperty(r,s),this._currentParent&&(o(Q,Dt).updateProperty(r,s),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,s){const r=this.constructor.typesMap.get(t);r&&this._updateProperty(t,r,s)}static get defaultPropertiesToUpdate(){const t=[],s=this._defaultDrawingOptions;for(const[r,i]of this.typesMap)t.push([r,s[i]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:s}=this;for(const[r,i]of this.constructor.typesMap)t.push([r,s[i]]);return t}_updateProperty(t,s,r){const i=this._drawingOptions,a=i[s],l=c=>{var h;i.updateProperty(s,c);const d=o(this,ls).updateProperty(s,c);d&&E(this,we,Mh).call(this,d),(h=this.parent)==null||h.drawLayer.updateProperties(this._drawId,i.toSVGProperties()),t===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:l.bind(this,r),undo:l.bind(this,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,Q._mergeSVGProperties(o(this,ls).getPathResizingSVGProperties(E(this,we,Mg).call(this)),{bbox:E(this,we,Lc).call(this)}))}_onResized(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,Q._mergeSVGProperties(o(this,ls).getPathResizedSVGProperties(E(this,we,Mg).call(this)),{bbox:E(this,we,Lc).call(this)}))}_onTranslating(t,s){var r;(r=this.parent)==null||r.drawLayer.updateProperties(this._drawId,{bbox:E(this,we,Lc).call(this)})}_onTranslated(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,Q._mergeSVGProperties(o(this,ls).getPathTranslatedSVGProperties(E(this,we,Mg).call(this),this.parentDimensions),{bbox:E(this,we,Lc).call(this)}))}_onStartDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,o(this,wu)&&(y(this,wu,!1),this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){E(this,we,jb).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(E(this,we,Dh).call(this),E(this,we,Mh).call(this,o(this,ls).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var r;let s=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),E(this,we,jb).call(this)):t&&(this._uiManager.addShouldRescale(this),E(this,we,Dh).call(this,t),s=!this.parent&&((r=this.div)==null?void 0:r.classList.contains("selectedEditor"))),super.setParent(t),s&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,Q._mergeSVGProperties({bbox:E(this,we,Lc).call(this)},o(this,ls).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&E(this,we,Mh).call(this,o(this,ls).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,s;this._isCopy&&(t=this.x,s=this.y);const r=super.render();r.classList.add("draw");const i=document.createElement("div");return r.append(i),i.setAttribute("aria-hidden","true"),i.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,s),r}static createDrawerInstance(t,s,r,i,a){$e("Not implemented")}static startDrawing(t,s,r,i){var A;const{target:a,offsetX:l,offsetY:c,pointerId:d,pointerType:h}=i;if(o(Q,Za)&&o(Q,Za)!==h)return;const{viewport:{rotation:f}}=t,{width:p,height:m}=a.getBoundingClientRect(),v=y(Q,Xl,new AbortController),x=t.combinedSignal(v);if(o(Q,Ja)||y(Q,Ja,d),o(Q,Za)??y(Q,Za,h),window.addEventListener("pointerup",b=>{var g;o(Q,Ja)===b.pointerId?this._endDraw(b):(g=o(Q,eo))==null||g.delete(b.pointerId)},{signal:x}),window.addEventListener("pointercancel",b=>{var g;o(Q,Ja)===b.pointerId?this._currentParent.endDrawingSession():(g=o(Q,eo))==null||g.delete(b.pointerId)},{signal:x}),window.addEventListener("pointerdown",b=>{o(Q,Za)===b.pointerType&&((o(Q,eo)||y(Q,eo,new Set)).add(b.pointerId),o(Q,Dt).isCancellable()&&(o(Q,Dt).removeLastElement(),o(Q,Dt).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:x}),window.addEventListener("contextmenu",vs,{signal:x}),a.addEventListener("pointermove",this._drawMove.bind(this),{signal:x}),a.addEventListener("touchmove",b=>{b.timeStamp===o(Q,Yl)&&st(b)},{signal:x}),t.toggleDrawing(),(A=s._editorUndoBar)==null||A.hide(),o(Q,Dt)){t.drawLayer.updateProperties(this._currentDrawId,o(Q,Dt).startNew(l,c,p,m,f));return}s.updateUIForDefaultProperties(this),y(Q,Dt,this.createDrawerInstance(l,c,p,m,f)),y(Q,Kl,this.getDefaultDrawingOptions()),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(o(Q,Kl).toSVGProperties(),o(Q,Dt).defaultSVGProperties),!0,!1)}static _drawMove(t){var a;if(y(Q,Yl,-1),!o(Q,Dt))return;const{offsetX:s,offsetY:r,pointerId:i}=t;if(o(Q,Ja)===i){if(((a=o(Q,eo))==null?void 0:a.size)>=1){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,o(Q,Dt).add(s,r)),y(Q,Yl,t.timeStamp),st(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,y(Q,Dt,null),y(Q,Kl,null),y(Q,Za,null),y(Q,Yl,NaN)),o(Q,Xl)&&(o(Q,Xl).abort(),y(Q,Xl,null),y(Q,Ja,NaN),y(Q,eo,null))}static _endDraw(t){const s=this._currentParent;if(s){if(s.toggleDrawing(!0),this._cleanup(!1),(t==null?void 0:t.target)===s.div&&s.drawLayer.updateProperties(this._currentDrawId,o(Q,Dt).end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const r=o(Q,Dt),i=this._currentDrawId,a=r.getLastElement();s.addCommands({cmd:()=>{s.drawLayer.updateProperties(i,r.setLastElement(a))},undo:()=>{s.drawLayer.updateProperties(i,r.removeLastElement())},mustExec:!1,type:ye.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const s=this._currentParent;if(!s)return null;if(s.toggleDrawing(!0),s.cleanUndoStack(ye.DRAW_STEP),!o(Q,Dt).isEmpty()){const{pageDimensions:[r,i],scale:a}=s,l=s.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:o(Q,Dt).getOutlines(r*a,i*a,a,this._INNER_MARGIN),drawingOptions:o(Q,Kl),mustBeCommitted:!t});return this._cleanup(!0),l}return s.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,s,r,i,a,l){$e("Not implemented")}static async deserialize(t,s,r){var f,p;const{rawDims:{pageWidth:i,pageHeight:a,pageX:l,pageY:c}}=s.viewport,d=this.deserializeDraw(l,c,i,a,this._INNER_MARGIN,t),h=await super.deserialize(t,s,r);return h.createDrawingOptions(t),E(f=h,we,Nb).call(f,{drawOutlines:d}),E(p=h,we,Dh).call(p),h.onScaleChanging(),h.rotate(),h}serializeDraw(t){const[s,r]=this.pageTranslation,[i,a]=this.pageDimensions;return o(this,ls).serialize([s,r,i,a],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}};ls=new WeakMap,wu=new WeakMap,Dt=new WeakMap,Xl=new WeakMap,Kl=new WeakMap,Ja=new WeakMap,Za=new WeakMap,eo=new WeakMap,Yl=new WeakMap,we=new WeakSet,Nb=function({drawOutlines:t,drawId:s,drawingOptions:r}){y(this,ls,t),this._drawingOptions||(this._drawingOptions=r),this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),s>=0?(this._drawId=s,this.parent.drawLayer.finalizeDraw(s,t.defaultProperties)):this._drawId=E(this,we,_b).call(this,t,this.parent),E(this,we,Mh).call(this,t.box)},_b=function(t,s){const{id:r}=s.drawLayer.draw(Q._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return r},jb=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},Dh=function(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=E(this,we,_b).call(this,o(this,ls),t)}},JN=function([t,s,r,i]){const{parentDimensions:[a,l],rotation:c}=this;switch(c){case 90:return[s,1-t,r*(l/a),i*(a/l)];case 180:return[1-t,1-s,r,i];case 270:return[1-s,t,r*(l/a),i*(a/l)];default:return[t,s,r,i]}},Mg=function(){const{x:t,y:s,width:r,height:i,parentDimensions:[a,l],rotation:c}=this;switch(c){case 90:return[1-s,t,r*(a/l),i*(l/a)];case 180:return[1-t,1-s,r,i];case 270:return[s,1-t,r*(a/l),i*(l/a)];default:return[t,s,r,i]}},Mh=function(t){[this.x,this.y,this.width,this.height]=E(this,we,JN).call(this,t),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()},Lc=function(){const{x:t,y:s,width:r,height:i,rotation:a,parentRotation:l,parentDimensions:[c,d]}=this;switch((a*4+l)/90){case 1:return[1-s-i,t,i,r];case 2:return[1-t-r,1-s-i,r,i];case 3:return[s,1-t-r,i,r];case 4:return[t,s-r*(c/d),i*(d/c),r*(c/d)];case 5:return[1-s,t,r*(c/d),i*(d/c)];case 6:return[1-t-i*(d/c),1-s,i*(d/c),r*(c/d)];case 7:return[s-r*(c/d),1-t-i*(d/c),r*(c/d),i*(d/c)];case 8:return[t-r,s-i,r,i];case 9:return[1-s,t-r,i,r];case 10:return[1-t,1-s,r,i];case 11:return[s-i,1-t,i,r];case 12:return[t-i*(d/c),s,i*(d/c),r*(c/d)];case 13:return[1-s-r*(c/d),t-i*(d/c),r*(c/d),i*(d/c)];case 14:return[1-t,1-s-r*(c/d),i*(d/c),r*(c/d)];case 15:return[s,1-t,r*(c/d),i*(d/c)];default:return[t,s,r,i]}},I(Q,"_currentDrawId",-1),I(Q,"_currentParent",null),k(Q,Dt,null),k(Q,Xl,null),k(Q,Kl,null),k(Q,Ja,NaN),k(Q,Za,null),k(Q,eo,null),k(Q,Yl,NaN),I(Q,"_INNER_MARGIN",3);let C0=Q;var Gr,Mt,It,Ql,ku,bn,Kt,Ms,Jl,Zl,ec,Au,Ig;class dI{constructor(e,t,s,r,i,a){k(this,Au);k(this,Gr,new Float64Array(6));k(this,Mt);k(this,It);k(this,Ql);k(this,ku);k(this,bn);k(this,Kt,"");k(this,Ms,0);k(this,Jl,new xm);k(this,Zl);k(this,ec);y(this,Zl,s),y(this,ec,r),y(this,Ql,i),y(this,ku,a),[e,t]=E(this,Au,Ig).call(this,e,t);const l=y(this,Mt,[NaN,NaN,NaN,NaN,e,t]);y(this,bn,[e,t]),y(this,It,[{line:l,points:o(this,bn)}]),o(this,Gr).set(l,0)}updateProperty(e,t){e==="stroke-width"&&y(this,ku,t)}isEmpty(){return!o(this,It)||o(this,It).length===0}isCancellable(){return o(this,bn).length<=10}add(e,t){[e,t]=E(this,Au,Ig).call(this,e,t);const[s,r,i,a]=o(this,Gr).subarray(2,6),l=e-i,c=t-a;return Math.hypot(o(this,Zl)*l,o(this,ec)*c)<=2?null:(o(this,bn).push(e,t),isNaN(s)?(o(this,Gr).set([i,a,e,t],2),o(this,Mt).push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(o(this,Gr)[0])&&o(this,Mt).splice(6,6),o(this,Gr).set([s,r,i,a,e,t],0),o(this,Mt).push(...X.createBezierPoints(s,r,i,a,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){const s=this.add(e,t);return s||(o(this,bn).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,s,r,i){y(this,Zl,s),y(this,ec,r),y(this,Ql,i),[e,t]=E(this,Au,Ig).call(this,e,t);const a=y(this,Mt,[NaN,NaN,NaN,NaN,e,t]);y(this,bn,[e,t]);const l=o(this,It).at(-1);return l&&(l.line=new Float32Array(l.line),l.points=new Float32Array(l.points)),o(this,It).push({line:a,points:o(this,bn)}),o(this,Gr).set(a,0),y(this,Ms,0),this.toSVGPath(),null}getLastElement(){return o(this,It).at(-1)}setLastElement(e){return o(this,It)?(o(this,It).push(e),y(this,Mt,e.line),y(this,bn,e.points),y(this,Ms,0),{path:{d:this.toSVGPath()}}):o(this,Jl).setLastElement(e)}removeLastElement(){if(!o(this,It))return o(this,Jl).removeLastElement();o(this,It).pop(),y(this,Kt,"");for(let e=0,t=o(this,It).length;e<t;e++){const{line:s,points:r}=o(this,It)[e];y(this,Mt,s),y(this,bn,r),y(this,Ms,0),this.toSVGPath()}return{path:{d:o(this,Kt)}}}toSVGPath(){const e=X.svgRound(o(this,Mt)[4]),t=X.svgRound(o(this,Mt)[5]);if(o(this,bn).length===2)return y(this,Kt,`${o(this,Kt)} M ${e} ${t} Z`),o(this,Kt);if(o(this,bn).length<=6){const r=o(this,Kt).lastIndexOf("M");y(this,Kt,`${o(this,Kt).slice(0,r)} M ${e} ${t}`),y(this,Ms,6)}if(o(this,bn).length===4){const r=X.svgRound(o(this,Mt)[10]),i=X.svgRound(o(this,Mt)[11]);return y(this,Kt,`${o(this,Kt)} L ${r} ${i}`),y(this,Ms,12),o(this,Kt)}const s=[];o(this,Ms)===0&&(s.push(`M ${e} ${t}`),y(this,Ms,6));for(let r=o(this,Ms),i=o(this,Mt).length;r<i;r+=6){const[a,l,c,d,h,f]=o(this,Mt).slice(r,r+6).map(X.svgRound);s.push(`C${a} ${l} ${c} ${d} ${h} ${f}`)}return y(this,Kt,o(this,Kt)+s.join(" ")),y(this,Ms,o(this,Mt).length),o(this,Kt)}getOutlines(e,t,s,r){const i=o(this,It).at(-1);return i.line=new Float32Array(i.line),i.points=new Float32Array(i.points),o(this,Jl).build(o(this,It),e,t,s,o(this,Ql),o(this,ku),r),y(this,Gr,null),y(this,Mt,null),y(this,It,null),y(this,Kt,null),o(this,Jl)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}Gr=new WeakMap,Mt=new WeakMap,It=new WeakMap,Ql=new WeakMap,ku=new WeakMap,bn=new WeakMap,Kt=new WeakMap,Ms=new WeakMap,Jl=new WeakMap,Zl=new WeakMap,ec=new WeakMap,Au=new WeakSet,Ig=function(e,t){return X._normalizePoint(e,t,o(this,Zl),o(this,ec),o(this,Ql))};var wn,em,tm,cs,qr,Xr,Su,Eu,tc,Jt,ai,ZN,e_,t_;class xm extends X{constructor(){super(...arguments);k(this,Jt);k(this,wn);k(this,em,0);k(this,tm);k(this,cs);k(this,qr);k(this,Xr);k(this,Su);k(this,Eu);k(this,tc)}build(t,s,r,i,a,l,c){y(this,qr,s),y(this,Xr,r),y(this,Su,i),y(this,Eu,a),y(this,tc,l),y(this,tm,c??0),y(this,cs,t),E(this,Jt,e_).call(this)}get thickness(){return o(this,tc)}setLastElement(t){return o(this,cs).push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return o(this,cs).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:s}of o(this,cs)){if(t.push(`M${X.svgRound(s[4])} ${X.svgRound(s[5])}`),s.length===6){t.push("Z");continue}if(s.length===12&&isNaN(s[6])){t.push(`L${X.svgRound(s[10])} ${X.svgRound(s[11])}`);continue}for(let r=6,i=s.length;r<i;r+=6){const[a,l,c,d,h,f]=s.subarray(r,r+6).map(X.svgRound);t.push(`C${a} ${l} ${c} ${d} ${h} ${f}`)}}return t.join("")}serialize([t,s,r,i],a){const l=[],c=[],[d,h,f,p]=E(this,Jt,ZN).call(this);let m,v,x,A,b,g,w,S,C;switch(o(this,Eu)){case 0:C=X._rescale,m=t,v=s+i,x=r,A=-i,b=t+d*r,g=s+(1-h-p)*i,w=t+(d+f)*r,S=s+(1-h)*i;break;case 90:C=X._rescaleAndSwap,m=t,v=s,x=r,A=i,b=t+h*r,g=s+d*i,w=t+(h+p)*r,S=s+(d+f)*i;break;case 180:C=X._rescale,m=t+r,v=s,x=-r,A=i,b=t+(1-d-f)*r,g=s+h*i,w=t+(1-d)*r,S=s+(h+p)*i;break;case 270:C=X._rescaleAndSwap,m=t+r,v=s+i,x=-r,A=-i,b=t+(1-h-p)*r,g=s+(1-d-f)*i,w=t+(1-h)*r,S=s+(1-d)*i;break}for(const{line:N,points:_}of o(this,cs))l.push(C(N,m,v,x,A,a?new Array(N.length):null)),c.push(C(_,m,v,x,A,a?new Array(_.length):null));return{lines:l,points:c,rect:[b,g,w,S]}}static deserialize(t,s,r,i,a,{paths:{lines:l,points:c},rotation:d,thickness:h}){const f=[];let p,m,v,x,A;switch(d){case 0:A=X._rescale,p=-t/r,m=s/i+1,v=1/r,x=-1/i;break;case 90:A=X._rescaleAndSwap,p=-s/i,m=-t/r,v=1/i,x=1/r;break;case 180:A=X._rescale,p=t/r+1,m=-s/i,v=-1/r,x=1/i;break;case 270:A=X._rescaleAndSwap,p=s/i+1,m=t/r+1,v=-1/i,x=-1/r;break}if(!l){l=[];for(const g of c){const w=g.length;if(w===2){l.push(new Float32Array([NaN,NaN,NaN,NaN,g[0],g[1]]));continue}if(w===4){l.push(new Float32Array([NaN,NaN,NaN,NaN,g[0],g[1],NaN,NaN,NaN,NaN,g[2],g[3]]));continue}const S=new Float32Array(3*(w-2));l.push(S);let[C,N,_,P]=g.subarray(0,4);S.set([NaN,NaN,NaN,NaN,C,N],0);for(let L=4;L<w;L+=2){const R=g[L],M=g[L+1];S.set(X.createBezierPoints(C,N,_,P,R,M),(L-2)*3),[C,N,_,P]=[_,P,R,M]}}}for(let g=0,w=l.length;g<w;g++)f.push({line:A(l[g].map(S=>S??NaN),p,m,v,x),points:A(c[g].map(S=>S??NaN),p,m,v,x)});const b=new this.prototype.constructor;return b.build(f,r,i,1,d,h,a),b}get box(){return o(this,wn)}updateProperty(t,s){return t==="stroke-width"?E(this,Jt,t_).call(this,s):null}updateParentDimensions([t,s],r){const[i,a]=E(this,Jt,ai).call(this);y(this,qr,t),y(this,Xr,s),y(this,Su,r);const[l,c]=E(this,Jt,ai).call(this),d=l-i,h=c-a,f=o(this,wn);return f[0]-=d,f[1]-=h,f[2]+=2*d,f[3]+=2*h,f}updateRotation(t){return y(this,em,t),{path:{transform:this.rotationTransform}}}get viewBox(){return o(this,wn).map(X.svgRound).join(" ")}get defaultProperties(){const[t,s]=o(this,wn);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${X.svgRound(t)} ${X.svgRound(s)}`}}}get rotationTransform(){const[,,t,s]=o(this,wn);let r=0,i=0,a=0,l=0,c=0,d=0;switch(o(this,em)){case 90:i=s/t,a=-t/s,c=t;break;case 180:r=-1,l=-1,c=t,d=s;break;case 270:i=-s/t,a=t/s,d=s;break;default:return""}return`matrix(${r} ${i} ${a} ${l} ${X.svgRound(c)} ${X.svgRound(d)})`}getPathResizingSVGProperties([t,s,r,i]){const[a,l]=E(this,Jt,ai).call(this),[c,d,h,f]=o(this,wn);if(Math.abs(h-a)<=X.PRECISION||Math.abs(f-l)<=X.PRECISION){const A=t+r/2-(c+h/2),b=s+i/2-(d+f/2);return{path:{"transform-origin":`${X.svgRound(t)} ${X.svgRound(s)}`,transform:`${this.rotationTransform} translate(${A} ${b})`}}}const p=(r-2*a)/(h-2*a),m=(i-2*l)/(f-2*l),v=h/r,x=f/i;return{path:{"transform-origin":`${X.svgRound(c)} ${X.svgRound(d)}`,transform:`${this.rotationTransform} scale(${v} ${x}) translate(${X.svgRound(a)} ${X.svgRound(l)}) scale(${p} ${m}) translate(${X.svgRound(-a)} ${X.svgRound(-l)})`}}}getPathResizedSVGProperties([t,s,r,i]){const[a,l]=E(this,Jt,ai).call(this),c=o(this,wn),[d,h,f,p]=c;if(c[0]=t,c[1]=s,c[2]=r,c[3]=i,Math.abs(f-a)<=X.PRECISION||Math.abs(p-l)<=X.PRECISION){const b=t+r/2-(d+f/2),g=s+i/2-(h+p/2);for(const{line:w,points:S}of o(this,cs))X._translate(w,b,g,w),X._translate(S,b,g,S);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${X.svgRound(t)} ${X.svgRound(s)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const m=(r-2*a)/(f-2*a),v=(i-2*l)/(p-2*l),x=-m*(d+a)+t+a,A=-v*(h+l)+s+l;if(m!==1||v!==1||x!==0||A!==0)for(const{line:b,points:g}of o(this,cs))X._rescale(b,x,A,m,v,b),X._rescale(g,x,A,m,v,g);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${X.svgRound(t)} ${X.svgRound(s)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,s],r){const[i,a]=r,l=o(this,wn),c=t-l[0],d=s-l[1];if(o(this,qr)===i&&o(this,Xr)===a)for(const{line:h,points:f}of o(this,cs))X._translate(h,c,d,h),X._translate(f,c,d,f);else{const h=o(this,qr)/i,f=o(this,Xr)/a;y(this,qr,i),y(this,Xr,a);for(const{line:p,points:m}of o(this,cs))X._rescale(p,c,d,h,f,p),X._rescale(m,c,d,h,f,m);l[2]*=h,l[3]*=f}return l[0]=t,l[1]=s,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${X.svgRound(t)} ${X.svgRound(s)}`}}}get defaultSVGProperties(){const t=o(this,wn);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${X.svgRound(t[0])} ${X.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}wn=new WeakMap,em=new WeakMap,tm=new WeakMap,cs=new WeakMap,qr=new WeakMap,Xr=new WeakMap,Su=new WeakMap,Eu=new WeakMap,tc=new WeakMap,Jt=new WeakSet,ai=function(t=o(this,tc)){const s=o(this,tm)+t/2*o(this,Su);return o(this,Eu)%180===0?[s/o(this,qr),s/o(this,Xr)]:[s/o(this,Xr),s/o(this,qr)]},ZN=function(){const[t,s,r,i]=o(this,wn),[a,l]=E(this,Jt,ai).call(this,0);return[t+a,s+l,r-2*a,i-2*l]},e_=function(){const t=y(this,wn,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:i}of o(this,cs)){if(i.length<=12){for(let c=4,d=i.length;c<d;c+=6)K.pointBoundingBox(i[c],i[c+1],t);continue}let a=i[4],l=i[5];for(let c=6,d=i.length;c<d;c+=6){const[h,f,p,m,v,x]=i.subarray(c,c+6);K.bezierBoundingBox(a,l,h,f,p,m,v,x,t),a=v,l=x}}const[s,r]=E(this,Jt,ai).call(this);t[0]=fn(t[0]-s,0,1),t[1]=fn(t[1]-r,0,1),t[2]=fn(t[2]+s,0,1),t[3]=fn(t[3]+r,0,1),t[2]-=t[0],t[3]-=t[1]},t_=function(t){const[s,r]=E(this,Jt,ai).call(this);y(this,tc,t);const[i,a]=E(this,Jt,ai).call(this),[l,c]=[i-s,a-r],d=o(this,wn);return d[0]-=l,d[1]-=c,d[2]+=2*l,d[3]+=2*c,d};class Ay extends QN{constructor(e){super(),this._viewParameters=e,super.updateProperties({fill:"none",stroke:We._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,t){e==="stroke-width"&&(t??(t=this["stroke-width"]),t*=this._viewParameters.realScale),super.updateSVGProperty(e,t)}clone(){const e=new Ay(this._viewParameters);return e.updateAll(this),e}}var G0,n_;const Yc=class Yc extends C0{constructor(t){super({...t,name:"inkEditor"});k(this,G0);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,s){We.initialize(t,s),this._defaultDrawingOptions=new Ay(s.viewParameters)}static getDefaultDrawingOptions(t){const s=this._defaultDrawingOptions.clone();return s.updateProperties(t),s}static get supportMultipleDrawings(){return!0}static get typesMap(){return de(this,"typesMap",new Map([[ye.INK_THICKNESS,"stroke-width"],[ye.INK_COLOR,"stroke"],[ye.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,s,r,i,a){return new dI(t,s,r,i,a,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,s,r,i,a,l){return xm.deserialize(t,s,r,i,a,l)}static async deserialize(t,s,r){let i=null;if(t instanceof l1){const{data:{inkLists:l,rect:c,rotation:d,id:h,color:f,opacity:p,borderStyle:{rawWidth:m},popupRef:v,richText:x,contentsObj:A,creationDate:b,modificationDate:g},parent:{page:{pageNumber:w}}}=t;i=t={annotationType:ie.INK,color:Array.from(f),thickness:m,opacity:p,paths:{points:l},boxes:null,pageIndex:w-1,rect:c.slice(0),rotation:d,annotationElementId:h,id:h,deleted:!1,popupRef:v,richText:x,comment:(A==null?void 0:A.str)||null,creationDate:b,modificationDate:g}}const a=await super.deserialize(t,s,r);return a._initialData=i,t.comment&&a.setCommentData(t),a}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new A0(this)),[["colorPicker",this._colorPicker]]}get colorType(){return ye.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:s,parent:r}=this;s.updateSVGProperty("stroke-width"),r.drawLayer.updateProperties(t,s.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:s,opacity:r}){this._drawingOptions=Yc.getDefaultDrawingOptions({stroke:K.makeHexColor(...t),"stroke-width":s,"stroke-opacity":r})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:s,points:r}=this.serializeDraw(t),{_drawingOptions:{stroke:i,"stroke-opacity":a,"stroke-width":l}}=this,c=Object.assign(super.serialize(t),{color:We._colorManager.convert(i),opacity:a,thickness:l,paths:{lines:s,points:r}});return this.addComment(c),t?(c.isCopy=!0,c):this.annotationElementId&&!E(this,G0,n_).call(this,c)?null:(c.id=this.annotationElementId,c)}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;const{points:s,rect:r}=this.serializeDraw(!1);return t.updateEdited({rect:r,thickness:this._drawingOptions["stroke-width"],points:s,popup:this.comment}),null}};G0=new WeakSet,n_=function(t){const{color:s,thickness:r,opacity:i,pageIndex:a}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||t.color.some((l,c)=>l!==s[c])||t.thickness!==r||t.opacity!==i||t.pageIndex!==a},I(Yc,"_type","ink"),I(Yc,"_editorType",ie.INK),I(Yc,"_defaultDrawingOptions",null);let Pb=Yc;class Tb extends xm{toSVGPath(){let e=super.toSVGPath();return e.endsWith("Z")||(e+="Z"),e}}const Km=8,hh=3;var nc,Ce,Rb,cr,s_,r_,Lb,Fg,i_,a_,o_,Db,Mb,l_;class Zr{static extractContoursFromText(e,{fontFamily:t,fontStyle:s,fontWeight:r},i,a,l,c){let d=new OffscreenCanvas(1,1),h=d.getContext("2d",{alpha:!1});const f=200,p=h.font=`${s} ${r} ${f}px ${t}`,{actualBoundingBoxLeft:m,actualBoundingBoxRight:v,actualBoundingBoxAscent:x,actualBoundingBoxDescent:A,fontBoundingBoxAscent:b,fontBoundingBoxDescent:g,width:w}=h.measureText(e),S=1.5,C=Math.ceil(Math.max(Math.abs(m)+Math.abs(v)||0,w)*S),N=Math.ceil(Math.max(Math.abs(x)+Math.abs(A)||f,Math.abs(b)+Math.abs(g)||f)*S);d=new OffscreenCanvas(C,N),h=d.getContext("2d",{alpha:!0,willReadFrequently:!0}),h.font=p,h.filter="grayscale(1)",h.fillStyle="white",h.fillRect(0,0,C,N),h.fillStyle="black",h.fillText(e,C*(S-1)/2,N*(3-S)/2);const _=E(this,Ce,Db).call(this,h.getImageData(0,0,C,N).data),P=E(this,Ce,o_).call(this,_),L=E(this,Ce,Mb).call(this,P),R=E(this,Ce,Lb).call(this,_,C,N,L);return this.processDrawnLines({lines:{curves:R,width:C,height:N},pageWidth:i,pageHeight:a,rotation:l,innerMargin:c,mustSmooth:!0,areContours:!0})}static process(e,t,s,r,i){const[a,l,c]=E(this,Ce,l_).call(this,e),[d,h]=E(this,Ce,a_).call(this,a,l,c,Math.hypot(l,c)*o(this,nc).sigmaSFactor,o(this,nc).sigmaR,o(this,nc).kernelSize),f=E(this,Ce,Mb).call(this,h),p=E(this,Ce,Lb).call(this,d,l,c,f);return this.processDrawnLines({lines:{curves:p,width:l,height:c},pageWidth:t,pageHeight:s,rotation:r,innerMargin:i,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:e,pageWidth:t,pageHeight:s,rotation:r,innerMargin:i,mustSmooth:a,areContours:l}){r%180!==0&&([t,s]=[s,t]);const{curves:c,width:d,height:h}=e,f=e.thickness??0,p=[],m=Math.min(t/d,s/h),v=m/t,x=m/s,A=[];for(const{points:g}of c){const w=a?E(this,Ce,i_).call(this,g):g;if(!w)continue;A.push(w);const S=w.length,C=new Float32Array(S),N=new Float32Array(3*(S===2?2:S-2));if(p.push({line:N,points:C}),S===2){C[0]=w[0]*v,C[1]=w[1]*x,N.set([NaN,NaN,NaN,NaN,C[0],C[1]],0);continue}let[_,P,L,R]=w;_*=v,P*=x,L*=v,R*=x,C.set([_,P,L,R],0),N.set([NaN,NaN,NaN,NaN,_,P],0);for(let M=4;M<S;M+=2){const F=C[M]=w[M]*v,G=C[M+1]=w[M+1]*x;N.set(X.createBezierPoints(_,P,L,R,F,G),(M-2)*3),[_,P,L,R]=[L,R,F,G]}}if(p.length===0)return null;const b=l?new Tb:new xm;return b.build(p,t,s,1,r,l?0:f,i),{outline:b,newCurves:A,areContours:l,thickness:f,width:d,height:h}}static async compressSignature({outlines:e,areContours:t,thickness:s,width:r,height:i}){let a=1/0,l=-1/0,c=0;for(const w of e){c+=w.length;for(let S=2,C=w.length;S<C;S++){const N=w[S]-w[S-2];a=Math.min(a,N),l=Math.max(l,N)}}let d;a>=-128&&l<=127?d=Int8Array:a>=-32768&&l<=32767?d=Int16Array:d=Int32Array;const h=e.length,f=Km+hh*h,p=new Uint32Array(f);let m=0;p[m++]=f*Uint32Array.BYTES_PER_ELEMENT+(c-2*h)*d.BYTES_PER_ELEMENT,p[m++]=0,p[m++]=r,p[m++]=i,p[m++]=t?0:1,p[m++]=Math.max(0,Math.floor(s??0)),p[m++]=h,p[m++]=d.BYTES_PER_ELEMENT;for(const w of e)p[m++]=w.length-2,p[m++]=w[0],p[m++]=w[1];const v=new CompressionStream("deflate-raw"),x=v.writable.getWriter();await x.ready,x.write(p);const A=d.prototype.constructor;for(const w of e){const S=new A(w.length-2);for(let C=2,N=w.length;C<N;C++)S[C-2]=w[C]-w[C-2];x.write(S)}x.close();const b=await new Response(v.readable).arrayBuffer(),g=new Uint8Array(b);return iC(g)}static async decompressSignature(e){try{const t=MD(e),{readable:s,writable:r}=new DecompressionStream("deflate-raw"),i=r.getWriter();await i.ready,i.write(t).then(async()=>{await i.ready,await i.close()}).catch(()=>{});let a=null,l=0;for await(const w of s)a||(a=new Uint8Array(new Uint32Array(w.buffer,0,4)[0])),a.set(w,l),l+=w.length;const c=new Uint32Array(a.buffer,0,a.length>>2),d=c[1];if(d!==0)throw new Error(`Invalid version: ${d}`);const h=c[2],f=c[3],p=c[4]===0,m=c[5],v=c[6],x=c[7],A=[],b=(Km+hh*v)*Uint32Array.BYTES_PER_ELEMENT;let g;switch(x){case Int8Array.BYTES_PER_ELEMENT:g=new Int8Array(a.buffer,b);break;case Int16Array.BYTES_PER_ELEMENT:g=new Int16Array(a.buffer,b);break;case Int32Array.BYTES_PER_ELEMENT:g=new Int32Array(a.buffer,b);break}l=0;for(let w=0;w<v;w++){const S=c[hh*w+Km],C=new Float32Array(S+2);A.push(C);for(let N=0;N<hh-1;N++)C[N]=c[hh*w+Km+N+1];for(let N=0;N<S;N++)C[N+2]=C[N]+g[l++]}return{areContours:p,thickness:m,outlines:A,width:h,height:f}}catch(t){return ae(`decompressSignature: ${t}`),null}}}nc=new WeakMap,Ce=new WeakSet,Rb=function(e,t,s,r){return s-=e,r-=t,s===0?r>0?0:4:s===1?r+6:2-r},cr=new WeakMap,s_=function(e,t,s,r,i,a,l){const c=E(this,Ce,Rb).call(this,s,r,i,a);for(let d=0;d<8;d++){const h=(-d+c-l+16)%8,f=o(this,cr)[2*h],p=o(this,cr)[2*h+1];if(e[(s+f)*t+(r+p)]!==0)return h}return-1},r_=function(e,t,s,r,i,a,l){const c=E(this,Ce,Rb).call(this,s,r,i,a);for(let d=0;d<8;d++){const h=(d+c+l+16)%8,f=o(this,cr)[2*h],p=o(this,cr)[2*h+1];if(e[(s+f)*t+(r+p)]!==0)return h}return-1},Lb=function(e,t,s,r){const i=e.length,a=new Int32Array(i);for(let h=0;h<i;h++)a[h]=e[h]<=r?1:0;for(let h=1;h<s-1;h++)a[h*t]=a[h*t+t-1]=0;for(let h=0;h<t;h++)a[h]=a[t*s-1-h]=0;let l=1,c;const d=[];for(let h=1;h<s-1;h++){c=1;for(let f=1;f<t-1;f++){const p=h*t+f,m=a[p];if(m===0)continue;let v=h,x=f;if(m===1&&a[p-1]===0)l+=1,x-=1;else if(m>=1&&a[p+1]===0)l+=1,x+=1,m>1&&(c=m);else{m!==1&&(c=Math.abs(m));continue}const A=[f,h],b=x===f+1,g={isHole:b,points:A,id:l,parent:0};d.push(g);let w;for(const M of d)if(M.id===c){w=M;break}w?w.isHole?g.parent=b?w.parent:c:g.parent=b?c:w.parent:g.parent=b?c:0;const S=E(this,Ce,s_).call(this,a,t,h,f,v,x,0);if(S===-1){a[p]=-l,a[p]!==1&&(c=Math.abs(a[p]));continue}let C=o(this,cr)[2*S],N=o(this,cr)[2*S+1];const _=h+C,P=f+N;v=_,x=P;let L=h,R=f;for(;;){const M=E(this,Ce,r_).call(this,a,t,L,R,v,x,1);C=o(this,cr)[2*M],N=o(this,cr)[2*M+1];const F=L+C,G=R+N;A.push(G,F);const U=L*t+R;if(a[U+1]===0?a[U]=-l:a[U]===1&&(a[U]=l),F===h&&G===f&&L===_&&R===P){a[p]!==1&&(c=Math.abs(a[p]));break}else v=L,x=R,L=F,R=G}}}return d},Fg=function(e,t,s,r){if(s-t<=4){for(let _=t;_<s-2;_+=2)r.push(e[_],e[_+1]);return}const i=e[t],a=e[t+1],l=e[s-4]-i,c=e[s-3]-a,d=Math.hypot(l,c),h=l/d,f=c/d,p=h*a-f*i,m=c/l,v=1/d,x=Math.atan(m),A=Math.cos(x),b=Math.sin(x),g=v*(Math.abs(A)+Math.abs(b)),w=v*(1-g+g**2),S=Math.max(Math.atan(Math.abs(b+A)*w),Math.atan(Math.abs(b-A)*w));let C=0,N=t;for(let _=t+2;_<s-2;_+=2){const P=Math.abs(p-h*e[_+1]+f*e[_]);P>C&&(N=_,C=P)}C>(d*S)**2?(E(this,Ce,Fg).call(this,e,t,N+2,r),E(this,Ce,Fg).call(this,e,N,s,r)):r.push(i,a)},i_=function(e){const t=[],s=e.length;return E(this,Ce,Fg).call(this,e,0,s,t),t.push(e[s-2],e[s-1]),t.length<=4?null:t},a_=function(e,t,s,r,i,a){const l=new Float32Array(a**2),c=-2*r**2,d=a>>1;for(let x=0;x<a;x++){const A=(x-d)**2;for(let b=0;b<a;b++)l[x*a+b]=Math.exp((A+(b-d)**2)/c)}const h=new Float32Array(256),f=-2*i**2;for(let x=0;x<256;x++)h[x]=Math.exp(x**2/f);const p=e.length,m=new Uint8Array(p),v=new Uint32Array(256);for(let x=0;x<s;x++)for(let A=0;A<t;A++){const b=x*t+A,g=e[b];let w=0,S=0;for(let N=0;N<a;N++){const _=x+N-d;if(!(_<0||_>=s))for(let P=0;P<a;P++){const L=A+P-d;if(L<0||L>=t)continue;const R=e[_*t+L],M=l[N*a+P]*h[Math.abs(R-g)];w+=R*M,S+=M}}const C=m[b]=Math.round(w/S);v[C]++}return[m,v]},o_=function(e){const t=new Uint32Array(256);for(const s of e)t[s]++;return t},Db=function(e){const t=e.length,s=new Uint8ClampedArray(t>>2);let r=-1/0,i=1/0;for(let l=0,c=s.length;l<c;l++){const d=s[l]=e[l<<2];r=Math.max(r,d),i=Math.min(i,d)}const a=255/(r-i);for(let l=0,c=s.length;l<c;l++)s[l]=(s[l]-i)*a;return s},Mb=function(e){let t,s=-1/0,r=-1/0;const i=e.findIndex(c=>c!==0);let a=i,l=i;for(t=i;t<256;t++){const c=e[t];c>s&&(t-a>r&&(r=t-a,l=t-1),s=c,a=t)}for(t=l-1;t>=0&&!(e[t]>e[t+1]);t--);return t},l_=function(e){const t=e,{width:s,height:r}=e,{maxDim:i}=o(this,nc);let a=s,l=r;if(s>i||r>i){let p=s,m=r,v=Math.log2(Math.max(s,r)/i);const x=Math.floor(v);v=v===x?x-1:x;for(let b=0;b<v;b++){a=Math.ceil(p/2),l=Math.ceil(m/2);const g=new OffscreenCanvas(a,l);g.getContext("2d").drawImage(e,0,0,p,m,0,0,a,l),p=a,m=l,e!==t&&e.close(),e=g.transferToImageBitmap()}const A=Math.min(i/a,i/l);a=Math.round(a*A),l=Math.round(l*A)}const d=new OffscreenCanvas(a,l).getContext("2d",{willReadFrequently:!0});d.fillStyle="white",d.fillRect(0,0,a,l),d.filter="grayscale(1)",d.drawImage(e,0,0,e.width,e.height,0,0,a,l);const h=d.getImageData(0,0,a,l).data;return[E(this,Ce,Db).call(this,h),a,l]},k(Zr,Ce),k(Zr,nc,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),k(Zr,cr,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class d1 extends QN{constructor(){super(),super.updateProperties({fill:We._defaultLineColor,"stroke-width":0})}clone(){const e=new d1;return e.updateAll(this),e}}class u1 extends Ay{constructor(e){super(e),super.updateProperties({stroke:We._defaultLineColor,"stroke-width":1})}clone(){const e=new u1(this._viewParameters);return e.updateAll(this),e}}var to,Kr,no,sc;const qn=class qn extends C0{constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"});k(this,to,!1);k(this,Kr,null);k(this,no,null);k(this,sc,null);this._willKeepAspectRatio=!0,y(this,no,t.signatureData||null),y(this,Kr,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,s){We.initialize(t,s),this._defaultDrawingOptions=new d1,this._defaultDrawnSignatureOptions=new u1(s.viewParameters)}static getDefaultDrawingOptions(t){const s=this._defaultDrawingOptions.clone();return s.updateProperties(t),s}static get supportMultipleDrawings(){return!1}static get typesMap(){return de(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!o(this,Kr)}}static computeTelemetryFinalData(t){const s=t.get("hasDescription");return{hasAltText:s.get(!0)??0,hasNoAltText:s.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,s;const{_isCopy:r}=this;if(r&&(this._isCopy=!1,t=this.x,s=this.y),super.render(),this._drawId===null)if(o(this,no)){const{lines:i,mustSmooth:a,areContours:l,description:c,uuid:d,heightInPage:h}=o(this,no),{rawDims:{pageWidth:f,pageHeight:p},rotation:m}=this.parent.viewport,v=Zr.processDrawnLines({lines:i,pageWidth:f,pageHeight:p,rotation:m,innerMargin:qn._INNER_MARGIN,mustSmooth:a,areContours:l});this.addSignature(v,h,c,d)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:o(this,Kr)||""}));return r&&(this._isCopy=!0,this._moveAfterPaste(t,s)),this.div}setUuid(t){y(this,sc,t),this.addEditToolbar()}getUuid(){return o(this,sc)}get description(){return o(this,Kr)}set description(t){y(this,Kr,t),this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:t})),super.addEditToolbar().then(s=>{s==null||s.updateEditSignatureButton(t)}))}getSignaturePreview(){const{newCurves:t,areContours:s,thickness:r,width:i,height:a}=o(this,no),l=Math.max(i,a),c=Zr.processDrawnLines({lines:{curves:t.map(d=>({points:d})),thickness:r,width:i,height:a},pageWidth:l,pageHeight:l,rotation:0,innerMargin:0,mustSmooth:!1,areContours:s});return{areContours:s,outline:c.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,s,r,i){const{x:a,y:l}=this,{outline:c}=y(this,no,t);y(this,to,c instanceof Tb),this.description=r;let d;o(this,to)?d=qn.getDefaultDrawingOptions():(d=qn._defaultDrawnSignatureOptions.clone(),d.updateProperties({"stroke-width":c.thickness})),this._addOutlines({drawOutlines:c,drawingOptions:d});const[,h]=this.pageDimensions;let f=s/h;f=f>=1?.5:f,this.width*=f/this.height,this.width>=1&&(f*=.9/this.width,this.width=.9),this.height=f,this.setDims(),this.x=a,this.y=l,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(i),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!i,hasDescription:!!r}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:s,pageHeight:r},rotation:i}=this.parent.viewport;return Zr.process(t,s,r,i,qn._INNER_MARGIN)}getFromText(t,s){const{rawDims:{pageWidth:r,pageHeight:i},rotation:a}=this.parent.viewport;return Zr.extractContoursFromText(t,s,r,i,a,qn._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:s,pageHeight:r},rotation:i}=this.parent.viewport;return Zr.processDrawnLines({lines:t,pageWidth:s,pageHeight:r,rotation:i,innerMargin:qn._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:s}){t?this._drawingOptions=qn.getDefaultDrawingOptions():(this._drawingOptions=qn._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":s}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:s,points:r}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":i}}=this,a=Object.assign(super.serialize(t),{isSignature:!0,areContours:o(this,to),color:[0,0,0],thickness:o(this,to)?0:i});return this.addComment(a),t?(a.paths={lines:s,points:r},a.uuid=o(this,sc),a.isCopy=!0):a.lines=s,o(this,Kr)&&(a.accessibilityData={type:"Figure",alt:o(this,Kr)}),a}static deserializeDraw(t,s,r,i,a,l){return l.areContours?Tb.deserialize(t,s,r,i,a,l):xm.deserialize(t,s,r,i,a,l)}static async deserialize(t,s,r){var a;const i=await super.deserialize(t,s,r);return y(i,to,t.areContours),i.description=((a=t.accessibilityData)==null?void 0:a.alt)||"",y(i,sc,t.uuid),i}};to=new WeakMap,Kr=new WeakMap,no=new WeakMap,sc=new WeakMap,I(qn,"_type","signature"),I(qn,"_editorType",ie.SIGNATURE),I(qn,"_defaultDrawingOptions",null);let Ib=qn;var Qe,Ft,so,zi,ro,Cu,$i,rc,Yr,ds,Nu,ke,Ih,Fh,Og,Bg,Ug,Ob,zg,c_;class Fb extends We{constructor(t){super({...t,name:"stampEditor"});k(this,ke);k(this,Qe,null);k(this,Ft,null);k(this,so,null);k(this,zi,null);k(this,ro,null);k(this,Cu,"");k(this,$i,null);k(this,rc,!1);k(this,Yr,null);k(this,ds,!1);k(this,Nu,!1);y(this,zi,t.bitmapUrl),y(this,ro,t.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,s){We.initialize(t,s)}static isHandlingMimeForPasting(t){return x0.includes(t)}static paste(t,s){s.pasteEditor({mode:ie.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var t;return{type:"stamp",hasAltText:!!((t=this.altTextData)!=null&&t.altText)}}static computeTelemetryFinalData(t){const s=t.get("hasAltText");return{hasAltText:s.get(!0)??0,hasNoAltText:s.get(!1)??0}}async mlGuessAltText(t=null,s=!0){if(this.hasAltTextData())return null;const{mlManager:r}=this._uiManager;if(!r)throw new Error("No ML.");if(!await r.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:i,width:a,height:l}=t||this.copyCanvas(null,null,!0).imageData,c=await r.guess({name:"altText",request:{data:i,width:a,height:l,channels:i.length/(a*l)}});if(!c)throw new Error("No response from the AI service.");if(c.error)throw new Error("Error from the AI service.");if(c.cancel)return null;if(!c.output)throw new Error("No valid response from the AI service.");const d=c.output;return await this.setGuessedAltText(d),s&&!this.hasAltTextData()&&(this.altTextData={alt:d,decorative:!1}),d}remove(){var t;o(this,Ft)&&(y(this,Qe,null),this._uiManager.imageManager.deleteId(o(this,Ft)),(t=o(this,$i))==null||t.remove(),y(this,$i,null),o(this,Yr)&&(clearTimeout(o(this,Yr)),y(this,Yr,null))),super.remove()}rebuild(){if(!this.parent){o(this,Ft)&&E(this,ke,Og).call(this);return}super.rebuild(),this.div!==null&&(o(this,Ft)&&o(this,$i)===null&&E(this,ke,Og).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(o(this,so)||o(this,Qe)||o(this,zi)||o(this,ro)||o(this,Ft)||o(this,rc))}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,s;return this._isCopy&&(t=this.x,s=this.y),super.render(),this.div.hidden=!0,this.createAltText(),o(this,rc)||(o(this,Qe)?E(this,ke,Bg).call(this):E(this,ke,Og).call(this)),this._isCopy&&this._moveAfterPaste(t,s),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,s){const{id:r,bitmap:i}=this._uiManager.imageManager.getFromCanvas(t,s);s.remove(),r&&this._uiManager.imageManager.isValidId(r)&&(y(this,Ft,r),i&&y(this,Qe,i),y(this,rc,!1),E(this,ke,Bg).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;o(this,Yr)!==null&&clearTimeout(o(this,Yr)),y(this,Yr,setTimeout(()=>{y(this,Yr,null),E(this,ke,Ob).call(this)},200))}copyCanvas(t,s,r=!1){t||(t=224);const{width:i,height:a}=o(this,Qe),l=new vr;let c=o(this,Qe),d=i,h=a,f=null;if(s){if(i>s||a>s){const _=Math.min(s/i,s/a);d=Math.floor(i*_),h=Math.floor(a*_)}f=document.createElement("canvas");const m=f.width=Math.ceil(d*l.sx),v=f.height=Math.ceil(h*l.sy);o(this,ds)||(c=E(this,ke,Ug).call(this,m,v));const x=f.getContext("2d");x.filter=this._uiManager.hcmFilter;let A="white",b="#cfcfd8";this._uiManager.hcmFilter!=="none"?b="black":OD.isDarkMode&&(A="#8f8f9d",b="#42414d");const g=15,w=g*l.sx,S=g*l.sy,C=new OffscreenCanvas(w*2,S*2),N=C.getContext("2d");N.fillStyle=A,N.fillRect(0,0,w*2,S*2),N.fillStyle=b,N.fillRect(0,0,w,S),N.fillRect(w,S,w,S),x.fillStyle=x.createPattern(C,"repeat"),x.fillRect(0,0,m,v),x.drawImage(c,0,0,c.width,c.height,0,0,m,v)}let p=null;if(r){let m,v;if(l.symmetric&&c.width<t&&c.height<t)m=c.width,v=c.height;else if(c=o(this,Qe),i>t||a>t){const b=Math.min(t/i,t/a);m=Math.floor(i*b),v=Math.floor(a*b),o(this,ds)||(c=E(this,ke,Ug).call(this,m,v))}const A=new OffscreenCanvas(m,v).getContext("2d",{willReadFrequently:!0});A.drawImage(c,0,0,c.width,c.height,0,0,m,v),p={width:m,height:v,data:A.getImageData(0,0,m,v).data}}return{canvas:f,width:d,height:h,imageData:p}}static async deserialize(t,s,r){var A;let i=null,a=!1;if(t instanceof EN){const{data:{rect:b,rotation:g,id:w,structParent:S,popupRef:C,richText:N,contentsObj:_,creationDate:P,modificationDate:L},container:R,parent:{page:{pageNumber:M}},canvas:F}=t;let G,U;F?(delete t.canvas,{id:G,bitmap:U}=r.imageManager.getFromCanvas(R.id,F),F.remove()):(a=!0,t._hasNoCanvas=!0);const ee=((A=await s._structTree.getAriaAttributes(`${Jw}${w}`))==null?void 0:A.get("aria-label"))||"";i=t={annotationType:ie.STAMP,bitmapId:G,bitmap:U,pageIndex:M-1,rect:b.slice(0),rotation:g,annotationElementId:w,id:w,deleted:!1,accessibilityData:{decorative:!1,altText:ee},isSvg:!1,structParent:S,popupRef:C,richText:N,comment:(_==null?void 0:_.str)||null,creationDate:P,modificationDate:L}}const l=await super.deserialize(t,s,r),{rect:c,bitmap:d,bitmapUrl:h,bitmapId:f,isSvg:p,accessibilityData:m}=t;a?(r.addMissingCanvas(t.id,l),y(l,rc,!0)):f&&r.imageManager.isValidId(f)?(y(l,Ft,f),d&&y(l,Qe,d)):y(l,zi,h),y(l,ds,p);const[v,x]=l.pageDimensions;return l.width=(c[2]-c[0])/v,l.height=(c[3]-c[1])/x,m&&(l.altTextData=m),l._initialData=i,t.comment&&l.setCommentData(t),y(l,Nu,!!i),l}serialize(t=!1,s=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const r=Object.assign(super.serialize(t),{bitmapId:o(this,Ft),isSvg:o(this,ds)});if(this.addComment(r),t)return r.bitmapUrl=E(this,ke,zg).call(this,!0),r.accessibilityData=this.serializeAltText(!0),r.isCopy=!0,r;const{decorative:i,altText:a}=this.serializeAltText(!1);if(!i&&a&&(r.accessibilityData={type:"Figure",alt:a}),this.annotationElementId){const c=E(this,ke,c_).call(this,r);return c.isSame?null:(c.isSameAltText?delete r.accessibilityData:r.accessibilityData.structParent=this._initialData.structParent??-1,r.id=this.annotationElementId,delete r.bitmapId,r)}if(s===null)return r;s.stamps||(s.stamps=new Map);const l=o(this,ds)?(r.rect[2]-r.rect[0])*(r.rect[3]-r.rect[1]):null;if(!s.stamps.has(o(this,Ft)))s.stamps.set(o(this,Ft),{area:l,serialized:r}),r.bitmap=E(this,ke,zg).call(this,!1);else if(o(this,ds)){const c=s.stamps.get(o(this,Ft));l>c.area&&(c.area=l,c.serialized.bitmap.close(),c.serialized.bitmap=E(this,ke,zg).call(this,!1))}return r}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}Qe=new WeakMap,Ft=new WeakMap,so=new WeakMap,zi=new WeakMap,ro=new WeakMap,Cu=new WeakMap,$i=new WeakMap,rc=new WeakMap,Yr=new WeakMap,ds=new WeakMap,Nu=new WeakMap,ke=new WeakSet,Ih=function(t,s=!1){if(!t){this.remove();return}y(this,Qe,t.bitmap),s||(y(this,Ft,t.id),y(this,ds,t.isSvg)),t.file&&y(this,Cu,t.file.name),E(this,ke,Bg).call(this)},Fh=function(){if(y(this,so,null),this._uiManager.enableWaiting(!1),!!o(this,$i)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&o(this,Qe)){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&o(this,Qe)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},Og=function(){if(o(this,Ft)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(o(this,Ft)).then(r=>E(this,ke,Ih).call(this,r,!0)).finally(()=>E(this,ke,Fh).call(this));return}if(o(this,zi)){const r=o(this,zi);y(this,zi,null),this._uiManager.enableWaiting(!0),y(this,so,this._uiManager.imageManager.getFromUrl(r).then(i=>E(this,ke,Ih).call(this,i)).finally(()=>E(this,ke,Fh).call(this)));return}if(o(this,ro)){const r=o(this,ro);y(this,ro,null),this._uiManager.enableWaiting(!0),y(this,so,this._uiManager.imageManager.getFromFile(r).then(i=>E(this,ke,Ih).call(this,i)).finally(()=>E(this,ke,Fh).call(this)));return}const t=document.createElement("input");t.type="file",t.accept=x0.join(",");const s=this._uiManager._signal;y(this,so,new Promise(r=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const i=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),E(this,ke,Ih).call(this,i)}r()},{signal:s}),t.addEventListener("cancel",()=>{this.remove(),r()},{signal:s})}).finally(()=>E(this,ke,Fh).call(this))),t.click()},Bg=function(){var d;const{div:t}=this;let{width:s,height:r}=o(this,Qe);const[i,a]=this.pageDimensions,l=.75;if(this.width)s=this.width*i,r=this.height*a;else if(s>l*i||r>l*a){const h=Math.min(l*i/s,l*a/r);s*=h,r*=h}this._uiManager.enableWaiting(!1);const c=y(this,$i,document.createElement("canvas"));c.setAttribute("role","img"),this.addContainer(c),this.width=s/i,this.height=r/a,this.setDims(),(d=this._initialOptions)!=null&&d.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),E(this,ke,Ob).call(this),o(this,Nu)||(this.parent.addUndoableEditor(this),y(this,Nu,!0)),this._reportTelemetry({action:"inserted_image"}),o(this,Cu)&&this.div.setAttribute("aria-description",o(this,Cu)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")},Ug=function(t,s){const{width:r,height:i}=o(this,Qe);let a=r,l=i,c=o(this,Qe);for(;a>2*t||l>2*s;){const d=a,h=l;a>2*t&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2)),l>2*s&&(l=l>=16384?Math.floor(l/2)-1:Math.ceil(l/2));const f=new OffscreenCanvas(a,l);f.getContext("2d").drawImage(c,0,0,d,h,0,0,a,l),c=f.transferToImageBitmap()}return c},Ob=function(){const[t,s]=this.parentDimensions,{width:r,height:i}=this,a=new vr,l=Math.ceil(r*t*a.sx),c=Math.ceil(i*s*a.sy),d=o(this,$i);if(!d||d.width===l&&d.height===c)return;d.width=l,d.height=c;const h=o(this,ds)?o(this,Qe):E(this,ke,Ug).call(this,l,c),f=d.getContext("2d");f.filter=this._uiManager.hcmFilter,f.drawImage(h,0,0,h.width,h.height,0,0,l,c)},zg=function(t){if(t){if(o(this,ds)){const i=this._uiManager.imageManager.getSvgUrl(o(this,Ft));if(i)return i}const s=document.createElement("canvas");return{width:s.width,height:s.height}=o(this,Qe),s.getContext("2d").drawImage(o(this,Qe),0,0),s.toDataURL()}if(o(this,ds)){const[s,r]=this.pageDimensions,i=Math.round(this.width*s*sa.PDF_TO_CSS_UNITS),a=Math.round(this.height*r*sa.PDF_TO_CSS_UNITS),l=new OffscreenCanvas(i,a);return l.getContext("2d").drawImage(o(this,Qe),0,0,o(this,Qe).width,o(this,Qe).height,0,0,i,a),l.transferToImageBitmap()}return structuredClone(o(this,Qe))},c_=function(t){var l;const{pageIndex:s,accessibilityData:{altText:r}}=this._initialData,i=t.pageIndex===s,a=(((l=t.accessibilityData)==null?void 0:l.alt)||"")===r;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&i&&a,isSameAltText:a}},I(Fb,"_type","stamp"),I(Fb,"_editorType",ie.STAMP);var ic,_u,io,ao,Hi,On,oo,ju,Pu,dr,Vi,Ot,Wi,lo,Tu,Z,co,ze,Bb,d_,Cr,Ub,zb,$g;const Js=class Js{constructor({uiManager:e,pageIndex:t,div:s,structTreeLayer:r,accessibilityManager:i,annotationLayer:a,drawLayer:l,textLayer:c,viewport:d,l10n:h}){k(this,ze);k(this,ic);k(this,_u,!1);k(this,io,null);k(this,ao,null);k(this,Hi,null);k(this,On,new Map);k(this,oo,!1);k(this,ju,!1);k(this,Pu,!1);k(this,dr,null);k(this,Vi,null);k(this,Ot,null);k(this,Wi,null);k(this,lo,null);k(this,Tu,-1);k(this,Z);const f=[...o(Js,co).values()];if(!Js._initialized){Js._initialized=!0;for(const p of f)p.initialize(h,e)}e.registerEditorTypes(f),y(this,Z,e),this.pageIndex=t,this.div=s,y(this,ic,i),y(this,io,a),this.viewport=d,y(this,Ot,c),this.drawLayer=l,this._structTree=r,o(this,Z).addLayer(this)}get isEmpty(){return o(this,On).size===0}get isInvisible(){return this.isEmpty&&o(this,Z).getMode()===ie.NONE}updateToolbar(e){o(this,Z).updateToolbar(e)}updateMode(e=o(this,Z).getMode()){switch(E(this,ze,$g).call(this),e){case ie.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case ie.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case ie.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;if(t.toggle("nonEditing",!1),e===ie.POPUP)t.toggle("commentEditing",!0);else{t.toggle("commentEditing",!1);for(const s of o(Js,co).values())t.toggle(`${s._type}Editing`,e===s._editorType)}this.div.hidden=!1}hasTextLayer(e){var t;return e===((t=o(this,Ot))==null?void 0:t.div)}setEditingState(e){o(this,Z).setEditingState(e)}addCommands(e){o(this,Z).addCommands(e)}cleanUndoStack(e){o(this,Z).cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var t;(t=o(this,io))==null||t.div.classList.toggle("disabled",!e)}async enable(){var s;y(this,Pu,!0),this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),(s=o(this,lo))==null||s.abort(),y(this,lo,null);const e=new Set;for(const r of o(this,ze,Bb))r.enableEditing(),r.show(!0),r.annotationElementId&&(o(this,Z).removeChangedExistingAnnotation(r),e.add(r.annotationElementId));const t=o(this,io);if(t)for(const r of t.getEditableAnnotations()){if(r.hide(),o(this,Z).isDeletedAnnotationElement(r.data.id)||e.has(r.data.id))continue;const i=await this.deserialize(r);i&&(this.addOrRebuild(i),i.enableEditing())}y(this,Pu,!1),o(this,Z)._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){var s;if(y(this,ju,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),o(this,Ot)&&!o(this,lo)){y(this,lo,new AbortController);const r=o(this,Z).combinedSignal(o(this,lo));o(this,Ot).div.addEventListener("pointerdown",i=>{const{clientX:l,clientY:c,timeStamp:d}=i,h=o(this,Tu);if(d-h>500){y(this,Tu,d);return}y(this,Tu,-1);const{classList:f}=this.div;f.toggle("getElements",!0);const p=document.elementsFromPoint(l,c);if(f.toggle("getElements",!1),!this.div.contains(p[0]))return;let m;const v=new RegExp(`^${mf}[0-9]+$`);for(const A of p)if(v.test(A.id)){m=A.id;break}if(!m)return;const x=o(this,On).get(m);(x==null?void 0:x.annotationElementId)===null&&(i.stopPropagation(),i.preventDefault(),x.dblclick(i))},{signal:r,capture:!0})}const e=o(this,io);if(e){const r=new Map,i=new Map;for(const l of o(this,ze,Bb)){if(l.disableEditing(),!l.annotationElementId){l.updateFakeAnnotationElement(e);continue}if(l.serialize()!==null){r.set(l.annotationElementId,l);continue}else i.set(l.annotationElementId,l);(s=this.getEditableAnnotation(l.annotationElementId))==null||s.show(),l.remove()}const a=e.getEditableAnnotations();for(const l of a){const{id:c}=l.data;if(o(this,Z).isDeletedAnnotationElement(c)){l.updateEdited({deleted:!0});continue}let d=i.get(c);if(d){d.resetAnnotationElement(l),d.show(!1),l.show();continue}d=r.get(c),d&&(o(this,Z).addChangedExistingAnnotation(d),d.renderAnnotationElement(l)&&d.show(!1)),l.show()}}E(this,ze,$g).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:t}=this.div;for(const r of o(Js,co).values())t.remove(`${r._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),y(this,ju,!1)}getEditableAnnotation(e){var t;return((t=o(this,io))==null?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){o(this,Z).getActive()!==e&&o(this,Z).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,(e=o(this,Ot))!=null&&e.div&&!o(this,Wi)){y(this,Wi,new AbortController);const t=o(this,Z).combinedSignal(o(this,Wi));o(this,Ot).div.addEventListener("pointerdown",E(this,ze,d_).bind(this),{signal:t}),o(this,Ot).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,(e=o(this,Ot))!=null&&e.div&&o(this,Wi)&&(o(this,Wi).abort(),y(this,Wi,null),o(this,Ot).div.classList.remove("highlighting"))}enableClick(){if(o(this,ao))return;y(this,ao,new AbortController);const e=o(this,Z).combinedSignal(o(this,ao));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){var e;(e=o(this,ao))==null||e.abort(),y(this,ao,null)}attach(e){o(this,On).set(e.id,e);const{annotationElementId:t}=e;t&&o(this,Z).isDeletedAnnotationElement(t)&&o(this,Z).removeDeletedAnnotationElement(e)}detach(e){var t;o(this,On).delete(e.id),(t=o(this,ic))==null||t.removePointerInTextLayer(e.contentDiv),!o(this,ju)&&e.annotationElementId&&o(this,Z).addDeletedAnnotationElement(e)}remove(e){this.detach(e),o(this,Z).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(o(this,Z).addDeletedAnnotationElement(e.annotationElementId),We.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(t=e.parent)==null||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),o(this,Z).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!o(this,Pu)),o(this,Z).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var s;if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!o(this,Hi)&&(e._focusEventsAllowed=!1,y(this,Hi,setTimeout(()=>{y(this,Hi,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:o(this,Z)._signal}),t.focus())},0))),e._structTreeParentId=(s=o(this,ic))==null?void 0:s.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),s=()=>{e.remove()};this.addCommands({cmd:t,undo:s,mustExec:!1})}getEditorByUID(e){for(const t of o(this,On).values())if(t.uid===e)return t;return null}getNextId(){return o(this,Z).getId()}combinedSignal(e){return o(this,Z).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return(e=o(this,ze,Cr))==null?void 0:e.canCreateNewEmptyEditor()}async pasteEditor(e,t){this.updateToolbar(e),await o(this,Z).updateMode(e.mode);const{offsetX:s,offsetY:r}=E(this,ze,zb).call(this),i=this.getNextId(),a=E(this,ze,Ub).call(this,{parent:this,id:i,x:s,y:r,uiManager:o(this,Z),isCentered:!0,...t});a&&this.add(a)}async deserialize(e){var t;return await((t=o(Js,co).get(e.annotationType??e.annotationEditorType))==null?void 0:t.deserialize(e,this,o(this,Z)))||null}createAndAddNewEditor(e,t,s={}){const r=this.getNextId(),i=E(this,ze,Ub).call(this,{parent:this,id:r,x:e.offsetX,y:e.offsetY,uiManager:o(this,Z),isCentered:t,...s});return i&&this.add(i),i}get boundingClientRect(){return this.div.getBoundingClientRect()}addNewEditor(e={}){this.createAndAddNewEditor(E(this,ze,zb).call(this),!0,e)}setSelected(e){o(this,Z).setSelected(e)}toggleSelected(e){o(this,Z).toggleSelected(e)}unselect(e){o(this,Z).unselect(e)}pointerup(e){var r;const{isMac:t}=zt.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div||!o(this,oo)||(y(this,oo,!1),(r=o(this,ze,Cr))!=null&&r.isDrawer&&o(this,ze,Cr).supportMultipleDrawings))return;if(!o(this,_u)){y(this,_u,!0);return}const s=o(this,Z).getMode();if(s===ie.STAMP||s===ie.SIGNATURE){o(this,Z).unselectAll();return}this.createAndAddNewEditor(e,!1)}pointerdown(e){var r;if(o(this,Z).getMode()===ie.HIGHLIGHT&&this.enableTextSelection(),o(this,oo)){y(this,oo,!1);return}const{isMac:t}=zt.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;if(y(this,oo,!0),(r=o(this,ze,Cr))!=null&&r.isDrawer){this.startDrawingSession(e);return}const s=o(this,Z).getActive();y(this,_u,!s||s.isEmpty())}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),o(this,dr)){o(this,ze,Cr).startDrawing(this,o(this,Z),!1,e);return}o(this,Z).setCurrentDrawingSession(this),y(this,dr,new AbortController);const t=o(this,Z).combinedSignal(o(this,dr));this.div.addEventListener("blur",({relatedTarget:s})=>{s&&!this.div.contains(s)&&(y(this,Vi,null),this.commitOrRemove())},{signal:t}),o(this,ze,Cr).startDrawing(this,o(this,Z),!1,e)}pause(e){if(e){const{activeElement:t}=document;this.div.contains(t)&&y(this,Vi,t);return}o(this,Vi)&&setTimeout(()=>{var t;(t=o(this,Vi))==null||t.focus(),y(this,Vi,null)},0)}endDrawingSession(e=!1){return o(this,dr)?(o(this,Z).setCurrentDrawingSession(null),o(this,dr).abort(),y(this,dr,null),y(this,Vi,null),o(this,ze,Cr).endDrawing(e)):null}findNewParent(e,t,s){const r=o(this,Z).findParent(t,s);return r===null||r===this?!1:(r.changeParent(e),!0)}commitOrRemove(){return o(this,dr)?(this.endDrawingSession(),!0):!1}onScaleChanging(){o(this,dr)&&o(this,ze,Cr).onScaleChangingWhenDrawing(this)}destroy(){var e,t;this.commitOrRemove(),((e=o(this,Z).getActive())==null?void 0:e.parent)===this&&(o(this,Z).commitOrRemove(),o(this,Z).setActiveEditor(null)),o(this,Hi)&&(clearTimeout(o(this,Hi)),y(this,Hi,null));for(const s of o(this,On).values())(t=o(this,ic))==null||t.removePointerInTextLayer(s.contentDiv),s.setParent(null),s.isAttachedToDOM=!1,s.div.remove();this.div=null,o(this,On).clear(),o(this,Z).removeLayer(this)}render({viewport:e}){this.viewport=e,Co(this.div,e);for(const t of o(this,Z).getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){o(this,Z).commitOrRemove(),E(this,ze,$g).call(this);const t=this.viewport.rotation,s=e.rotation;if(this.viewport=e,Co(this.div,{rotation:s}),t!==s)for(const r of o(this,On).values())r.rotate(s)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return o(this,Z).viewParameters.realScale}};ic=new WeakMap,_u=new WeakMap,io=new WeakMap,ao=new WeakMap,Hi=new WeakMap,On=new WeakMap,oo=new WeakMap,ju=new WeakMap,Pu=new WeakMap,dr=new WeakMap,Vi=new WeakMap,Ot=new WeakMap,Wi=new WeakMap,lo=new WeakMap,Tu=new WeakMap,Z=new WeakMap,co=new WeakMap,ze=new WeakSet,Bb=function(){return o(this,On).size!==0?o(this,On).values():o(this,Z).getEditors(this.pageIndex)},d_=function(e){o(this,Z).unselectAll();const{target:t}=e;if(t===o(this,Ot).div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&o(this,Ot).div.contains(t)){const{isMac:s}=zt.platform;if(e.button!==0||e.ctrlKey&&s)return;o(this,Z).showAllEditors("highlight",!0,!0),o(this,Ot).div.classList.add("free"),this.toggleDrawing(),E0.startHighlighting(this,o(this,Z).direction==="ltr",{target:o(this,Ot).div,x:e.x,y:e.y}),o(this,Ot).div.addEventListener("pointerup",()=>{o(this,Ot).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:o(this,Z)._signal}),e.preventDefault()}},Cr=function(){return o(Js,co).get(o(this,Z).getMode())},Ub=function(e){const t=o(this,ze,Cr);return t?new t.prototype.constructor(e):null},zb=function(){const{x:e,y:t,width:s,height:r}=this.boundingClientRect,i=Math.max(0,e),a=Math.max(0,t),l=Math.min(window.innerWidth,e+s),c=Math.min(window.innerHeight,t+r),d=(i+l)/2-e,h=(a+c)/2-t,[f,p]=this.viewport.rotation%180===0?[d,h]:[h,d];return{offsetX:f,offsetY:p}},$g=function(){for(const e of o(this,On).values())e.isEmpty()&&e.remove()},I(Js,"_initialized",!1),k(Js,co,new Map([bb,Pb,Fb,E0,Ib].map(e=>[e._editorType,e])));let N0=Js;var ur,kn,ac,nm,q0,u_,ni,$b,h_,Hb;const Ct=class Ct{constructor({pageIndex:e}){k(this,ni);k(this,ur,null);k(this,kn,new Map);k(this,ac,new Map);this.pageIndex=e}setParent(e){if(!o(this,ur)){y(this,ur,e);return}if(o(this,ur)!==e){if(o(this,kn).size>0)for(const t of o(this,kn).values())t.remove(),e.append(t);y(this,ur,e)}}static get _svgFactory(){return de(this,"_svgFactory",new kf)}draw(e,t=!1,s=!1){const r=Et(Ct,nm)._++,i=E(this,ni,$b).call(this),a=Ct._svgFactory.createElement("defs");i.append(a);const l=Ct._svgFactory.createElement("path");a.append(l);const c=`path_p${this.pageIndex}_${r}`;l.setAttribute("id",c),l.setAttribute("vector-effect","non-scaling-stroke"),t&&o(this,ac).set(r,l);const d=s?E(this,ni,h_).call(this,a,c):null,h=Ct._svgFactory.createElement("use");return i.append(h),h.setAttribute("href",`#${c}`),this.updateProperties(i,e),o(this,kn).set(r,i),{id:r,clipPathId:`url(#${d})`}}drawOutline(e,t){const s=Et(Ct,nm)._++,r=E(this,ni,$b).call(this),i=Ct._svgFactory.createElement("defs");r.append(i);const a=Ct._svgFactory.createElement("path");i.append(a);const l=`path_p${this.pageIndex}_${s}`;a.setAttribute("id",l),a.setAttribute("vector-effect","non-scaling-stroke");let c;if(t){const f=Ct._svgFactory.createElement("mask");i.append(f),c=`mask_p${this.pageIndex}_${s}`,f.setAttribute("id",c),f.setAttribute("maskUnits","objectBoundingBox");const p=Ct._svgFactory.createElement("rect");f.append(p),p.setAttribute("width","1"),p.setAttribute("height","1"),p.setAttribute("fill","white");const m=Ct._svgFactory.createElement("use");f.append(m),m.setAttribute("href",`#${l}`),m.setAttribute("stroke","none"),m.setAttribute("fill","black"),m.setAttribute("fill-rule","nonzero"),m.classList.add("mask")}const d=Ct._svgFactory.createElement("use");r.append(d),d.setAttribute("href",`#${l}`),c&&d.setAttribute("mask",`url(#${c})`);const h=d.cloneNode();return r.append(h),d.classList.add("mainOutline"),h.classList.add("secondaryOutline"),this.updateProperties(r,e),o(this,kn).set(s,r),s}finalizeDraw(e,t){o(this,ac).delete(e),this.updateProperties(e,t)}updateProperties(e,t){var c;if(!t)return;const{root:s,bbox:r,rootClass:i,path:a}=t,l=typeof e=="number"?o(this,kn).get(e):e;if(l){if(s&&E(this,ni,Hb).call(this,l,s),r&&E(c=Ct,q0,u_).call(c,l,r),i){const{classList:d}=l;for(const[h,f]of Object.entries(i))d.toggle(h,f)}if(a){const h=l.firstChild.firstChild;E(this,ni,Hb).call(this,h,a)}}}updateParent(e,t){if(t===this)return;const s=o(this,kn).get(e);s&&(o(t,ur).append(s),o(this,kn).delete(e),o(t,kn).set(e,s))}remove(e){o(this,ac).delete(e),o(this,ur)!==null&&(o(this,kn).get(e).remove(),o(this,kn).delete(e))}destroy(){y(this,ur,null);for(const e of o(this,kn).values())e.remove();o(this,kn).clear(),o(this,ac).clear()}};ur=new WeakMap,kn=new WeakMap,ac=new WeakMap,nm=new WeakMap,q0=new WeakSet,u_=function(e,[t,s,r,i]){const{style:a}=e;a.top=`${100*s}%`,a.left=`${100*t}%`,a.width=`${100*r}%`,a.height=`${100*i}%`},ni=new WeakSet,$b=function(){const e=Ct._svgFactory.create(1,1,!0);return o(this,ur).append(e),e.setAttribute("aria-hidden",!0),e},h_=function(e,t){const s=Ct._svgFactory.createElement("clipPath");e.append(s);const r=`clip_${t}`;s.setAttribute("id",r),s.setAttribute("clipPathUnits","objectBoundingBox");const i=Ct._svgFactory.createElement("use");return s.append(i),i.setAttribute("href",`#${t}`),i.classList.add("clip"),r},Hb=function(e,t){for(const[s,r]of Object.entries(t))r===null?e.removeAttribute(s):e.setAttribute(s,r)},k(Ct,q0),k(Ct,nm,0);let _0=Ct;globalThis._pdfjsTestingUtils={HighlightOutliner:kb};globalThis.pdfjsLib={AbortException:na,AnnotationEditorLayer:N0,AnnotationEditorParamsType:ye,AnnotationEditorType:ie,AnnotationEditorUIManager:No,AnnotationLayer:c1,AnnotationMode:Jr,AnnotationType:pt,applyOpacity:dC,build:fN,ColorPicker:wf,createValidAbsoluteUrl:Kw,CSSConstants:cC,DOMSVGFactory:kf,DrawLayer:_0,FeatureTest:zt,fetchData:Ju,findContrastColor:uC,getDocument:r1,getFilenameFromUrl:aC,getPdfFilenameFromUrl:oC,getRGB:Zu,getUuid:Qw,getXfaPageViewport:lC,GlobalWorkerOptions:Bs,ImageKind:Xh,InvalidPDFException:y0,isDataScheme:mm,isPdfFile:wy,isValidExplicitDest:VC,MathClamp:fn,noContextMenu:vs,normalizeUnicode:rC,OPS:zu,OutputScale:vr,PasswordResponses:nC,PDFDataRangeTransport:i1,PDFDateString:xf,PDFWorker:$u,PermissionFlag:tC,PixelsPerInch:sa,RenderingCancelledException:by,renderRichText:e1,ResponseException:gf,setLayerDimensions:Co,shadow:de,SignatureExtractor:Zr,stopEvent:st,SupportedImageMimeTypes:x0,TextLayer:bf,TouchManager:vf,updateUrlHash:Yw,Util:K,VerbosityLevel:hm,version:a1,XfaLayer:Zw};const uI=Object.freeze(Object.defineProperty({__proto__:null,AbortException:na,AnnotationEditorLayer:N0,AnnotationEditorParamsType:ye,AnnotationEditorType:ie,AnnotationEditorUIManager:No,AnnotationLayer:c1,AnnotationMode:Jr,AnnotationType:pt,CSSConstants:cC,ColorPicker:wf,DOMSVGFactory:kf,DrawLayer:_0,FeatureTest:zt,GlobalWorkerOptions:Bs,ImageKind:Xh,InvalidPDFException:y0,MathClamp:fn,OPS:zu,OutputScale:vr,PDFDataRangeTransport:i1,PDFDateString:xf,PDFWorker:$u,PasswordResponses:nC,PermissionFlag:tC,PixelsPerInch:sa,RenderingCancelledException:by,ResponseException:gf,SignatureExtractor:Zr,SupportedImageMimeTypes:x0,TextLayer:bf,TouchManager:vf,Util:K,VerbosityLevel:hm,XfaLayer:Zw,applyOpacity:dC,build:fN,createValidAbsoluteUrl:Kw,fetchData:Ju,findContrastColor:uC,getDocument:r1,getFilenameFromUrl:aC,getPdfFilenameFromUrl:oC,getRGB:Zu,getUuid:Qw,getXfaPageViewport:lC,isDataScheme:mm,isPdfFile:wy,isValidExplicitDest:VC,noContextMenu:vs,normalizeUnicode:rC,renderRichText:e1,setLayerDimensions:Co,shadow:de,stopEvent:st,updateUrlHash:Yw,version:a1},Symbol.toStringTag,{value:"Module"}));function f_(n){var e,t,s="";if(typeof n=="string"||typeof n=="number")s+=n;else if(typeof n=="object")if(Array.isArray(n)){var r=n.length;for(e=0;e<r;e++)n[e]&&(t=f_(n[e]))&&(s&&(s+=" "),s+=t)}else for(t in n)n[t]&&(s&&(s+=" "),s+=t);return s}function Sy(){for(var n,e,t=0,s="",r=arguments.length;t<r;t++)(n=arguments[t])&&(e=f_(n))&&(s&&(s+=" "),s+=e);return s}var IA=Object.prototype.hasOwnProperty;function FA(n,e,t){for(t of n.keys())if(rd(t,e))return t}function rd(n,e){var t,s,r;if(n===e)return!0;if(n&&e&&(t=n.constructor)===e.constructor){if(t===Date)return n.getTime()===e.getTime();if(t===RegExp)return n.toString()===e.toString();if(t===Array){if((s=n.length)===e.length)for(;s--&&rd(n[s],e[s]););return s===-1}if(t===Set){if(n.size!==e.size)return!1;for(s of n)if(r=s,r&&typeof r=="object"&&(r=FA(e,r),!r)||!e.has(r))return!1;return!0}if(t===Map){if(n.size!==e.size)return!1;for(s of n)if(r=s[0],r&&typeof r=="object"&&(r=FA(e,r),!r)||!rd(s[1],e.get(r)))return!1;return!0}if(t===ArrayBuffer)n=new Uint8Array(n),e=new Uint8Array(e);else if(t===DataView){if((s=n.byteLength)===e.byteLength)for(;s--&&n.getInt8(s)===e.getInt8(s););return s===-1}if(ArrayBuffer.isView(n)){if((s=n.byteLength)===e.byteLength)for(;s--&&n[s]===e[s];);return s===-1}if(!t||typeof n=="object"){s=0;for(t in n)if(IA.call(n,t)&&++s&&!IA.call(e,t)||!(t in e)||!rd(n[t],e[t]))return!1;return Object.keys(e).length===s}}return n!==n&&e!==e}function vm(n){let e=!1;return{promise:new Promise((s,r)=>{n.then(i=>!e&&s(i)).catch(i=>!e&&r(i))}),cancel(){e=!0}}}const hI=["onCopy","onCut","onPaste"],fI=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],pI=["onFocus","onBlur"],mI=["onInput","onInvalid","onReset","onSubmit"],gI=["onLoad","onError"],yI=["onKeyDown","onKeyPress","onKeyUp"],xI=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],vI=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],bI=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],wI=["onSelect"],kI=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],AI=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],SI=["onScroll"],EI=["onWheel"],CI=["onAnimationStart","onAnimationEnd","onAnimationIteration"],NI=["onTransitionEnd"],_I=["onToggle"],jI=["onChange"],PI=[...hI,...fI,...pI,...mI,...gI,...yI,...xI,...vI,...bI,...wI,...kI,...AI,...SI,...EI,...CI,...NI,...jI,..._I];function p_(n,e){const t={};for(const s of PI){const r=n[s];r&&(e?t[s]=i=>r(i,e(s)):t[s]=r)}return t}var TI="Invariant failed";function Ue(n,e){if(!n)throw new Error(TI)}var RI=function(){},LI=RI;const gn=GA(LI),m_=j.createContext(null),DI="noopener noreferrer nofollow";class MI{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(e){this.pdfDocument=e}setViewer(e){this.pdfViewer=e}setExternalLinkRel(e){this.externalLinkRel=e}setExternalLinkTarget(e){this.externalLinkTarget=e}setHash(){}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return Ue(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(e){Ue(this.pdfViewer),this.pdfViewer.currentPageNumber=e}get rotation(){return 0}set rotation(e){}addLinkAttributes(e,t,s){e.href=t,e.rel=this.externalLinkRel||DI,e.target=s?"_blank":this.externalLinkTarget||""}goToDestination(e){return new Promise(t=>{Ue(this.pdfDocument),Ue(e),typeof e=="string"?this.pdfDocument.getDestination(e).then(t):Array.isArray(e)?t(e):e.then(t)}).then(t=>{Ue(Array.isArray(t));const s=t[0];new Promise(r=>{Ue(this.pdfDocument),s instanceof Object?this.pdfDocument.getPageIndex(s).then(i=>{r(i)}).catch(()=>{Ue(!1)}):typeof s=="number"?r(s):Ue(!1)}).then(r=>{const i=r+1;Ue(this.pdfViewer),Ue(i>=1&&i<=this.pagesCount),this.pdfViewer.scrollPageIntoView({dest:t,pageIndex:r,pageNumber:i})})})}goToPage(e){const t=e-1;Ue(this.pdfViewer),Ue(e>=1&&e<=this.pagesCount),this.pdfViewer.scrollPageIntoView({pageIndex:t,pageNumber:e})}goToXY(){}cachePageRef(){}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}executeNamedAction(){}executeSetOCGState(){}isPageVisible(){return!0}isPageCached(){return!0}navigateTo(e){this.goToDestination(e)}}function id({children:n,type:e}){return u.jsx("div",{className:`react-pdf__message react-pdf__message--${e}`,children:n})}const OA={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};function II(n,e){switch(e.type){case"RESOLVE":return{value:e.value,error:void 0};case"REJECT":return{value:!1,error:e.error};case"RESET":return{value:void 0,error:void 0};default:return n}}function Hu(){return j.useReducer(II,{value:void 0,error:void 0})}const Ey=typeof window<"u",g_=Ey&&window.location.protocol==="file:";function FI(n){return typeof n<"u"}function Io(n){return FI(n)&&n!==null}function OI(n){return typeof n=="string"}function BI(n){return n instanceof ArrayBuffer}function UI(n){return Ue(Ey),n instanceof Blob}function Vb(n){return OI(n)&&/^data:/.test(n)}function BA(n){Ue(Vb(n));const[e="",t=""]=n.split(",");return e.split(";").indexOf("base64")!==-1?atob(t):unescape(t)}function zI(){return Ey&&window.devicePixelRatio||1}const y_="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function UA(){gn(!g_,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${y_}`)}function $I(){gn(!g_,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${y_}`)}function yc(n){n!=null&&n.cancel&&n.cancel()}function Wb(n,e){return Object.defineProperty(n,"width",{get(){return this.getViewport({scale:e}).width},configurable:!0}),Object.defineProperty(n,"height",{get(){return this.getViewport({scale:e}).height},configurable:!0}),Object.defineProperty(n,"originalWidth",{get(){return this.getViewport({scale:1}).width},configurable:!0}),Object.defineProperty(n,"originalHeight",{get(){return this.getViewport({scale:1}).height},configurable:!0}),n}function x_(n){return n.name==="AbortException"||n.name==="RenderingCancelledException"}function HI(n){return new Promise((e,t)=>{const s=new FileReader;s.onload=()=>{if(!s.result)return t(new Error("Error while reading a file."));e(s.result)},s.onerror=r=>{if(!r.target)return t(new Error("Error while reading a file."));const{error:i}=r.target;if(!i)return t(new Error("Error while reading a file."));switch(i.code){case i.NOT_FOUND_ERR:return t(new Error("Error while reading a file: File not found."));case i.SECURITY_ERR:return t(new Error("Error while reading a file: Security error."));case i.ABORT_ERR:return t(new Error("Error while reading a file: Aborted."));default:return t(new Error("Error while reading a file."))}},s.readAsArrayBuffer(n)})}const{PDFDataRangeTransport:VI}=uI,WI=(n,e)=>{switch(e){case OA.NEED_PASSWORD:{const t=prompt("Enter the password to open this PDF file.");n(t);break}case OA.INCORRECT_PASSWORD:{const t=prompt("Invalid password. Please try again.");n(t);break}}};function zA(n){return typeof n=="object"&&n!==null&&("data"in n||"range"in n||"url"in n)}const GI=j.forwardRef(function({children:e,className:t,error:s="Failed to load PDF file.",externalLinkRel:r,externalLinkTarget:i,file:a,inputRef:l,imageResourcesPath:c,loading:d="Loading PDF",noData:h="No PDF file specified.",onItemClick:f,onLoadError:p,onLoadProgress:m,onLoadSuccess:v,onPassword:x=WI,onSourceError:A,onSourceSuccess:b,options:g,renderMode:w,rotate:S,scale:C,...N},_){const[P,L]=Hu(),{value:R,error:M}=P,[F,G]=Hu(),{value:U,error:ee}=F,B=j.useRef(new MI),z=j.useRef([]),D=j.useRef(void 0),$=j.useRef(void 0);a&&a!==D.current&&zA(a)&&(gn(!rd(a,D.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),D.current=a),g&&g!==$.current&&(gn(!rd(g,$.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),$.current=g);const V=j.useRef({scrollPageIntoView:Ne=>{const{dest:Te,pageNumber:Ze,pageIndex:nn=Ze-1}=Ne;if(f){f({dest:Te,pageIndex:nn,pageNumber:Ze});return}const ot=z.current[nn];if(ot){ot.scrollIntoView();return}gn(!1,`An internal link leading to page ${Ze} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});j.useImperativeHandle(_,()=>({linkService:B,pages:z,viewer:V}),[]);function J(){b&&b()}function W(){M&&(gn(!1,M.toString()),A&&A(M))}function te(){L({type:"RESET"})}j.useEffect(te,[a,L]);const re=j.useCallback(async()=>{if(!a)return null;if(typeof a=="string")return Vb(a)?{data:BA(a)}:(UA(),{url:a});if(a instanceof VI)return{range:a};if(BI(a))return{data:a};if(Ey&&UI(a))return{data:await HI(a)};if(Ue(typeof a=="object"),Ue(zA(a)),"url"in a&&typeof a.url=="string"){if(Vb(a.url)){const{url:Ne,...Te}=a;return{data:BA(Ne),...Te}}UA()}return a},[a]);j.useEffect(()=>{const Ne=vm(re());return Ne.promise.then(Te=>{L({type:"RESOLVE",value:Te})}).catch(Te=>{L({type:"REJECT",error:Te})}),()=>{yc(Ne)}},[re,L]),j.useEffect(()=>{if(!(typeof R>"u")){if(R===!1){W();return}J()}},[R]);function pe(){U&&(v&&v(U),z.current=new Array(U.numPages),B.current.setDocument(U))}function Ee(){ee&&(gn(!1,ee.toString()),p&&p(ee))}j.useEffect(function(){G({type:"RESET"})},[G,R]),j.useEffect(function(){if(!R)return;const Te=g?{...R,...g}:R,Ze=r1(Te);m&&(Ze.onProgress=m),x&&(Ze.onPassword=x);const nn=Ze;return nn.promise.then(ot=>{nn.destroyed||G({type:"RESOLVE",value:ot})}).catch(ot=>{nn.destroyed||G({type:"REJECT",error:ot})}),()=>{nn.destroy()}},[g,G,R]),j.useEffect(()=>{if(!(typeof U>"u")){if(U===!1){Ee();return}pe()}},[U]),j.useEffect(function(){B.current.setViewer(V.current),B.current.setExternalLinkRel(r),B.current.setExternalLinkTarget(i)},[r,i]);const fe=j.useCallback((Ne,Te)=>{z.current[Ne]=Te},[]),Gs=j.useCallback(Ne=>{delete z.current[Ne]},[]),qs=j.useMemo(()=>({imageResourcesPath:c,linkService:B.current,onItemClick:f,pdf:U,registerPage:fe,renderMode:w,rotate:S,scale:C,unregisterPage:Gs}),[c,f,U,fe,w,S,C,Gs]),$t=j.useMemo(()=>p_(N,()=>U),[N,U]);function Ae(){function Ne(Ze){return!!(Ze!=null&&Ze.pdf)}if(!Ne(qs))throw new Error("pdf is undefined");const Te=typeof e=="function"?e(qs):e;return u.jsx(m_.Provider,{value:qs,children:Te})}function Xs(){return a?U==null?u.jsx(id,{type:"loading",children:typeof d=="function"?d():d}):U===!1?u.jsx(id,{type:"error",children:typeof s=="function"?s():s}):Ae():u.jsx(id,{type:"no-data",children:typeof h=="function"?h():h})}return u.jsx("div",{className:Sy("react-pdf__Document",t),ref:l,...$t,children:Xs()})});function v_(){return j.useContext(m_)}function b_(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var t=n.filter(Boolean);if(t.length<=1){var s=t[0];return s||null}return function(i){for(var a=0,l=t;a<l.length;a++){var c=l[a];typeof c=="function"?c(i):c&&(c.current=i)}}}const w_=j.createContext(null);function Cy(){return j.useContext(w_)}function qI(){const n=v_(),e=Cy();Ue(e);const t={...n,...e},{filterAnnotations:s,imageResourcesPath:r,linkService:i,onGetAnnotationsError:a,onGetAnnotationsSuccess:l,onRenderAnnotationLayerError:c,onRenderAnnotationLayerSuccess:d,page:h,pdf:f,renderForms:p,rotate:m,scale:v=1}=t;Ue(f),Ue(h),Ue(i);const[x,A]=Hu(),{value:b,error:g}=x,w=j.useRef(null);gn(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function S(){b&&l&&l(b)}function C(){g&&(gn(!1,g.toString()),a&&a(g))}j.useEffect(function(){A({type:"RESET"})},[A,h]),j.useEffect(function(){if(!h)return;const R=vm(h.getAnnotations()),M=R;return R.promise.then(F=>{A({type:"RESOLVE",value:F})}).catch(F=>{A({type:"REJECT",error:F})}),()=>{yc(M)}},[A,h]),j.useEffect(()=>{if(b!==void 0){if(b===!1){C();return}S()}},[b]);function N(){d&&d()}function _(L){gn(!1,`${L}`),c&&c(L)}const P=j.useMemo(()=>h.getViewport({scale:v,rotation:m}),[h,m,v]);return j.useEffect(function(){if(!f||!h||!i||!b)return;const{current:R}=w;if(!R)return;const M=P.clone({dontFlip:!0}),F={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,annotationStorage:f.annotationStorage,commentManager:null,div:R,l10n:null,linkService:i,page:h,structTreeLayer:null,viewport:M},G={annotations:s?s({annotations:b}):b,annotationStorage:f.annotationStorage,div:R,imageResourcesPath:r,linkService:i,page:h,renderForms:p,viewport:M};R.innerHTML="";try{new c1(F).render(G),N()}catch(U){_(U)}return()=>{}},[b,s,r,i,h,f,p,P]),u.jsx("div",{className:Sy("react-pdf__Page__annotations","annotationLayer"),ref:w})}const k_={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},XI=/^H(\d+)$/;function KI(n){return n in k_}function Ny(n){return"children"in n}function A_(n){return Ny(n)?n.children.length===1&&0 in n.children&&"id"in n.children[0]:!1}function YI(n){const e={};if(Ny(n)){const{role:t}=n,s=t.match(XI);if(s)e.role="heading",e["aria-level"]=Number(s[1]);else if(KI(t)){const r=k_[t];r&&(e.role=r)}}return e}function S_(n){const e={};if(Ny(n)){if(n.alt!==void 0&&(e["aria-label"]=n.alt),n.lang!==void 0&&(e.lang=n.lang),A_(n)){const[t]=n.children;if(t){const s=S_(t);return{...e,...s}}}}else"id"in n&&(e["aria-owns"]=n.id);return e}function QI(n){return n?{...YI(n),...S_(n)}:null}function E_({className:n,node:e}){const t=j.useMemo(()=>QI(e),[e]),s=j.useMemo(()=>!Ny(e)||A_(e)?null:e.children.map((r,i)=>u.jsx(E_,{node:r},i)),[e]);return u.jsx("span",{className:n,...t,children:s})}function JI(){const n=Cy();Ue(n);const{onGetStructTreeError:e,onGetStructTreeSuccess:t}=n,[s,r]=Hu(),{value:i,error:a}=s,{customTextRenderer:l,page:c}=n;function d(){i&&t&&t(i)}function h(){a&&(gn(!1,a.toString()),e&&e(a))}return j.useEffect(function(){r({type:"RESET"})},[r,c]),j.useEffect(function(){if(l||!c)return;const p=vm(c.getStructTree()),m=p;return p.promise.then(v=>{r({type:"RESOLVE",value:v})}).catch(v=>{r({type:"REJECT",error:v})}),()=>yc(m)},[l,c,r]),j.useEffect(()=>{if(i!==void 0){if(i===!1){h();return}d()}},[i]),i?u.jsx(E_,{className:"react-pdf__Page__structTree structTree",node:i}):null}const $A=Jr;function ZI(n){const e=Cy();Ue(e);const t={...e,...n},{_className:s,canvasBackground:r,devicePixelRatio:i=zI(),onRenderError:a,onRenderSuccess:l,page:c,renderForms:d,renderTextLayer:h,rotate:f,scale:p}=t,{canvasRef:m}=n;Ue(c);const v=j.useRef(null);function x(){c&&l&&l(Wb(c,p))}function A(S){x_(S)||(gn(!1,S.toString()),a&&a(S))}const b=j.useMemo(()=>c.getViewport({scale:p*i,rotation:f}),[i,c,f,p]),g=j.useMemo(()=>c.getViewport({scale:p,rotation:f}),[c,f,p]);j.useEffect(function(){if(!c)return;c.cleanup();const{current:C}=v;if(!C)return;C.width=b.width,C.height=b.height,C.style.width=`${Math.floor(g.width)}px`,C.style.height=`${Math.floor(g.height)}px`,C.style.visibility="hidden";const N={annotationMode:d?$A.ENABLE_FORMS:$A.ENABLE,canvas:C,canvasContext:C.getContext("2d",{alpha:!1}),viewport:b};r&&(N.background=r);const _=c.render(N),P=_;return _.promise.then(()=>{C.style.visibility="",x()}).catch(A),()=>yc(P)},[r,c,d,b,g]);const w=j.useCallback(()=>{const{current:S}=v;S&&(S.width=0,S.height=0)},[]);return j.useEffect(()=>w,[w]),u.jsx("canvas",{className:`${s}__canvas`,dir:"ltr",ref:b_(m,v),style:{display:"block",userSelect:"none"},children:h?u.jsx(JI,{}):null})}function eF(n){return"str"in n}function tF(){const n=Cy();Ue(n);const{customTextRenderer:e,onGetTextError:t,onGetTextSuccess:s,onRenderTextLayerError:r,onRenderTextLayerSuccess:i,page:a,pageIndex:l,pageNumber:c,rotate:d,scale:h}=n;Ue(a);const[f,p]=Hu(),{value:m,error:v}=f,x=j.useRef(null);gn(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function A(){m&&s&&s(m)}function b(){v&&(gn(!1,v.toString()),t&&t(v))}j.useEffect(function(){p({type:"RESET"})},[a,p]),j.useEffect(function(){if(!a)return;const P=vm(a.getTextContent()),L=P;return P.promise.then(R=>{p({type:"RESOLVE",value:R})}).catch(R=>{p({type:"REJECT",error:R})}),()=>yc(L)},[a,p]),j.useEffect(()=>{if(m!==void 0){if(m===!1){b();return}A()}},[m]);const g=j.useCallback(()=>{i&&i()},[i]),w=j.useCallback(_=>{x_(_)||(gn(!1,_.toString()),r&&r(_))},[r]);function S(){const _=x.current;_&&_.classList.add("selecting")}function C(){const _=x.current;_&&_.classList.remove("selecting")}const N=j.useMemo(()=>a.getViewport({scale:h,rotation:d}),[a,d,h]);return j.useLayoutEffect(function(){if(!a||!m)return;const{current:P}=x;if(!P)return;P.innerHTML="";const L=a.streamTextContent({includeMarkedContent:!0}),R={container:P,textContentSource:L,viewport:N},M=new bf(R),F=M;return M.render().then(()=>{const G=document.createElement("div");G.className="endOfContent",P.append(G);const U=P.querySelectorAll('[role="presentation"]');if(e){let ee=0;m.items.forEach((B,z)=>{if(!eF(B))return;const D=U[ee];if(!D)return;const $=e({pageIndex:l,pageNumber:c,itemIndex:z,...B});D.innerHTML=$,ee+=B.str&&B.hasEOL?2:1})}g()}).catch(w),()=>yc(F)},[e,w,g,a,l,c,m,N]),u.jsx("div",{className:Sy("react-pdf__Page__textContent","textLayer"),onMouseUp:C,onMouseDown:S,ref:x})}const HA=1;function nF(n){const t={...v_(),...n},{_className:s="react-pdf__Page",_enableRegisterUnregisterPage:r=!0,canvasBackground:i,canvasRef:a,children:l,className:c,customRenderer:d,customTextRenderer:h,devicePixelRatio:f,error:p="Failed to load the page.",filterAnnotations:m,height:v,inputRef:x,loading:A="Loading page",noData:b="No page specified.",onGetAnnotationsError:g,onGetAnnotationsSuccess:w,onGetStructTreeError:S,onGetStructTreeSuccess:C,onGetTextError:N,onGetTextSuccess:_,onLoadError:P,onLoadSuccess:L,onRenderAnnotationLayerError:R,onRenderAnnotationLayerSuccess:M,onRenderError:F,onRenderSuccess:G,onRenderTextLayerError:U,onRenderTextLayerSuccess:ee,pageIndex:B,pageNumber:z,pdf:D,registerPage:$,renderAnnotationLayer:V=!0,renderForms:J=!1,renderMode:W="canvas",renderTextLayer:te=!0,rotate:re,scale:pe=HA,unregisterPage:Ee,width:fe,...Gs}=t,[qs,$t]=Hu(),{value:Ae,error:Xs}=qs,Ne=j.useRef(null);Ue(D);const Te=Io(z)?z-1:B??null,Ze=z??(Io(B)?B+1:null),nn=re??(Ae?Ae.rotate:null),ot=j.useMemo(()=>{if(!Ae)return null;let oa=1;const kc=pe??HA;if(fe||v){const la=Ae.getViewport({scale:1,rotation:nn});fe?oa=fe/la.width:v&&(oa=v/la.height)}return kc*oa},[v,Ae,nn,pe,fe]);j.useEffect(function(){return()=>{Io(Te)&&r&&Ee&&Ee(Te)}},[r,D,Te,Ee]);function _y(){if(L){if(!Ae||!ot)return;L(Wb(Ae,ot))}if(r&&$){if(!Io(Te)||!Ne.current)return;$(Te,Ne.current)}}function jy(){Xs&&(gn(!1,Xs.toString()),P&&P(Xs))}j.useEffect(function(){$t({type:"RESET"})},[$t,D,Te]),j.useEffect(function(){if(!D||!Ze)return;const kc=vm(D.getPage(Ze)),la=kc;return kc.promise.then(Py=>{$t({type:"RESOLVE",value:Py})}).catch(Py=>{$t({type:"REJECT",error:Py})}),()=>yc(la)},[$t,D,Ze]),j.useEffect(()=>{if(Ae!==void 0){if(Ae===!1){jy();return}_y()}},[Ae,ot]);const se=j.useMemo(()=>Io(Te)&&Ze&&Io(nn)&&Io(ot)?{_className:s,canvasBackground:i,customTextRenderer:h,devicePixelRatio:f,filterAnnotations:m,onGetAnnotationsError:g,onGetAnnotationsSuccess:w,onGetStructTreeError:S,onGetStructTreeSuccess:C,onGetTextError:N,onGetTextSuccess:_,onRenderAnnotationLayerError:R,onRenderAnnotationLayerSuccess:M,onRenderError:F,onRenderSuccess:G,onRenderTextLayerError:U,onRenderTextLayerSuccess:ee,page:Ae,pageIndex:Te,pageNumber:Ze,renderForms:J,renderTextLayer:te,rotate:nn,scale:ot}:null,[s,i,h,f,m,g,w,S,C,N,_,R,M,F,G,U,ee,Ae,Te,Ze,J,te,nn,ot]),St=j.useMemo(()=>p_(Gs,()=>Ae&&(ot?Wb(Ae,ot):void 0)),[Gs,Ae,ot]),Mo=`${Te}@${ot}/${nn}`;function C_(){switch(W){case"custom":return Ue(d),u.jsx(d,{},`${Mo}_custom`);case"none":return null;case"canvas":default:return u.jsx(ZI,{canvasRef:a},`${Mo}_canvas`)}}function N_(){return te?u.jsx(tF,{},`${Mo}_text`):null}function __(){return V?u.jsx(qI,{},`${Mo}_annotations`):null}function j_(){function oa(la){return!!(la!=null&&la.page)}if(!oa(se))throw new Error("page is undefined");const kc=typeof l=="function"?l(se):l;return u.jsxs(w_.Provider,{value:se,children:[C_(),N_(),__(),kc]})}function P_(){return Ze?D===null||Ae===void 0||Ae===null?u.jsx(id,{type:"loading",children:typeof A=="function"?A():A}):D===!1||Ae===!1?u.jsx(id,{type:"error",children:typeof p=="function"?p():p}):j_():u.jsx(id,{type:"no-data",children:typeof b=="function"?b():b})}return u.jsx("div",{className:Sy(s,c),"data-page-number":Ze,ref:b_(x,Ne),style:{"--scale-round-x":"1px","--scale-round-y":"1px","--scale-factor":"1","--user-unit":`${ot}`,"--total-scale-factor":"calc(var(--scale-factor) * var(--user-unit))",backgroundColor:i||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"},...St,children:P_()})}$I();Bs.workerSrc="pdf.worker.mjs";Bs.workerSrc=`https://unpkg.com/pdfjs-dist@${a1}/build/pdf.worker.min.mjs`;function sF(){const[n]=pR(),e=ks(),t=n.get("file"),[s,r]=j.useState(null),[i,a]=j.useState(!0),[l,c]=j.useState(""),[d,h]=j.useState(null),f=j.useRef(null),[p,m]=j.useState(null);j.useEffect(()=>{t&&x()},[t]),j.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow=""}),[]),j.useEffect(()=>{const g=()=>{f.current&&m(f.current.clientWidth-32)};return window.addEventListener("resize",g),g(),setTimeout(g,100),()=>window.removeEventListener("resize",g)},[]);const v=(g,w)=>{const S=atob(g),C=S.length,N=new Uint8Array(C);for(let _=0;_<C;_++)N[_]=S.charCodeAt(_);return new Blob([N],{type:w})},x=async()=>{try{const g=await Is.readFile({path:t,directory:Ao.Documents}),w=v(g.data,"application/pdf");r(w),a(!1)}catch(g){console.error("Failed to load PDF:",g),c("Could not load PDF: "+g.message),a(!1)}},A=({numPages:g})=>{h(g)},b=async()=>{try{const g=await Is.getUri({path:t,directory:Ao.Documents});await ED.share({title:t,text:"Sharing my resume",url:g.uri,dialogTitle:"Share Resume"})}catch(g){console.error("Share failed:",g),g.message!=="Share canceled"&&alert("Could not share file: "+g.message)}};return i?u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-gray-50 dark:bg-black",children:u.jsx("div",{className:"w-8 h-8 border-2 border-gray-900 dark:border-white border-t-transparent rounded-full animate-spin"})}):l?u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-gray-50 dark:bg-black p-4",children:u.jsxs("div",{className:"text-center",children:[u.jsx("p",{className:"text-red-600 dark:text-red-400 mb-4",children:l}),u.jsx("button",{onClick:()=>e("/downloads"),className:"px-4 py-2 bg-blue-600 text-white rounded-lg",children:"Back to Downloads"})]})}):u.jsxs("div",{className:"fixed inset-0 z-50 bg-gray-50 dark:bg-black flex flex-col",children:[u.jsxs("div",{className:"bg-white dark:bg-[#18181B] border-b border-gray-200 dark:border-gray-800 p-4 pt-12 md:pt-4 flex items-center justify-between shadow-sm flex-shrink-0",children:[u.jsx("button",{onClick:()=>e("/downloads"),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg",children:u.jsx("svg",{className:"w-6 h-6 text-gray-900 dark:text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),u.jsx("h1",{className:"text-sm font-medium text-gray-900 dark:text-white truncate flex-1 mx-4 text-center",children:t}),u.jsxs("button",{onClick:b,className:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg flex items-center gap-2 transition-colors text-sm font-medium",children:[u.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"})}),"Share"]})]}),u.jsx("div",{className:"flex-1 overflow-y-auto bg-gray-100 dark:bg-zinc-900 p-4",ref:f,children:u.jsx("div",{className:"flex justify-center min-h-full pb-0",children:u.jsx(GI,{file:s,onLoadSuccess:A,loading:u.jsx("div",{className:"flex items-center justify-center p-10",children:u.jsx("div",{className:"w-8 h-8 border-2 border-gray-400 border-t-transparent rounded-full animate-spin"})}),error:u.jsx("div",{className:"text-red-500 text-center p-10",children:"Failed to load PDF."}),className:"shadow-lg",children:Array.from(new Array(d),(g,w)=>u.jsx(nF,{pageNumber:w+1,width:p?Math.min(p,800):350,className:"mb-4 bg-white last:mb-0",renderTextLayer:!1,renderAnnotationLayer:!1},`page_${w+1}`))})})})]})}function da({children:n}){const{user:e,loading:t}=yy();return t?u.jsx("div",{className:"min-h-screen flex items-center justify-center",children:u.jsx("div",{className:"w-8 h-8 border-2 border-black dark:border-white border-t-transparent rounded-full animate-spin"})}):e?n:u.jsx(m2,{to:"/login",replace:!0})}function rF(){const{user:n,loading:e}=yy();return e?u.jsx("div",{className:"min-h-screen flex items-center justify-center bg-white dark:bg-black",children:u.jsx("div",{className:"w-8 h-8 border-2 border-black dark:border-white border-t-transparent rounded-full animate-spin"})}):u.jsxs(nR,{children:[u.jsx(Ys,{path:"/login",element:n?u.jsx(m2,{to:"/",replace:!0}):u.jsx(eA,{children:u.jsx(fD,{})})}),u.jsxs(Ys,{path:"/",element:u.jsx(eA,{}),children:[u.jsx(Ys,{index:!0,element:u.jsx(da,{children:u.jsx(cD,{})})}),u.jsx(Ys,{path:"templates",element:u.jsx(da,{children:u.jsx(mD,{})})}),u.jsx(Ys,{path:"job-match",element:u.jsx(da,{children:u.jsx(xD,{})})}),u.jsx(Ys,{path:"editor",element:u.jsx(da,{children:u.jsx(iA,{})})}),u.jsx(Ys,{path:"editor/:id",element:u.jsx(da,{children:u.jsx(iA,{})})}),u.jsx(Ys,{path:"admin",element:u.jsx(da,{children:u.jsx(vD,{})})}),u.jsx(Ys,{path:"downloads",element:u.jsx(da,{children:u.jsx(SD,{})})}),u.jsx(Ys,{path:"pdf-viewer",element:u.jsx(da,{children:u.jsx(sF,{})})})]})]})}function iF(){return u.jsx(dR,{children:u.jsx(nD,{children:u.jsx(rF,{})})})}vx.createRoot(document.getElementById("root")).render(u.jsx(sS.StrictMode,{children:u.jsx(iF,{})}));"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(n=>{const e=()=>{navigator.serviceWorker.controller&&n.update()};n.update(),document.addEventListener("visibilitychange",()=>{document.hidden||e()}),n.addEventListener("updatefound",()=>{const t=n.installing;t.addEventListener("statechange",()=>{t.state==="installed"&&navigator.serviceWorker.controller&&(console.log("New version available! Reloading..."),window.location.reload())})})})});export{nA as E,z2 as W,ZL as b};
